"use strict";(self["webpackChunkquant_ux"]=self["webpackChunkquant_ux"]||[]).push([[275],{71021:function(e,t,n){n.d(t,{Z:function(){return v}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"VommondCheckBoxWrapper"},[e._m(0),e.label?n("span",{staticClass:"VommondCheckBoxLabel"},[e._v(e._s(e.label))]):e._e()])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"VommondCheckBox"},[n("span",{staticClass:"VommondCheckBoxHook",attrs:{"data-dojo-attach-point":"hook"}})])}],a=n(52666),s=n(28379),o=n(75790),u=n(59344),l=n(48039),c=n(54524),h={name:"CheckBox",mixins:[a.Z],data:function(){return{checked:!1}},props:["label","value"],components:{},methods:{postCreate:function(){this.log=new c.Z("CheckBox"),this.own((0,l.Z)(this.domNode,o.Z.press,u.Z.hitch(this,"onChange"))),(this.value||"true"===this.value)&&this.setValue(!0)},getValue:function(){return this.checked},setValue:function(e){this.checked=e,e?s.Z.add(this.domNode,"VommondCheckBoxChecked"):s.Z.remove(this.domNode,"VommondCheckBoxChecked")},setLabel:function(e){this.label=e},onChange:function(e){this.stopEvent(e),this.setValue(!this.checked),this.emit("change",this.checked),this.emit("input",this.checked)}},watch:{value:function(e){this.setValue(e)}},mounted:function(){this.log.log(10,"mounted","enter")}},d=h,f=n(1001),m=(0,f.Z)(d,i,r,!1,null,null,null),v=m.exports},72712:function(e,t,n){n.d(t,{Z:function(){return D}});var i,r,a=n(9726),s=(n(2707),n(47941),n(68309),n(74916),n(23123),n(92222),n(41539),n(39714),n(52666)),o=n(59344),u=n(28379),l=n(48039),c=n(16328),h=n(17386),d=n(77528),f=n(40475),m=n(42323),v=n(821),g=n(23521),p=n(42598),y=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},k=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"VommondSlideLeftButton"},[n("div",{staticClass:"VommondSlideLeftButtonLabel",attrs:{type:"button","data-dojo-attach-point":"button"}},[n("span",{staticClass:"MatcPointer mdi mdi-dots-horizontal",attrs:{"data-dojo-attach-point":"label"}})]),n("div",{staticClass:"VommondSlideLeftPopup",attrs:{"data-dojo-attach-point":"popup"}},[n("div",{staticClass:"VommondSlideLeftPopupCntr",attrs:{"data-dojo-attach-point":"cntr"}})])])}],w=n(75790),C={name:"SlideLeftButton",mixins:[s.Z],data:function(){return{value:!1,hasObjects:!1,updateLabel:!0,maxLabelLength:-1,openCSS:"VommondSlideLeftPopupOpen",labelCSS:"VommondSlideLeftPopupOpenLabel",isOpen:!1}},components:{},methods:{postCreate:function(){this._lis={},this.own((0,l.Z)(this.button,w.Z.press,o.Z.hitch(this,"toggleDropDown")))},toggleDropDown:function(e){this.stopEvent(e),this.isOpen?u.Z.remove(this.domNode,this.openCSS):u.Z.add(this.domNode,this.openCSS),this.isOpen=!this.isOpen},setOptions:function(e){this._lis={};for(var t=null,n=0;n<e.length;n++){var i=e[n],r=document.createElement("a");if(u.Z.add(r,"VommondSlideLeftPopupOpenItem"),(i.label||i.icon)&&null!=i.value){if(this.hasObjects=!0,i.icon){var a=document.createElement("span");u.Z.add(a,i.icon),r.appendChild(a)}if(i.label){var s=document.createElement("a");u.Z.add(s,this.labelCSS),s.innerHTML=i.label,r.appendChild(s)}i.selected&&(t=i.value),i.href?r.href=i.href:i.callback?this.own((0,l.Z)(r,w.Z.press,i.callback)):this.own((0,l.Z)(r,w.Z.press,o.Z.hitch(this,"onChange",i.value))),this._lis[i.value]=r}else r.innerHTML=i,this._lis[i]=r,this.own((0,l.Z)(r,w.Z.press,o.Z.hitch(this,"onChange",e[n])));this.cntr.appendChild(r)}this._options=e,t&&this.setValue(t)},onChange:function(e,t){this.stopEvent(t),this.emit("change",e,t)}},mounted:function(){}},S=C,Z=n(1001),b=(0,Z.Z)(S,y,k,!1,null,null,null),x=b.exports,M={},B={},T={name:"Util",mixins:[d.Z,s.Z],data:function(){return{eventLabels:{WidgetClick:"Click",ScreenLoaded:"View",ScreenClick:"Click",WidgetChange:"Change",ScreenScroll:"Scroll",OverlayLoaded:"View Overlay",OverlayRemoved:"Removed Overlay",ValidationError:"Widget ValiationError",ValidationErrorLine:"Form Validation Error",ValidationOK:"Validation OK",ScreenGesture:"Gesture",WidgetGesture:"Gesture"},gestureLabels:{swipeLeft:"Swipe Left",swipeRight:"Swipe Right",swipeUp:"Swipe Up",swipeDown:"Swipe Down"}}},components:{},methods:{getIcons:function(){return this._matcIcons},fixGestures:function(e){e.sort((function(e,t){return e.time-t.time}));for(var t=null,n=0,i=0;i<e.length;i++){var r=e[i];"SessionStart"==r.type&&(t=r.device),"ScreenGesture"==r.type&&r.gesture&&(r.gesture.start&&r.gesture.start.x>1&&t&&(r.gesture.start.x=Math.min(.99,r.gesture.start.x/t.w),r.gesture.start.y=Math.min(.99,r.gesture.start.y/t.h),n++),r.gesture.end&&r.gesture.end.x>1&&t&&(r.gesture.end.x=Math.min(.99,r.gesture.end.x/t.w),r.gesture.end.y=Math.min(.99,r.gesture.end.y/t.h),n++),r.gesture.start&&(r.x=r.gesture.start.x,r.y=r.gesture.start.y)),(r.x>1||r.y>1)&&console.warn("fixGestures() > exit. No device, could not fix! ")}n&&console.debug("fixGestures() > exit. Fixed Errors: ",n)},_distributedPositions:function(e,t,n){return p.qd(this.model,e,t,n)},getClones:function(e,t){var n=[],i=[],r=this.getBoundingBox(e),a=1;r.x>t.x&&(a=-1);var s=1;r.y>t.y&&(s=-1);for(var o=Math.floor(t.w/r.w),u=Math.floor(t.h/r.h),l=Math.round((t.w-o*r.w)/Math.max(1,o-1)),c=Math.round((t.h-u*r.h)/Math.max(1,u-1)),h={},d=0;d<e.length;d++){var f=e[d],m=this.getBoxById(f);h[f]={x:m.x-r.x,y:m.y-r.y,box:m}}for(var v=0,g=0;g<o;g++)for(var p=0;p<u;p++)if(0!=g||0!=p){for(var y=void 0,k=0;k<e.length;k++){y=e[k];var w=h[y],C={w:r.w,h:r.h,x:r.x+(g*(r.w+l)+w.x)*a,y:r.y+(p*(r.h+c)+w.y)*s,z:w.box.z,group:v,cloneOff:y};n.push(C)}var S={w:r.w,h:r.h,x:r.x+g*(r.w+l)*a,y:r.y+p*(r.h+c)*s,z:0,cloneOff:y};i.push(S),v++}return{previews:i,clones:n}},_getGroupChildResizePosition:function(e,t,n,i){return m.Z.getGroupChildResizePosition(e,t,n,i)},getObjectFromArray:function(e,t){return console.error("Util.vue .getObjectFromArray() > DEPRECATED!"),v.Z.getObjectFromArray(e,t)},getWidgetsByDistanceAndType:function(e,t){var n=[];if(this.model){for(var i=this.getParentScreen(e),r=i.children,a=0;a<r.length;a++){var s=r[a];if(s!=e.id){var o=this.model.widgets[s],u=o.type;t.indexOf(u)>=0&&n.push({d:0,y:o.y,w:o})}}n.sort((function(e,t){return e.y-t.y}))}return n},getObjectLength:function(e){return e?Object.keys(e).length:0},getEventStateLabel:function(e){return"hidden"==e.type?e.options.hidden?"Hide Password":"Show Password":"text"==e.type||"typing"==e.type?"Change Text":"checked"==e.type?e.value?"Checked":"Unchecked":"open"==e.type?"Open":"select"==e.type?"Select":"pos"==e.type?"Move":"open"==e.type?"Open Popup":"navigate"==e.type?"Popup Click":"Change"},getGestureLabel:function(e){return this.gestureLabels[e]?this.gestureLabels[e]:e},getEventLabel:function(e){return this.eventLabels[e]?this.eventLabels[e]:e},getScreenName:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.model.screens[e]&&this.model.screens[e].name){var n=this.model.screens[e].name;return t&&n.length>16&&(n=n.substring(0,16)+"..."),n}return e},getWidgetName:function(e){return this.model.widgets[e]&&this.model.widgets[e].name?this.model.widgets[e].name:e},filterEvents:function(e,t){for(var n={},i=0;i<t.length;i++){var r=t[i];r.isValid||(n[r.reference]=!0)}for(var a=[],s=e.length,o=0;o<s;o++){var u=e[o];n[u.session]||a.push(u)}return a},getActionEvents:function(e){g.Z.start("Util.getActionEvents()");var t=e.select("type","in",["ScreenClick","WidgetClick","WidgetChange","ValidationError","ValidationErrorLine","ScreenLoaded","OverlayLoaded","OverlayRemoved","ScreenGesture","WidgetGesture"]);return g.Z.end("Util.getActionEvents()"),t},getClickEvents:function(e){return e.select("type","in",["ScreenClick","WidgetClick","WidgetChange"])},createEmptyImage:function(e,t,n){return{type:"Image",name:n,x:e,y:t,w:100,h:100,z:0,props:{},has:{onclick:!0,backgroundImage:!0,border:!0},actions:{},style:{borderTopRightRadius:0,borderTopLeftRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopWidth:0,borderBottomWidth:0,borderRightWidth:0,borderLeftWidth:0,borderTopColor:"#333333",borderBottomColor:"#333333",borderRightColor:"#333333",borderLeftColor:"#333333",backgroundImage:null}}},createEmptyScreen:function(e,t,n){return{x:e,y:t,h:this.model.screenSize.h,w:this.model.screenSize.w,name:n,type:"Screen",style:{background:"#ffffff"},min:{w:this.model.screenSize.w,h:this.model.screenSize.h},has:{image:!0},props:{start:!1},children:[]}},getAppTypeIcon:function(e){return"smartphone"==e.type?"mdi mdi-crop-portrait":(e.type,"mdi mdi-crop-landscape")},getDomain:function(){var e=window.location.hostname;return"127.0.0.1"==e||"flowalytics.com"==e?"flowalytics.com":"quant-ux.com"},ring:function(e,t,n,i,r,a){r||(r=200),a||(a=this.RING_BACKGROUND);var s=this.$new(M);return s.width=10,s.size=r,s.color=this.RING_FOREGROUND,s.backgroundColor=a,s.setLabel(e),s.setValue(t),s.setPs(n),s.placeAt(i),s},getDB:function(){return this.domBuilder||(this.domBuilder=new h.Z),this.domBuilder},progress:function(e,t,n,i){var r=document.getElementById(i),a=document.createElement("div");u.Z.add(a,"row"),r.appendChild(a);var s=document.createElement("div");u.Z.add(s,"col-md-4"),a.appendChild(s);var o=document.createElement("span");o.innerHTML=e,s.appendChild(o),s=document.createElement("div"),u.Z.add(s,"col-md-8"),a.appendChild(s);var l=this.$new(B);return l.color=this.PROGRESS_COLOR,l.placeAt(s),l.setValue(n),l},bulletGraph:function(e,t,n){for(var i=this.getDB(),r=0;r<t.length;r++){var a=t[r],s=i.div().build(e);i.div("MatcDashCompareTableLabelSmall",a.label).build(s);var o=i.div("").build(s);u.Z.add(o,"MatcDashCompareTableGraph");var l=this.$new(B);l.color=this.PROGRESS_COLOR,l.placeAt(o),l.setValue(a.p),a.empty?n&&l.setLabel(n):l.setLabel(a.a)}},bulletGraphTable:function(e,t,n){for(var i=this.getDB(),r=i.table(" MatcDashCompareTable").tbody().build(e),a=0;a<t.length;a++){var s=t[a],o=i.tr().build(r);i.td("MatcDashCompareTableLabel",s.label).build(o);var l=i.td("").build(o);if(s.empty)n&&i.span("MatcHint MatcLeft",n).build(l);else{u.Z.add(l,"MatcDashCompareTableGraph");var c=this.$new(B);c.color=!0,c.placeAt(l),c.setValue(s.p),c.setLabel(s.a)}}},createUserImage:function(e,t){var n=document.createElement("div");if(u.Z.add(n,"MatcUserImageCntr"),t.appendChild(n),e&&"guest"!=e.role)if(e.image){u.Z.add(n,"MatcUserImageCntrTrans");var i=document.createElement("img");i.src="/rest/user/"+e.id+"/images/"+e.name+"_"+e.lastname+"/"+e.image,u.Z.add(i,"MatcUserImage"),n.appendChild(i)}else{var r=document.createElement("div");u.Z.add(r,"MatcUserImageNone");var a=document.createElement("span");r.appendChild(a),u.Z.add(a,"MatcMiddle MatcUserLetters"),a.innerHTML=this.getUserLetter(e),n.appendChild(r)}else{var s=document.createElement("div");u.Z.add(s,"MatcCommentGuest"),s.innerHTML='<span class="mdi mdi-account"></span>',n.appendChild(s)}return n},getCommentUserName:function(e){return e.user&&e.user.name||e.user.lastname?this.getUserName(e.user):"Guest"},getUserLetter:function(e){var t="";if(e.name)t+=e.name.substring(0,1).toUpperCase(),e.lastname&&(t+=e.lastname.substring(0,1).toUpperCase());else{var n=e.email.split(".");n.length>0&&(t+=n[0].substring(0,1).toUpperCase()),n.length>1&&(t+=n[1].substring(0,1).toUpperCase())}return t},getUserName:function(e){var t="";return e.name&&(t=e.name+" "),e.lastname&&(t+=e.lastname),0==t.length&&(t=e.email),t},resizeSimulatorContainer:function(e,t,n){var i;return u.Z.add(t,"MatchSimulatorContainer"),"desktop"==e.type?(i=c.Z.getBox(),i.w=i.w*n,i.h=i.h*n,i=this.getScaledSize(i,"width",e),t.style.width=Math.round(i.w)+"px",t.style.height=Math.round(i.h)+"px"):(i={w:150,h:400},i=c.Z.getBox(),i.w=i.w*n,i.h=i.h*n,i=this.getScaledSize(i,"height",e),t.style.width=Math.ceil(i.w)+"px",t.style.height=Math.ceil(i.h)+"px"),i},renderCommentPopup:function(e,t,n,i,r){u.Z.add(n,"MatcActionBox");var a=i.div("MatcMarginBottom").build(n),s=i.div("MatcCommentRow").build(a),c=this.createUserImage(e.user,s);u.Z.add(c,"MatcUserImageCntrSmall MatcCommentPic");var h=i.div("MatcCommentText").build(s),d=i.div("MatcCommentMeta").build(h);if(i.div("MatcCommentMeta",this.getCommentUserName(e)).build(d),i.div("MatcCommentTime",this.formatDate(e.created)).build(d),e.userID==t.id){var f=i.textarea("form-control MatcIgnoreOnKeyPress",e.message).build(n);f.setAttribute("data-gramm_editor",!1),e.id?u.Z.add(f,"vommondInlineEdit"):f.focus();var m=i.div("MatcButtonBar MatcMarginTopL").build(n);if(e.id){var v=i.a("MatcButton MatcButtonPrimary","Update").build(m);this.tempOwn((0,l.Z)(v,"mousedown",o.Z.hitch(this,"onSaveComment",f,e)));var g=i.a("MatcLinkButton","Close").build(m);this.tempOwn((0,l.Z)(g,"mousedown",o.Z.hitch(this,"onCloseCommentPopup",e)));var p=this.$new(x);p.placeAt(n),p.setOptions([{value:"edit",icon:"mdi mdi-comment-edit-outline",callback:function(e){e.preventDefault(),e.stopPropagation(),f.focus(),f.select()}},{value:"delete",icon:"mdi mdi-trash-can-outline",callback:o.Z.hitch(this,"onDeleteComment",e)}])}else{var y=i.a("MatcButton MatcButtonPrimary","Create").build(m);this.tempOwn((0,l.Z)(y,"mousedown",o.Z.hitch(this,"onSaveComment",f,e)));var k=i.a("MatcLinkButton","Close").build(m);this.tempOwn((0,l.Z)(k,"mousedown",o.Z.hitch(this,"onCloseCommentPopup",e)))}}else{if(r){var w=this.$new(x);w.placeAt(n),w.setOptions([{value:"delete",icon:"mdi mdi-trash-can-outline",callback:o.Z.hitch(this,"onDeleteComment",e)}])}i.div("MatcCommentMessage",e.message).build(n);var C=i.div("MatcButtonBar MatcMarginTopL").build(n),S=i.a("MatcLinkButton","Close").build(C);this.tempOwn((0,l.Z)(S,"mousedown",o.Z.hitch(this,"onCloseCommentPopup",e)))}},getWidgets:function(e,t){var n=[];if(e){var i=this.model.screens[e];if(i)for(var r=i.children,a=0;a<r.length;a++){var s=r[a],o=this.model.widgets[s];o&&n.push(o)}}else for(var u in this.model.widgets){var l=this.model.widgets[u];n.push(l)}if(n.sort((function(e,t){return e.y-t.y})),t){for(var c=[],h=0;h<n.length;h++)t(n[h])&&c.push(n[h]);n=c}return n},getScreens:function(e){e||(e=this.model);var t=[];for(var n in e.screens){var i=e.screens[n];t.push(i)}return t.sort((function(e,t){return e.x-t.x})),t},getClickableWidgets:function(e){for(var t=[],n=e.children,i=0;i<n.length;i++){var r=n[i],a=this.model.widgets[r];this.isClickable(a)&&t.push(a)}return t.sort((function(e,t){return e.y-t.y})),t},getModelChildren:function(e){var t=[];for(var n in this.model.widgets){var i=e.children.indexOf(n);i>=0&&t.push(this.model.widgets[n])}return t},getWidgetsWithoutParent:function(){var e=[],t=[];for(var n in this.model.screens){var i=this.model.screens[n];t=t.concat(i.children)}for(var r in this.model.widgets){var a=t.indexOf(r);a<0&&e.push(this.model.widgets[r])}return this.getOrderedWidgets(e)},getBoxById:function(e){if(this.model.widgets[e])return this.model.widgets[e];if(this.model.screens[e])return this.model.screens[e];if(this.model.templates&&this.model.templates[e])return this.model.templates[e];if(!e||!e.split)return console.debug("getBoxById() > ID is wrong: "+e),null;var t=e.split("@");if(2==t.length){var n=t[0],i=t[1],r=this.model.screens[i],a=this.model.widgets[n];if(r&&a){var s=this.getHoverScreen(a),u=s.x-r.x,l=s.y-r.y,c=o.Z.clone(a);return c.id=e,c.inherited=a.id,c.inheritedOrder=1,c.x-=u,c.y-=l,c}console.warn("getBoxById() > No screen or widget for inherited id ",e)}return null},getToLines:function(e){var t=[];for(var n in this.model.lines){var i=this.model.lines[n];i.to==e.id&&t.push(i)}return t},getLines:function(e,t){var n=[],i={};for(var r in this.model.lines){var a=this.model.lines[r];a.to!=e.id&&a.from!=e.id||(n.push(a),i[a.id]=!0)}if(e.children&&t)for(var s=0;s<e.children.length;s++){var o=e.children[s];for(var u in this.model.lines){var l=this.model.lines[u];i[l.id]||l.from!=o&&l.to!=o||n.push(l)}}return n},hasLine:function(e){for(var t in this.model.lines){var n=this.model.lines[t];if(n.from==e.id)return!0}return!1},getLine:function(e){for(var t in this.model.lines){var n=this.model.lines[t];if(n.from==e.id)return n}return null},getFromBox:function(e){var t=this.model.widgets[e.from];if(t||(t=this.model.screens[e.from]),!t&&this.model.groups){var n=this.model.groups[e.from];if(n){var i=this.getAllGroupChildren(n);t=this.getBoundingBox(i)}}return t},getToBox:function(e){var t=this.model.screens[e.to];if(t||(t=this.model.widgets[e.to]),!t&&e.isGroup&&this.model.groups){var n=this.model.groups[e.to];n&&(t=this.getBoundingBox(n.children))}return t},getTemplateGroupOrderChildren:function(e){for(var t=[],n=0;n<e.children.length;n++){var i=e.children[n],r=this.model.templates[i];t.push(r)}return t=this.getOrderedWidgets(t),t},getBoundingBox:function(e){return f.Z.getBoundingBox(e,this.model)},getBoundingBoxByBoxes:function(e){return f.Z.getBoundingBoxByBoxes(e)},getHoverScreen:function(e){return f.Z.getHoverScreen(e,this.model)},_getHoverScreen:function(e,t){return f.Z.getHoverScreen(e,t)},_isBoxChild:function(e,t){return!(e.x+e.w<t.x||t.x+t.w<e.x||e.y+e.h<t.y||t.y+t.h<e.y)},_isContainedInBox:function(e,t){return!!(t&&e.x>=t.x&&e.x+e.w<=t.w+t.x&&e.y>=t.y&&e.y+e.h<=t.y+t.h)},countProps:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},objectEquals:function(e,t){if((0,a.Z)(e)!==(0,a.Z)(t))return!1;if("function"===typeof e)return e.toString()===t.toString();if(e instanceof Object&&t instanceof Object){if(this.countProps(e)!==this.countProps(t))return!1;var n=!0;for(var i in e)if(n=this.objectEquals(e[i],t[i]),!n)return!1;return!0}return e===t},round:function(e){return Math.round(100*e)/100},formatTime:function(e){return e=Math.round(e/1e3),e+"s"},formatSTD:function(e){return'<span class="MatcDashTableTdHint">( +/- '+this.formatNumber(e)+")</span>"},formatRound:function(e){return Math.round(100*e)/100},formatNumber:function(e){return e>1e6?(e=Math.floor(e/1e6)+"M",e):e>1e3?(e=Math.floor(e/1e3)+"K",e):e>100?(e=Math.floor(e),e):(e=Math.round(10*e)/10,e)},formatPercent:function(e){e=Math.round(100*e);var t="MatchDashStatusFailure";return e>70?t="MatchDashStatusSuccess":e>35&&(t="MatchDashStatusOK"),'<span class="'+t+'">'+e+"%</span>"},formatDate:function(e,t){var n=new Date(e);return t?n.toLocaleDateString():n.toLocaleString()},formatString:function(e,t){return e.length>t&&(e=e.substring(0,t-3)+"..."),e},getNormalizeWidgetZValues:function(e){var t=[];for(var n in e)t.push({id:n,z:e[n]});this.sortWidgetList(t);for(var i=0,r=null,a={},s=0;s<t.length;s++){var o=t[s];null!==r&&r==o.z||(i++,r=o.z),a[o.id]=i}return a},getMinZValue:function(e){var t=1e5,n=0;for(var i in e){var r=e[i];t=Math.min(r.z,t),n++}return n>0?t:0},getMaxZValue:function(e){var t=-1e4,n=0;for(var i in e){var r=e[i];t=Math.max(r.z,t),n++}return n>0?t:0},getZValues:function(e){var t={};for(var n in e){var i=e[n];this.fixMissingZValue(i),t[n]=i.z}return t}},mounted:function(){}},L=T,_=(0,Z.Z)(L,i,r,!1,null,null,null),D=_.exports},43371:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(76133),r=n(92751),a=(n(41539),n(54747),n(2707),n(9653),n(40561),n(92222),n(4873)),s=function(){function e(t){(0,i.Z)(this,e),this.data=t,this._isDataFrame=!0}return(0,r.Z)(e,[{key:"as_array",value:function(){if(this.data.length)return this.data;var e=[];return this.foreach((function(t){e.push(t)})),e}},{key:"as_dict",value:function(e){var t=this.as_array(),n={};return t.forEach((function(t){n[t[e]]=t})),n}},{key:"push",value:function(e){this.data.push?this.data.push(e):console.warn("Data is not array. cannot push")}},{key:"select",value:function(t,n,i){var r=[],a=null;return"in"===n&&Array.isArray(i)&&(a={},i.forEach((function(e){a[e]=!0}))),this.foreach((function(e){var s=e[t];switch(n){case"==":s==i&&r.push(e);break;case">=":s>=i&&r.push(e);break;case"<=":s<=i&&r.push(e);break;case">":s>i&&r.push(e);break;case"<":s<i&&r.push(e);break;case"!=":s!=i&&r.push(e);break;case"in":(a&&a[s]||i.indexOf(s)>=0)&&r.push(e);break;default:break}})),new e(r)}},{key:"columns",value:function(){var t=[];for(var n in this.data){var i=this.data[n];for(var r in i)t.push(r);break}return new e(t)}},{key:"shape",value:function(){var e=this.size(),t=0;for(var n in this.data){var i=this.data[n];for(var r in i)t++;0==t&&(t=1);break}return[e,t]}},{key:"length",value:function(){return this.size()}},{key:"size",value:function(){if(this.data&&this.data.length)return this.data.length;if(this.data){var e=0;return this.foreach((function(){e++})),e}return 0}},{key:"row",value:function(t,n){if(!n){var i=this.data[t];return null==i||!isNaN(i)||i._isDataFrame||i.substring?i:new e(i)}this.data[t]=n}},{key:"column",value:function(t,n){if(!n){var i={};return this.foreach((function(e,t){i[t]=e}),t),new e(i)}var r=this.data;this.foreach((function(e,i){r[i][t]=n.get(i)}),t)}},{key:"get",value:function(t,n,i){if(null!=n&&null!=t)return this.data[t][n];if(null!=t){var r=this.data[t];return r&&isNaN(r)&&!r._isDataFrame&&!r.substring?new e(r):(null!=r&&void 0!=r||(r=i),r)}}},{key:"col",value:function(t){var n=[];return this.foreach((function(e,i){n[i]=e[t]})),new e(n)}},{key:"hist",value:function(t,n,i,r){var a=[],s=!1,o=!1;this.foreach((function(e){var n=e;t&&(n=e[t]),a.push(n),s=!1===s?n:Math.max(s,n),o=!1===o?n:Math.min(o,n)})),null!=i&&void 0!=i&&(o=i),null!=r&&void 0!=r&&(s=r);for(var u=(s-o)/n,l=[],c=0;c<n;c++)l[c]={bucket:c,count:0,from:c*u+o,to:(c+1)*u+o};for(var h=0;h<a.length;h++)for(var d=a[h],f=0;f<n;f++){var m=l[f];if(d>=m.from&&d<=m.to){m.count++;break}}return new e(l)}},{key:"set",value:function(e,t,n){null!=t&&null!=e?this.data[e][t]=n:null!=e&&(this.data[e]=n)}},{key:"sortBy",value:function(e,t){this.data.length||0==this.data.length?this.data.sort((function(n,i){return n._isDataFrame&&i._isDataFrame?t?i.get(e)-n.get(e):n.get(e)-i.get(e):t?i[e]-n[e]:n[e]-i[e]})):console.error("Can onyl sort array of objects!")}},{key:"add",value:function(e,t){t||(t=e,e=null),t._isDataFrame?this.foreach((function(e,n){return e+t.get(n)}),e):this.foreach((function(e){return e+t}),e)}},{key:"minus",value:function(e,t){t||(t=e,e=null),t._isDataFrame?(console.debu,this.foreach((function(e,n){return e-t.get(n)}),e)):this.foreach((function(e){return e-t}),e)}},{key:"mutliply",value:function(e,t){t||(t=e,e=null),t._isDataFrame?this.foreach((function(e,n){return e*t.get(n)}),e):this.foreach((function(e){return e*t}),e)}},{key:"divide",value:function(e,t){t||(t=e,e=null),t._isDataFrame?this.foreach((function(e,n){return e/t.get(n)}),e):this.foreach((function(e){return e/t}),e)}},{key:"median",value:function(e){var t=[];return this.foreach((function(e){t.push(e)}),e),t=t.sort((function(e,t){return e-t})),t.length>0?t[Math.max(0,Math.floor(t.length/2)-1)]:0}},{key:"mean",value:function(e){var t=this.sum(e);return 0===this.size()?0:1*t/this.size()}},{key:"max",value:function(e){var t=Number.MIN_VALUE;return this.foreach((function(e){t=Math.max(t,e)}),e),t}},{key:"min",value:function(e){var t=Number.MAX_VALUE;return this.foreach((function(e){t=Math.min(t,e)}),e),t}},{key:"variance",value:function(e){var t=this.mean(e),n=0;return this.foreach((function(e){var i=t-e;n+=i*i}),e),1*n/this.size()}},{key:"std",value:function(e){return Math.sqrt(this.variance(e))}},{key:"sum",value:function(e){var t=0;return this.foreach((function(e){t+=e}),e),t}},{key:"unique",value:function(e){var t={},n=0;return this.foreach((function(e){t[e]||(t[e]=!0,n++)}),e),n}},{key:"uniqueValues",value:function(t){var n={},i=[];return this.foreach((function(e){n[e]||(n[e]=!0,i.push(e))}),t),new e(i)}},{key:"count",value:function(t){var n={};return this.foreach((function(e){n[e]||(n[e]=0),n[e]++}),t),new e(n)}},{key:"groupBy",value:function(t){var n={};return this.foreach((function(i){var r=i[t];n[r]||(n[r]=new e([])),n[r].push(i)})),new a.Z(n)}},{key:"foreach",value:function(e,t){if(this.data.length)for(var n=0;n<this.data.length;n++){var i=this.data[n];if(t){var r=e(i[t],n);null!=r&&(i[t]=r)}else{var a=e(i,n);null!=a&&(this.data[n]=a)}}else for(var s in this.data){var o=this.data[s];if(t){var u=e(o[t],s);null!=u&&(o[t]=u)}else{var l=e(o,s);null!=l&&(this.data[s]=l)}}}},{key:"setIndex",value:function(e){var t={},n=e.length;this.foreach((function(i,r){for(var a=t,s=0;s<n;s++){var o=e[s],u=i[o];a[u]||(s==n-1?null==a[u]?a[u]=r:console.error("Multi index not supoprted"):a[u]={}),a=a[u]}})),this.index=t}},{key:"ix",value:function(e,t){if(this.index)for(var n=this.index,i=e.length,r=0;r<i;r++){var a=e[r];if(null==n[a])return null;if(r==i-1){var s=n[a];return t?{row:this.data[s],index:s}:this.data[s]}n=n[a]}else console.error("DataFrame.ix() > Error: No Index!");return null}},{key:"remove",value:function(e){this.data.length?this.data.splice(e,1):delete this.data[e]}},{key:"print",value:function(){var e=!1,t=this,n="";return this.foreach((function(i){if(!e){for(var r in e=!0,i)n+=t._correctLength(r,Math.max(20,r.length))+" | ";n+="\n"}for(var a in i)n+=t._correctLength(i[a]+"",Math.max(20,a.length))+" | ";n+="\n"})),console.debug(n),n}},{key:"_correctLength",value:function(e,t){if(e+="",e.length<t)while(e.length<t)e+=" ";else e=e.substring(0,t-3)+".. ";return e}},{key:"toCSV",value:function(e){var t="",n=e.length;return this.foreach((function(i){for(var r=0;r<n;r++){var a=e[r];r>0&&(t+=","),t+=i[a]}t+="\n"})),t}},{key:"roundTimestampToDate",value:function(e){this.foreach((function(e){if(e){var t=new Date(e);return t.setMinutes(0),t.setMilliseconds(0),t.getTime()}return 0}),e)}},{key:"merge",value:function(t){if(Array.isArray(this.data)&&Array.isArray(t.data)){var n=this.data.concat(t.data);return new e(n)}return console.error("DataFrame.merge() > Cannot merge to object frames"),new e([])}}]),e}()},96200:function(e,t,n){n.d(t,{Z:function(){return y}});var i=n(76133),r=n(92751),a=n(99418),s=n(49161),o=n(28379),u=n(59344),l=n(16328),c=n(48039),h=n(78449),d=n(75790),f=n(77050),m=n(19721),v=n(54524),g=n(5356),p=null,y=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this),r.autoClose=!0,r.wrapperClass="",r.overflow=!1,r.isFullScreen=!1,r.hasCSSAnimation=!0,e&&e.overflow&&(r.overflow=e.overflow),e&&e.hasCSSAnimation&&(r.hasCSSAnimation=e.hasCSSAnimation),r.log=new v.Z("Dialog"),r}return(0,r.Z)(n,[{key:"destroy",value:function(){this.log.info("destroy","enter"),p=null,this.cleanUpEvented()}},{key:"setFullScreen",value:function(e){this.hasFullScreen=!0,this.fullScreenListener=e}},{key:"popup",value:function(e,t,n){var i=this;this.log.log(1,"popup","enter"),p=this,m.Z.publish("vommond/dialog/open",{});var r=document.createElement("div");if(o.Z.add(r,"VommondDialogBackground VommondDialogHidden VommondDialogContentHidden"),this.hasFullScreen){var a=document.createElement("span");o.Z.add(a,"VommondDialogFullScreen mdi mdi-fullscreen"),r.appendChild(a),this.own((0,c.Z)(a,d.Z.press,u.Z.hitch(this,"toggleFullScreen",a)))}var s=document.createElement("div");o.Z.add(s,"VommondDialogContainer"),r.appendChild(s);var v=document.createElement("div");o.Z.add(v,"VommondDialogWrapper"),this.overflow&&o.Z.add(v,"VommondDialogWrapperOverflow"),n&&o.Z.add(v,n),o.Z.add(v,this.wrapperClass),s.appendChild(v);var g=document.createElement("div");o.Z.add(g,"VommondDialogContent"),(0,h.Z)("mobile")&&(o.Z.add(g,"VommondDialogContentMobile"),o.Z.add(v,"VommondDialogWrapperMobile")),v.appendChild(g),g.appendChild(e),l.Z.body().appendChild(r),this.own((0,c.Z)(r,"onmousewheel",u.Z.hitch(this,"stopScroll"))),this.own((0,c.Z)(r,"mousewheel",u.Z.hitch(this,"stopScroll"))),this.own((0,c.Z)(r,"DOMMouseScroll",u.Z.hitch(this,"stopScroll"))),this.own(m.Z.subscribe("matc/canvas/esc",u.Z.hitch(this,"close")));var y=this.getStartPos(t),k=f.Z.position(v),w=f.Z.position(r);if(this.autoClose&&this.own((0,c.Z)(r,d.Z.press,u.Z.hitch(this,"onBackClick"))),v.style.top=y.y+"px",v.style.height=y.h+"px",v.style.width=y.w+"px",v.style.left=y.x+"px",this.hasCSSAnimation){var C=y.w/k.w,S=y.h/k.h,Z=" scale("+C+","+S+")";v.style.transform=Z}setTimeout((function(){o.Z.remove(r,"VommondDialogHidden")}),1),setTimeout((function(){o.Z.remove(r,"VommondDialogContentHidden")}),350),setTimeout((function(){i.hasCSSAnimation&&(v.style.transform="scale(1,1)"),v.style.top=Math.round((w.h-k.h)/2)+"px",v.style.height=k.h+"px",v.style.width=k.w+"px",v.style.left=Math.round((w.w-k.w)/2)+"px"}),100),this.hasCSSAnimation&&setTimeout((function(){v.style.transform=""}),500),setTimeout((function(){return i.emitOpen()}),500),this._dialogBackground=r,this.node=e,this.wrapper=v}},{key:"onOpen",value:function(e){this._onOpenCallback=e}},{key:"emitOpen",value:function(){this._onOpenCallback&&this._onOpenCallback()}},{key:"getStartPos",value:function(e){if(e)return f.Z.position(e);var t=f.Z.position(l.Z.body());return{w:0,h:0,x:t.w/2,y:t.h/2}}},{key:"resize",value:function(e){var t=this.wrapper,n=this._dialogBackground;e.appendChild&&(e=f.Z.position(e,!0));var i=f.Z.position(n);t.style.top=Math.round((i.h-e.h)/2)+"px",t.style.height=e.h+"px",t.style.width=e.w+"px",t.style.left=Math.round((i.w-e.w)/2)+"px"}},{key:"stopScroll",value:function(e){if(this._dialogBackground==e.target)return this.stopEvent(e),!1}},{key:"onBackClick",value:function(e){var t=e.target;t==this._dialogBackground&&(this.stopEvent(e),o.Z.add(this._dialogBackground," VommondDialogHidden"),setTimeout(u.Z.hitch(this,"close"),300))}},{key:"shake",value:function(){var e=f.Z.position(this.wrapper);o.Z.add(this.wrapper,"VommondDialogWrapperShake");var t=this.wrapper;setTimeout((function(){t.style.left=e.x+50+"px"}),1),setTimeout((function(){t.style.left=e.x-50+"px"}),51),setTimeout((function(){t.style.left=e.x+50+"px"}),101),setTimeout((function(){t.style.left=e.x-50+"px"}),151),setTimeout((function(){t.style.left=e.x+"px",o.Z.remove(t,"VommondDialogWrapperShake")}),201)}},{key:"toggleFullScreen",value:function(e){this.isFullScreen=!this.isFullScreen,this.fullScreenListener&&this.fullScreenListener(this.isFullScreen),this.isFullScreen?(o.Z.remove(e,"mdi-fullscreen"),o.Z.add(e,"mdi-fullscreen-exit")):(o.Z.add(e,"mdi-fullscreen"),o.Z.remove(e,"mdi-fullscreen-exit"))}},{key:"hide",value:function(){this.close()}},{key:"close",value:function(){this.emit("close",{}),this._dialogBackground&&l.Z.body().removeChild(this._dialogBackground),this.destroy()}}],[{key:"getCurrentDialog",value:function(){return p}}]),n}(g.Z)},4873:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(76133),r=n(92751),a=n(43371),s=function(){function e(t){(0,i.Z)(this,e),this.data=t,this._isDataFrame=!1}return(0,r.Z)(e,[{key:"as_array",value:function(){var e=[];return this.foreach((function(t){e.push(t)})),e}},{key:"size",value:function(){return this._foreach("size")}},{key:"get",value:function(e){return this.data[e]}},{key:"count",value:function(t){var n=this._foreach("count",t);return new e(n.data)}},{key:"max",value:function(e){return this._foreach("max",e)}},{key:"min",value:function(e){return this._foreach("min",e)}},{key:"mean",value:function(e){return this._foreach("mean",e)}},{key:"variance",value:function(e){return this._foreach("variance",e)}},{key:"std",value:function(e){return this._foreach("std",e)}},{key:"sum",value:function(e){return this._foreach("sum",e)}},{key:"unique",value:function(e){return this._foreach("unique",e)}},{key:"groupBy",value:function(){}},{key:"foreach",value:function(e){for(var t in this.data){var n=this.data[t];e(n,t)}}},{key:"_foreach",value:function(e,t){var n={};for(var i in this.data){var r=this.data[i],s=r[e](t);n[i]=s}return new a.Z(n)}},{key:"print",value:function(e){for(var t in this.data){var n=this.data[t];e&&n.foreach((function(e,t){console.debug("  ",t,e)}))}}}]),e}()},23521:function(e,t,n){var i=n(76133),r=n(92751),a=(n(41539),n(33948),n(43918)),s=function(){function e(){(0,i.Z)(this,e),this.data={},this.entries=[],this.payloads={}}return(0,r.Z)(e,[{key:"start",value:function(e,t){var n=(new Date).getTime();this.data[e]=n,this.payloads[e]=t}},{key:"end",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(this.data[e]){var n=this.data[e],i=(new Date).getTime(),r=i-n;this.entries.push({duration:r,key:e,payload:this.payloads[e]}),r>1e3?(a.Z.warn("PerformanceMonitor.end() > "+e+" took "+r+"ms"),console.table(this.entries)):a.Z.log(t,"PerformanceMonitor.end() > "+e+" took "+r+"ms"),delete this.data[e],delete this.payloads[e]}else a.Z.warn("PerformanceMonitor.end() > no key",e)}}]),e}();t.Z=new s},3270:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(76133),r=n(92751),a=(n(41539),n(54747),n(26833),n(68309),n(91038),n(78783),n(70189),n(33948),n(2707),n(69600),n(47941),n(74916),n(4723),n(21249),n(92222),n(59344)),s=n(43371),o=n(4873),u=n(23521),l=function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,[{key:"filterEvents",value:function(e,t){u.Z.start("Analytics.filterEvents()",e.length);for(var n={},i=0;i<t.length;i++){var r=t[i];r.isValid||(n[r.reference]=!0)}for(var a=[],s=e.length,o=0;o<s;o++){var l=e[o];n[l.session]||a.push(l)}return u.Z.end("Analytics.filterEvents()"),a}},{key:"getSurveyAnswers",value:function(e,t,n,i){u.Z.start("Analytics.getSurveyAnswers()",e.length);var r=i.showId,a=i.showTasksSucess,o=i.showTaskDetails,l=i.showTaskDetails,c={ids:[],rows:[],cols:[],tasks:[],meta:{}},h=new s.Z(e);h.sortBy("time");var d={};if(n.tasks){var f=this.getTaskPerformance(h,n.tasks);f.foreach((function(e){d[e.session]||(d[e.session]={}),d[e.session][e.task]=e}))}var m={},v={};Object.values(t.widgets).forEach((function(e){v[e.id]=e.type,e.props&&e.props.isSurveyElement&&"Password"!==e.type&&(m[e.id]=e.name)})),c.cols=Array.from(new Set(Object.values(m))),c.cols.sort((function(e,t){return e.localeCompare(t)})),c.cols.forEach((function(e){c.meta[e]={type:"data"}})),r&&(c.cols.unshift("id"),c.meta["id"]={type:"id",hidden:!0}),n.tasks&&n.tasks.forEach((function(e){a&&(c.cols.push(e.name),c.meta[e.name]={type:"task",hidden:!0}),o&&(c.cols.push(e.name+"_Duration"),c.meta[e.name+"_Duration"]={type:"task",hidden:!0,header:!1}),l&&(c.cols.push(e.name+"_Interactions"),c.meta[e.name+"_Interactions"]={type:"task",hidden:!0,header:!1})}));var g=h.groupBy("session");return g.foreach((function(e,i){var s={},o=[];c.cols.forEach((function(e){return s[e]="-"})),e.sortBy("time");var u=e.as_array();u.forEach((function(e){if(delete e.user,t.widgets[e.widget]&&e.widget&&e.state&&m[e.widget]){var n=m[e.widget];if("Rating"===v[e.widget])s[n]=1*e.state.value+1;else{var i=e.state.value;Array.isArray(i)?s[n]=i.join(", "):s[n]=i}}})),r&&(s["id"]=i),n.tasks&&n.tasks.forEach((function(e){if(d[i]&&d[i][e.id]){var t=d[i][e.id];o.push(t),a&&(s[e.name]="Completed"),a&&(s[e.name+"_Duration"]=Math.round(t.duration/1e3)),a&&(s[e.name+"Interactions"]=t.interactions)}})),c.tasks.push(o),c.ids.push(i),c.rows.push(s)})),u.Z.end("Analytics.getSurveyAnswers()"),c}},{key:"nornalizeContainerChildEvents",value:function(e){return e.forEach((function(e){e.widget&&e.widget.indexOf("-")>0&&(e.widget=e.widget.substring(0,e.widget.indexOf("-")))})),e}},{key:"getFirstNClicks",value:function(e,t){var n=new s.Z(e),i=n.groupBy("session"),r=[];return i.foreach((function(e){e.sortBy("time");for(var n=e.as_array(),i=0,a=0;a<n.length;a++){var s=n[a];"ScreenLoaded"==s.type||"OverlayLoaded"==s.type?i=0:s.x>=0&&s.y>=0&&!s.noheat&&i<t&&(r.push(s),i++)}})),r}},{key:"getPValueBionimial",value:function(){}},{key:"getScreenExplorationRate",value:function(e,t){var n=Object.keys(t.screens).length,i=e.groupBy("session"),r=i.unique("screen");return r.mean()/n}},{key:"getSuccessTaskNames",value:function(e,t){for(var n={},i=0;i<t.length;i++)n[t[i].id]=t[i].name;var r={},a=e.groupBy("session");return a.foreach((function(e,t){var i=[],a=e.count("task").data;for(var s in a)i.push(n[s]);i.sort(),r[t]=i})),r}},{key:"getTagAnalytics",value:function(e){for(var t={},n={},i={},r=0;r<e.length;r++){var a=e[r],o=a.sessions;for(var u in o)for(var l=o[u],c={},h=0;h<l.length;h++){var d=l[h];t[d.tag]||(t[d.tag]=0),t[d.tag]++,c[d.tag]||(n[d.tag]||(n[d.tag]=0),n[d.tag]++,c[d.tag]=!0),i[d.tag]||(i[d.tag]=0),i[d.tag]+=d.start}}var f=[];for(var m in t)f.push({tag:m,count:t[m],sessions:n[m],time:i[m]/t[m]});return new s.Z(f)}},{key:"createMatcher",value:function(e,t,n){return{name:e,match:null,flowPos:0,step:t[0],endStep:t[t.length-1],flow:t,start:null,startTime:0,strict:n,taskName:"",usePartialMatches:!1,init:function(e){this.start=e,this.startTime=e.time,this.interactions=0},next:function(e,t){var n=null;if(this.match&&("WidgetClick"!=e.type&&"WidgetChange"!=e.type&&"ScreenGesture"!=e.type&&"WidgetGesture"!=e.type&&"ScreenClick"!=e.type||this.interactions++),this._match(this.step,e)){if(null==this.match&&(this.match={startTime:e.time,discoveryTime:e.time-this.startTime,endTime:1,startPosition:t,endPosition:-1,duration:0,count:-1,interactions:-1,partial:!1,session:e.session,task:this.name,user:e.user,taskName:this.taskName,hits:[]},"WidgetClick"!=e.type&&"WidgetChange"!=e.type&&"ScreenGesture"!=e.type&&"WidgetGesture"!=e.type&&"ScreenClick"!=e.type||this.interactions++),this.match.hits.push({time:e.time,pos:t,step:this.flowPos}),this.flow.length==this.flowPos+1){var i=this.getEndTime(e);this.match.endTime=i,this.match.endPosition=t,this.match.interactions=this.interactions,this.match.duration=this.match.endTime-this.match.startTime,this.match.count=this.match.endPosition-this.match.startPosition+1,n=this.match,this.match=null,this.flowPos=-1}this.flowPos++,this.step=this.flow[this.flowPos]}return this.usePartialMatches&&null!=this.match&&!this._match(this.step,this.endStep)&&this._match(this.endStep,e)&&(this.match.endTime=e.time,this.match.endPosition=t,this.match.duration=this.match.endTime-this.match.startTime,this.match.count=this.match.endPosition-this.match.startPosition+1,this.match.partial=!0,n=this.match,this.reset()),n},getEndTime:function(e){if(e.state&&e.state.children){for(var t=e.state.children,n=e.time,i=0;i<t.length;i++)n=Math.max(n,t[i].time);return n}return e.time},_match:function(e,t){if(e.screen==t.screen&&e.widget==t.widget&&e.type==t.type){if("ScreenGesture"==e.type&&"ScreenGesture"==t.type||"WidgetGesture"==e.type&&"WidgetGesture"==t.type)return!(!e.gesture||!t.gesture)&&e.gesture.type==t.gesture.type;if(("WidgetClick"==e.type||"WidgetChange"==e.type)&&e.state&&t.state){var n=e.state,i=t.state;return"text"==n.type||"typing"==n.type||"select"==n.type||"open"==n.type||"navigate"==n.type?n.type==i.type:n.type==i.type&&n.value==i.value}return!(e.state&&!t.state||!e.state&&t.state)}return!1},reset:function(){this.match=null,this.flowPos=0,this.step=t[0]}}}},{key:"matchFlowInSession",value:function(e,t,n,i){var r=[],a=this.createMatcher(n,t,i);e.sortBy("time");var s=e.as_array(),o=s.length;a.init(s[0]);for(var u=0;u<o;u++){var l=s[u],c=a.next(l,u);c&&(i?t.length==c.count&&r.push(c):r.push(c))}return r}},{key:"getFunnelInteraction",value:function(e,t,n){var i=this,r={},a=this.getTaskPerformance(e,[t]);if(a.data.forEach((function(e){i.addFunnelInteractionSteps(r,e,!1)})),n){var s=this.getFunnelTasks(t);s.forEach((function(n){if(n.flow.length>2&&n.flow.length<t.flow.length){var a=i.getTaskPerformance(e,[n]);a.data.forEach((function(e){r[e.session]||i.addFunnelInteractionSteps(r,e,!0)}))}}))}return r}},{key:"addFunnelInteractionSteps",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0;e[t.session]=[],t.hits.forEach((function(r){var a=r.pos-i;e[t.session].push({value:a,dropoff:n}),i=r.pos}))}},{key:"getFunnelDuration",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={},a=this.getTaskPerformance(e,[t]);if(a.data.forEach((function(e){n.addFunnelDurartionSteps(r,e)})),i){var s=this.getFunnelTasks(t);s.forEach((function(i){if(i.flow.length>2&&i.flow.length<t.flow.length){var a=n.getTaskPerformance(e,[i]);a.data.forEach((function(e){r[e.session]||n.addFunnelDurartionSteps(r,e,!0)}))}}))}return r}},{key:"addFunnelDurartionSteps",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.startTime;e[t.session]=[],t.hits.forEach((function(r){var a=r.time-i;e[t.session].push({value:a,dropoff:n}),i=r.time}))}},{key:"getFunnelMax",value:function(e){var t=0;for(var n in e){var i=e[n];i.forEach((function(e){t=Math.max(t,e.value)}))}return t}},{key:"getSessionSummary",value:function(e){var t={},n=e.groupBy("session");return n.foreach((function(e,n){var i=e.count("type"),r=i.get("ScreenLoaded",null,0)+i.get("OverlayLoaded",null,0),a=e.unique("screen"),s=e.select("type","in",["ScreenClick","WidgetClick","WidgetChange","ScreenGesture","WidgetGesture"]);t[n]={session:n,size:e.size(),interactions:s.size(),date:e.min("time"),duration:Math.ceil(e.max("time")-e.min("time")),screenLoads:r,screenUnique:a,screenRatio:a/r,errors:i.get("ValidationError",null,0)}})),t}},{key:"getSessionDetails",value:function(e,t){e.sortBy("time");var n=this.getSessionSummary(e);Object.values(n).forEach((function(e){e.tasks=0;for(var n=0;n<t.length;n++){var i=t[n];e[i.id]={name:i.name,success:0,duration:-1,interactions:-1}}}));var i=this.getTaskPerformance(e,t).data;return i.forEach((function(e){var t=n[e.session];if(t){t.tasks++;var i=t[e.task];i.success=1,i.duration=e.duration,i.interactions=e.interactions}else console.error("Analytics.getSessionDetails() > No session ??")})),new s.Z(Object.values(n))}},{key:"convertSessionDetails",value:function(e){return e.data.map((function(e){var t={};for(var n in e)if("start"!==n){var i=e[n];i.name?t[n]=i.success:t[n]=i}return t}))}},{key:"getTaskPerformance",value:function(e,t,n,i){u.Z.start("Analytics.getTaskPerformance()");for(var r=[],a=[],o=0;o<t.length;o++){var l=t[o],c=l.flow;if(c&&c.length>0){var h=this.createMatcher(l.id,c,l.strict);h.taskName=l.name,a.push(h)}}var d=a.length;e.sortBy("time");var f=e.groupBy("session");return f.foreach((function(e){for(var t=e.as_array(),s=t.length,o=0;o<d;o++){var u=a[o];u.reset(),u.init(t[0]),u.disabled=!1}for(var l=0;l<s;l++)for(var c=t[l],h=0;h<d;h++){var f=a[h];if(!f.disabled){var m=f.next(c,l);m&&(m.partial&&i||!m.partial)&&(f.strict?m.count==f.flow.length&&r.push(m):r.push(m),n||(f.disabled=!0))}}})),u.Z.end("Analytics.getTaskPerformance()"),new s.Z(r)}},{key:"getMergedTaskPerformance",value:function(e,t,n){var i=[],r=this.getTaskPerformance(e,t);r.setIndex(["session","task"]);for(var a=n.length,o=0;o<a;o++){var u=n[o];if(u.isValid){var l=u.reference;for(var c in u.tasks){var h=u.tasks[c],d=r.ix([l,c],!0);if(h&&!d)i.push({startTime:-1,discoveryTime:-1,endTime:-1,startPosition:-1,endPosition:-1,duration:0,count:-1,partial:!1,session:l,task:c,user:""});else if(d&&!h){var f=d.index;r.remove(f)}}}}return i=r.data.concat(i),new s.Z(i)}},{key:"getFunnelSummary",value:function(e,t,n){for(var i=this.getFunnelTasks(t),r=this.getTaskSummary(e,i,n),a=e.count("session").size(),s=[{label:t.name+"_all",id:t.id+"_all",value:a,sessionCount:a,p:1,flow:0}],o=s.concat(r.reverse()),u=1;u<o.length;u++){var l=o[u];l.event=t.flow[u-1]}return o}},{key:"getFunnelTasks",value:function(e){var t=[],n=a.Z.clone(e.flow);while(n.length>0){var i=a.Z.clone(e);i.id=e.id+"_"+n.length,i.name+=e.name+"_"+n.length,i.flow=a.Z.clone(n),t.push(i),n.pop()}return t}},{key:"getTaskStarts",value:function(e,t){var n=t.map((function(e){var t=a.Z.clone(e);return t.id=e.id,t.name=e.name,t.flow=[e.flow[0]],t})),i=this.getTaskPerformance(e,n);return i}},{key:"getTaskSummary",value:function(e,t,n){for(var i=e.count("session").size(),r=this.getMergedTaskPerformance(e,t,n),a=r.groupBy("task"),s=this.getTaskStarts(e,t),o=s.groupBy("task"),u=[],l=0;l<t.length;l++){var c=t[l],h=a.get(c.id);if(h){var d=h.size(),f=o.get(c.id),m=f?f.size():i;h=h.select("startTime",">",0),u.push({label:c.name,id:c.id,value:d,sessionCount:i,sessionStart:m/i,p:d/m,success:d/m,successRel:d/m,successAbs:d,flow:c.flow.length,startCount:m,startRel:m/i,startMean:h.mean("startPosition"),startStd:h.std("startPosition"),discoveryTimeMean:h.mean("discoveryTime"),discoveryTimeStd:h.std("discoveryTime"),durationMean:h.mean("duration"),durationMedian:h.median("duration"),durationStd:h.std("duration"),countMean:h.mean("count"),countStd:h.std("count"),interactionsMean:h.mean("interactions"),interactionsStd:h.std("interactions")})}else u.push({label:c.name,id:c.id,sessionCount:i,value:0,p:0,success:0,successRel:0,successAbs:0,flow:c.flow.length,startAbs:0,startMean:0,startStd:0,discoveryTimeMean:0,discoveryTimeStd:0,durationMean:0,durationMedian:0,durationStd:0,countMean:0,countStd:0,interactionsMean:0,interactionsStd:0})}return u}},{key:"getOverlayTimeGrouping",value:function(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t={},i=-1,r=null,a=null;if(e.foreach((function(e){a=e["type"],i=e["time"];var o=e["overlay"];if("OverlayLoaded"==a&&(t[o]=i,r=o),"OverlayRemoved"==a){if(t[o]){n[o]||(n[o]=new s.Z([]));var u=i-t[o];n[o].push(u)}delete t[o]}if("ScreenLoaded"==a){for(var l in t){n[l]||(n[l]=new s.Z([]));var c=i-t[l];n[l].push(c)}t={}}})),t[r]&&i>0&&"OverlayLoaded"!=a){n[r]||(n[r]=new s.Z([]));var o=i-t[r];n[r].push(o)}})),new o.Z(n,s.Z)}},{key:"getScreenTimeGrouping",value:function(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t=-1,i=-1,r=null,a=null;if(e.foreach((function(e){a=e["type"],i=e["time"];var o=e["screen"];if("ScreenLoaded"==a){if(t>-1){n[r]||(n[r]=new s.Z([]));var u=i-t;n[r].push(u)}t=i,r=o}})),t>0&&i>0&&"ScreenLoaded"!=a){n[r]||(n[r]=new s.Z([]));var o=i-t;n[r].push(o)}})),new o.Z(n,s.Z)}},{key:"getScreenTime",value:function(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t=-1,i=null,r=null,a=-1;if(e.foreach((function(e){var r=e["type"];a=e["time"];var s=e["screen"];if("ScreenLoaded"==r){if(t>-1){n[i]||(n[i]=0);var o=a-t;n[i]+=o}t=a,i=s}})),t>0&&a>0&&"ScreenLoaded"!=r){n[i]||(n[i]=0);var s=a-t;n[i]+=s}})),new s.Z(n)}},{key:"getWidgetStatistics",value:function(e,t){var n={},i=t.select("type","==","WidgetClick"),r=i.count("widget"),a=r.sum(),s=this.getWidgetDiscoverTime(t),o=s.mean(),u=o.max(),l=s.std(),c=s.size(),h=this.getWidgetFirstClick(t),d=h.sum(),f=t.select("type","in",["ScreenLoaded","OverlayLoaded"]),m=f.count("screen");for(var v in e.widgets){var g=this._getParentScreenID(e,v);n[v]={clicksAbs:r.get(v,null,0),clicksRel:r.get(v,null,0)/a,discoverTimeAbs:o.get(v,null,0),discoverTimeRel:o.get(v,null,0)/u,discoverTimeStd:l.get(v,null,0),views:c.get(v,null,0),firstClicksAbs:h.get(v,null,0),firstClicksRelApp:h.get(v,null,0)/d,firstClicksRelScreen:h.get(v,null,0)/m.get(g,null,0)}}return n}},{key:"_getParentScreenID",value:function(e,t){for(var n in e.screens){var i=e.screens[n],r=i.children.indexOf(t);if(r>-1)return i.id}return null}},{key:"getWidgetDiscoverTime",value:function(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t=0,i={};e.foreach((function(e){var r=e["type"],a=e["widget"],o=e["time"];"ScreenLoaded"==r||"OverlayLoaded"==r?(t=o,i={}):"WidgetClick"==r&&a&&(i[a]||(n[a]||(n[a]=new s.Z([])),n[a].push(o-t),i[a]=!0))}))})),new o.Z(n)}},{key:"getWidgetFirstClick",value:function(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t=0;e.foreach((function(e){var i=e["type"],r=e["widget"];"ScreenLoaded"==i||"OverlayLoaded"==i?t=0:"WidgetClick"==i&&r&&0==t&&(n[r]||(n[r]=0),n[r]++,t++)}))})),new s.Z(n)}},{key:"getWidgetDiscoverOrder",value:function(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t=null,i=0;e.foreach((function(e){t=e["type"];var r=e["widget"];"ScreenLoaded"!=t&&"OverlayLoaded"!=t||(i=0),r&&(i++,n[r]||(n[r]=new s.Z([])),n[r].push(i))}))})),new o.Z(n,s.Z)}}]),e}()}}]);
//# sourceMappingURL=275-legacy.cfc18a0a.js.map