"use strict";(self["webpackChunkquant_ux"]=self["webpackChunkquant_ux"]||[]).push([[55],{2228:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.visible?s("div",{class:["ZoomDialogBackground",{ZoomDialogHidden:0==t.step},{ZoomDialogAnimation:t.step>=2}],on:{mousedown:t.close}},[s("div",{ref:"container",staticClass:"ZoomDialogContainer",on:{click:function(t){t.stopPropagation()},mousedown:function(t){t.stopPropagation()}}},[s("div",{ref:"wrapper",class:["ZoomDialogWrapper",{ZoomDialogWrapperOverflow:"visible"===t.overflow}]},[s("div",{ref:"content",staticClass:"ZoomDialogContent"},[t._t("default")],2)])])]):t._e()},a=[],n={name:"ZoomDialog",props:["overflow"],data:function(){return{visible:!1,step:0}},methods:{show(t){const e=this.position(t);this.visible=!0,this.step=0,setTimeout((()=>{this.animStep1(e)}),100)},animStep1(t){const e=this.$refs.container,s=this.$refs.content,i=this.position(s),a=t.w/i.w,n=t.h/i.h,o=Math.round(t.x-i.x),r=Math.round(t.y-i.y);e.style.transform=`translate(${o}px, ${r}px) scale(${a}, ${n})`,e.style.opacity=.3,this.step=1,setTimeout((()=>{this.animStep2()}),100)},animStep2(){this.step=2;const t=this.$refs.container;t.style.transform="scale(1,1)",t.style.opacity=1},close(){this.visible=!1,this.step=0},position(t,e=!1){if(t){t&&t.toLowerCase&&(t=document.getElementById(t));const s=t.getBoundingClientRect(),i={x:s.left,y:s.top,w:s.right-s.left,h:s.bottom-s.top};return e&&(i.x+=window.scrollX,i.y+=window.scrollY),i}return{x:0,y:0,w:100,h:100}},shake(){const t=this.$refs.wrapper;setTimeout((()=>{t.style.left="50px"}),1),setTimeout((()=>{t.style.left="-50px"}),51),setTimeout((()=>{t.style.left="50px"}),101),setTimeout((()=>{t.style.left="-50px"}),151),setTimeout((()=>{t.style.left="0px"}),201)}}},o=n,r=s(1001),l=(0,r.Z)(o,i,a,!1,null,null,null),c=l.exports},92449:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("h2",{staticClass:"title"},[t._v("Create a new prototype")]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-6"},[s("form",[s("div",{staticClass:"form-group"},[s("label",[t._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"inputName",staticClass:"form-control",attrs:{type:"text",placeholder:"Enter App name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),s("div",{attrs:{"data-binding-error":"name"}})]),s("div",{staticClass:"form-group"},[s("label",[t._v("ScreenSize *")]),s("ScreenSizeSelector",{on:{change:t.setType}})],1)])])]),s("div",{staticClass:"MatcButtonBar"},[s("a",{staticClass:"MatcButton MatcButtonPrimary",on:{click:t.create}},[t._v("Create")]),s("a",{staticClass:"MatcLinkButton",attrs:{href:"#/apps/my-apps.html"}},[t._v("Cancel")])]),s("p",{staticClass:"has-text-grey is-size-6 MatcMarginTop"},[t._v("* The screen size is measured in points and not pixel!")])])])])},a=[],n=s(14285),o=s(99917),r=s(30512),l=s(4555),c=s(73311),h={name:"Create",mixins:[o.Z],data:function(){return{name:"",type:null}},watch:{},components:{ScreenSizeSelector:l.Z},methods:{setType(t){this.type=t},async create(){if(this.$route.meta&&this.$route.meta.isTryout)this.logger.info("create","enter > tryout"),location.href=`#/apps/tryout2.html?w=${this.type.screenSize.w}&h=${this.type.screenSize.h}&t=${this.type.type}`;else{this.logger.info("create","enter > user");let t=new c.Z,e=t.createAppModel(this.name,"",this.type),s=await r.Z.getModelService().createApp(e);s&&s.id?location.href="#/apps/"+s.id+"/create.html":this.showError("Could not create app")}}},async mounted(){this.logger=new n.Z("Create"),setTimeout((()=>{this.$refs.inputName&&this.$refs.inputName.focus()}),50)}},d=h,u=s(1001),p=(0,u.Z)(d,i,a,!1,null,null,null),m=p.exports},56782:function(t,e,s){s.r(e),s.d(e,{default:function(){return Gi}});var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"MatcStudio"},[i("SplitContainer",{attrs:{left:256,min:48,qui:"Studio"},scopedSlots:t._u([{key:"left",fn:function(){return[i("div",{staticClass:"MatcStudioNav"},[i("div",{staticClass:"MatcStudioLogo"},[i("img",{ref:"logo",staticClass:"MatcStudioLogo",attrs:{src:s(56549)}}),i("span",{staticClass:"MatcCollapseViewMinHidden"},[t._v("Quant-UX")])]),i("div",{staticClass:"MatcMarginTop MatcCollapseViewMinHidden"},[i("button",{staticClass:"MatcButton MatcButtonFullWidth MatcButtonPrimary  MatcButtonXS",on:{click:t.showNewDialog}},[i("QIcon",{attrs:{icon:"Plus"}}),i("span",{staticClass:"MatcCollapseViewMinHidden"},[t._v(" "+t._s(t.$t("app.create"))+" ")])],1)]),i("div",{staticClass:"MatcStudioNavRow MatcMarginTop MatcCollapseViewMinVisible",on:{click:t.showNewDialog}},[i("a",{staticClass:"MatcLink"},[i("QIcon",{attrs:{icon:"Plus",tooltip:t.$t("app.create")}})],1)]),i("div",{staticClass:"MatcStudioNavRow MatcMarginTop MatcCollapseViewMinVisible"},[i("a",{staticClass:"MatcLink",on:{click:t.showAppsDialog}},[i("QIcon",{attrs:{icon:"Projects",tooltip:t.$t("app.recent-projects")}})],1)]),t.filteredAppList.length>0?i("div",{staticClass:"MatcStudioNavRow MatcMarginTop"},[i("h4",{staticClass:"MatcCollapseViewMinHidden"},[t._v(" "+t._s(t.$t("app.recent-projects")))])]):t._e(),i("div",{staticClass:"MatcStudioAppList MatcMarginBottom "},[t._l(t.filteredAppList,(function(e){return i("a",{key:e.id,class:["MatcLink MatcCollapseViewMinHidden",{MatcStudioAppListSelected:t.selectedApp===e.id}],attrs:{href:"#/"+t.urlPrefix+"/"+e.id+".html"}},[i("span",{staticClass:"MatcStudioAppListDot",style:{background:e.previewColor}}),i("span",{staticClass:"MatcStudioAppListLabel"},[t._v(" "+t._s(e.name)+" ")])])})),t.hasMore?i("a",{staticClass:"MatcActionLink MatcCollapseViewMinHidden",on:{click:t.showAppsDialog}},[i("span",{staticClass:"MatcStudioAppListDot",staticStyle:{opacity:"0"}}),i("span",{staticClass:"MatcStudioAppListLabel MatcStudioAction "},[t._v(" "+t._s(t.$t("app.more"))+" ")])]):t._e()],2),i("div",{staticClass:"MatcStudioNavRow"},[i("StudioNotification")],1),i("div",{staticClass:"MatcStudioNavRow"},[i("a",{staticClass:"MatcLink",attrs:{href:"#/help.html"}},[i("QIcon",{attrs:{icon:"Book"}}),i("span",{staticClass:"MatcCollapseViewMinHidden"},[t._v(" "+t._s(t.$t("app.help"))+" ")])],1)]),i("div",{staticClass:"MatcStudioNavRow"},[i("StudioContact",{attrs:{user:t.user}})],1),i("div",{staticClass:"MatcStudioNavRow"},[i("a",{staticClass:"MatcLink",attrs:{href:"#/my-account.html"}},[t.hasUserImage?i("span",{staticClass:"MatcUserImageCntr "},[i("img",{staticClass:"MatcUserImage",attrs:{src:t.userImage}})]):i("QIcon",{attrs:{icon:"Account"}}),i("span",{staticClass:"MatcCollapseViewMinHidden"},[t._v(" "+t._s(t.userName)+" ")])],1)]),i("div",{staticClass:"MatcStudioNavRow"},[i("a",{staticClass:"MatcLink",on:{click:t.onLogout}},[i("QIcon",{attrs:{icon:"Logout"}}),i("span",{staticClass:"MatcCollapseViewMinHidden"},[t._v(" "+t._s(t.$t("app.logout"))+" ")])],1)])])]},proxy:!0},{key:"right",fn:function(){return[t.selectedApp?i("StudioOverview",{attrs:{user:t.user},on:{change:t.onChangeAppProps,delete:t.onDeleteApp}}):i("div",{staticClass:"MatcStudioWelcome"},[i("div",{},[i("h3",[t._v(t._s(t.$t("app.welcome-headline")))]),i("div",[t._v(" "+t._s(t.$t("app.welcome-intro"))+" ")])])])]},proxy:!0}])}),i("CreateAppDialog",{ref:"createDialog"}),i("AppListDialog",{ref:"appsDialog"})],1)},a=[],n=s(14285),o=s(99917),r=s(30512),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["MatcSplitView MatcCollapseView",{MatcCollapseViewMin:this.collapsed}]},[s("div",{ref:"leftChild",class:["MatcSplitViewChild MatcSplitViewLeft ",{MatcSplitViewChildBorder:t.left}],style:t.leftWidth},[t._t("left")],2),s("div",{class:["MatcSplitViewBorder"]},[s("div",{class:["MatcCollapseViewHandler",{MatcSplitViewHandlerLeft:t.left},{MatcSplitViewHandlerRight:t.right}],on:{click:t.onClick}},[s("div",{staticClass:"MatcCollapseViewHandlerTop"}),s("div",{staticClass:"MatcCollapseViewHandlerBottom"})])]),s("div",{ref:"rightChild",class:["MatcSplitViewChild MatcSplitViewRight ",{MatcSplitViewChildBorder:t.right}],style:t.rightWidth},[t._t("right")],2)])},c=[],h=s(5497),d={name:"CollapseContainer",mixins:[],props:["left","right","min","qid"],data:function(){return{pos:0,collapsed:!1}},watch:{},computed:{leftWidth(){return this.left?"width:"+this.pos+"px":`width: calc(100% - ${this.pos}px)`},rightWidth(){return this.right?"width:"+this.pos+"px":`width: calc(100% - ${this.pos}px)`}},components:{},methods:{onClick(){this.setCollapsed(!this.collapsed)},setCollapsed(t){t?(this.collapsed=!0,this.pos=this.min):(this.pos=this.max,this.collapsed=!1),localStorage.setItem("quxCollapseContainer"+this.qid,this.collapsed)}},async mounted(){this.left&&(this.pos=this.left,this.max=this.left),this.right&&(this.pos=this.right,this.max=this.right),h.s(this.$refs.leftChild,!1),h.s(this.$refs.rightChild,!1);let t=localStorage.getItem("quxCollapseContainer"+this.qid);"true"===t&&this.setCollapsed(!0)}},u=d,p=s(1001),m=(0,p.Z)(u,l,c,!1,null,null,null),g=m.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"StudioOverview"},[s("SplitContainer",{attrs:{right:256,qid:"StudioOverView"},scopedSlots:t._u([{key:"left",fn:function(){return[s("div",{staticClass:"StudioOverviewHeader"},[s("div",{staticClass:"StudioOverviewHeaderRow MatcFlexColumns"},[s("div",{staticClass:"MatcFlexColumn"},[s("StudioColorDropDown",{attrs:{color:t.app.previewColor},on:{change:t.onColorChange}}),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.app.name,expression:"app.name"}],domProps:{value:t.app.name},on:{change:t.onNameChange,input:function(e){e.target.composing||t.$set(t.app,"name",e.target.value)}}}),s("span",{staticClass:"MatcHint"},[t._v(" "+t._s(t.$t("app.lastedit"))+" "+t._s(t.formatDate(t.app.lastUpdate,!0)))])])],1),s("div",{staticClass:"MatcFlexColumn"},[t.app.id&&t.user.id&&t.appLoaded?s("Team",{attrs:{appID:t.app.id,userID:t.user.id,qteam:t.team}}):t._e(),"analyze"===t.tab?s("a",{class:["MatcButton MatcButtonXS MatcButtonPrimary",{MatcButtonPassive:"X"==t.tab}],attrs:{href:"#/"+t.urlPrefix+"/"+t.appID+"/analyze/workspace.html",id:"overviewHeaderRunTest"}},[t._v(" "+t._s(t.$t("app.analyze"))+" ")]):t._e(),"analyze"!==t.tab?s("a",{class:["MatcButton MatcButtonXS MatcButtonPrimary",{MatcButtonPassive:"X"==t.tab}],attrs:{href:"#/"+t.urlPrefix+"/"+t.appID+"/design/start.html",id:"overviewHeaderRunTest"}},[t._v(" "+t._s(t.$t("app.edit"))+" ")]):t._e(),s("a",{ref:"shareButton",staticClass:"MatcButton MatcButtonXS MatcButtonSecondary MatcButtonIcon",on:{click:t.showShareDialog}},[s("QIcon",{attrs:{icon:"Share"}})],1),s("QIconDropDown",{attrs:{icon:"Dots",options:t.dotOptions}})],1)]),s("div",{staticClass:"StudioOverviewHeaderRow"},[s("div",{staticClass:"MatcTabs "},[s("a",{class:{MatcTabActive:"design"===t.tab},attrs:{href:"#/"+t.urlPrefix+"/"+t.appID+"/design.html"}},[t._v(t._s(t.$t("app.overview.design")))]),s("a",{class:{MatcTabActive:"test"==t.tab||"video"===t.tab},attrs:{href:"#/"+t.urlPrefix+"/"+t.appID+"/test.html"}},[t._v(t._s(t.$t("app.overview.test")))]),s("a",{class:{MatcTabActive:"analyze"==t.tab},attrs:{href:"#/"+t.urlPrefix+"/"+t.appID+"/analyze.html"}},[t._v(t._s(t.$t("app.overview.dash")))])])])]),s("section",{staticClass:"StudioOverviewContent"},["design"==t.tab?s("div",[s("div",{staticClass:"StudioOverviewTabContent"},[s("div",[s("h3",[t._v(t._s(t.$t("app.description")))]),s("AutoTextArea",{attrs:{inline:!0},on:{blur:t.onChangeAppDescription},model:{value:t.app.description,callback:function(e){t.$set(t.app,"description",e)},expression:"app.description"}})],1),s("div",[s("h3",{},[t._v(t._s(t.$t("app.screen-list")))]),t.appLoaded?s("ScreenList",{staticClass:"MatcMarginTop",attrs:{app:t.app,pub:t.isPublic}}):t._e()],1)])]):t._e(),"test"==t.tab?s("div",[t.restLoaded?s("TestTab",{attrs:{loading:t.loading,app:t.app,test:t.testSettings,hash:t.hash,annotation:t.sessionAnnotations,events:t.events},on:{reloadEvents:t.reloadEvents,change:t.onTestChange}}):t._e()],1):t._e(),"analyze"==t.tab?s("div",[t.restLoaded?s("AnalyticsTab",{attrs:{loading:t.loading,app:t.app,hash:t.hash,test:t.testSettings,annotation:t.sessionAnnotations,events:t.events},on:{change:t.onTestChange}}):t._e()],1):t._e(),"heat"==t.tab?s("div",[t.restLoaded?s("HeatTab",{attrs:{loading:t.loading,app:t.app,test:t.testSettings,annotation:t.sessionAnnotations,events:t.events}}):t._e()],1):t._e(),"video"==t.tab?s("div",[t.restLoaded?s("VideoTab",{attrs:{loading:t.loading,app:t.app,test:t.testSettings,annotation:t.sessionAnnotations,events:t.events},on:{change:t.onAnnotationChange}}):t._e()],1):t._e(),"settings"==t.tab?s("div",[t.restLoaded?s("SettingsTab",{attrs:{loading:t.loading,app:t.app,user:t.user,invitations:t.invitations},on:{change:t.onSettingsChange}}):t._e()],1):t._e(),"comments"==t.tab?s("div",[t.restLoaded?s("CommentsTab",{attrs:{loading:t.loading,app:t.app,user:t.user,invitations:t.invitations},on:{change:t.onSettingsChange}}):t._e()],1):t._e()])]},proxy:!0},{key:"right",fn:function(){return[s("StudioDetails",{attrs:{isLoaded:t.appLoaded,app:t.app,user:t.user,test:t.testSettings,annotation:t.sessionAnnotations,events:t.events},on:{change:t.onChangeAppDescription}})]},proxy:!0}])})],1)},f=[],b=(s(21703),s(51804)),w=s(24615),C=s(42477),M=s(4623),S=s(55887),y=s(88446),_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"MatcScreenList "+t.screenType},[s("div",{staticClass:"MatcAppListContainer",attrs:{"data-dojo-attach-point":"container"}})])},T=[],Z=s(93134),D=s(21143),L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcAppList"},[s("div",{staticClass:"MatcPageHeader"},[s("div",{staticClass:"MatcPageHeaderLeft"},[s("h1",[t._v(" "+t._s(t.getNLS("app.projects"))+" ")])]),s("div",{staticClass:"MatcPageHeaderRight"},[t.hasSearch?s("div",{staticClass:"MatcListSearchCntr",attrs:{"data-dojo-attach-point":"searchCntr"}},[s("div",{staticClass:"MatcSearchForm"},[s("input",{attrs:{id:"MatcAppListSearchField",placeholder:"Search","data-dojo-attach-point":"searchInput"}}),s("QIcon",{staticClass:"MatcCreateSearchBtn",attrs:{icon:"Search"},on:{click:t.showSearch}})],1)]):t._e(),t.canAdd?s("a",{staticClass:"MatcButton MatcButtonPrimary  MatcButtonXS",on:{click:t.showNewDialog}},[t._v(" "+t._s(t.$t("app.create"))+" ")]):t._e()])]),s("CreateAppDialog",{ref:"dialog"}),s("div",{staticClass:"MatcAppListContainer",attrs:{"data-dojo-attach-point":"container"}})],1)},B=[],k=s(34287),x=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcList"},[s("div",{staticClass:"MatcListContainer",attrs:{"data-dojo-attach-point":"container"}},[t._v("Loading...")])])}],A={name:"List",mixins:[o.Z],data:function(){return{columns:3,spacing:20,minSpacing:10,maxElementsToRender:1e3,maxElementsToRenderStep:200,colWidth:-1,grid:!1,add:!1,table:!1,animate:!0,isMobile:!1}},components:{},methods:{constructor(){this.log=new n.Z("List"),this.own((0,w.Z)(window,"resize",C.Z.hitch(this,"onResize")))},setValue(t){this.render(t,this.animate)},setColumns(t){this.columns=t},setSpacing(t){this.spacing=t},setItemFct(t){this.itemRenderFct=t},render(t,e){this.log.log(0,"render","enter > "+t.length),this.container.innerHTML="";const s=this.db.div("MatcListFlexCntr").build(),i=0,a=this.getElementsToRender(t);for(let n=0;n<a;n++){let a=n+i;const o=t[n],r=document.createElement("div");Z.Z.add(r,"MatcListItem"),this.renderItem(r,o,n),s.appendChild(r),e&&(Z.Z.add(r,"MatcListItemHidden MatcListItemAnimated"),this.showItem(r,a))}if(0===t.length){const t=this.renderDefault();t&&s.appendChild(t)}else for(let n=0;n<5;n++){const t=document.createElement("div");Z.Z.add(t,"MatcListPlaceHolder"),s.appendChild(t)}this.container.appendChild(s),this._list=t,this.onRenderDone(t),this.renderMore(t,this.container),this.log.log(0,"render","exit > ")},renderDefault(){},renderMore(t,e){if(this.maxElementsToRender<t.length){var s=this.db.div("MatcCenter MatcMarginBottom").a("MatcButton","Show More...").build(e);this.tempOwn((0,w.Z)(s,"click",C.Z.hitch(this,"showMore",t)))}},showMore(t){this.maxElementsToRender=Math.min(t.length,this.maxElementsToRenderStep+this.maxElementsToRender),this.onResize()},getElementsToRender(t){return Math.min(t.length,this.maxElementsToRender)},showItem(t,e){setTimeout((()=>{Z.Z.remove(t,"MatcListItemHidden")}),100+50*Math.min(e,10))},onRenderDone(){},onRenderAdd(){},renderItem(t,e,s){this.itemRenderFct&&this.itemRenderFct(t,e,s)},onBeforeResize(){},cleanUp(){this._colsCreated=!1,this.cols=!0},onResize(){this.log.log(0,"onResize","enter"),this.cleanUp(),this.onBeforeResize(),this._list&&this.render(this._list)}},mounted(){this.db=new S.Z}},P=A,E=(0,p.Z)(P,x,$,!1,null,null,null),N=E.exports,I=s(4951),R=s(27399),V=s(75183),U=s(18832),H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ZoomDialog",{ref:"dialog"},[s("div",{staticClass:"MatcDialog MatcResizeDialog"},[s("h2",{staticClass:"title"},[t._v("Create a new prototype")]),s("div",{staticClass:"form-group"},[s("label",[t._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"inputName",staticClass:"form-control",attrs:{type:"text",placeholder:"Enter App name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),s("div",{staticClass:"MatcErrorLabel"},[t._v(t._s(t.errorMessageName))])]),s("div",{staticClass:"form-group"},[s("label",[t._v("ScreenSize *")]),s("ScreenSizeSelector",{on:{change:t.setType}})],1),s("p",{staticClass:"has-text-grey is-size-6 MatcMarginBottom"},[t._v("* The screen size is measured in points and not pixel!")]),s("div",{staticClass:"MatcButtonBar"},[s("a",{staticClass:"MatcButton MatcButtonPrimary",on:{click:t.create}},[t._v("Create")]),s("a",{staticClass:"MatcLinkButton",on:{click:t.close}},[t._v("Cancel")])])])])},O=[],z=s(4555),F=s(73311),X=s(2228),W={name:"CreateAppDialog",props:["pub"],mixins:[],data:function(){return{errorMessageName:"",name:"",type:null}},watch:{},components:{ScreenSizeSelector:z.Z,ZoomDialog:X.Z},methods:{close(){this.$refs.dialog.close()},show(t){this.$refs.dialog.show(t.target)},setType(t){this.type=t},async create(){if(this.errorMessageName="",!this.name)return this.$refs.dialog.shake(),void(this.errorMessageName="Please enter a name");if(this.$route.meta&&this.$route.meta.isTryout)this.logger.info("create","enter > tryout"),location.href=`#/apps/tryout2.html?w=${this.type.screenSize.w}&h=${this.type.screenSize.h}&t=${this.type.type}`;else{this.logger.info("create","enter > user");let t=new F.Z,e=t.createAppModel(this.name,"",this.type),s=await r.Z.getModelService().createApp(e);s&&s.id?location.href="#/apps/"+s.id+"/create.html":this.showError("Could not create app")}}},async mounted(){this.logger=new n.Z("CreateAppDialog"),setTimeout((()=>{this.$refs.inputName&&this.$refs.inputName.focus()}),50)}},j=W,q=(0,p.Z)(j,H,O,!1,null,null,null),G=q.exports,Q={name:"AppList",mixins:[o.Z,N,I.Z],props:["small","big","pub","canAdd","size","popover","hasSelect","hasFocus"],data:function(){return{columns:-1,spacing:-1,colWidth:240,maxElementsToRender:50,resizePreview:!1,popoverButtonLabel:"View",popoverVisible:!1,hasLink:!0,hasSearch:!0,searchFields:["name"],animate:!0,hasStackView:!1,isMobile:!1}},components:{QIcon:V.Z,CreateAppDialog:G},methods:{postCreate(){this.jwtToken=r.Z.getUserService().getToken(),this.isMobile=(0,k.Z)("mobile"),this.big&&(this.colWidth=352,Z.Z.add(this.domNode,"MatcAppListBig"),this.columns=3),this.small&&(this.colWidth=180,Z.Z.add(this.domNode,"MatcAppListSmall"),this.columns=1),this.isMobile&&Z.Z.add(this.domNode,"MatcAppListMobile"),this.initListeners(),this.initLoading(),this.initSearch(),this.hasFocus&&this.showSearch()},showNewDialog(t){this.$refs.dialog.show(t)},initLoading(){try{this.container.innerHTML="";var t=document.createElement("div");if(this.canAdd&&this.isMobile){var e=document.createElement("div");e.style.width=this.colWidth+"px",Z.Z.add(e,"MatcListItem MatcAppListBox"),this.onRenderAdd(e),t.appendChild(e)}var s=document.createElement("div");Z.Z.add(s,"MatcLoading"),s.innerHTML="Loading...",t.appendChild(s),this.container.appendChild(t)}catch(i){this.log.error("initLoading","Some error occuored"),this.log.sendError(i)}this.cleanUp()},initSearch(){this.searchInput.value="",this.hasSearch?(Z.Z.remove(this.searchCntr,"hidden"),this.own((0,w.Z)(this.searchInput,"keypress",(function(t){t.stopPropagation()}))),this.own((0,w.Z)(this.searchInput,"keydown",(function(t){t.stopPropagation()}))),this.own((0,w.Z)(this.searchInput,"keyup",C.Z.hitch(this,"onSearch")))):Z.Z.add(this.searchCntr,"hidden")},showSearch(){Z.Z.add(this.searchCntr,"MatcListSearchVisible");var t=this;setTimeout((function(){t.searchInput.focus()}),10)},onSearch(t){t.stopPropagation(),this.cleanUp(),this.onBeforeResize();let e=this.searchInput.value;if(e&&e.length>=2){e=e.toLowerCase();const t=[];for(let s=0;s<this.value.length;s++){const i=this.value[s];let a=!1;for(let s=0;s<this.searchFields.length;s++){const n=this.searchFields[s],o=i[n];!a&&o&&o.indexOf&&o.toLowerCase().indexOf(e)>=0&&(t.push(i),a=!0)}}this.render(t),0===t.length&&Z.Z.add(this.searchCntr,"MatcListSearchVisible")}else this.onBeforeResize(),this.render(this.value)},initListeners(){},async load(){if(this.pub){let t=await r.Z.getModelService().findPublicSummaries();this.setLoadingPreview(t)}else{let t=await r.Z.getModelService().findMyAppSummaries();this.setLoadingPreview(t)}},async setLoadingPreview(t){if(this.log.log(0,"setLoadingPreview","enter > "+t.length),t.sort(((t,e)=>e.lastUpdate-t.lastUpdate)),t=this.filterApps(t),this.value=t,this.render(t,this.animate),Z.Z.add(this.domNode,"MatcAppListLoading"),this.pub){let t=await r.Z.getModelService().findPublic();this.setApps(t)}else{let t=await r.Z.getModelService().findMyApps();this.setApps(t)}},setApps(t){this.log.log(0,"setApps","enter > "+t.length),t.sort((function(t,e){return e.lastUpdate-t.lastUpdate})),t=this.filterApps(t),this.value=t;for(let e=0;e<t.length;e++){let s=t[e];this.widgets[e]&&(this.widgets[e].loadingMessage="No Start Screen!",this.widgets[e].setModel(s))}Z.Z.remove(this.domNode,"MatcAppListLoading"),this._list=t},filterApps(t){const e=[];for(let s=0;s<t.length;s++){let i=t[s];i.isDeleted?console.warn("Filter deleted app",i):e.push(i)}return e},setValue(t){t.sort(((t,e)=>e.lastUpdate-t.lastUpdate)),this.value=t,this.render(t,!1)},renderItem(t,e,s){this.widgets||(this.widgets={});const i=document.createElement("a");t.appendChild(i),t=i,Z.Z.add(t,"MatcAppListItem MatcContentBox MatcAppListBox");const a=this.createScreenWidget(e);if(a){if(this.hasStackView){var n=document.createElement("div");Z.Z.add(n,"MatcAppListStack"),t.appendChild(n)}const o=document.createElement("div");Z.Z.add(o,"MatcPreviewWrapper MatcPreviewWrapperLoadable"),this.setPreviewWrapperSize(o),a.loadingMessage="Loading...",t.appendChild(o),a.placeAt(o),this.widgets[s]=a,this.setMethod(i,e)}this.renderDescription(e,t),this.hasSelect&&this.tempOwn((0,w.Z)(i,"click",(()=>{this.$emit("select",e)})))},setPreviewWrapperSize(t){if(this.resizePreview){var e=this.colWidth/this.model.screenSize.w;let s=Math.min(Math.round(this.model.screenSize.h*e),.616*this.colWidth);t.style.height=s+"px"}},renderPopover(t){var e=document.createElement("span");Z.Z.add(e," MatcPopoverBtn MatcVerticleCenter"),e.innerHTML=this.popoverButtonLabel,t.appendChild(e)},renderDescription(t,e){const s=document.createElement("div");Z.Z.add(s,"MatcListItemDescription");const i=document.createElement("div");Z.Z.add(i,"MatcListItemDescriptionTop"),s.appendChild(i);const a=document.createElement("h3");if(a.innerText=this.getDescription(t),i.appendChild(a),this.popover){const e=document.createElement("div");e.innerText="...",Z.Z.add(e,"MatcListItemDescriptionDots"),i.appendChild(e);const s=document.createElement("div");Z.Z.add(s,"MatcListItemDescriptionMenu"),e.appendChild(s);const a=document.createElement("div");a.innerHTML=this.getNLS("btn.share"),s.appendChild(a),this.own((0,w.Z)(a,"click",(e=>this.onShare(e,t))));const n=document.createElement("div");n.innerHTML=this.getNLS("btn.rename"),s.appendChild(n),this.own((0,w.Z)(n,"click",(e=>this.onRename(e,t))));const o=document.createElement("div");o.innerHTML=this.getNLS("btn.delete"),s.appendChild(o),this.own((0,w.Z)(o,"click",(e=>this.onDelete(e,t))))}const n=document.createElement("p");n.innerText=this.getNLS("app.lastEdit")+": "+this.formatDate(t.lastUpdate,!0),s.appendChild(n);const o=document.createElement("p");o.innerText=(t.sessionCount?t.sessionCount:0)+" "+this.getNLS("app.numberTests"),s.appendChild(o),e.appendChild(s)},async onShare(t,e){this.stopEvent(t);const s=await r.Z.getModelService().findInvitation(e.id),i=Object.entries(s).find((t=>1===t[1]))[0],a=this.db.div("MatcDialog MatcInfitationDialog MatcInfitationDialogLarge MatcPadding").build();let n=this.db.div("container").build(a),o=this.db.div("row").build(n),l=this.db.div("col-md-12").build(o);this.db.h3("",this.getNLS("share.Headline")).build(l);const c=this.$new(U.Z);c.placeAt(l),c.setInvitation(i),c.setPublic(this.pub),o=this.db.div("row MatcMarginTop").build(n),l=this.db.div("col-md-12 MatcButtonBar").build(o);let h=this.db.div("MatcButton","Close").build(l);const d=new b.Z;d.own((0,w.Z)(h,"click",C.Z.hitch(d,"close"))),d.popup(a,t.target)},onDelete(t,e){this.stopEvent(t);const s=this.db.div("MatcDeleteDialog").build();this.db.h3("title is-4","Delete Prototype").build(s),this.db.p("MatcMarginBottomXL",`Do you want to delete the '${e.name}' prototype?`).build(s);const i=this.db.div("MatcButtonBar").build(s),a=this.db.a("MatcButton MatcButtonDanger",this.getNLS("btn.delete")).build(i),n=this.db.a("MatcLinkButton",this.getNLS("btn.cancel")).build(i),o=new b.Z;o.own((0,w.Z)(a,"click",(()=>this.deleteApp(o,e)))),o.own((0,w.Z)(n,"click",(()=>o.close()))),o.popup(s,t.target)},async deleteApp(t,e){await r.Z.getModelService().deleteApp(e),t.close();const s=this.value.filter((t=>t.id!==e.id));this.cleanUp(),this.onBeforeResize(),this.render(s)},onRename(t,e){this.stopEvent(t);const s=this.db.div("MatcDeleteDialog").build();this.db.h3("title is-4","Rename Prototype").build(s);var i=this.db.div("MatcMarginBottomXL").input("form-control input-lg MatcIgnoreOnKeyPress",e.name,"Name of the prototype").build(s);const a=this.db.div("MatcButtonBar").build(s),n=this.db.a("MatcButton",this.getNLS("btn.rename")).build(a),o=this.db.a("MatcLinkButton",this.getNLS("btn.cancel")).build(a),r=new b.Z;r.own((0,w.Z)(n,"click",(()=>this.renameApp(r,e,i)))),r.own((0,w.Z)(o,"click",(()=>r.close()))),r.popup(s,t.target)},async renameApp(t,e,s){let i=await r.Z.getModelService().updateAppProps(e.id,{id:e.id,name:s.value});t.close(),"ok"===i.status?this.showSuccess("Name was saved..."):this.showError("Oooppps, Could not change the name. Try again!");const a=this.value.find((t=>t.id===e.id));a&&(a.name=s.value),this.cleanUp(),this.onBeforeResize(),this.render(this.value)},formatDate(t,e){return y.p6(t,e)},onBeforeResize(){if(this.log.log(4,"onBeforeResize","enter"),this.widgets)for(let t=0;t<this.widgets.length;t++)this.widgets[t].destroy();this.widgets=[]},createScreenWidget(){let t=this.$new(R.Z);return t.mode="preview",t.isFillBackground=!0,t.setPublic(this.pub),t.setJwtToken(this.jwtToken),t},setMethod(t,e){this.pub?t.href="#/examples/"+e.id+".html":this.isMobile?t.href="#/test/mobile/"+e.id+".html":t.href="#/apps/"+e.id+".html"},getDescription(t){let e="";return t.name&&(e+=this.stripHTML(t.name)),e},onRenderDone(t){for(let e=0;e<t.length;e++){let s=t[e];this.widgets[e]&&this.widgets[e].setModel(s)}}},mounted(){this.db=new S.Z,this.log=new n.Z("AppList"),this.log.log(2,"mounted","enter"),this.load()}},K=Q,J=(0,p.Z)(K,L,B,!1,null,null,null),Y=J.exports,tt=s(19519),et={name:"AppScreenList",mixins:[Y,D.Z,o.Z],props:["app","pub"],data:function(){return{model:null,add:!1,hasSearch:!1,popoverButtonLabel:"Design",maxElementsToRender:20,resizePreview:!1,isPublic:!1,hasStackView:!1,animate:!1}},components:{},computed:{screenType(){return this.model?this.model.type:""}},methods:{load(){this.jwtToken=r.Z.getUserService().getToken(),this.app?this.setValue(this.app):console.warn("ScreenList.load() > No app")},setValue(t){this.model=t,this.value=this.getScreens(),0==this.value.length&&(this.add=!0),this.render(this.value,this.animate)},setInvitation(t){this.hash=t},setMethod(t,e){this.pub?t.href="#/examples/"+this.model.id+"/design/"+e.id+".html":t.href="#/apps/"+this.model.id+"/design/"+e.id+".html"},onTest(t,e){this.stopEvent(e),this.emit("test",t)},renderDefault(){const t=document.createElement("a");Z.Z.add(t,"MatcAppListItem MatcContentBox MatcAppListBox");const e=document.createElement("div");Z.Z.add(e,"MatcPreviewWrapper MatcPreviewWrapperLoadable"),t.appendChild(e),this.setPreviewWrapperSize(e);const s=document.createElement("div");Z.Z.add(s,"MatcAppListAdd"),e.appendChild(s);const i=document.createElement("span");return Z.Z.add(i,"mdi mdi-border-color"),s.appendChild((0,tt.X)("Plus","",64,64)),t.href="#/apps/"+this.model.id+"/design/start.html",t},createScreenWidget(){var t=this.$new(R.Z);return t.isFillBackground=!0,t.setJwtToken(this.jwtToken),t.setPublic(this.pub),this.hash&&t.setInvitation(this.hash),t},renderDescription(t,e){var s=this.getDescription(t),i=document.createElement("p");i.innerHTML=s,Z.Z.add(i,"MatcListItemDescription"),e.appendChild(i)},getDescription(t){var e="";return t.name?e+=t.name:e+="Click to edit",e},onRenderDone(){try{for(let t=0;t<this.value.length;t++){const e=this.value[t];this.widgets[t]&&this.widgets[t].setModel(this.model,e?.id)}}catch(t){console.error(t)}}},mounted(){}},st=et,it=(0,p.Z)(st,_,T,!1,null,null,null),at=it.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["MatcAutoTextArea",{MatcAutoTextAreaInline:t.inline}]},[s("div",{staticClass:"MatcAutoTextAreaHidden"},[t._v(t._s(t.label))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.label,expression:"label"}],domProps:{value:t.label},on:{blur:t.onBlur,input:function(e){e.target.composing||(t.label=e.target.value)}}})])},ot=[],rt={name:"AutoTextArea",props:["value","inline"],mixins:[],data:function(){return{label:""}},components:{},computed:{},methods:{onBlur(){this.label.trim()!==this.value&&this.$emit("blur",this.label.trim())}},watch:{value(t){this.label=t}},async mounted(){this.label=this.value}},lt=rt,ct=(0,p.Z)(lt,nt,ot,!1,null,null,null),ht=ct.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTest MatcLayout"},[t._e(),s("section",{attrs:{"data-dojo-attach-point":"sectionDes"}},[s("div",{staticClass:"box is-shadowless "},[s("h3",{staticClass:"title"},[t._v(" "+t._s(t.getNLS("testSettingsHeader"))+" "),s("HelpButton",{attrs:{topic:"testing",subtopic:"testing.landing",hasNotifications:!1}})],1),s("div",{staticClass:"MatcLayoutCols mb-32"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.test.description,expression:"test.description"}],staticClass:"form-control MatcTextAreaMedium MatcLayoutColGrow",attrs:{"data-gramm_editor":"false",placeholder:"Enter here a welcome message for your testers."},domProps:{value:t.test.description},on:{change:t.onTestChange,input:function(e){e.target.composing||t.$set(t.test,"description",e.target.value)}}}),s("div",{staticClass:"MatcLayoutCol3"},[s("div",{class:["MatUploader MatUploaderDropZone",{MatUploaderDropZoneHover:t.hasDragOver},{MatUploaderHasFile:t.hasSplash}],on:{dragenter:t.onDragEnter,dragleave:t.onDragLeave,drop:t.onDrop}},[t.hasSplash?s("div",{staticClass:"MatUploaderPreview",style:"background-image:url("+t.splashUrl+")"},[s("span",{staticClass:"MatUploaderPreviewRemove mdi mdi-close-circle",on:{click:t.onRemoveSplash}})]):s("div",{staticClass:"MatcHint"},[t._v(t._s(t.splashMessage))]),t.hasSplash?t._e():s("input",{attrs:{type:"file"},on:{change:t.onFileChanged}})])])]),s("div",{staticClass:"form-group "},[s("CheckBox",{attrs:{value:t.test.recordOneTestPerUser,label:t.getNLS("testSettingsRecordOneTestPerUser")},on:{change:t.setRecordOnePerUser}})],1)])]),s("section",{attrs:{"data-dojo-attach-point":"sectionTask"}},[s("div",{staticClass:"box is-shadowless"},[s("h3",{staticClass:"title",attrs:{"data-nls":"testSettingsTasks"}},[t._v("Tasks "),s("HelpButton",{attrs:{topic:"testing",subtopic:"testing.tasks",hasNotifications:!1}})],1),s("TestSettings",{attrs:{pub:t.pub,test:t.test,app:t.app,hash:t.hash},on:{change:t.onTaskChange}})],1)]),s("section",{},[s("div",{staticClass:"box is-shadowless"},[s("h3",{staticClass:"title"},[t._v("Screen Recordings")]),s("div",{ref:"sessionCntr",staticClass:"MatcDashTable"})])])])},ut=[],pt=s(77907),mt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},gt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vommondBulletGraph"},[s("div",{staticClass:"vommondBulletGraphContainer",attrs:{"data-dojo-attach-point":"cntr"}}),s("div",{staticClass:"vommondBulletGraphHelp",attrs:{"data-dojo-attach-point":"help"}})])}],vt=s(27519),ft=s(17994),bt={name:"BulletGraph",mixins:[vt.Z,ft.Z,o.Z],props:["value","sections"],data:function(){return{max:40,barFullHeigh:!0}},components:{},methods:{postCreate:function(){this.barFullHeigh&&Z.Z.add(this.domNode,"vommondBulletGraphColor")},setSections:function(t){t.sort((function(t,e){return e.value-t.value}));for(var e=new S.Z,s=0;s<t.length;s++){var i=t[s],a=e.div("vommondBulletGraphSection vommondBulletGraphSection"+s).build(this.cntr);a.style.width=Math.round(i.value/this.max*100)+"%",i.background&&(a.style.background=i.color);var n=e.span("vommondLegendBarItem").build(a),o=e.div("vommondLegendBarItemLabel",i.value).build(n);this.addTooltip(o,i.label)}this.sections=t},setLabel:function(t){this.bar.innerHTML="";var e=document.createElement("div");if(Z.Z.add(e,"vommondBulletGraphBarLbl"),this.value/this.max<.05&&Z.Z.add(e,"vommondBulletGraphBarLblRight"),e.innerHTML=t,!this.bar){var s=new S.Z;this.bar=s.div("vommondBulletGraphBar").build(this.cntr)}this.bar.appendChild(e)},showHint:function(t){this.help.textContent=t.label},hideHint:function(){this.help.textContent=""},setValue:function(t){if(!this.bar){var e=new S.Z;this.bar=e.div("vommondBulletGraphBar").build(this.cntr)}if(isNaN(t)&&(t=0),this.bar.style.width=Math.min(100,Math.round(t/this.max*100))+"%",this.value=t,this.color){let e=Math.min(t/this.max,1);this.invertColors&&(e=1-e),this.bar.style.background=this.greenToRed(e)}else{var s=this.getSectionColor(t);s&&(this.bar.style.background=s)}},getSectionColor:function(t){for(var e=null,s=0;s<this.sections.length;s++){var i=this.sections[s];if(e=i.color,t>=i.value)break}return e}},watch:{value(t){this.value=t,this.setValue(this.value),this.setLabel(this.value)}},mounted(){this.sections&&this.setSections(this.sections),this.value&&(this.setValue(this.value),this.setLabel(this.value))}},wt=bt,Ct=(0,p.Z)(wt,mt,gt,!1,null,null,null),Mt=Ct.exports,St=s(6366),yt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_t=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vommondTable"},[s("div",{staticClass:"MatcLoading"},[t._v("Loading...")])])}],Tt={name:"Table",mixins:[o.Z],data:function(){return{itemsPerPage:100,itemPointer:0,isSortable:!0,order:!0,hasPaging:!1,totalCount:0,columns:null,actions:null,rows:[],actionLabel:"Action"}},components:{},methods:{postCreate:function(){this.logger=new n.Z("Table"),this.logger.log(2,"constructor","entry"),this.actionLabel=this.getNLS("table.action")},setColumns:function(t){this.columns=t},setPaging:function(t){this.hasPaging=t},setPagingSize:function(t){this.itemsPerPage=t},setActions:function(t){this.actions=t},setValue:function(t){this.logger.log(8,"setValue","entry"),this.rows=t,this.totalCount=t.length,this.render(),this.logger.log(10,"setValue","exit")},render:function(){this.logger.log(2,"_refresh","entry > pos : "+this.itemPointer+" _sortBy : "+this.sortBy),this.cleanUpTempListener(),this.domNode.innerHTML="";var t=new S.Z,e=t.table("table is-hoverable").build();this.renderHeader(e,t),this.renderBody(e,t),this.domNode.appendChild(e),this.hasPaging&&this.createPagging()},renderHeader:function(t,e){for(var s=e.element("thead").build(t),i=e.element("tr").build(s),a=0;a<this.columns.length;a++){var n=this.columns[a],o=e.td().build(i);n.width&&(o.style.width=n.width+"%");var r=n.label;if(this.isSortable){var l=e.a("",r).build(o);this.tempOwn((0,w.Z)(l,M.Z.press,C.Z.hitch(this,"_sort",n)));var c=e.span("vommondTableSortSymbol").build(o);this.sortBy==n.query?this.order?c.innerHTML='<span class="mdi mdi-chevron-up"></span>':c.innerHTML='<span class="mdi mdi-chevron-down"></span':c.innerHTML=" "}else o.innerHTML=r}this.actions&&e.td("action",this.actionLabel).build(i)},renderBody:function(t,e){this.logger.log(2,"createDataRows","entry ");var s=e.element("tbody").build(t),i=0,a=this;this.rows.forEach((function(t){a.renderRow(t,s,i,e),i++}))},renderRow:function(t,e,s,i){this.logger.log(4,"renderRow","entry ");let a=i.element("tr","dataRow").build(e);s%2==0&&Z.Z.add(a,"evenRow");for(let n=0;n<this.columns.length;n++){let e=this.columns[n],s=i.td(e.css,"").build(a);if(e.edit){let a=i.input("vommondInlineEdit").build(s);this.setInputValue(a,t,e),this.tempOwn((0,w.Z)(a,"change",C.Z.hitch(e,"edit",a,t,n)))}else this.setTDValue(s,t,e)}if(this.actions){let e=i.td("action").build(a);for(let a=0;a<this.actions.length;a++){let n=this.actions[a];if(n.render)n.render(e,t,s);else{let a=i.a(n.css,n.label).build(e);n.icon&&a.appendChild((0,tt.X)(n.icon)),n.callback&&this.tempOwn((0,w.Z)(a,M.Z.press,C.Z.hitch(n,"callback",t,s,e)))}}}},setTDValue:function(t,e,s){if(s.fct)s.fct(t,e,s.query);else{var i=e[s.query];null!=i&&void 0!=i||(i="-"),t.innerHTML=i+" ",s.suffix&&(t.innerHTML+=s.suffix)}},setInputValue:function(t,e,s){s.fct?s.fct(t,e,s.query):t.value=e[s.query]+" "},createPagging:function(){if(this.logger.log(-3,"createPagging","entry > total : "+this.totalCount+" >  page : "+this.itemsPerPage+" > current:  "+this.itemPointer),this.totalCount>this.itemsPerPage){var t=document.createElement("div");Z.Z.add(t,"pagination pagination-small");var e=document.createElement("ul");t.appendChild(e);for(var s=Math.ceil(this._totalCount/this.itemsPerPage),i=0;i<s;i++){let t=document.createElement("li");if(e.appendChild(t),t.innerHTML=i+1+"",i*this.itemsPerPage==this.itemPointer)Z.Z.add(t,"active");else{var a=(0,w.Z)(t,"click",C.Z.hitch(this,"setPos",i*this.itemsPerPage));this.tempOwn(a)}}this.domNode.appendChild(t)}},setPos:function(t){this.logger.log(3,"setPos","entry > pos : "+t),t!=this.itemPointer&&(this.itemPointer=t,this._updateRows(),this._refresh())},onBackward:function(t){this.logger.log(3,"onBackward","entry"),this.stopEvent(t),this.itemPointer=Math.max(this.itemPointer-this.itemsPerPage,0),this._updateRows(),this._refresh()},onForward:function(t){this.logger.log(3,"onForward","entry > currentPos : "+this.itemPointer+">  newPos : "+(this.itemPointer+this.itemsPerPage)),this.stopEvent(t),this.itemPointer=this.itemPointer+this.itemsPerPage,this._updateRows(),this._refresh()},_sort:function(t){this.order=!this.order,this.sortBy=t.query,this._updateRows(),this.render()},_updateRows:function(){let t=this.sortBy,e=this.order?1:-1;this.rows=this.rows.sort(((s,i)=>{let a=s[t],n=i[t];return a.localeCompare&&n.localeCompare?e*a.localeCompare(n):e*(a-n)}))},_refresh:function(){this.render()},sort:function(){this._updateRows()},destroy:function(){}},mounted(){}},Zt=Tt,Dt=(0,p.Z)(Zt,yt,_t,!1,null,null,null),Lt=Dt.exports,Bt=s(21200),kt=s(36220),xt=s(65454),$t={name:"Test",mixins:[o.Z,I.Z,D.Z],props:["app","test","annotation","events","hash"],data:function(){return{sessionCount:10,hasDragOver:!1,isUploading:!1,hasComments:!1,bulletGraphSection:[{value:5,color:"#f83a3a",label:"Jakob Nielsen argues that 5 testers are needed to uncover 85% of all errors in an qualitative usababilty study."},{value:10,color:"#ffb61c",label:"Hwang & Salvendy suggest the 10+-2 rule as a good sample size."},{value:20,color:"#83b600",label:"Accoring to Jakob Nielsen 20 testers are required to get statistically valid results."}]}},components:{BulletGraph:Mt,TestSettings:St.Z,HelpButton:kt.Z,CheckBox:xt.Z},computed:{pub(){return this.$route.meta&&this.$route.meta.isPublic},urlPrefix(){return this.pub?"examples":"apps"},hasSplash(){return this.test&&this.test.splash},splashUrl(){return this.test&&this.test.splash?"/rest/images/"+this.hash+"/"+this.test.splash.url:""},splashMessage(){return this.isUploading?this.getNLS("test.splash.uploading"):this.getNLS("test.splash.upload")}},methods:{onDragEnter(){this.hasDragOver=!0},onDragLeave(){this.hasDragOver=!1},onDrop(t){this.logger.log(-1,"onDrop","enter",t),t.stopPropagation(),t.preventDefault();let e=t.dataTransfer.files;this.hasDragOver=!1,this.uploadSplash(e)},onFileChanged(t){let e=t.target.files;this.uploadSplash(e)},async uploadSplash(t){if(this.logger.log(-1,"onDrop","enter",t),1===t.length){this.isUploading=!0;let e=t[0],s="/rest/images/"+this.app.id+"?resize=false",i=new FormData;i.append("file",e);let a=await this.imageService.upload(s,i);a=JSON.parse(a),a.uploads&&1===a.uploads.length&&(this.test.splash=a.uploads[0],this.onTestChange()),this.isUploading=!1}else this.showError("Upload single image")},async onRemoveSplash(){this.test.splash&&await this.imageService.delete(this.app,this.test.splash),delete this.test.splash,this.onTestChange()},onTaskChange(t){this.$emit("change",C.Z.clone(t))},setRecordOnePerUser(t){this.test.recordOneTestPerUser=t,this.onTestChange()},async onTestChange(){if(this.pub)this.showSuccess("Saved");else{const t=await this.modelService.saveTestSettings(this.app.id,this.test);"ok"===t.status?(this.showSuccess("Saved"),this.$emit("change",C.Z.clone(this.test))):this.showError("Could not save test settings")}},showBullet(){this.logger.log(-2,"show","entry >");const t=new pt.Z(this.events);this.sessionCount=t.unique("session"),this.logger.log(0,"show","exit",this.sessionCount)},showSessions(){this.logger.log(-1,"showSessions","enter "+this.planGetTestCount());const t=this.app,e=this._getTestList(C.Z.clone(this.events),this.annotation,this.test),s=this.urlPrefix,i=this.$new(Lt);i.setColumns([{query:"id",label:"#"},{query:"status",label:this.getNLS("videoTableStatus")},{query:"taskPerformance",label:"Successful Tasks",fct:function(t,e){var s=e.taskNames;let i=document.createElement("div");if(Z.Z.add(i,"MatcTagCntr"),s&&s.length>0)for(var a=0;a<s.length;a++){var n=document.createElement("span");Z.Z.add(n,"tag"),n.innerHTML=s[a],i.appendChild(n)}else t.innerHTML="-";t.appendChild(i)}},{query:"duration",label:this.getNLS("videoTableDuration"),fct:(t,e)=>{t.innerHTML=e.duration+" sec"}},{query:"date",label:this.getNLS("videoTableDate")}]),i.setActions([{render:(e,i)=>{const a=document.createElement("div");a.style.width="140px",a.style.display="inline-block",e.appendChild(a);const n=document.createElement("a");n.href="#/"+s+"/"+t.id+"/replay/"+i.session+".html",Z.Z.add(n,"MatcButton MatcButtonSecondary MatcButtonXXS"),n.appendChild((0,tt.X)("PlayVideo")),a.appendChild(n);const o=document.createElement("a");this.own((0,w.Z)(o,"click",(t=>this.showDeleteSessionDialog(t,i)))),Z.Z.add(o,"MatcButton MatcButtonDanger MatcButtonXXS MatcButtonSecondary"),o.appendChild((0,tt.X)("DeleteTrash")),a.appendChild(o)}}]),this.$refs.sessionCntr.innerHTML="",i.placeAt(this.$refs.sessionCntr),i.setValue(e)},showDeleteSessionDialog(t,e){this.logger.log(1,"showDeleteSessionDialog","enter >",e.session);const s=new S.Z,i=s.div("MatcDeleteDialog").build();s.h3("title is-4","Delete Test").build(i),s.p("MatcMarginBottomXL","Do you want to delete the test? You will loose all data related to this test!").build(i);const a=s.div("MatcButtonBar").build(i),n=s.a("MatcButton MatcButtonDanger",this.getNLS("btn.delete")).build(a),o=s.a("MatcLinkButton",this.getNLS("btn.cancel")).build(a),r=new b.Z;r.own((0,w.Z)(n,M.Z.press,C.Z.hitch(this,"deleteSession",e,r))),r.own((0,w.Z)(o,M.Z.press,C.Z.hitch(r,"close"))),r.popup(i,t.target)},async deleteSession(t,e){this.logger.log(1,"deleteSession","enter >",t.session),this.pub||(await this.modelService.deleteEventsBySession(this.app.id,t.session),this.showSuccess("Test deleted"),this.$emit("reloadEvents")),e.close()},_getTestList(t,e,s){const i=[];s.tasks||(s.tasks=[]);const a=new pt.Z(t);a.sortBy("time");const n=a.groupBy("session"),o=n.data,r=new pt.Z(e).groupBy("reference"),l=this.getActionEvents(new pt.Z(t)),c=new Bt.Z,h=s.tasks.length,d=c.getMergedTaskPerformance(l,s.tasks,e),u=d.count("session"),p=c.getSuccessTaskNames(d,s.tasks);let m=1;for(let g in o){const t=o[g],e=this.formatDate(t.min("time")),s=r.get(g);let a='<span class="MatchDashStatusSuccess">Valid</span>',n=!0;s&&(n=s.get(0).get("isValid"),n||(a='<span class="MatchDashStatusFailure">Ignore</span>'));let l=t.data&&t.data.length>0?t.data[0].user:"-";l&&l.name&&(l=l.name);let c=u.get(g);c||(c=0);const d=this.getActionEvents(new pt.Z(t.data)),v={session:g,user:l,taskPerformance:c+" / "+h,taskNames:p[g],duration:Math.ceil((t.max("time")-t.min("time"))/1e3),date:e,start:t.min("time"),size:d.size(),status:a,isValid:n,id:m,screens:t.unique("screen")};i.push(v),m++}return i.sort(((t,e)=>t.id-e.id)),i}},watch:{test(t){this.logger.info("watch","test >",t),this.test=t},events(t){this.logger.info("watch","events >",t),this.events=t,this.showBullet(),this.showSessions()}},async mounted(){this.logger=new n.Z("Test"),this.modelService=r.Z.getModelService(this.$route),this.imageService=r.Z.getImageService(),this.showBullet(),this.showSessions(),this.logger.info("mounted","exit")}},At=$t,Pt=(0,p.Z)(At,dt,ut,!1,null,null,null),Et=Pt.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTest"},[t._e(),s("section",{attrs:{"data-dojo-attach-point":"sectionTask"}},[s("div",{staticClass:"box is-shadowless"},[s("AnalyticTaskList",{attrs:{hash:t.hash,pub:t.pub,test:t.test,app:t.app,events:t.events,annotation:t.annotation},on:{change:t.onTaskChange}})],1)]),s("section",{attrs:{"data-dojo-attach-point":"sectionScatter"}},[s("div",{staticClass:"box is-shadowless"},[s("DistributionSection",{attrs:{pub:t.pub,test:t.test,app:t.app,events:t.events,annotation:t.annotation}})],1)]),s("section",{attrs:{"data-dojo-attach-point":"sectionTask"}},[s("div",{staticClass:"box is-shadowless"},[s("SurveySection",{attrs:{pub:t.pub,test:t.test,app:t.app,events:t.events,annotation:t.annotation}})],1)])])},It=[],Rt=s(77161),Vt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ut=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns has-text-centered mt-16 "},[s("div",{staticClass:"column mb-32"},[s("div",{attrs:{"data-dojo-attach-point":"userContainer"}})]),s("div",{staticClass:"column mb-32"},[s("div",{attrs:{"data-dojo-attach-point":"coverageContainer"}})]),s("div",{staticClass:"column mb-32"},[s("div",{attrs:{"data-dojo-attach-point":"durContainer"}})])])}],Ht=s(59947),Ot={name:"AnalyticsHeader",mixins:[o.Z,D.Z],props:["value"],data:function(){return{size:200,width:10}},components:{},methods:{postCreate(){this.log=new n.Z("AnalyticsHeader"),this.userRing=this.$new(Ht.Z,{width:this.width,size:this.size,color:this.RING_FOREGROUND,backgroundColor:this.RING_BACKGROUND}),this.userRing.setLabel(this.getNLS("analytics.header.user")),this.userRing.setValue(0),this.userRing.setPs(0),this.userRing.placeAt(this.userContainer),this.covRing=this.$new(Ht.Z,{width:this.width,size:this.size,color:this.RING_FOREGROUND,backgroundColor:this.RING_BACKGROUND}),this.covRing.setLabel(this.getNLS("analytics.header.coverage")),this.covRing.setValue(0),this.covRing.setPs(0),this.covRing.placeAt(this.coverageContainer);var t=new S.Z,e=t.div("MatcDashNumberContainer").build(this.durContainer);t.div("MatcDashLabel",this.getNLS("analytics.header.duration")).build(e),this.durLabel=t.div("MatcDashNumber","0 ").build(e),this.durSTDLabel=t.div("MatcDashLabelHint","+/- 0").build(e),this.log.log(0,"postCreate","exit")},setUser(t,e){this.userRing.setValue(t),this.userRing.setPs(e)},setDuration(t,e){this.durLabel.innerHTML=t+"s",this.durSTDLabel.innerHTML="+/- "+e},setCovergae(t){this.covRing.setValue(Math.round(100*t)+"%"),this.covRing.setPs(t)},setValue(t){this.log.log(0,"setValue","exit",t),this.setUser(t.sessionCount,t.sessionPercentage),this.setDuration(t.sessionDurationMean,t.sessionDurationStd),this.setCovergae(t.expRate)}},watch:{value(t){this.value=t,this.setValue(t)}},mounted(){this.value&&this.setValue(this.value)}},zt=Ot,Ft=(0,p.Z)(zt,Vt,Ut,!1,null,null,null),Xt=Ft.exports,Wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTestSettings MatcDashTable"},[s("div",{attrs:{"data-dojo-attach-point":"sectionTask"}},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("h3",{staticClass:"title level-item"},[s("span",{attrs:{"data-nls":"testSettingsTasks"}},[t._v(t._s(t.$t("analytic-task-list.header")))]),s("HelpButton",{attrs:{topic:"analytics.tasks",subtopic:"analytics.tasks.create",hasNotifications:!1}})],1)]),s("div",{staticClass:"level-right"},[s("a",{staticClass:"MatcButton MatcButtonSecondary MatcButtonXS",attrs:{"data-nls":"btn.download"},on:{click:t.downloadCVS}},[t._v(t._s(t.$t("analytic-task-list.download")))])])]),s("div",{attrs:{"data-dojo-attach-point":"tableCntr"}})])])},jt=[],qt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Gt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"VommondProgress"},[s("div",{staticClass:"VommondProgressContainer",attrs:{"data-dojo-attach-point":"cntr"}},[s("div",{staticClass:"VommondProgressBar",attrs:{"data-dojo-attach-point":"bar"}})])])}],Qt={name:"ProgressBar",mixins:[vt.Z,o.Z],data:function(){return{value:0,max:1,min:0,hasLabel:!1,color:!1,invertColors:!1}},components:{},methods:{postCreate(){},startup(){},setMax(t){this.max=t},setLabel(t){const e=document.createElement("div");Z.Z.add(e,"VommondProgressBarLabel"),this.value<.1&&Z.Z.add(e,"VommondProgressBarLabelRight"),e.innerHTML=t,this.bar.appendChild(e)},onDomPress(t){this.stopEvent(t),this.onClick(t)},cleanup(){},setValue(t){isNaN(t)&&(t=0),this.bar.style.width=100*t+"%",!0===this.color&&(this.invertColors&&(t=1-t),this.bar.style.background=this.greenToRed(t)),this.value=t}},mounted(){}},Kt=Qt,Jt=(0,p.Z)(Kt,qt,Gt,!1,null,null,null),Yt=Jt.exports,te=s(43285),ee={name:"AnalyticsTaskList",mixins:[St.Z,o.Z],props:["hash"],data:function(){return{appID:"",userID:"",mode:"private",colWidths:[3,3,3,3],details:!1,downloadFileName:"Task_Summary.csv",BINS:10}},components:{HelpButton:kt.Z},computed:{df(){let t=this.filterEvents(this.events,this.annotation);var e=this.getActionEvents(new pt.Z(t));t=e.as_array();var s=new pt.Z(t);return s.sortBy("time"),s}},methods:{postCreate(){this.logger=new n.Z("AnalyticsTaskList"),this.logger.log(0,"postCreate","enter > "+this.app.id),this.db=new S.Z,this.render()},downloadCVS(){var t="Name,Start, Success,Duration (Mean),Duration (Median), Duration (STD),Events (Mean), Events (STD)\n";const e=this.test.tasks,s=new Bt.Z,i=s.getTaskPerformance(this.df,e),a=s.getTaskSummary(this.df,e,this.annotation);for(let o=0;o<a.length;o++){const e=a[o];t+=e.label+",",t+=e.startCount+" / "+e.sessionCount+",",t+=e.value+" / "+e.sessionCount+",",t+=this.formatNumber(e.durationMean/1e3)+",",t+=this.formatNumber(e.durationMedian/1e3)+",",t+=this.formatNumber(e.durationStd/1e3)+",",t+=this.formatNumber(e.countMean)+",",t+=this.formatNumber(e.countStd)+"",t+="\n"}t+="\n\n\n\n",t+="Test, Task, Interactions, Duration\n",i.foreach((e=>{t+=e["session"]+",",t+=e["taskName"]+",",t+=e["interactions"]+",",t+=this.formatNumber(e["duration"]/1e3)+"",t+="\n"}));const n=new Blob([t],{type:"text/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(n,this.downloadFileName);else{const t=window.document.createElement("a");t.href=window.URL.createObjectURL(n),t.download=this.downloadFileName,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},render(){if(this.cleanUpTempListener(),this.tableCntr.innerHTML="",this.details?Z.Z.add(this.addBTN,"hidden"):Z.Z.remove(this.addBTN,"hidden"),this.test.tasks.length>0)this.renderTaskTable(),Z.Z.remove(this.downLoadBtn,"hidden");else{var t=this.db.div("MatcHint MatcMarginBottom").build(this.tableCntr);t.innerHTML=this.getNLS("dashTaskEmpty"),Z.Z.add(this.downLoadBtn,"hidden")}},renderTaskTable(){var t=new S.Z,e=t.div("columns").build(this.tableCntr),s=t.div("column").build(e),i=this.test.tasks,a=new Bt.Z,n=a.getTaskSummary(this.df,i,this.annotation),o=this,r=this.$new(Lt);r.actionLabel="Details",r.setColumns([{query:"label",label:this.getNLS("dashTaskTableName"),width:20},{query:"startCount",label:this.getNLS("dashTaskTableStart"),fct:function(t,e){Z.Z.add(t,"MatcDashTableTdHint MatcDashTableLabels"),t.innerHTML=e.startCount+" / "+e.sessionCount},width:10},{query:"success",label:this.getNLS("dashTaskTableSuccess"),fct:function(t,e){Z.Z.add(t,"MatcDashBigTable");var s=o.$new(Yt);s.color=o.PROGRESS_COLOR,s.placeAt(t),s.setValue(e.p),s.setLabel(e.value+" / "+e.startCount)},width:20},{query:"success",label:"",fct:function(t,e){Z.Z.add(t,"MatcDashTableTdHint MatcDashTableLabels"),t.innerHTML="("+Math.round(100*e.p)+"%)"},width:10},{query:"durationMean",label:this.getNLS("dashTaskTableDuration"),width:15,fct:function(t,e){Z.Z.add(t,"MatcDashTableLabels"),t.innerHTML=o.formatNumber(e.durationMean/1e3)+" sec"}},{query:"interactionsMean",label:this.getNLS("dashTaskTableEvents"),width:15,fct:function(t,e){Z.Z.add(t,"MatcDashTableLabels"),t.innerHTML=o.formatNumber(e.interactionsMean)}}]),r.setActions([{label:"",icon:"AnalyseChart",css:"MatcButton MatcButtonXXS MatcButtonSecondary",callback:C.Z.hitch(o,"_showTaskPerf")}]),r.placeAt(s),r.setValue(n)},_onFlowDetails(){},_showTaskPerf(t,e,s){var i=null,a=this.test.tasks;for(let h=0;h<a.length;h++){var n=a[h];if(n.id==t.id){i=n;break}}if(i){var o=new S.Z,r=new b.Z,l=o.div("MatcPadding MatcDashTaskPerfGramDialog MatcDialog").build(),c=this.$new(te.Z,{model:this.app,dialog:r,mode:this.mode});c.setValue(this.df,i,this.annotation,this.test.tasks),c.placeAt(l),r.popup(l,s)}else console.debug("_showTaskPerf","No task",t)},_setTaskName(t,e){for(var s=this.test.tasks,i=0;i<s.length;i++){var a=s[i];a.id==e.id&&(a.name=t.value)}this.save()}},watch:{events(){this.render()}},mounted(){}},se=ee,ie=(0,p.Z)(se,Wt,jt,!1,null,null,null),ae=ie.exports,ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcSurveySection"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("h3",{staticClass:"title level-item"},[s("span",{attrs:{"data-nls":"testSettingsTasks"}},[t._v(t._s(t.$t("survey.header")))]),s("HelpButton",{attrs:{topic:"survey.intro",hasNotifications:!1}})],1)]),s("div",{staticClass:"level-right"},[t.isLoaded&&t.table.rows.length>0&&t.table.cols.length>0?s("DropDownSelect",{ref:"dropDown",staticClass:"MatcButtonSecondary",attrs:{options:t.tableOptions,l:t.$t("survey.options")},on:{select:t.onChangeView,fullscreen:function(e){return t.onFullScreen(e)},download:t.downloadCVS}}):t._e()],1)]),s("div",{staticClass:"MatcSurveySectionTableCntr"},[t.table&&t.table.rows.length>0&&t.table.cols.length>0?s("SurveyTable",{attrs:{app:t.app,pub:t.pub,events:t.events,table:t.table,viewOptions:t.viewOptions,annotation:t.annotation,test:t.test}}):s("span",{staticClass:"MatcHint"},[t._v(" "+t._s(t.$t("scatter.no-data"))+" ")])],1),s("SurveyDialog",{ref:"dialog"})],1)},oe=[],re=s(56845),le=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.sortedTable.rows.length>0&&t.sortedTable.cols.length>0?s("table",{staticClass:"table"},[s("thead",[t.showGroups?s("tr",[s("th",{staticClass:"MatcSurveySectionTableNumber MatcSurveySectionTableBorderRight"}),t._l(t.groups,(function(e){return s("th",{key:e.label,staticClass:"MatcSurveySectionTableGroupLabel",attrs:{colspan:e.count}},[e.count>1?s("span",{staticClass:"MatcSurveySectionTableColLabel"},[t._v(" "+t._s(e.label)+" ")]):t._e()])})),t.hasTasks?s("th",{staticClass:"MatcSurveySectionTableBorderLeft"}):t._e(),t.hasVideo?s("th",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableAction"},[t._v("X")]):t._e()],2):t._e(),s("tr",[s("th",{staticClass:"MatcSurveySectionTableNumber MatcSurveySectionTableBorderRight MatcSurveySectionTableBorderBottom"},[t._v(" # ")]),t.hasID?s("th",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableBorderRight MatcSurveySectionTableBorderBottom"},[t._v(" "+t._s(t.$t("survey.id"))+" ")]):t._e(),t._l(t.sortedTable.cols,(function(e){return[!0!==e.hidden?s("th",{key:e.key,staticClass:"MatcSurveySectionTableBorderBottom"},[s("span",{staticClass:"MatcSurveySectionTableColLabel"},[t._v(" "+t._s(e.label)+" ")])]):t._e()]})),t.hasTasks?s("th",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableBorderBottom"},[t._v(" "+t._s(t.$t("survey.tasks"))+" ")]):t._e(),t.hasVideo?s("th",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableAction MatcSurveySectionTableBorderBottom"},[t._v(" "+t._s(t.$t("survey.video"))+" ")]):t._e()],2)]),s("tbody",[t._l(t.sortedTable.rows,(function(e,i){return s("tr",{key:i},[s("td",{staticClass:"MatcSurveySectionTableNumber MatcSurveySectionTableBorderRight"},[t._v(" "+t._s(i+1)+" ")]),t.hasID?s("td",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableBorderRight"},[s("a",{attrs:{href:t.getVideoURL(t.sortedTable.ids[i]),target:"_QUXvideo"}},[t._v(" "+t._s(t.sortedTable.ids[i])+" "),s("span",{staticClass:"mdi mdi-play-circle-outline"})])]):t._e(),t._l(t.sortedTable.cols,(function(i){return[!0!==i.hidden?s("td",{key:i.key},[t._v(" "+t._s(e[i.key])+" ")]):t._e()]})),t.hasTasks?s("td",{staticClass:"MatcSurveySectionTableBorderLeft  "},[s("div",{staticClass:"MatcTagCntr"},t._l(t.sortedTable.tasks[i],(function(e){return s("span",{key:e.task,staticClass:"tag"},[t._v(" "+t._s(e.taskName)+" "),t.viewOptions.showTaskDetails?s("span",[t._v(" ("+t._s(Math.round(e.duration/1e3))+"s | #"+t._s(e.interactions)+") ")]):t._e()])})),0)]):t._e(),t.hasVideo?s("td",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableAction"},[s("a",{staticClass:"MatcButton MatcButtonSecondary MatcButtonXS",attrs:{href:t.getVideoURL(t.sortedTable.ids[i]),target:"_QUXvideo"}},[s("QIcon",{attrs:{icon:"Play"}})],1)]):t._e()],2)})),s("tr",{staticClass:"MatcSurveySectionTableSummary"},[s("td",{staticClass:"MatcSurveySectionTableNumber MatcSurveySectionTableBorderRight"},[s("QIcon",{attrs:{icon:"AVG"}})],1),t.hasID?s("td",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableBorderRight"}):t._e(),t._l(t.summary,(function(e,i){return s("td",{key:i},[t._v(" "+t._s(e)+" ")])})),t.hasTasks?s("td",{staticClass:"MatcSurveySectionTableBorderLeft"}):t._e(),t.hasVideo?s("td",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableAction"}):t._e()],2)],2)]):t._e()},ce=[],he={name:"SurveyTable",mixins:[],props:["test","app","events","annotation","viewOptions","pub","table"],data:function(){return{showGroups:!1}},components:{QIcon:V.Z},computed:{sortedTable(){return this.table},hasVideo(){return this.viewOptions.showVideo},hasID(){return this.viewOptions.showId},hasTasks(){return this.viewOptions.showTasksSucess||this.viewOptions.showTaskDetails},groups(){const t=[];if(this.table&&this.table.cols){const e=this.sortedTable.cols;let s={label:""};e.forEach((e=>{"data"===e.type&&(e.group!==s.label&&(s={label:e.group,count:0},t.push(s)),s.count++)}))}return t},summary(){const t=[],e=this.table;return e.cols.forEach((s=>{if(!0!==s.hidden){let i=0,a=0;e.rows.forEach((t=>{let e=t[s.key];"-"!==e&&(isNaN(1*e)||(i+=1*e,a++))})),a>0?t.push(Math.round(i/a*100)/100):t.push("-")}})),t},urlPrefix(){return this.pub?"examples":"apps"}},methods:{getVideoURL(t){return"#/"+this.urlPrefix+"/"+this.app.id+"/replay/"+t+".html"}},watch:{table(t){this.table=t}},mounted(){this.logger=new n.Z("SurveyTable"),console.debug(this.table)}},de=he,ue=(0,p.Z)(de,le,ce,!1,null,null,null),pe=ue.exports,me=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ZoomDialog",{ref:"dialog"},[s("div",{staticClass:" MatcDialog MatcSurveyDialog MatcPadding"},[s("div",{staticClass:"MatcToolbarTabs MatcToolbarTabsBig"},[s("a",{class:{MatcToolbarTabActive:"table"===t.tab},on:{click:function(e){t.tab="table"}}},[t._v(t._s(t.$t("survey.dialogTable")))]),s("a",{class:{MatcToolbarTabActive:"diagrams"===t.tab},on:{click:function(e){t.tab="diagrams"}}},[t._v(t._s(t.$t("survey.dialogDiagrams")))])])])])},ge=[],ve={name:"SurveySection",mixins:[],props:["test","app","events","annotation"],data:function(){return{tab:"table"}},components:{ZoomDialog:X.Z},computed:{hasID(){return this.viewOptions.showId},hasTasks(){return this.viewOptions.showTasksSucess||this.viewOptions.showTaskDetails},summary(){const t=[],e=this.table;return e.cols.forEach((s=>{if(!0!==e.meta[s].hidden){let i=0,a=0;e.rows.forEach((t=>{let e=t[s];"-"!==e&&(isNaN(1*e)||(i+=1*e,a++))})),a>0?t.push(Math.round(i/a*100)/100):t.push("-")}})),t},table(){const t=new Bt.Z,e=t.filterEvents(C.Z.clone(this.events),this.annotation);return t.getSurveyAnswers(e,this.app,this.test,this.viewOptions)}},methods:{show(t){this.$refs.dialog.show(t)}},mounted(){this.logger=new n.Z("SurveySection")}},fe=ve,be=(0,p.Z)(fe,me,ge,!1,null,null,null),we=be.exports,Ce={name:"SurveySection",mixins:[],props:["test","app","events","annotation","pub"],data:function(){return{isLoaded:!1,table:{rows:{},cols:{}},viewOptions:{showTasksSucess:!1,showTaskDetails:!1,showVideo:!1,showId:!1}}},components:{HelpButton:kt.Z,DropDownSelect:re.Z,SurveyTable:pe,SurveyDialog:we},computed:{tableOptions(){const t=this.table.cols.filter((t=>"data"===t.type)).map((t=>({value:"toggleColumn",label:t.label,check:!0,selected:!t.hidden,callback:e=>this.toggleColumn(t,e)})));return t.concat([{css:"MatcDropDownButtonLine"},{value:"showTasksSucess",label:this.$t("survey.taskSuccess"),check:!0,selected:this.viewOptions.showTasksSucess},{value:"showVideo",label:this.$t("survey.showVideo"),check:!0,selected:this.viewOptions.showVideo},{css:"MatcDropDownButtonLine"},{value:"download",label:this.$t("survey.download"),event:"download",icon:"mdi mdi-download-outline"}])},hasID(){return this.viewOptions.showId},hasTasks(){return this.viewOptions.showTasksSucess||this.viewOptions.showTaskDetails},downloadFileName(){return this.app?this.app.name+"_survey.csv":"Quant-UX_Survey.csv"}},methods:{getTable(){const t=new Bt.Z,e=t.filterEvents(C.Z.clone(this.events),this.annotation);return t.getSurveyAnswers(e,this.app,this.test,this.viewOptions)},onFullScreen(){this.$refs.dialog&&this.$refs.dropDown&&this.$refs.dialog.show(this.$refs.dropDown.$el)},toggleColumn(t,e){t.hidden=!e},onChangeView(t){for(let e in t)this.$set(this.viewOptions,e,t[e])},downloadCVS(){const t=this.table;let e="#,"+t.cols.map((t=>t.label)).join(",")+"\n";e+=t.rows.map(((e,s)=>s+","+t.cols.map((t=>e[t.key])).join(","))).join("\n");const s=new Blob([e],{type:"text/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(s,this.downloadFileName);else{const t=window.document.createElement("a");t.href=window.URL.createObjectURL(s),t.download=this.downloadFileName,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}},mounted(){this.logger=new n.Z("SurveySection"),this.test&&this.test.tasks.length,this.table=this.getTable(),this.isLoaded=!0}},Me=Ce,Se=(0,p.Z)(Me,ne,oe,!1,null,null,null),ye=Se.exports,_e=s(30529),Te={name:"Test",mixins:[o.Z,I.Z,D.Z],props:["app","test","annotation","events","pub","hash"],data:function(){return{MIN_REQUIERED_USERS:40,summary:{},hasComments:!1}},components:{AnalyticsHeader:Xt,AnalyticTaskList:ae,SurveySection:ye,DistributionSection:_e.Z,HelpButton:kt.Z},computed:{imageHash(){return"imageHahs"},isPublic(){return this.$route.meta&&this.$route.meta.isPublic},urlPrefix(){return this.isPublic?"examples":"apps"}},methods:{onTaskChange(t){this.$emit("change",C.Z.clone(t))},downloadCSV(){try{let i=this.filterEvents(this.events,this.annotation);var t=this.getActionEvents(new pt.Z(i));let a="Session,User,Screen,Widget,EventType,X,Y,Time\n",n=this.app.screenSize;a+=t.data.map((t=>{let e=this.app.screens[t.screen]?this.app.screens[t.screen].name:t.screen,s=this.app.widgets[t.widget]?this.app.widgets[t.widget].name:t.widget,i=t.x>=0?Math.round(t.x*n.w):-1,a=t.y>=0?Math.round(t.y*n.h):-1;return t.session+","+t.user+","+e+","+s+","+t.type+","+i+","+a+","+t.time})).join("\n");var e=new Blob([a],{type:"text/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(e,this.downloadFileName);else{var s=window.document.createElement("a");s.href=window.URL.createObjectURL(e),s.download=this.app.name+".csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}catch(i){console.error(i)}},show(){Rt.Z.start("AnalyticsTab.show()");let t=this.filterEvents(this.events,this.annotation);const e=this.getActionEvents(new pt.Z(t));t=e.as_array();const s=new pt.Z(t);s.sortBy("time"),this._addTestKPI(s,this.app),Rt.Z.end("AnalyticsTab.show()")},_addTestKPI(t,e){Rt.Z.start("AnalyticsTab._addTestKPI()");const s=t.groupBy("session"),i=t.count("session"),a=s.min("time"),n=s.max("time");n.minus(a);const o={};o.sessionCount=i.size(),o.sessionCountMean=Math.round(i.mean()),o.sessionCountStd=Math.round(i.std()),o.sessionDurationMean=Math.round(n.mean()/1e3),o.sessionDurationStd=Math.round(n.std()/1e3),o.sessionMeanUser=o.sessionCount/o.userCount,o.sessionPercentage=Math.min(o.sessionCount/this.MIN_REQUIERED_USERS,1),isNaN(o.sessionDurationMean)&&(o.sessionDurationMean=0,o.sessionDurationStd=0);const r=this.getObjectLength(e.screens),l=s.unique("screen");let c=l.mean()/r;isNaN(c)&&(c=0),isNaN(c)&&(c=0),o.expRate=c,this.summary=o,Rt.Z.end("AnalyticsTab._addTestKPI()")}},watch:{test(t){this.logger.info("watch","test >",t),this.test=t},events(t){this.logger.info("watch","events >",t),this.events=t,this.show()}},async mounted(){this.logger=new n.Z("AnalyticsTab"),this.show(),this.logger.info("mounted","exit")}},Ze=Te,De=(0,p.Z)(Ze,Nt,It,!1,null,null,null),Le=De.exports,Be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTest"},[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"}),s("div",{staticClass:"level-right"},[s("a",{staticClass:"MatcButton level-item",attrs:{href:"#/"+t.urlPrefix+"/"+t.app.id+"/analyze/workspace.html"}},[t._v("Open Analytic Canvas")])])]),t.events&&t.events.length>0?s("HeatList",{attrs:{app:t.app,pub:t.isPublic,events:t.events}}):t._e(),t.loading?s("div",{staticClass:"MatcHint"},[t._v(" Loading... ")]):t._e()],1)]),t.loading||0!==t.events.length?t._e():s("section",{staticClass:"section"},[t._m(0)]),t.events&&0===t.events.length?s("AnalyticPagePlugin",{attrs:{events:t.events,model:t.app}}):t._e()],1)},ke=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless MatcWarningBox"},[s("h3",{staticClass:"title"},[t._v("No data")]),s("p",[t._v(" You have not performed any test yet, therefore Quant-UX could not collect any data. Once you start testing, you will see here the heat maps. ")])])])}],xe=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$e=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcScreenList"},[s("div",{staticClass:"MatcAppListContainer",attrs:{"data-dojo-attach-point":"container"}})])}],Ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcSimulator MatcPreview"})},Pe=[],Ee=s(49634),Ne=s(40626),Ie={name:"HeatPreview",mixins:[Ee.Z,R.Z],data:function(){return{}},components:{},methods:{setEvents(t){this.logger.log(1,"setEvents","enter > "+t.length),this.value=t},onScreenRendered(t,e){this.logger.log(2,"onScreenRendered","enter > "+t.id+" > ");var s=Ne.Z.position(this.domNode);"smartphone"==this.model.type||"tablet"==this.model.type?(this.defaultRadius=s.w/20,this.defaultBlur=s.w/15):(this.defaultRadius=s.w/120,this.defaultBlur=s.w/100),this.logger.log(2,"onScreenRendered","adjust radios to "+this.defaultRadius);var i=document.createElement("div");Z.Z.add(i,"MatcHeapMapContainer"),this._canvas=document.createElement("canvas"),this._canvas.height=t.h,this._canvas.width=t.w,i.appendChild(this._canvas),this._width=t.w,this._height=t.h,this._ctx=this._canvas.getContext("2d"),this.value?this.renderHeatMap(this.value):console.debug("NO Value"),e.appendChild(i)},renderHeatMap(t){var e=this.computeClickDistribution(t,this._width,this._height);this.draw(this._ctx,e.values,e.max,this._width,this._height)}},mounted(){}},Re=Ie,Ve=(0,p.Z)(Re,Ae,Pe,!1,null,null,null),Ue=Ve.exports,He={name:"HeatList",mixins:[Y,D.Z,o.Z],props:["app","pub","annotation","events"],data:function(){return{add:!1,hasSearch:!1,popoverButtonLabel:"Design",maxElementsToRender:20,resizePreview:!1,isPublic:!1,hasStackView:!1}},components:{},methods:{load(){this.jwtToken=r.Z.getUserService().getToken(),this.app?this.setValue(this.app):console.warn("ScreenList.load() > No app")},setValue(t){this.model=t,this.value=this.getScreens(),0==this.value.length&&(this.add=!0),this.render(this.value,this.animate)},setInvitation(t){this.hash=t},setMethod(t){this.pub?t.href="#/examples/"+this.model.id+"/analyze/workspace.html":t.href="#/apps/"+this.model.id+"/analyze/workspace.html"},onTest(t,e){this.stopEvent(e),this.emit("test",t)},createScreenWidget(t){var e=this.$new(Ue);return e.setJwtToken(this.jwtToken),e.isFillBackground=!0,e.setPublic(this.pub),this.hash&&e.setInvitation(this.hash),this.events&&e.setEvents(this.events.filter((e=>e.screen===t.id))),e},renderDescription(t,e){var s=this.getDescription(t),i=document.createElement("p");i.innerHTML=s,Z.Z.add(i,"MatcListItemDescription"),e.appendChild(i)},getDescription(t){var e="";return t.name?e+=t.name:e+="Click to edit",e},onRenderDone(){for(var t=0;t<this.value.length;t++){var e=this.value[t];this.widgets[t]&&this.widgets[t].setModel(this.model,e.id)}}},mounted(){}},Oe=He,ze=(0,p.Z)(Oe,xe,$e,!1,null,null,null),Fe=ze.exports,Xe=function(){var t=this,e=t.$createElement;t._self._c;return t._e()},We=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Integrations")])])])}],je={name:"AnalyticPagePlugin",props:["user","model","events"],mixins:[],data:function(){return{value:null}},components:{},methods:{},mounted(){}},qe=je,Ge=(0,p.Z)(qe,Xe,We,!1,null,null,null),Qe=Ge.exports,Ke={name:"Test",mixins:[o.Z,I.Z,D.Z],props:["app","test","annotation","events","pub","loading"],data:function(){return{MIN_REQUIERED_USERS:40,summary:{}}},components:{HeatList:Fe,AnalyticPagePlugin:Qe},computed:{isPublic(){return this.$route.meta&&this.$route.meta.isPublic},urlPrefix(){return this.isPublic?"examples":"apps"}},methods:{},watch:{test(t){this.logger.info("watch","test >",t),this.test=t}},async mounted(){this.logger=new n.Z("AnalyticsTab"),this.logger.info("mounted","exit")}},Je=Ke,Ye=(0,p.Z)(Je,Be,ke,!1,null,null,null),ts=Ye.exports,es=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTest"},[s("section",{},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Screen Recording")]),t.eventsWithAnnimations.length>0?s("VideoPlayer",{attrs:{app:t.app,sessionID:t.sessionID,testSettings:t.test,annotation:t.annotation,eventsWithAnnimations:t.eventsWithAnnimations,mouse:t.mouseEvents},on:{change:t.onAnnotationChange}}):s("div",[t.hasToManyEvents?s("div",{staticClass:"notification is-danger"},[t._v("The Screen Recording is too big!")]):s("div",{staticClass:"MatcLoading"},[t._v("Loading...")])]),s("div",{staticClass:"level mt-16"},[s("div",{staticClass:"level-left"},[s("VideoAnnotation",{attrs:{appID:t.app.id,sessionID:t.sessionID,test:t.test,annotation:t.currentAnnotation,pub:t.pub,event:t.currentEvents},on:{change:t.onAnnotationChange}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("p",[t._v("Test Performed on "+t._s(t.currentDate))])])])])],1)])])},ss=[],is=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},as=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcAnnotation"},[s("div",{attrs:{"data-dojo-attach-point":"chkBoxCntr"}})])}],ns=s(66839),os=s(53321),rs=s(59777),ls={name:"VideoAnnotation",mixins:[o.Z],props:["appID","sessionID","test","annotation","events","pub"],data:function(){return{value:null}},components:{},methods:{postCreate(){this.log=new n.Z("VideoAnnotation"),this.btn=this.$new(rs.Z),this.btn.setOptions([{label:"The test was ok",value:!0,css:"MatcButtonGreen",icon:""},{label:"Ignore this test",value:!1,css:"MatcButtonDanger",icon:""}]),Z.Z.add(this.btn.domNode,"MatcButton"),this.btn.placeAt(this.chkBoxCntr),this.own((0,w.Z)(this.btn,"change",C.Z.hitch(this,"onChangeValid"))),this.deleteBtn=document.createElement("a"),Z.Z.add(this.deleteBtn,"MatcButton MatcButtonDanger MatcMarginLeft"),this.deleteBtn.innerHTML="Delete Test",this.own((0,w.Z)(this.deleteBtn,M.Z.press,C.Z.hitch(this,"deleteSession"))),this.chkBoxCntr.appendChild(this.deleteBtn),this.setValue(this.annotation)},setValue(t){this.value=t,this.render(this.value)},render(t){this.cleanUp(),this.btn.setValue(t.isValid),this.renderDelete(t)},renderDelete(t){t.isValid?Z.Z.add(this.deleteBtn,"hidden"):Z.Z.remove(this.deleteBtn,"hidden")},cleanUp(){this.cleanUpTempListener()},onChangeValid(t){this.log.log(0,"onChangeValid","enter > "+t),this.value.isValid=t,this.sendUpdate(),this.renderDelete(this.value)},async sendUpdate(){if(this.pub)ns.Z.publish("App.Notification.Success","Please register to save changes...");else if(console.debug("sendUpate",this.value),this.value.id){let t=await r.Z.getModelService().updateAnnotation(this.appID,this.value);this.onAnnotionAdded(t)}else{let t=await r.Z.getModelService().saveAnnotation(this.appID,this.value);this.onAnnotionAdded(t)}},deleteSession(){this.pub?ns.Z.publish("App.Notification.Success","Please register to save changes..."):this.sessionID&&this.appID&&Promise.all([r.Z.getModelService().deleteAnnotation(this.appID,this.value.id),r.Z.getModelService().deleteEventsBySession(this.appID,this.sessionID),r.Z.getModelService().deleteMouseBySession(this.appID,this.sessionID)]).then((()=>{(0,os.Z)("#/apps/"+this.appID+"/test.html")}))},onAnnotionAdded(t){this.value=t,this.showSuccess("Updates saved!"),this.$emit("change",t)}},watch:{annotation(t){this.setValue(t)}},mounted(){}},cs=ls,hs=(0,p.Z)(cs,is,as,!1,null,null,null),ds=hs.exports,us=s(45185),ps={name:"Test",mixins:[o.Z,D.Z],props:["app","test","annotation","events"],data:function(){return{sessionID:"",hasComments:!1,hasToManyEvents:!1,eventsWithAnnimations:[],mouseEvents:[]}},components:{VideoAnnotation:ds,VideoPlayer:us.Z},computed:{pub(){return this.$route.meta&&this.$route.meta.isPublic},currentAnnotation(){var t=this._getSessionAnnotation(this.annotation,this.app.id,this.sessionID);return t.tasks||(t.tasks={},t.isValid=!0),t},currentEvents(){if(this.events){var t=new pt.Z(this.events);t.sortBy("time");var e=t.groupBy("session"),s=e.get(this.sessionID);return s}return null},currentDate(){let t=this.currentEvents;return t?this.formatDate(t.min("time")):"-"}},methods:{onAnnotationChange(t){let e=this.annotation.find((e=>t.id===e.id));e?e.isValid=t.isValid:this.annotation.push(t),this.$emit("change",this.annotation)},load(){this.sessionID=this.$route.params.session,Promise.all([this.modelService.findEventsBySession(this.app.id,this.sessionID),this.modelService.findMouseBySession(this.app.id,this.sessionID)]).then((t=>{this.onLoaded(t[0],t[1])}))},onLoaded(t,e){t.length<2e3?(this.eventsWithAnnimations=t,this.mouseEvents=e):(this.hasToManyEvents=!0,this.$emit("Error","This video is too big!"))},_getSessionAnnotation(t,e){if(t=t.filter((t=>t.reference===this.sessionID)),t.length>1){console.warn("Too many annotations!");for(var s=1;s<t.length;s++){var i=t[s];this.modelService.deleteAnnotation(this.app.id,i.id)}}return t.length>=1?t[0]:{appID:e,type:"session",reference:this.sessionID,tasks:{},isValid:!0,sessions:{}}}},watch:{$route(){this.load()}},async mounted(){this.logger=new n.Z("VideoTab"),this.logger.info("mounted","exit"),this.modelService=r.Z.getModelService(this.$route),this.load()}},ms=ps,gs=(0,p.Z)(ms,es,ss,!1,null,null,null),vs=gs.exports,fs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTest MatcLayout"},[s("section",{},[s("div",{staticClass:"StudioDetailsCommentsGrid"},t._l(t.filteredComments,(function(e){return s("StudioComment",{key:e.id,attrs:{user:t.user,comment:e},on:{delete:t.onDeleteComment,change:t.onChangeComment}})})),1)])])},bs=[],ws=(s(78525),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"StudioComment "+t.status},[t.isNew?t._e():s("UserComment",{attrs:{comment:t.comment,user:t.user},on:{delete:t.onDelete,cancel:t.onCancel,change:t.onChange,status:t.onStatus}}),t._l(t.children,(function(e){return s("div",{key:e.id,staticClass:"StudioCommentResponse"},[t.isNew?t._e():s("UserComment",{staticClass:"UserCommentResponse",attrs:{comment:e,user:t.user},on:{cancel:t.onCancel,delete:t.onDelete,change:t.onChange,status:t.onStatus}})],1)})),t.isNew?s("div",{staticClass:"StudioCommentElement MatcMarginTop"},[s("UserCommentHeader",{attrs:{user:t.user}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"MatcMarginTopXS",domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("div",{staticClass:"UserCommentButtons"},[s("button",{staticClass:"MatcButton MatcButtonXXS MatcMarginTopXS",on:{click:t.onCreate}},[t._v("Save")]),s("button",{staticClass:"MatcButton MatcButtonXXS MatcMarginTopXS",on:{click:t.onCancel}},[t._v("Cancel")])])],1):t._e(),t.isNew?t._e():s("div",{staticClass:"StudioCommentReplyCntr"},[t.hasReply?[s("UserCommentHeader",{attrs:{user:t.user}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyMessage,expression:"replyMessage"}],ref:"replyInput",staticClass:"MatcMarginTopXS",domProps:{value:t.replyMessage},on:{input:function(e){e.target.composing||(t.replyMessage=e.target.value)}}}),s("div",{staticClass:"UserCommentButtons"},[s("button",{staticClass:"MatcButton MatcButtonXXS MatcMarginTopXS",on:{click:t.onReply}},[t._v("Save")]),s("button",{staticClass:"MatcButton MatcButtonXXS MatcMarginTopXS",on:{click:t.onCancel}},[t._v("Cancel")])])]:s("a",{staticClass:"StudioCommentReply",on:{click:t.showReply}},[t._v("Reply...")])],2)],2)}),Cs=[],Ms=s(67538),Ss=s(77663),ys={name:"StudioComment",mixins:[],props:["user","comment","isNew"],data:function(){return{status:"",hasReply:!1,isAuthor:!1,mode:"view",message:"",replyMessage:""}},components:{UserComment:Ms.Z,UserCommentHeader:Ss.Z},computed:{children(){return this.comment.children?this.comment.children.toSorted(((t,e)=>t.created-e.created)):[]},dotOptions(){const t="Done"===this.status?"Set Active":"Set Done";return this.isAuthor?[{label:"Edit",callback:(t,e)=>this.onEdit(e),icon:"EditPencil"},{label:t,callback:(t,e)=>this.toggleDone(e),icon:"CheckBoxHook"},{label:"Delete",callback:(t,e)=>this.onDelete(e),icon:"DeleteX"}]:[{label:t,callback:(t,e)=>this.toggleDone(e),icon:"CheckBoxHook"},{label:"Delete",callback:(t,e)=>this.onDelete(e),icon:"DeleteX"}]}},methods:{onStatus(t,e){this.$emit("status",t,e)},onChange(t,e){this.$emit("change",t,e)},onDelete(t){this.$emit("delete",t)},onCreate(){this.$emit("create",this.message)},onReply(){this.$emit("reply",this.replyMessage,this.comment.id),this.hasReply=!1,this.replyMessage=""},onCancel(){this.hasReply=!1,this.$emit("cancel")},showReply(){this.hasReply=!0,setTimeout((()=>{this.$refs.replyInput.focus()}),200)},formatDate(t){return y.p6(t)},getUserName(t){return y.vW(t)}},watch:{},async mounted(){this.logger=new n.Z("StudioComment"),this.message=this.comment.message,this.status=this.comment.status,this.isAuthor=this?.user?.id===this?.comment?.user?.id,this.isNew&&(this.mode="edit")}},_s=ys,Ts=(0,p.Z)(_s,ws,Cs,!1,null,null,null),Zs=Ts.exports,Ds={name:"Test",mixins:[o.Z],props:["app","test","annotation","events","hash","user"],data:function(){return{comments:[]}},components:{StudioComment:Zs},computed:{pub(){return this.$route.meta&&this.$route.meta.isPublic},urlPrefix(){return this.pub?"examples":"apps"},filteredComments(){let t=this.comments;return t.toSorted(((t,e)=>e.created-t.created))}},methods:{async loadComments(){this.comments=await r.Z.getCommentService().findAll(this.app.id)},async onChangeComment(t,e){const s=this.comments.find((e=>e.id===t));s?(s.message=e,s.modified=(new Date).getTime(),s.edited=!0,await r.Z.getCommentService().update(this.app.id,s),this.showSuccess("Comment updated")):console.error("Cannot find comment",t)},async onDeleteComment(t){this.comments=this.comments.filter((e=>e.id!==t.id)),this.pub||(await r.Z.getCommentService().delete(this.app.id,t),this.showSuccess("Comment deleted"))}},watch:{test(t){this.logger.info("watch","test >",t),this.test=t},events(t){this.logger.info("watch","events >",t),this.events=t,this.showBullet(),this.showSessions()}},async mounted(){this.logger=new n.Z("CommentsTab"),this.loadComments(),this.logger.info("mounted","exit")}},Ls=Ds,Bs=(0,p.Z)(Ls,fs,bs,!1,null,null,null),ks=Bs.exports,xs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcContent MatcSettings"},[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Prototype Name")]),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.app.name,expression:"app.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter App name"},domProps:{value:t.app.name},on:{change:t.setAppName,input:function(e){e.target.composing||t.$set(t.app,"name",e.target.value)}}})])])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless team-settings"},[s("h2",{staticClass:"title"},[t._v("Team")]),t.app&&t.user?s("Team",{attrs:{appID:t.app.id,userID:t.user.id}}):t._e()],1)])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("div",{staticClass:"level"},[t._m(0),s("div",{staticClass:"level-right"},[s("a",{staticClass:"MatcButton is-outlined level-item",on:{click:t.resetShare}},[t._v("Reset")])])]),s("div",{staticClass:"form-group"},[s("label",[t._v("Test")]),s("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.base+"/#/test.html?h="+t.hashes[1]}})]),s("div",{staticClass:"form-group"},[s("label",[t._v("Share and Comment")]),s("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.base+"/#/share.html?h="+t.hashes[1]}})]),s("div",{staticClass:"form-group"},[s("label",[t._v("Code Generation")]),s("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:""+t.hashes[1]}})])])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("a",{staticClass:"button is-fullwidth is-normal is-danger level-item",on:{click:t.showDeleteDialog}},[s("span",{ref:"deleteBtn"},[t._v("Delete Prototype")])])])])])},$s=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"level-left"},[s("h2",{staticClass:"title level-item"},[t._v("Sharing")])])}],As=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTeam"},[s("div",{staticClass:"MatcTeamContainer",attrs:{"data-dojo-attach-point":"cntr"}},[t._l(t.team,(function(e){return s("TeamMember",{key:e.id,attrs:{user:e},on:{click:function(s){return t.showEdit(e,s)}}})})),s("div",{staticClass:"MatcTeamItem",on:{click:function(e){return t.showAdd(e)}}},[s("div",{staticClass:"MatcUserAdd"},[s("QIcon",{attrs:{icon:"Plus"}})],1)])],2),s("TeamDialog",{ref:"dialog",attrs:{appID:t.appID}})],1)},Ps=[],Es=s(13121),Ns=s(60359),Is=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTeamItem",on:{click:function(e){return t.$emit("click",e)}}},[s("div",{staticClass:"MatcUserImageCntr"},[t.user.image?s("div",{staticClass:"MatcUserImageCntrTrans"},[s("img",{staticClass:"MatcUserImage",attrs:{src:t.getUserImage(t.user)}})]):s("div",{staticClass:"MatcUserImageNone"},[s("span",{staticClass:"MatcMiddle MatcUserLetters"},[t._v(" "+t._s(t.getUserLetter(t.user))+" ")])])])])},Rs=[],Vs={name:"Team",mixins:[ft.Z],props:["user"],data:function(){return{isSaving:!1,team:[]}},components:{},methods:{getUserLetter(t){return y.PL(t)},getUserImage(t){return t?"/rest/user/"+t.id+"/images/"+t.name+"_"+t.lastname+"/"+t.image:""},getUserName(t){let e="";return t.name&&(e=t.name+" "),t.lastname&&(e+=t.lastname),0==e.length&&(e=t.email),e}},mounted(){this.user}},Us=Vs,Hs=(0,p.Z)(Us,Is,Rs,!1,null,null,null),Os=Hs.exports,zs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ZoomDialog",{ref:"dialog",attrs:{overflow:"visible"}},[s("div",{staticClass:"MatcDialog MatcTeamDialog MatcResizeDialog"},[s("table",{},[s("thead",[s("tr",[s("th"),s("th",[t._v(" Owner ")]),s("th",[t._v(" Write ")]),s("th",[t._v(" Read ")]),s("th",[t._v(" Delete ")])])]),s("tbody",t._l(t.team,(function(e){return s("tr",{key:e.id},[s("td",[t._v(" "+t._s(t.getUserName(e))+" ")]),s("td",[s("RadioBox",{attrs:{selected:3===e.permission},on:{change:function(s){return t.setOwner(e)}}})],1),s("td",[e.permission<3?s("RadioBox",{attrs:{selected:2===e.permission},on:{change:function(s){return t.setWrite(e)}}}):t._e()],1),s("td",[e.permission<3?s("RadioBox",{attrs:{selected:1===e.permission},on:{change:function(s){return t.setRead(e)}}}):t._e()],1),s("td",[e.permission<3?s("div",{staticClass:"MatcButton MatcButtonXXS MatcButtonDanger MatcButtonSecondary"},[s("QIcon",{attrs:{icon:"DeleteX"}})],1):t._e()])])})),0)]),s("div",{staticClass:"form-group MatcMarginTopXL"},[s("Combo",{attrs:{formControl:"true",placeholder:"Add new member",hints:t.hints}})],1),s("div",{staticClass:"MatcButtonBar MatcMarginTopXXL"},[s("a",{staticClass:"MatcButton MatcButtonPrimary",on:{click:t.save}},[t._v("Save")]),s("a",{staticClass:"MatcLinkButton",on:{click:t.close}},[t._v("Cancel")])])])])},Fs=[],Xs=s(78604),Ws={name:"TeamDialog",props:["appID"],mixins:[],data:function(){return{errorMessageName:"",name:"",team:[],hints:[]}},watch:{},components:{ZoomDialog:X.Z,RadioBox:Xs.Z,Combo:Es.Z,QIcon:V.Z},methods:{close(){this.$refs.dialog.close()},show(t,e){this.team=t,this.$refs.dialog.show(e.target)},save(){},setWrite(t){console.debug("Write",t),t.permission=2},setRead(t){console.debug("Read",t),t.permission=1},getUserName(t){let e="";return t.name&&(e=t.name+" "),t.lastname&&(e+=t.lastname),0==e.length&&(e=t.email),e},setTeamSuggestions(t){var e={};for(let n=0;n<this.team.length;n++)e[this.team[n].id]=!0;var s=[];for(let n=0;n<t.length;n++){var i=t[n];if(!e[i.id]){var a={label:"",value:i.email};i.name&&(a.label+=i.name+" "),i.lastname&&(a.label+=i.lastname+" "),a.label.length>0&&(a.label+=" - "),a.label+=i.email,i.image&&(a.image=i.image),s.push(a)}}this.hints=s}},async mounted(){this.logger=new n.Z("TeamDialog");let t=await r.Z.getModelService().findTeamSuggestions(this.appID);this.setTeamSuggestions(t)}},js=Ws,qs=(0,p.Z)(js,zs,Fs,!1,null,null,null),Gs=qs.exports,Qs={name:"Team",mixins:[D.Z,I.Z,ft.Z,o.Z],props:["appID","userID","qteam"],data:function(){return{team:[],isSaving:!1}},components:{QIcon:V.Z,TeamMember:Os,TeamDialog:Gs},methods:{getUserImage(t){return"/rest/user/"+t.id+"/images/"+t.name+"_"+t.lastname+"/"+t.image},postCreate(){this.logger=new n.Z("Team"),this.logger.log(4,"postCreate","enter >"+this.appID+" > "+this.userID+" > "+this.reference),this.db=new S.Z,this.appID&&this.userID},async load(){let t=await r.Z.getModelService().findTeam(this.appID);this.setTeamLoaded(t)},setTeamLoaded(t){this.team=t},showDialog(t){this.$refs.dialog.show(this.team,t)},async showAdd(t){var e=this.db.div("MatcTeamDialog MatcDialog MatcPadding").build(),s=this.db.div("container").build(e),i=this.db.div("row").build(s),a=this.db.div("col-md-12").build(i);this.db.h2("title","Add Team Member").build(a);var n=this.$new(Es.Z);n.setPlaceholder("Enter the email"),n.setCss("form-control"),n.placeAt(a);var o=this.db.div("MatcErrorLabel").build(a),l=this.db.div("MatcButtonBar MatcMarginTopL").build(s),c=this.db.div("MatcButton MatcButtonPrimary","Add User").build(l),h=this.db.a("MatcLinkButton","Cancel").build(l),d=new b.Z({overflow:!0});d.own((0,w.Z)(c,M.Z.press,C.Z.hitch(this,"addUser",n,o,d,l))),d.own((0,w.Z)(h,M.Z.press,C.Z.hitch(d,"close"))),d.own((0,w.Z)(d,"close",C.Z.hitch(n,"destroy"))),d.popup(e,t.target),setTimeout((function(){n.focus()}),300);let u=await r.Z.getModelService().findTeamSuggestions(this.appID);this.setTeamSuggestions(n,u)},setTeamSuggestions(t,e){var s={};for(let o=0;o<this.team.length;o++)s[this.team[o].id]=!0;var i=[];for(let o=0;o<e.length;o++){var a=e[o];if(!s[a.id]){var n={label:"",value:a.email};a.name&&(n.label+=a.name+" "),a.lastname&&(n.label+=a.lastname+" "),n.label.length>0&&(n.label+=" - "),n.label+=a.email,a.image&&(n.image=a.image),i.push(n)}}t.setHints(i)},showEdit(t,e){var s=this.db.div("MatcTeamDialog MatcTeamDialogEdit MatcPadding MatcActionBox").build(),i=this.db.div("container").build(s),a=this.db.div("columns").build(i),n=this.db.div("column is-4").build(a);this.createUserImage(t,n);var o=this.db.div("column is-8").build(a),r=this.db.div("MatcTeamUserName",this.getUserName(t)).build(o),l=null;if(3==t.permission){var c=this.db.div().build(o);Z.Z.add(c,"MatcHint MatcMarginTop"),c.innerHTML="Is the owner!"}else r.innerHTML+=" can:",l=this.$new(Ns.Z),l.setOptions([{label:"Write",value:2,css:""},{label:"Read",value:1,css:""}]),l.placeAt(o),l.setValue(t.permission);a=this.db.div("columns").build(i),n=this.db.div("column is-4").build(a),o=this.db.div("MatcButtonBar MatcButtonBarCols").build(i);var h=new b.Z;if(3!=t.permission){let e=this.db.div("MatcButtonBarCol").build(o),s=this.db.div("MatcButton MatcButtonPrimary","Save").build(e),i=this.db.a("MatcLinkButton","Cancel").build(e),a=this.db.div("MatcButtonBarCol").build(o),n=this.db.a("MatcButton MatcButtonDanger ","Remove").build(a);h.own((0,w.Z)(i,M.Z.press,C.Z.hitch(h,"close"))),h.own((0,w.Z)(s,M.Z.press,C.Z.hitch(this,"changePermission",t,l,h))),h.own((0,w.Z)(n,M.Z.press,C.Z.hitch(this,"removeUser",t,l,h)))}else{let t=this.db.div("MatcButton MatcButtonPrimary","Close").build(o);h.own((0,w.Z)(t,M.Z.press,C.Z.hitch(h,"close")))}h.popup(s,e.target)},async addUser(t,e,s,i,a){this.logger.log(-1,"addUser","enter"),this.stopEvent(a);let n=t.getValue(),o=this.team.filter((t=>t.email===n));if(o.length>0)return this.logger.error("addUser","EXIT > User already in team"),void s.close();if(this.isSaving)return void this.logger.error("addUser","EXIT > Is saving");this.isSaving=!0;var l=2,c={email:t.getValue(),permission:l};let h=await r.Z.getModelService().createTeam(this.appID,c);this.isSaving=!1,"error"==h.type?("apps.team.member.add.error.email"==h.errors[0]&&(Z.Z.remove(e,""),e.innerHTML="No user is registered with the email!"),"apps.team.member.add.error.read"==h.errors[0]&&(Z.Z.remove(e,""),e.innerHTML="You can only read the app!"),s.shake()):(s.close(),this.load())},async changePermission(t,e,s){t.permission=e.getValue(),s.close(),e.destroy(),await r.Z.getModelService().updateTeam(this.appID,t),this.load()},async setPermission(t,e){e.permission=t,await r.Z.getModelService().createTeam(this.appID,e),this.load()},async removeUser(t,e,s){await r.Z.getModelService().deleteTeam(this.appID,t),s.close(),e.destroy(),this.load()},cleanUp(){}},watch:{qteam(t){this.setTeamLoaded(t)}},mounted(){this.qteam&&this.setTeamLoaded(this.qteam)}},Ks=Qs,Js=(0,p.Z)(Ks,As,Ps,!1,null,null,null),Ys=Js.exports,ti={name:"Test",mixins:[o.Z],props:["app","test","annotation","events","pub","user","invitations"],data:function(){return{sessionID:"",eventsWithAnnimations:[],mouseEvents:[]}},components:{Team:Ys},computed:{base(){return location.protocol+"//"+location.host},iframe(){if(this.app){var t=this.app.screenSize.w+"px",e=this.app.screenSize.h+"px",s='<iframe src="'+this.base+"/em.html?h="+this.hashes[1]+'" width="'+t+'" height="'+e+'" allowTransparency="true" frameborder="0"></iframe>';return s}return"-"},hashes(){var t={};for(var e in this.invitations)t[this.invitations[e]]=e;return t}},methods:{async showDeleteDialog(){let t=new S.Z;const e=t.div("box MatcDeleteDialog").build();t.h3("title is-4","Delete Prototype").build(e),t.p("",`Do you want to delete the '${this.app.name}' prototype?`).build(e);const s=t.div("MatcButtonBar").build(e),i=t.a("MatcButton MatcButtonDanger",this.getNLS("btn.delete")).build(s),a=t.a("MatcLinkButton",this.getNLS("btn.cancel")).build(s),n=new b.Z;n.own((0,w.Z)(i,M.Z.press,C.Z.hitch(this,"deleteApp",n))),n.own((0,w.Z)(a,M.Z.press,C.Z.hitch(n,"close"))),n.popup(e,this.$refs.deleteBtn)},async deleteApp(t){await r.Z.getModelService().deleteApp(this.app),t.close(),location.href="#/apps/my-apps.html"},async resetShare(){await r.Z.getModelService().resetTeam(this.app.id),location.reload()},async setAppName(){let t=await r.Z.getModelService().updateAppProps(this.app.id,{id:this.app.id,name:this.app.name});"ok"===t.status?this.showSuccess("Name was saved..."):this.showError("Oooppps, Could not change the name. Try again!")}},watch:{$route(){this.load()}},async mounted(){this.logger=new n.Z("SettingsTab"),this.logger.info("mounted","exit")}},ei=ti,si=(0,p.Z)(ei,xs,$s,!1,null,null,null),ii=si.exports,ai=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcSplitView"},[s("div",{ref:"leftChild",class:["MatcSplitViewChild MatcSplitViewLeft ",{MatcSplitViewChildBorder:t.left}],style:t.leftWidth},[t._t("left")],2),s("div",{class:["MatcSplitViewBorder"]},[s("div",{class:["MatcSplitViewHandler",{MatcSplitViewHandlerLeft:t.left},{MatcSplitViewHandlerRight:t.right}],on:{mousedown:t.onMousedown}})]),s("div",{ref:"rightChild",class:["MatcSplitViewChild MatcSplitViewRight MatcSplitViewChildResizeContainer",{MatcSplitViewChildBorder:t.right}],style:t.rightWidth},[t._t("right")],2)])},ni=[],oi=s(48459),ri={name:"SplitContainer",mixins:[],props:["left","right","qid"],data:function(){return{pos:0}},watch:{},computed:{leftWidth(){return this.left?"width:"+this.pos+"px":`width: calc(100% - ${this.pos}px)`},rightWidth(){return this.right?"width:"+this.pos+"px":`width: calc(100% - ${this.pos}px)`}},components:{},methods:{onMousedown(t){const e=this.pos;(0,oi.z)(t,(t=>{this.left?this.pos=e+t.x:this.pos=e-t.x,localStorage.setItem("quxSplitContainer"+this.qid,this.pos)}))}},async mounted(){this.left&&(this.pos=this.left),this.right&&(this.pos=this.right),h.s(this.$refs.leftChild,!1),h.s(this.$refs.rightChild,!1);const t=localStorage.getItem("quxSplitContainer"+this.qid);t&&(this.pos=1*t)}},li=ri,ci=(0,p.Z)(li,ai,ni,!1,null,null,null),hi=ci.exports,di=s(54630),ui=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["StudioColorDropDown MatcIconDropDown",{MatcIconDropDownVisible:t.isVisible}]},[s("div",{ref:"button",staticClass:"StudioColorDropDownDot",style:{background:t.value},attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.open.apply(null,arguments)}}}),t.isVisible?s("div",{staticClass:"MatcDropDownPopUp ",attrs:{role:"menu","data-dojo-attach-point":"popup"}},[s("div",{staticClass:"StudioColorDropDownCntr"},t._l(t.colors,(function(e,i){return s("div",{key:i,staticClass:"StudioColorDropDownDot",style:{background:e},on:{click:function(s){return t.select(e)}}})})),0)]):t._e(),t.isVisible?s("div",{staticClass:"MatcDropDownPopUpBackdrop",on:{click:t.close}}):t._e()])},pi=[],mi={name:"Design",mixins:[ft.Z],props:["color"],data:function(){return{value:"#365fff",isVisible:!1,colors:["#333","#777","#999","#365fff","#6e97f6","#98b4f3","#cb2cf3","#d258f1","#dd89f2","#ef3149","#f45e71","#f78896","#32d315","#62d74d","#91de83","#f6d310","#f6df5f","#f3e89c"]}},components:{},computed:{},methods:{open(){this.isVisible=!0},close(){this.isVisible=!1},select(t){this.value=t,this.$emit("change",t),this.close()}},watch:{color(t){this.value=t}},async mounted(){this.addTooltip(this.$refs.button,this.$t("tooltip.app-color")),this.color&&(this.value=this.color)}},gi=mi,vi=(0,p.Z)(gi,ui,pi,!1,null,null,null),fi=vi.exports,bi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"StudioDetails",attrs:{id:""}},[t.summary?[s("div",{staticClass:"StudioDetailsKPICntr"},[s("div",{staticClass:"StudioDetailsKPI",style:{background:t.getBackgroundColor(t.summary.sessionCount,5,30)}},[s("h4",[t._v(t._s(t.summary.sessionCount))]),s("label",[t._v(t._s(t.$t("app.kpi-sessions")))])]),s("div",{staticClass:"StudioDetailsKPI"},[s("h4",[t._v(t._s(t.summary.sessionDurationMean)+" "+t._s(t.summary.sessionDurationMeanLabel))]),s("label",{domProps:{innerHTML:t._s(t.$t("app.kpi-duration"))}})]),s("div",{staticClass:"StudioDetailsKPI",style:{background:t.getBackgroundColor(t.summary.taskSuccessMean,33,66)}},[s("h4",[t._v(t._s(t.summary.taskSuccessMean)+" "+t._s(t.summary.taskSuccessMeanLabel))]),s("label",{domProps:{innerHTML:t._s(t.$t("app.kpi-task"))}})]),s("div",{staticClass:"StudioDetailsKPI"},[s("h4",[t._v(t._s(t.summary.expRate)+" "+t._s(t.summary.expRateLabel))]),s("label",[t._v(t._s(t.$t("app.kpi-coverage")))])])]),s("div",{staticClass:"StudioDetailsComments"},[s("div",{staticClass:"StudioDetailsCommentsHeader"},[s("h4",[t._v(t._s(t.$t("app.comments")))]),s("a",{staticClass:"MatcActionLink MatcStudioAction ",on:{click:t.addComment}},[t._v(" + "),s("span",{staticClass:"MatcSplitView200Hidden"},[t._v(" "+t._s(t.$t("app.add-comment")))])])]),s("div",{ref:"commentList",staticClass:"StudioDetailsCommentsList"},[t.hasNew?s("StudioComment",{attrs:{isNew:!0,user:t.user,comment:{}},on:{cancel:function(e){t.hasNew=!1},create:t.onCreateComment}}):t._e(),t._l(t.filteredCommentsTree,(function(e){return s("StudioComment",{key:e.id,attrs:{user:t.user,comment:e},on:{delete:t.onDeleteComment,reply:t.onCreateComment,change:t.onChangeCommentMessage,status:t.onChangeCommentStatus}})}))],2)])]:s("div",[s("div",{staticClass:"MatcLoading"},[t._v(" "+t._s(t.$t("common.loading"))+" ")])])],2)},wi=[],Ci={name:"StudioDetails",mixins:[D.Z],props:["app","test","user","annotation","events","hash","isLoaded"],data:function(){return{lastRenderSumamry:0,hasCommentFilter:!0,hasNew:!1,summary:!1,comments:[]}},components:{StudioComment:Zs},computed:{pub(){return this.$route.meta&&!0===this.$route.meta.isPublic},filteredCommentsTree(){const t=this.$route.params.tab,e=this.$route.params.session,s=C.Z.listGroupBy(this.comments,"parentId");let i=this.comments.map((t=>{const e=C.Z.clone(t);return s[t.id]&&(e.children=s[t.id]),e}));return this.hasCommentFilter&&("test"===t&&(i=i.filter((t=>"overview_test"===t.type&&!t.reference))),"analyze"===t&&(i=i.filter((t=>"overview_dash"===t.type))),t&&"design"!==t||e||(i=i.filter((t=>"ScreenComment"===t.type||"overview_edit"===t.type))),e&&(i=i.filter((t=>"overview_test"===t.type&&t.reference===e)))),"comments"===t?[]:i.toSorted(((t,e)=>e.created-t.created)).filter((t=>!t.parentId))}},methods:{onChangeAppDescription(){const t=this.$refs.inputDescription.innerText;this.$emit("change",t)},addComment(){this.hasNew=!0},async onCreateComment(t,e){if(!t)return void(this.hasNew=!1);const s={message:t,reference:"",type:"overview_edit",user:{_id:this.user.id,email:this.user.email,name:this.user.name,lastname:this.user.lastname,image:this.user.image,id:this.user.id},userID:this.user.id,created:(new Date).getTime()},i=this.$route.params.tab,a=this.$route.params.session;if("test"===i&&(s.type="overview_test"),"analyze"===i&&(s.type="overview_dash"),"design"===i&&(s.type="overview_edit"),a&&(s.type="overview_test",s.reference=a),e){s.parentId=e;const t=this.comments.find((t=>t.id===e));t&&(s.type=t.type,s.reference=t.reference)}let n=await r.Z.getCommentService().create(this.app.id,s);n.id?(s.id=n.id,this.showSuccess("Comment created"),this.comments.unshift(s)):this.showError("Soemthing went wrong"),this.hasNew=!1},async onChangeCommentStatus(t,e){const s=this.comments.find((e=>e.id===t));s?(s.status=e,s.modified=(new Date).getTime(),s.edited=!0,await r.Z.getCommentService().update(this.app.id,s),this.showSuccess("Status updated")):console.error("Cannot find comment",t)},async onChangeCommentMessage(t,e){const s=this.comments.find((e=>e.id===t));s?(s.message=e,s.modified=(new Date).getTime(),s.edited=!0,await r.Z.getCommentService().update(this.app.id,s),this.showSuccess("Comment updated")):console.error("Cannot find comment",t)},async onDeleteComment(t){this.comments=this.comments.filter((e=>e.id!==t.id)),this.pub||(await r.Z.getCommentService().delete(this.app.id,t),this.showSuccess("Comment deleted"));const e=this.comments.filter((e=>e.parentId==t.id));this.logger.log(1,"onDeleteComment","Children "+e.length),e.forEach((t=>{r.Z.getCommentService().delete(this.app.id,t),this.comments=this.comments.filter((e=>e.id!==t.id))}))},getBackgroundColor(t,e,s){return isNaN(t)?"":t<=e?"#FFECF2":t>=s?"#D4F7D3":void 0},onChange(){setTimeout((async()=>{const t=(new Date).getTime();t-this.lastRenderSumamry>500&&(await this.loadComments(),this.setSummary())}),200)},async loadComments(){this.comments=await r.Z.getCommentService().findAll(this.app.id),this.logger.log(-1,"loadComments","exit",this.comments.length)},setSummary(){if(this.logger.log(-1,"setSummary","enter"),!this.app||!this.isLoaded)return;this.lastRenderSumamry=(new Date).getTime(),Rt.Z.start("StudioDetails.setSummary()");const t=this.filterEvents(this.events,this.annotation),e=this.getActionEvents(new pt.Z(t));e.sortBy("time"),this._addTestKPI(e,this.app),Rt.Z.end("StudioDetails.setSummary()")},_addTestKPI(t,e){Rt.Z.start("AnalyticsTab._addTestKPI()");const s=t.groupBy("session"),i=t.count("session"),a=s.min("time"),n=s.max("time");n.minus(a);const o={};if(o.sessionCount=i.size(),0===i.size())o.sessionDurationMean="-",o.expRate="-";else{o.sessionCountMean=Math.round(i.mean()),o.sessionDurationMean=Math.round(n.mean()/1e3),isNaN(o.sessionDurationMean)&&(o.sessionDurationMean=0),o.sessionDurationMeanLabel="s";const t=this.getObjectLength(e.screens),a=s.unique("screen");let r=a.mean()/t;isNaN(r)&&(r=0),isNaN(r)&&(r=0),o.expRate=Math.round(100*r),o.expRateLabel="%"}const r=this.test.tasks;if(r&&r.length>0){const e=new Bt.Z,s=e.getTaskSummary(t,r,this.annotation);let i=0;s.forEach((t=>{i+=t.success})),o.taskSuccessMean=Math.round(i/s.length*100),o.taskSuccessMeanLabel="%"}else o.taskSuccessMean="-";this.summary=o,Rt.Z.end("AnalyticsTab._addTestKPI()")}},watch:{isLoaded(t){this.isLoaded=t,t||(this.comments=[],this.hasNew=!1,this.summary=!1)},app(t){this.logger.info("watch","app >",t),this.app=t,this.onChange()},test(t){this.logger.info("watch","test >",t),this.test=t,this.onChange()},events(t){this.logger.log(1,"watch","events >",t),this.events=t,this.onChange()}},async mounted(){this.logger=new n.Z("StudioDetails"),this.setSummary()}},Mi=Ci,Si=(0,p.Z)(Mi,bi,wi,!1,null,null,null),yi=Si.exports,_i={name:"Overview",mixins:[o.Z],props:["user"],data:function(){return{loading:!0,team:[],tab:"design",appID:"",app:{name:"loading..."},dotOptions:[{label:"Rename",callback:(t,e)=>this.onRename(e),icon:"EventKeykoard"},{label:"Delete",callback:(t,e)=>this.onDelete(e),icon:"DeleteX"}],testSettings:{},events:[],sessionAnnotations:[],invitations:[],hash:"",appLoaded:!1,restLoaded:!1,modelService:r.Z.getModelService()}},components:{ScreenList:at,TestTab:Et,AnalyticsTab:Le,VideoTab:vs,SettingsTab:ii,Team:Ys,HeatTab:ts,StudioColorDropDown:fi,QIcon:V.Z,QIconDropDown:di.Z,StudioDetails:yi,SplitContainer:hi,CommentsTab:ks,AutoTextArea:ht},computed:{isPublic(){return this.$route.meta&&this.$route.meta.isPublic},urlPrefix(){return this.isPublic?"examples":"apps"}},methods:{scrollTop(){window.scrollTo(0,0)},reloadEvents(){this.logger.log(-1,"reloadEvents","enter > "),this.loadEvents()},onSettingsChange(t){this.logger.info("onSettingsChange","enter > ",t)},onTestChange(t){this.logger.info("onTestChange","enter > ",t),this.testSettings=t},onAnnotationChange(t){this.logger.info("onAnnotationChange","enter > ",t)},async loadApp(){let t=this.$route.params.id;this.appLoaded=!1;try{t?(this.app=await this.modelService.findApp(t),this.loadRest(),this.loadEvents()):(this.logger.error("loadApp","No id "),this.logger.sendError(new Error))}catch(e){this.logger.error("loadApp","Some error"),this.logger.sendError(e)}},loadEvents(){let t=this.$route.params.id;try{this.modelService.findEvents(t).then((t=>{this.events=t,this.loading=!1,this.appLoaded=!0,this.logger.log(-1,"loadEvents","Found "+t.length+" events"),this.checkEventCount()}))}catch(e){this.logger.error("loadEvents","Some error"),this.logger.sendError(e)}},async checkEventCount(){if(this.isPublic)return;const t=this.events.filter((t=>"SessionStart"===t.type));if(this.logger.log(4,"checkEventCount","Check "+this.app.sessionCount+" ?= "+t.length),this.app.sessionCount!==t.length&&this.app&&this.app.id){const e=await this.modelService.updateAppProps(this.app.id,{id:this.app.id,sessionCount:t.length});"ok"!==e.status&&(this.logger.error("checkEventCount","Could not update"),this.logger.sendError(new Error))}},loadRest(){let t=this.$route.params.id;Promise.all([this.modelService.findTest(t),this.modelService.findSessionAnnotations(t),this.modelService.findInvitation(t),this.modelService.findTeam(t)]).then((t=>{this.testSettings=t[0],this.sessionAnnotations=t[1],this.restLoaded=!0,this.invitations=t[2],this.team=t[3];const e={};for(let s in this.invitations)e[this.invitations[s]]=s;this.hash=e[1]})).catch((t=>{this.logger.error("loadRest","Some error"),this.logger.sendError(t)}))},showShareDialog(){const t=new S.Z,e=t.div("MatcDialog MatcInfitationDialog MatcInfitationDialogLarge MatcPadding").build();let s=t.div("container").build(e),i=t.div("row").build(s),a=t.div("col-md-12").build(i);t.h3("",this.getNLS("share.Headline")).build(a);const n=this.$new(U.Z);n.placeAt(a),n.setInvitation(this.hash),n.setPublic(this.isPublic),i=t.div("row MatcMarginTop").build(s),a=t.div("col-md-12 MatcButtonBar").build(i);let o=t.div("MatcButton","Close").build(a);const r=new b.Z;r.own((0,w.Z)(o,M.Z.press,C.Z.hitch(r,"close"))),r.popup(e,this.$refs.shareButton)},initRoute(){this.logger.info("initRoute","enter",this.$route.params.tab),this.$route.params.tab?this.tab=this.$route.params.tab:this.$route.params.session&&(this.tab="video"),this.$route.params.id&&this.$route.params.id!==this.appID&&(this.appID=this.$route.params.id,this.loadApp(),this.tab="design",this.$forceUpdate()),this.scrollTop()},onWindowFocus(){this.logger.log(-1,"onWindowFocus","enter > "),this.loadEvents()},initFocusListener(){this.logger.log(1,"initFocusListener","enter > "),this._focusListner=()=>{this.onWindowFocus()},window.addEventListener("focus",this._focusListner)},formatDate(t,e){return y.p6(t,e)},async onChangeAppDescription(t){let e=await r.Z.getModelService().updateAppProps(this.app.id,{id:this.app.id,description:t});"ok"===e.status?(this.app.description=t,this.showSuccess("Description was saved...")):this.showError("Oooppps, Could not change the color. Try again!")},async onColorChange(t){let e=await r.Z.getModelService().updateAppProps(this.app.id,{id:this.app.id,previewColor:t});"ok"===e.status?(this.showSuccess("Color was saved..."),this.app.previewColor=t,this.$emit("change",this.app)):this.showError("Oooppps, Could not change the color. Try again!")},async onNameChange(){this.app.name||this.showError("The name cannot be empty");let t=await r.Z.getModelService().updateAppProps(this.app.id,{id:this.app.id,name:this.app.name});"ok"===t.status?(this.showSuccess("Name was saved..."),this.$emit("change",this.app)):this.showError("Oooppps, Could not change the name. Try again!")},onDelete(t){this.stopEvent(t);const e=this.db.div("MatcDeleteDialog").build();this.db.h3("title is-4","Delete Prototype").build(e),this.db.p("MatcMarginBottomXL",`Do you want to delete the '${this.app.name}' prototype?`).build(e);const s=this.db.div("MatcButtonBar").build(e),i=this.db.a("MatcButton MatcButtonDanger",this.getNLS("btn.delete")).build(s),a=this.db.a("MatcLinkButton",this.getNLS("btn.cancel")).build(s),n=new b.Z;n.own((0,w.Z)(i,"click",(()=>this.deleteApp(n,this.app)))),n.own((0,w.Z)(a,"click",(()=>n.close()))),n.popup(e,t.target)},async deleteApp(t,e){await r.Z.getModelService().deleteApp(e),t.close(),this.$emit("delete",e)},onRename(t){this.stopEvent(t);const e=this.db.div("MatcDeleteDialog").build();this.db.h3("title is-4","Rename Prototype").build(e);var s=this.db.div("MatcMarginBottomXL").input("form-control input-lg MatcIgnoreOnKeyPress",this.app.name,"Name of the prototype").build(e);const i=this.db.div("MatcButtonBar").build(e),a=this.db.a("MatcButton",this.getNLS("btn.rename")).build(i),n=this.db.a("MatcLinkButton",this.getNLS("btn.cancel")).build(i),o=new b.Z;o.own((0,w.Z)(a,"click",(()=>this.renameApp(o,this.app,s)))),o.own((0,w.Z)(n,"click",(()=>o.close()))),o.popup(e,t.target)},async renameApp(t,e,s){this.app.name=s.value,this.onNameChange(),t.close()}},watch:{$route(){this.logger.info("watch","route"),this.initRoute()}},async mounted(){this.logger=new n.Z("StudioOverview"),this.db=new S.Z,this.appID=this.$route.params.id,this.modelService=r.Z.getModelService(this.$route),this.loadApp(),this.initRoute(),this.initFocusListener(),this.logger.info("mounted","exit > ")},beforeDestroy(){this.logger.log(-1,"beforeDestroy","enter > "),window.removeEventListener("focus",this._focusListner),delete this._focusListner}},Ti=_i,Zi=(0,p.Z)(Ti,v,f,!1,null,null,null),Di=Zi.exports,Li=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ZoomDialog",{ref:"dialog"},[s("div",{staticClass:"MatcAppsDialog MatcDialog"},[t.isVisisble?s("AppList",{ref:"appList",attrs:{pub:!1,canAdd:!1,hasSelect:!0,hasFocus:!0},on:{select:t.onSelected}}):t._e()],1)])},Bi=[],ki={name:"AppListDialog",mixins:[],data:function(){return{isVisisble:!1,apps:[],user:null}},watch:{},components:{ZoomDialog:X.Z,AppList:Y},methods:{close(){this.$refs.dialog.close()},show(t,e){this.isVisisble=!1,this.$refs.dialog.show(e.target),this.apps=t,setTimeout((()=>{this.isVisisble=!0}),300)},onSelected(t){this.callback&&this.callback(t),this.close()}},async mounted(){this.log=new n.Z("AppList")}},xi=ki,$i=(0,p.Z)(xi,Li,Bi,!1,null,null,null),Ai=$i.exports,Pi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"MatcLink StudioNotification",on:{click:t.showDialog}},[t.notifications.length>0?s("span",{staticClass:"StudioNotificationBubble"}):t._e(),s("QIcon",{attrs:{icon:"Notification"}}),s("span",{staticClass:"MatcCollapseViewMinHidden"},[t._v(" "+t._s(t.$t("app.notifications"))+" ")]),s("ZoomDialog",{ref:"dialog"},[s("div",{staticClass:"MatcDialogM MatcDialog",on:{click:function(t){t.stopPropagation()}}},[s("h1",[t._v(" "+t._s(t.$t("app.notifications")))]),s("div",{ref:"cntr",staticClass:"StudioNotificationContainer"},[t._l(t.filteredNotifications,(function(e){return s("div",{key:e.id,staticClass:"StudioNotificationItem"},[s("h3",[t._v(t._s(e.title))]),s("p",{domProps:{innerHTML:t._s(e.body)}}),s("div",{staticClass:"StudioNotificationVideo"},[e.video?s("iframe",{attrs:{width:560*t.videoScaleFactor,height:315*t.videoScaleFactor,src:e.video.src,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}):t._e()])])})),0===t.filteredNotifications.length?s("div",{staticClass:"StudioNotificationItem"},[s("p",[t._v(" "+t._s(t.$t("app.notifications-none"))+" ")])]):t._e()],2),s("div",{staticClass:"MatcButtonBar MatcMarginTop"},[s("button",{staticClass:"MatcButton MatcButtonPrimary",on:{click:t.close}},[t._v(t._s(t.$t("common.close")))])])])])],1)},Ei=[],Ni={name:"StudioNotification",mixins:[],data:function(){return{videoScaleFactor:1,notifications:[]}},components:{QIcon:V.Z,ZoomDialog:X.Z},computed:{pub(){return this.$route.meta&&this.$route.meta.isPublic},mode(){return this.pub?"public":"private"},filteredNotifications(){return this.notifications.map((t=>this.convertNotification(t)))}},methods:{showDialog(){r.Z.getUserService().setLastNotication(),this.$refs.dialog.show(this.$el)},close(){this.$refs.dialog.close()},convertNotification(t){let e={id:"notifications."+t.id,title:t.title,body:t.more};if(t.video){let s=t.video;s.indexOf('src="')>0&&(s=s.substring(s.indexOf('src="')+5),s=s.substring(0,s.indexOf('"'))),e.video={src:s}}return e}},async mounted(){h.s(this.$refs.cntr,!1),this.notifications=await r.Z.getUserService().getNotications()}},Ii=Ni,Ri=(0,p.Z)(Ii,Pi,Ei,!1,null,null,null),Vi=Ri.exports,Ui=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"MatcLink StudioContact",on:{click:t.showDialog}},[s("QIcon",{attrs:{icon:"Mail"}}),s("span",{staticClass:"MatcCollapseViewMinHidden"},[t._v(" "+t._s(t.$t("app.contact"))+" ")]),s("ZoomDialog",{ref:"dialog"},[s("div",{staticClass:"MatcDialogM MatcDialog",on:{click:function(t){t.stopPropagation()}}},[s("h1",[t._v(" "+t._s(t.$t("app.contact")))]),s("div",{staticClass:"form-group MatcShareRow"},[s("label",[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),s("div",{staticClass:"form-group MatcShareRow"},[s("label",[t._v("Message")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),s("div",{staticClass:"form-group MatcShareRow"},[s("p",{staticClass:"MatcError"},[t._v(t._s(t.error))])]),s("div",{staticClass:"MatcButtonBar MatcMarginTop"},[s("button",{staticClass:"MatcButton MatcButtonPrimary",on:{click:t.sendMail}},[t._v(t._s(t.$t("app.mail.send")))]),s("button",{staticClass:" MatcLinkButton",on:{click:t.close}},[t._v(t._s(t.$t("btn.cancel")))])])])])],1)},Hi=[],Oi={name:"StudioNotification",props:["user"],mixins:[],data:function(){return{name:"",email:"",message:"",error:"",success:"sdfsdf  sdfsdf"}},components:{QIcon:V.Z,ZoomDialog:X.Z},computed:{},methods:{showDialog(){this.user&&(this.email=this.user.email),this.$refs.dialog.show(this.$el)},async sendMail(){if(0===this.email.length||0===this.message.length)this.error=this.$t("app.mail.error"),this.$refs.dialog.shake();else{this.error="";let t=await r.Z.getUserService().contact(this.name,this.email,this.message);t&&(this.success=this.$t("app.mail.success"),this.$root.$emit("Success",this.$t("app.mail.success")),setTimeout((()=>{this.$refs.dialog.close()}),500))}},close(){this.$refs.dialog.close()}},async mounted(){}},zi=Oi,Fi=(0,p.Z)(zi,Ui,Hi,!1,null,null,null),Xi=Fi.exports,Wi={name:"Studio",mixins:[o.Z],data:function(){return{selectedApp:null,apps:[],user:null}},components:{SplitContainer:g,StudioOverview:Di,CreateAppDialog:G,QIcon:V.Z,AppListDialog:Ai,StudioNotification:Vi,StudioContact:Xi},computed:{hasMore(){return 0!==this.filteredAppList.length&&this.apps.length>10},filteredAppList(){return this.apps.length>10?this.apps.slice(0,10):this.apps},hasUserImage(){return!1},userName(){return"My Account"},urlPrefix(){return this.pub?"examples":"apps"},pub(){return this.$route.meta&&!0===this.$route.meta.isPublic}},methods:{onDeleteApp(t){this.apps=this.apps.filter((e=>e.id!==t.id)),this.setDefaultApp()},onChangeAppProps(t){const e=this.apps.find((e=>e.id===t.id));e?(e.name=t.name,e.previewColor=t.previewColor,this.$forceUpdate()):console.error(e,t)},showAppsDialog(t){this.$refs.appsDialog.show(this.apps,t)},showNewDialog(t){this.$refs.createDialog.show(t)},async load(){if(this.pub){let t=await r.Z.getModelService().findPublicSummaries();this.setApps(t)}else{let t=await r.Z.getModelService().findMyAppSummaries();this.setApps(t)}},async setApps(t){this.logger.log(0,"setApps","enter > "+t.length),t.sort(((t,e)=>e.lastUpdate-t.lastUpdate)),t.forEach((t=>{t.previewColor||(t.previewColor="")})),this.apps=t},initRoute(){this.logger.log(3,"initRoute","enter > "+this.$route.params.id),this.$route.params.id?this.selectedApp=this.$route.params.id:this.setDefaultApp()},setDefaultApp(){if(this.apps.length>0&&!this.defaultDispatched){const t=this.apps[0];this.pub?this.$router.push(`/examples/${t.id}.html`):this.$router.push(`/apps/${t.id}.html`),this.defaultDispatched=!0}},onLogout(){r.Z.getUserService().logout(),this.$emit("logout",r.Z.getUserService().GUEST),this.$router.push("/")}},watch:{$route(){this.logger.log(-1,"watch","route"),this.initRoute()}},async mounted(){this.logger=new n.Z("Studio"),this.user=r.Z.getUserService().getUser(),await this.load(),this.initRoute(),this.logger.log(2,"mounted","exit > ",this.user)}},ji=Wi,qi=(0,p.Z)(ji,i,a,!1,null,null,null),Gi=qi.exports},56549:function(t,e,s){t.exports=s.p+"img/QUXLogo5BlueWhite2.305445b9.svg"}}]);
//# sourceMappingURL=apps.84d990e5.js.map