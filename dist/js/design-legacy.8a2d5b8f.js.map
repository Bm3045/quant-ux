{"version":3,"file":"js/design-legacy.8a2d5b8f.js","mappings":"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","sources":["webpack://quant-ux/./src/views/apps/Analyze.vue?aee7","webpack://quant-ux/./src/canvas/analytic/AnalyticToolbar.vue?2f67","webpack://quant-ux/./src/dash/Histogram.vue?18c3","webpack://quant-ux/src/dash/Histogram.vue","webpack://quant-ux/./src/dash/Histogram.vue?ce64","webpack://quant-ux/./src/dash/Histogram.vue","webpack://quant-ux/./src/plugins/ToolbarPluginSection.vue?92a0","webpack://quant-ux/src/plugins/ToolbarPluginSection.vue","webpack://quant-ux/./src/plugins/ToolbarPluginSection.vue?2690","webpack://quant-ux/./src/plugins/ToolbarPluginSection.vue","webpack://quant-ux/./src/canvas/analytic/AnalyticHomeMenu.vue?c617","webpack://quant-ux/src/canvas/analytic/AnalyticHomeMenu.vue","webpack://quant-ux/./src/canvas/analytic/AnalyticHomeMenu.vue?6f2f","webpack://quant-ux/./src/canvas/analytic/AnalyticHomeMenu.vue","webpack://quant-ux/./src/canvas/analytic/AnalyticViewModeButton.vue?2893","webpack://quant-ux/src/canvas/analytic/AnalyticViewModeButton.vue","webpack://quant-ux/./src/canvas/analytic/AnalyticViewModeButton.vue?4488","webpack://quant-ux/./src/canvas/analytic/AnalyticViewModeButton.vue","webpack://quant-ux/./src/canvas/analytic/AnalyticToolbarRender.vue?0720","webpack://quant-ux/src/canvas/analytic/AnalyticToolbarRender.vue","webpack://quant-ux/./src/canvas/analytic/AnalyticToolbarRender.vue?e262","webpack://quant-ux/./src/canvas/analytic/AnalyticToolbarRender.vue","webpack://quant-ux/src/canvas/analytic/AnalyticToolbar.vue","webpack://quant-ux/./src/canvas/analytic/AnalyticToolbar.vue?898f","webpack://quant-ux/./src/canvas/analytic/AnalyticToolbar.vue","webpack://quant-ux/./src/canvas/analytic/AnalyticCanvas.vue?9a5b","webpack://quant-ux/./src/canvas/analytic/UserJourney.vue?8292","webpack://quant-ux/src/canvas/analytic/UserJourney.vue","webpack://quant-ux/./src/canvas/analytic/UserJourney.vue?0948","webpack://quant-ux/./src/canvas/analytic/UserJourney.vue","webpack://quant-ux/./src/canvas/analytic/DropOff.vue?ed5f","webpack://quant-ux/src/canvas/analytic/DropOff.vue","webpack://quant-ux/./src/canvas/analytic/DropOff.vue?417d","webpack://quant-ux/./src/canvas/analytic/DropOff.vue","webpack://quant-ux/./src/canvas/analytic/DataProcessing.vue?80a6","webpack://quant-ux/src/canvas/analytic/DataProcessing.vue","webpack://quant-ux/./src/canvas/analytic/DataProcessing.vue?3605","webpack://quant-ux/./src/canvas/analytic/DataProcessing.vue","webpack://quant-ux/src/canvas/analytic/AnalyticCanvas.vue","webpack://quant-ux/./src/canvas/analytic/AnalyticCanvas.vue?a17d","webpack://quant-ux/./src/canvas/analytic/AnalyticCanvas.vue","webpack://quant-ux/./src/canvas/analytic/AnalyticController.js","webpack://quant-ux/src/views/apps/Analyze.vue","webpack://quant-ux/./src/views/apps/Analyze.vue?6404","webpack://quant-ux/./src/views/apps/Analyze.vue","webpack://quant-ux/./src/views/apps/Design.vue?ad99","webpack://quant-ux/./src/canvas/controller/CollabSession.js","webpack://quant-ux/src/views/apps/Design.vue","webpack://quant-ux/./src/views/apps/Design.vue?ac53","webpack://quant-ux/./src/views/apps/Design.vue","webpack://quant-ux/./src/views/apps/Share.vue?b6a9","webpack://quant-ux/./src/canvas/share/ShareCanvas.vue?7597","webpack://quant-ux/src/canvas/share/ShareCanvas.vue","webpack://quant-ux/./src/canvas/share/ShareCanvas.vue?c138","webpack://quant-ux/./src/canvas/share/ShareCanvas.vue","webpack://quant-ux/./src/canvas/share/ShareController.js","webpack://quant-ux/src/views/apps/Share.vue","webpack://quant-ux/./src/views/apps/Share.vue?0353","webpack://quant-ux/./src/views/apps/Share.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcCanvasPage\",attrs:{\"id\":\"CanvasNode\"}},[_c('AnalyticToolbar',{ref:\"toolbar\"}),_c('AnalyticCanvas',{ref:\"canvas\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcToolbar MatcAnalyticsToolbar MatcLayerListVisible\"},[_vm._m(0),_c('div',{staticClass:\"MatcToolbarTop \"},[_c('div',{staticClass:\"MatcToolbarTopHome\"},[_c('HomeMenu',{attrs:{\"name\":_vm.modelName},on:{\"select\":_vm.onHomeMenu}})],1),_c('div',{staticClass:\"MatcToolbarTopCntr\"},[_c('div',{staticClass:\"MatcToolbarSection MatcToolbarTopLeft\"},[_c('div',{class:['MatcToolbarItem MatcToolbarPrimaryItem', {'MatcToolbarItemSelected': _vm.mode === 'addComment'} ],attrs:{\"data-dojo-attach-point\":\"commentBtn\"},on:{\"click\":_vm.onNewComment}},[_c('QIcon',{attrs:{\"icon\":\"Comment\"}})],1)]),_c('div',{staticClass:\"MatcToolbarTopCenterCntr\"},[_c('div',{staticClass:\"MatcToolbarSection\",attrs:{\"data-dojo-attach-point\":\"screenSection\"}},[(_vm.events)?_c('AnalyticViewModeButton',{on:{\"change\":_vm.onChangeViewMode}}):_vm._e()],1)]),_c('div',{staticClass:\"MatcToolbarNotificationSection MatcToolbarTopRight MatcToolbarSection\",attrs:{\"data-dojo-attach-point\":\"notificationSection\"}},[_c('ToolbarPluginSection',{attrs:{\"events\":_vm.events,\"user\":_vm.user,\"mode\":_vm.model}}),_c('ViewConfig',{attrs:{\"value\":_vm.canvasViewConfig,\"analytic\":true},on:{\"change\":_vm.onChangeCanvasViewConfig}}),(false)?_c('HelpButton',{ref:\"helpBtn\",attrs:{\"hasNotifications\":false,\"hasToolbar\":true}}):_vm._e()],1)])]),_c('div',{staticClass:\"MatcToobarPropertiesSection MatcToolbarSectionHidden\",attrs:{\"data-dojo-attach-point\":\"propertiesCntr\"}})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcToolbarLayerList MatcToolbarAnalyticList MatcToobarPropertiesSection\"},[_c('div',{staticClass:\"MatcToolbarLayerListCntr\",attrs:{\"data-dojo-attach-point\":\"testListCntr\"}})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcDashHistogram\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n     <div class=\"MatcDashHistogram\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n</template>\n<script>\nimport DojoWidget from 'dojo/DojoWidget'\nimport css from 'dojo/css'\nimport Logger from 'common/Logger'\nimport _Color from 'common/_Color'\nimport _Tooltip from 'common/_Tooltip'\nimport DomBuilder from 'common/DomBuilder'\nimport DataFrame from 'common/DataFrame'\n\nexport default {\n    name: 'Histogram',\n    mixins:[_Color, _Tooltip, DojoWidget],\n    data: function () {\n        return {\n            x_prefix: \"\"\n        }\n    },\n    components: {},\n    methods: {\n        postCreate(){\n\t\t\tthis.log = new Logger(\"Histogram\");\t\t\n\t\t\tif(this.counts){\n\t\t\t\tvar values = this.counts.split(\",\");\n\t\t\t\tvar df = new DataFrame(values);\n\t\t\t\tvar hist = df.hist(null, this.bins);\n\t\t\t\tthis.setValue(hist,df.mean());\n\t\t\t}\n\t\t},\t\t\t\t\n\t\t\n\t\tsetPopoverFct(f){\n\t\t\tthis.popoverLabelFct = f;\n\t\t},\n\t\t\n\t\tsetLabel(l){\n\t\t\tthis.label.innerHTML = l;\n\t\t},\n\t\t\n\t\tsetMaxMin(fct){\n\t\t\tthis.minMaxFct = fct;\n\t\t},\n\t\t\n\t\tsetFormTo(fct){\n\t\t\tthis.toFromFct = fct;\n\t\t},\n\t\t\n\t\tonHover(fct){\n\t\t\tthis.hoverFCT = fct;\n\t\t},\n\t\t\n\t\tsetValue(hist, mean){\n\t\t\t\n\t\t\tvar bins = hist.size();\n\t\t\tvar max = hist.max(\"count\");\n\t\t\tvar min = hist.min(\"count\");\n\t\t\tvar from = hist.min(\"from\");\n\t\t\tvar to = hist.max(\"to\");\n\t\t\tvar width  = 100/ (bins *2 -1);\n\t\t\tvar v_mean = (mean - from) / (to - from) ;\n\t\t\t\n\t\t\n\t\t\tvar db = new DomBuilder();\n\t\t\tvar cntr = db.div(\"MatcDashHistogramCntr\").build();\n\t\t\t\n\t\t\tvar me = this;\n\t\t\thist.foreach(function(row, i){\t\n\t\t\t\tvar v = row.count;\n\t\t\t\tvar bar = db.div(\"MatcDashHistogramBar\").build(cntr);\n\t\t\t\tbar.style.height = Math.max(1, v*100 / max) + \"%\";\n\t\t\t\tbar.style.width = width + \"%\";\n\t\t\t\tbar.style.left = width*(i*2) + \"%\";\n\t\t\t\t\n\t\t\t\tif(me.hoverFCT){\n\t\t\t\t\tvar tt = me.hoverFCT(row);\n\t\t\t\t\tcss.add(bar, \"MatcDashHistogramBarHover\");\n\t\t\t\t\tme.addTooltip(bar, tt);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(this.toFromFct){\n\t\t\t\tto = this.toFromFct(to);\n\t\t\t\tfrom = this.toFromFct(from);\n\t\t\t}\n\t\t\t\n\t\t\tdb.span(\"MatcDashHistogramLabelMax MatcDashHistogramLabel\", max).build(cntr);\n\t\t\tdb.span(\"MatcDashHistogramLabelMin MatcDashHistogramLabel\", min).build(cntr);\n\t\t\tdb.span(\"MatcDashHistogramLabelFrom MatcDashHistogramLabel\", from + this.x_prefix).build(cntr);\n\t\t\tdb.span(\"MatcDashHistogramLabelTo MatcDashHistogramLabel\", to + this.x_prefix).build(cntr);\n\t\t\t\n\t\t\tthis.domNode.innerHTML == \"\";\n\t\t\tthis.domNode.appendChild(cntr);\n\t\t\t\n\t\t\t\n\n\t\t\t/**\n\t\t\t * Mean of passed\n\t\t\t */\n\t\t\tif(mean != null && mean != undefined){\n\t\t\t\tlet lblCntr = db.div(\"MatcDashHistogramLabelMean\").build(cntr);\n\t\t\t\tlblCntr.style.left = v_mean*100 + \"%\";\n\t\t\t\tif(this.toFromFct){\n\t\t\t\t\tmean = this.toFromFct(mean);\n\t\t\t\t} \n\t\t\t\tdb.span(\"MatcDashHistogramLabel MatcHorizontalMiddle\", mean + this.x_prefix).build(lblCntr);\n\t\t\t\tlet bar = db.div(\"MatcDashHistogramBarMean\").build(cntr);\n\t\t\t\tbar.style.left = v_mean*100 + \"%\";\n\t\t\t}\n\t\t\n\t\t},\n    }, \n    mounted () {\n    }\n}\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Histogram.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Histogram.vue?vue&type=template&id=a430b102&\"\nimport script from \"./Histogram.vue?vue&type=script&lang=js&\"\nexport * from \"./Histogram.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcToolbarSection\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n    <div class=\"MatcToolbarSection\">\n    </div>\n</template>\n\n<script>\n\n\nexport default {\n    name: 'PluginSection',\n    props:[\"user\", \"model\", \"events\"],\n    mixins:[],\n    data: function () {\n        return {\n\t\t\tvalue: null\n        }\n    },\n    components: {\n\t},\n    methods: {\n    },\n    mounted () {\n    }\n}\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ToolbarPluginSection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ToolbarPluginSection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ToolbarPluginSection.vue?vue&type=template&id=2814457b&\"\nimport script from \"./ToolbarPluginSection.vue?vue&type=script&lang=js&\"\nexport * from \"./ToolbarPluginSection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\" MatcToolbarArrowDropDown MatcToolbarDropDownButton MatcToobarHomeSection MatcToobarHomeSectionBlueX\"},[_c('div',{staticClass:\"MatcToolbarItem MatcToolbarPrimaryItem\",attrs:{\"type\":\"button\",\"data-dojo-attach-point\":\"button\"}},[_c('img',{attrs:{\"src\":require(\"../../style/img/QUXLogo5.svg\")}}),_c('span',{staticClass:\"MatcToobarHomeSectionAppNameLabel\"},[_vm._v(_vm._s(_vm.name))]),_c('span',{staticClass:\"caret\"})]),_c('div',{staticClass:\"MatcToolbarPopUp MatcToolbarDropDownButtonPopup\",attrs:{\"role\":\"menu\",\"data-dojo-attach-point\":\"popup\"},on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"MatcToolbarPopUpWrapper\"},[_c('ul',{attrs:{\"role\":\"menu\"}},_vm._l((_vm.items),function(i){return _c('li',{key:i.value,staticClass:\"MatcToolbarMenuItem\",class:i.css,on:{\"click\":function($event){$event.stopPropagation();return _vm.onSelect(i, $event)}}},[_c('label',{staticClass:\"MatcToolbarPopUpLabel\"},[_vm._v(_vm._s(i.label))])])}),0)]),_vm._m(0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcToolbarPopUpArrowCntr\"},[_c('div',{staticClass:\"MatcToolbarPopUpArrow\"})])}]\n\nexport { render, staticRenderFns }","\n<template>\n    <div class=\" MatcToolbarArrowDropDown MatcToolbarDropDownButton MatcToobarHomeSection MatcToobarHomeSectionBlueX\">\n\t\t<div class=\"MatcToolbarItem MatcToolbarPrimaryItem\" type=\"button\" data-dojo-attach-point=\"button\">\n\t\t\t<img src=\"../../style/img/QUXLogo5.svg\">\n            <span class=\"MatcToobarHomeSectionAppNameLabel\" >{{name}}</span>\n            <span class=\"caret\"></span>\n\t\t</div>\n        <div class=\"MatcToolbarPopUp MatcToolbarDropDownButtonPopup\" role=\"menu\" data-dojo-attach-point=\"popup\" @mousedown.stop>\n            <div class=\"MatcToolbarPopUpWrapper\">\n                <ul class=\"\" role=\"menu\">\n                    <li v-for=\"i in items\" :key=\"i.value\" @click.stop=\"onSelect(i, $event)\" :class=\"i.css\" class=\"MatcToolbarMenuItem\">\n                    \n                        <label class=\"MatcToolbarPopUpLabel\">{{i.label}}</label>\n\n                    </li>\n                  \n\t\t\t    </ul>\n            </div>\n            <div class=\"MatcToolbarPopUpArrowCntr\">\n                <div class=\"MatcToolbarPopUpArrow\">\n                </div>\n            </div>\n        </div>\n    </div>\n\n</template>\n<script>\nimport DojoWidget from 'dojo/DojoWidget'\nimport css from 'dojo/css'\nimport Util from 'core/Util'\n//import QIcon from 'page/QIcon'\nimport _DropDown from '../toolbar/components/_DropDown'\n\n\nexport default {\n    name: 'CreateBasicButton',\n    mixins:[Util, DojoWidget, _DropDown],\n    props:['name'],\n    data: function () {\n        return {\n            selectedTool: null,\n            tools: [               \n                {value: 'onShowSettings', icon: '', label: this.getNLS('toolbar.menu.settings')},       \n                {value: 'showHelp', icon: '', label: this.getNLS('toolbar.menu.help')},         \n                {value: 3, css:'MatcToolbarPopUpLine'},\n                {value: 'onExit', icon: '', label: this.getNLS('toolbar.menu.exit')},\n            ]\n        }\n    },\n    computed: {\n        items () {       \n            return this.tools\n        }\n    },\n    components: {\n        //'QIcon':QIcon\n    },\n    methods: {\n\n    \n        onSelect (t, e) {        \n            this.$emit('select', t, e)\n        },\n\n\t\tonHide (){   \n\t\t\tcss.remove(this.domNode,\"MatcToolbarItemActive\");\n            this.selectedTool = null\n\t\t},\n\n\t\tasync init (){\n\t\t\t\n\t\t},\n\n    },\n    mounted () {\n    }\n}\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AnalyticHomeMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AnalyticHomeMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnalyticHomeMenu.vue?vue&type=template&id=2fc8f053&\"\nimport script from \"./AnalyticHomeMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./AnalyticHomeMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcToolbarNavButton\"},[_c('div',{ref:\"cntr\",staticClass:\"MatcToolbarEditModeCntr\"},[_c('div',{staticClass:\"MatcToolbarEditModeHighlight\",style:({ 'width': _vm.highlightWidth + 'px', 'left': _vm.highlightX + 'px' })}),_vm._l((_vm.modes),function(m,i){return _c('a',{key:m.value,ref:\"btns\",refInFor:true,class:['MatcToolbarItem', { 'MatcToolbarEditModeActive': m.value === _vm.selected }],on:{\"click\":function($event){return _vm.setSelected(m, i)}}},[_c('span',{ref:\"icons\",refInFor:true,class:'MatcToolbarResponsiveIcon ' + m.icon}),_c('span',{staticClass:\"MatcToolbarResponsiveLabel\"},[_vm._v(\" \"+_vm._s(m.label)+\" \")])])})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n    <div class=\"MatcToolbarNavButton\">\n\n        <div class=\"MatcToolbarEditModeCntr\" ref=\"cntr\">\n            <div class=\"MatcToolbarEditModeHighlight\" :style=\"{ 'width': highlightWidth + 'px', 'left': highlightX + 'px' }\">\n            </div>\n            <a v-for=\"(m, i) in modes\" @click=\"setSelected(m, i)\" ref=\"btns\" :key=\"m.value\"\n                :class=\"['MatcToolbarItem', { 'MatcToolbarEditModeActive': m.value === selected }]\">\n                <span :class=\"'MatcToolbarResponsiveIcon ' + m.icon\" ref=\"icons\"/>\n                <span class=\"MatcToolbarResponsiveLabel\">\n                    {{m.label}}\n                </span>\n            </a>\n        </div>\n\n    </div>\n</template>\n<style lang=\"scss\">\n    @import '../../style/toolbar/toolbar_nav_button.scss';\n</style>\n<script>\n\nimport Logger from \"common/Logger\";\nimport _Tooltip from 'common/_Tooltip'\nimport NLS from 'common/NLS'\nimport domGeom from 'dojo/domGeom'\n\nexport default {\n    name: \"EditModeButton\",\n    mixins: [_Tooltip, NLS],\n    props: ['value'],\n    data: function () {\n        return {\n            highlightWidth: 0,\n            highlightX: 0,\n            selected: 'showClickHeatMap',\n            modes: [\n                { label: 'Heatmaps', value: \"showClickHeatMap\", icon: \"mdi mdi-cursor-default\" },\n                // { label: 'Mouse Heatmap', value: \"showMouseHeatMap\", icon: \"mdi mdi-mouse\" },\n                { label: 'User Journey', value: \"showUserJourney\", icon: \"mdi mdi-vector-polyline\" },\n                { label: 'Tasks & Drop Off', value: \"showDropOff\", icon: \"mdi mdi-chart-timeline-variant-shimmer\" },\n                //{ label: 'Views', value: \"showViewMap\", icon: \"mdi mdi-eye\" },\n                { label: 'Screens', value: \"showScreenMode\", icon: \"mdi mdi-chart-timeline-variant-shimmer\" },\n            ]\n        };\n    },\n    computed: {\n        hasData() {\n            if (this.value) {\n                return this.value.hasDataView\n            }\n            return true\n        }\n    },\n    components: {},\n    methods: {\n        setSelected(m, i) {\n            this.log.log(1, 'setSelected', 'enter', m)\n            this.selected = m.value\n            this.setHighlight(i)\n            this.$emit(\"change\", m.value)\n        },\n    \n        setHighlight(i) {\n            const node = this.$refs.btns[i]\n            const pos = domGeom.position(node)\n            const cPos = domGeom.position(this.$refs.cntr)\n            this.highlightWidth = pos.w\n            this.highlightX = pos.x - cPos.x - 1\n        },\n        nextView() {\n        }\n    },\n    watch: {\n        value(v) {\n            this.log.log(2, 'watch(value)', 'enter', v)\n            this.value = v\n        }\n    },\n    async mounted() {\n        this.log = new Logger(\"AnalyticViewModeButton\")\n        this.setHighlight(0)\n        setTimeout(() => {\n            this.modes.forEach((mode, i) => {\n                const icon = this.$refs.icons[i]\n                this.addTooltip(icon, mode.label)\n            })\n        }, 100)\n\n \n    }\n};\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AnalyticViewModeButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AnalyticViewModeButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnalyticViewModeButton.vue?vue&type=template&id=35459a79&\"\nimport script from \"./AnalyticViewModeButton.vue?vue&type=script&lang=js&\"\nexport * from \"./AnalyticViewModeButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AnalyticViewModeButton.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcToolbar MatcAnalyticsToolbar MatcLayerListVisible\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n    <div class=\"MatcToolbar MatcAnalyticsToolbar MatcLayerListVisible\">\n    </div>\n</template>\n<script>\n\nimport css from 'dojo/css'\nimport lang from 'dojo/_base/lang'\n\nimport on from 'dojo/on'\nimport touch from 'dojo/touch'\nimport hash from 'dojo/hash'\n\nimport DomBuilder from 'common/DomBuilder'\nimport ScrollContainer from 'common/ScrollContainer'\nimport Dialog from 'common/Dialog'\nimport CheckBox from 'common/CheckBox'\nimport RadioBoxList from 'common/RadioBoxList'\nimport Form from 'common/Form'\nimport ToolbarDropDownButton from 'canvas/toolbar/components/ToolbarDropDownButton'\nimport ToolbarColor from 'canvas/toolbar/components/ToolbarColor'\nimport Ring from 'common/Ring'\nimport Analytics from 'dash/Analytics'\nimport VideoPlayer from 'views/apps/test/VideoPlayer'\nimport DataFrame from 'common/DataFrame'\nimport {iconDOM} from '../../page/QIconUtil'\n\nexport default {\n    name: 'AnalyticToolbarRender',\n    mixins: [],\n    data: function () {\n        return {\n            hasSelectAll: true\n        }\n    },\n    components: {\n    },\n    methods: {\n\n\n        renderToolbar() {\n            this.logger.log(3, \"renderToolbar\", \"enter\");\n            if (this.isRendered) {\n                return\n            }\n            this.isRendered = true\n            this.logger.log(3, \"renderToolbar\", \"exit\");\n        },\n\n        render() {\n            this.logger.log(3, \"render\", \"entry\");\n\n            this.properties = document.createElement(\"div\");\n            css.add(this.properties, \"MatcToobarPropertiesSectionCntr\")\n\n            this.sections = [];\n\n            this.propertiesStates = {};\n\n            this.renderScreenProperties();\n\n            this.renderScreenModes();\n\n            this.renderWidgetProperties();\n\n            this.renderSessionProperties();\n\n            this.renderSessionSection();\n\n            this.renderDropOffProperties()\n\n            this.renderHeatMapProperties();\n\n            this.renderGestureProperties();\n\n            this.propertiesCntr.appendChild(this.properties);\n\n\n            /**\n             * Now assemble final ui. hook in properties panel and make toolSection Visible!\n             */\n            this.scroller = this.$new(ScrollContainer);\n            this.scroller.placeAt(this.propertiesCntr);\n            this.scroller.wrap(this.properties, 40);\n\n            this.hideAllSections();\n\n            this.showHeatMapProperties();\n            this.showClickHeatMap()\n\n            this.logger.log(3, \"render\", \"exit\");\n        },\n\n\n\n\n        renderScreenProperties() {\n            this.logger.log(3, \"renderScreenProperties\", \"entry\");\n\n\n            var db = new DomBuilder();\n            /**\n             * Name\n             */\n            this.screenNameDiv = this.createSection(\"Screen\", this.properties);\n            var content = this.createContent(this.screenNameDiv);\n\n            this.screenName = this.createInput(content, \"Screen Name\");\n            this.screenName.readOnly = true;\n\n            var ringCntr = db.div(\"MatcCenter\").build(content);\n\n            /**\n             * Views total\n             */\n            var cntr = db.div(\"MatcMarginBottom\").build(ringCntr)\n            this.screenTestRing = this.createRing(\"Test Coverage\", \"analytics.canvas.kpi.coverage\");\n            this.screenTestRing.placeAt(cntr);\n\n            /**\n             * Dwell\n             */\n            cntr = db.div(\"MatcMarginBottom\").build(ringCntr)\n            this.screenDwellRing = this.createRing(\"Dwell Time\", \"analytics.canvas.kpi.dwell\");\n            this.screenDwellRing.placeAt(cntr);\n\n            /**\n             * Views total\n             */\n            cntr = db.div(\"MatcMarginBottom\").build(ringCntr)\n            this.screenTotalViewRing = this.createRing(\"Screen Views\", \"analytics.canvas.kpi.screen-views\");\n            this.screenTotalViewRing.placeAt(cntr);\n\n\n            /**\n             * CLicks\n             */\n            cntr = db.div(\"MatcMarginBottom\").build(ringCntr)\n            this.screenClickRing = this.createRing(\"Screen Clicks\", \"analytics.canvas.kpi.screen-clicks\");\n            this.screenClickRing.placeAt(cntr);\n\n\n            /**\n             * CLicks\n             */\n            cntr = db.div(\"MatcMarginBottom\").build(ringCntr)\n            this.screenWidgetClickRing = this.createRing(\"Widget Clicks\", \"analytics.canvas.kpi.screen-widget-clicks\");\n            this.screenWidgetClickRing.placeAt(cntr);\n\n        },\n\n\n        renderWidgetProperties() {\n            this.logger.log(3, \"renderWidgetProperties\", \"entry\");\n\n            var db = new DomBuilder();\n\n            /**\n             * Name\n             */\n            this.widgetNameDiv = this.createSection(\"Widget \", this.properties);\n            var content = this.createContent(this.widgetNameDiv);\n            this.widgetName = this.createInput(content, \"Screen\");\n            this.widgetName.readOnly = true;\n            var ringCntr = db.div(\"MatcCenter\").build(content);\n\n            /**\n             * CLicks\n             */\n            let cntr = db.div(\"MatcMarginBottom\").build(ringCntr)\n            this.widgetClickRing = this.createRing(\"Widget Clicks\", \"analytics.canvas.kpi.clicks\");\n            this.widgetClickRing.placeAt(cntr);\n\n\n            /**\n             * First Clicks\n             */\n            cntr = db.div(\"MatcMarginBottom\").build(ringCntr)\n            this.widgetFirstClickRing = this.createRing(\"First Clicks\", \"analytics.canvas.kpi.first-clicks\");\n            this.widgetFirstClickRing.placeAt(cntr);\n\n            /**\n             * Discovery\n             */\n            cntr = db.div(\"MatcMarginBottom\").build(ringCntr);\n            var nodes = this.createBigNumber(db, cntr, \"Time before Click\", \"analytics.canvas.kpi.before-click\");\n            this.widgetDiscoverLabel = nodes[0];\n            this.widgetDiscoverSTDLabel = nodes[1];\n\n        },\n\n\n        renderHeatMapProperties() {\n            this.logger.log(1, \"renderHeatMapProperties\", \"entry\");\n\n            var db = new DomBuilder();\n\n            this.heatmapDiv = this.createSection(\"Heatmap\", this.properties);\n\n            let content = this.createContent(this.heatmapDiv);\n\n            var row = db.div(\"MatcToobarRow MatcMarginBottom\").build(content);\n\n            var list = this.$new(RadioBoxList);\n            css.add(list.domNode, \"MatcToolbarRadioList\");\n            list.setOptions([\n                { \"value\": -1, label: \"All Clicks\" },\n                { \"value\": 1, label: \"First Click\" },\n                { \"value\": 3, label: \"First three Clicks\" },\n                { \"value\": \"missedClicks\", label: \"Missed Clicks\" },\n                { \"value\": \"mouse\", label: \"Mouse\" }\n            ]);\n            list.placeAt(db.div().build(row));\n            this.own(list.on(\"change\", lang.hitch(this, \"showFirstClickHeatMap\")));\n\n\n            this.heatmapLabel = db.div('MatcToobarRow').label('MatcToolbarLabel MatcToolbarHelpSection').build(content)\n\n            this.heatmapClickList = list;\n            this.setHeatMapLabel(-1)\n        },\n\n        setHeatMapLabel(i) {\n            let lbl = ''\n            if (i === -1) {\n                lbl = this.getNLS('analytics.canvas.heatamp.hintAll')\n            }\n            if (i === 1) {\n                lbl = this.getNLS('analytics.canvas.heatamp.hintFirst')\n            }\n            if (i === 3) {\n                lbl = this.getNLS('analytics.canvas.heatamp.hintFirstThree')\n            }\n            if (i === 'missedClicks') {\n                lbl = this.getNLS('analytics.canvas.heatamp.hintMissed')\n            }\n\n            if (i === 'mouse') {\n                lbl = this.getNLS('analytics.canvas.heatamp.hintMouse')\n            }\n            this.heatmapLabel.textContent = lbl\n        },\n\n        renderDropOffProperties() {\n            this.logger.log(2, \"renderSessionProperties\", \"entry\");\n\n            var db = new DomBuilder();\n\n\n            this.dropOffConfigDiv = this.createSection(\"Show\", this.properties);\n            var content = this.createContent(this.dropOffConfigDiv);\n            var row = db.div(\"MatcToobarRow MatcToolbarRadioList\").build(content);\n\n            this.dropOffTimeCheckBox = this.$new(RadioBoxList, { maxLabelLength: 20 });\n            this.dropOffTimeCheckBox.setOptions([\n                { value: false, label: 'Drop Off' },\n                { value: true, label: 'Time' }\n            ]);\n            this.dropOffTimeCheckBox.setValue(false);\n            this.dropOffTimeCheckBox.placeAt(row);\n            this.own(on(this.dropOffTimeCheckBox, \"change\", lang.hitch(this, \"selectDropOffTask\")));\n\n\n            this.dropOffOptionsDiv = this.createSection(\"Tasks\", this.properties);\n            content = this.createContent(this.dropOffOptionsDiv);\n            row = db.div(\"MatcToobarRow \").build(content);\n\n\n            this.dropOffTaskBtn = this.$new(RadioBoxList, { maxLabelLength: 20 });\n\n            let tasks = []\n\n            if (this.testSettings.tasks && this.testSettings.tasks.length >= 1) {\n                tasks = this.testSettings.tasks.map((task, i) => {\n                    return { value: i, label: task.name }\n                })\n            } else {\n                this.dropOffOptionsLabel = db.span(\n                    \"MatcToolbarLabel MatcToolbarHelpSection\",\n                    this.getNLS(\"analytics.canvas.dropoff.hintNoTasksDefined\")\n                ).build(row)\n            }\n\n            this.dropOffTaskBtn.setOptions(tasks);\n            this.dropOffTaskBtn.setValue(0);\n            css.add(this.dropOffTaskBtn.domNode, \"MatcToolbarRadioList\");\n            this.dropOffTaskBtn.placeAt(row);\n            this.own(on(this.dropOffTaskBtn, \"change\", lang.hitch(this, \"selectDropOffTask\")));\n\n            this.dropOffChartDivCntr = this.createSection(\"Insights\", this.properties);\n            content = this.createContent(this.dropOffChartDivCntr);\n\n            var ringCntr = db.div(\"MatcCenter \").build(content);\n            this.dropoffTaskSuccess = this.createRing(\"Success\", \"analytics.canvas.kpi.first-clicks\");\n            css.add(this.dropoffTaskSuccess.domNode, 'MatcMarginBottom')\n            this.dropoffTaskSuccess.placeAt(ringCntr);\n\n\n            let cntr = db.div(\"MatcMarginBottom\").build(ringCntr);\n            var nodes = this.createBigNumber(db, cntr, \"Duration\", \"analytics.canvas.kpi.before-click\");\n            this.dropOffTaskDuration = nodes[0];\n            this.dropOffTaskDurationLabel = nodes[1];\n\n\n            cntr = db.div(\"MatcMarginBottom\").build(ringCntr);\n            nodes = this.createBigNumber(db, cntr, \"Interactions\", \"analytics.canvas.kpi.before-click\");\n            this.dropOffInteractions = nodes[0];\n            this.dropOffInteractionsLabel = nodes[1];\n\n\n            this.dropOffFunnelDivCntr = this.createSection(\"Drop Off\", this.properties);\n            content = this.createContent(this.dropOffFunnelDivCntr);\n\n            this.dropOffChartDiv = db.div('MatcToolbarDropOffChart', '').build(content)\n        },\n\n\n        renderSessionProperties() {\n            this.logger.log(1, \"renderSessionProperties\", \"entry\");\n\n            const db = new DomBuilder();\n\n            this.sessionOptionsDiv = this.createSection(\"Show\", this.properties);\n            let content = this.createContent(this.sessionOptionsDiv);\n\n            let row = db.div(\"MatcToobarRow MatcToolbarRadioList\").build(content);\n\n            this.sessionTreeCheckBox = this.$new(RadioBoxList)\n            this.sessionTreeCheckBox.setOptions([\n                { value: true, label: \"Merged Graph\" },\n                { value: false, label: \"Individual Tests\" },\n            ])\n\n            // this.sessionTreeCheckBox = this.$new(CheckBox);\n            // this.sessionTreeCheckBox.setLabel(\"Merge Graph\");\n            //css.add(this.sessionTreeCheckBox.domNode, \"MatcToolbarItem\");\n            this.sessionTreeCheckBox.setValue(true);\n            this.sessionTreeCheckBox.placeAt(row);\n            this.own(on(this.sessionTreeCheckBox, \"change\", lang.hitch(this, \"showUserJourney\")));\n\n\n            row = db.div(\"MatcToobarRow\").build(content);\n            this.sessionOutlierCheckbox = this.$new(CheckBox);\n            css.add(this.sessionOutlierCheckbox.domNode, \"MatcToolbarItem\");\n            this.sessionOutlierCheckbox.setValue(false);\n            this.sessionOutlierCheckbox.setLabel(\"Show Outlier\");\n            this.sessionOutlierCheckbox.placeAt(row);\n            this.own(on(this.sessionOutlierCheckbox, \"change\", lang.hitch(this, \"showUserJourneyOutlier\")));\n\n\n            this.sessionOutlierDiv = this.createSection(\"Colors\", this.properties);\n            content = this.createContent(this.sessionOutlierDiv);\n            row = db.div(\"MatcToobarRow \").build(content);\n\n\n            this.sessionLineColor = this.$new(ToolbarColor, { updateColor: true, hasCustomColor: false, hasPicker: false });\n            this.sessionLineColor.placeAt(row);\n            this.sessionLineColor.setLabel('Graph');\n            this.sessionLineColor.setModel(this.model);\n            this.sessionLineColor.setValue(\"#33b5e5\");\n            css.add(this.sessionLineColor.domNode, \" hidden\");\n            this.own(on(this.sessionLineColor, \"change\", lang.hitch(this, \"showUserJourney\")));\n\n            this.sessionTaskLineColor = this.$new(ToolbarColor, { updateColor: true, hasCustomColor: false, hasPicker: false });\n            this.sessionTaskLineColor.placeAt(row);\n            this.sessionTaskLineColor.setLabel('Task');\n            this.sessionTaskLineColor.setModel(this.model);\n            this.sessionTaskLineColor.setValue(\"#92c500\");\n            css.add(this.sessionTaskLineColor.domNode, \"\");\n            this.own(on(this.sessionTaskLineColor, \"change\", lang.hitch(this, \"showUserJourney\")));\n\n\n            this.sessionOutlierColor = this.$new(ToolbarColor, { updateColor: true, hasCustomColor: false, hasPicker: false });\n            this.sessionOutlierColor.placeAt(row);\n            this.sessionOutlierColor.setLabel('Outlier');\n            this.sessionOutlierColor.setModel(this.model);\n            this.sessionOutlierColor.setValue(\"#ffb61c\");\n            css.add(this.sessionOutlierColor.domNode, \"\");\n            this.own(on(this.sessionOutlierColor, \"change\", lang.hitch(this, \"showUserJourney\")));\n\n\n            this.sessionShowDiv = this.createSection(\"Options\", this.properties);\n            content = this.createContent(this.sessionShowDiv);\n            row = db.div(\"MatcToobarRow MatcToolbarRadioList\").build(content);\n            this.sessionTimeCheckBox = this.$new(RadioBoxList, { maxLabelLength: 20 });\n            this.sessionTimeCheckBox.setOptions([\n                { value: false, label: 'Navigation' },\n                { value: true, label: 'Time' }\n            ]);\n\n            this.sessionTimeCheckBox.setValue(false);\n            this.sessionTimeCheckBox.placeAt(row);\n            this.own(on(this.sessionTimeCheckBox, \"change\", lang.hitch(this, \"showUserJourney\")));\n\n\n            this.sessionTaskCntr = this.createSection(\"Tasks\", this.properties);\n            content = this.createContent(this.sessionTaskCntr);\n\n            row = db.div(\"MatcToobarRow \").build(content);\n\n            var tasks = [{ value: -1, label: \"No Task\" }];\n            if (this.testSettings.tasks) {\n                for (let i = 0; i < this.testSettings.tasks.length; i++) {\n                    let task = this.testSettings.tasks[i];\n                    tasks.push({ value: i, label: task.name });\n                }\n            }\n            this.sessionTaskBtn = this.$new(RadioBoxList, { maxLabelLength: 20 });\n            this.sessionTaskBtn.setOptions(tasks);\n            this.sessionTaskBtn.setValue(-1);\n            css.add(this.sessionTaskBtn.domNode, \"MatcToolbarRadioList\");\n            this.sessionTaskBtn.placeAt(row);\n            this.own(on(this.sessionTaskBtn, \"change\", lang.hitch(this, \"selectUserJournyTask\")));\n\n\n        },\n\n        renderSessionSection() {\n\n\n            this.sessionDiv = this.db.div(\"MatcToolbarSection\").build(this.testListCntr)\n            let content = this.createContent(this.sessionDiv);\n            css.add(content, \"MatcMarginBottomXXL\");\n\n\n            let row = this.db.div(\"MatcToobarRow\").build(content);\n\n            this.sessionOrderBrn = this.$new(ToolbarDropDownButton, { maxLabelLength: 20 });\n            this.sessionOrderBrn.setOptions([\n                { value: 'date', label: \"Sort by Date\" },\n                { value: 'duration', label: \"Sort by Duration\" },\n                { value: 'events', label: \"Sort by Events\" },   \n                { value: 'weirdness', label: \"Sort by Outlier\" }\n            ]);\n            this.sessionOrderBrn.setPopupCss(\"MatcActionAnimProperties MatcPopupArrowLeft\");\n            this.sessionOrderBrn.updateLabel = true;\n            this.sessionOrderBrn.reposition = true;\n            this.sessionOrderBrn.repositionPosition = 'right';\n            this.sessionOrderBrn.setValue('date')\n            this.sessionOrderBrn.placeAt(row);\n            this.tempOwn(on(this.sessionOrderBrn, \"change\", (v) => { this.onSortSessionList(v) }));\n            this.addTooltip(this.sessionOrderBrn.domNode, \"Change the sort order of the session list\");\n\n\n\n            \n            // row = this.db.div(\"MatcToobarRow\").build(content);\n\n            // const selectOptions = [\n            //     { value: 'all', label: \"Select All\", callback: () => this.onSelectSesionAll()},\n            //     { value: 'invert', label: \"Invert Selection\", callback: () => this.onSelectSessionInvert()}\n            // ]\n            // if (this.testSettings && this.testSettings.tasks) {\n            //     this.testSettings.tasks.forEach(t => {\n            //         selectOptions.push({\n            //             value: t.id, label: \"Select \" + t.name, callback: () => this.onSelectSesionsTask(t)\n            //         })\n            //     })\n            // }\n       \n            // this.sessionSelectBtn = this.$new(ToolbarDropDownButton, { maxLabelLength: 20 });\n            // this.sessionSelectBtn.setOptions(selectOptions);\n            // this.sessionSelectBtn.setPopupCss(\"MatcActionAnimProperties MatcPopupArrowLeft\");\n            // this.sessionSelectBtn.updateLabel = true;\n            // this.sessionSelectBtn.reposition = true;\n            // this.sessionSelectBtn.repositionPosition = 'right';\n            // this.sessionSelectBtn.setValue('all')\n            // this.sessionSelectBtn.placeAt(row);\n            // this.tempOwn(on(this.sessionSelectBtn, \"change\", (v) => { this.onSelectSesionsBy(v) }));\n            // this.addTooltip(this.sessionSelectBtn.domNode, \"Select a subset of sessions\");\n\n\n            this.sessionListCntr = this.db.div(\"MatcToolbarSessionCntr\").build(content);\n            this.sessionList = this._getTestList(this.events, this.annotation, this.testSettings);\n            this.renderSessionList(this.sessionListCntr, this.sessionList, 'date')\n\n        },\n\n        onSelectSessionInvert () {\n            console.debug('onSelectSesionAll')\n        },\n\n        onSelectSesionAll(v) {\n            console.debug('onSelectSesionAll', v)\n        },\n\n        onSelectSesionsTask(v) {\n            console.debug('onSelectSesionsTask', v)\n        },\n\n        onSortSessionList(value) {\n            this.renderSessionList(this.sessionListCntr, this.sessionList, value)\n            \n        },\n\n        renderSessionList(content, list, order) {\n\n            const db = new DomBuilder();\n\n            content.innerHTML = \"\"\n\n           \n            if (this.hasSelectAll) {\n                this.sessionAllCheckBox = this.$new(CheckBox);\n                this.sessionAllCheckBox.setLabel(\"Show All\");\n                this.sessionAllCheckBox.setValue(true);\n                css.add(this.sessionAllCheckBox.domNode, \"MatcToolbarItem\");\n                this.sessionAllCheckBox.placeAt(db.div(\"MatcToobarRow\").build(content));\n                this.own(on(this.sessionAllCheckBox, \"change\", lang.hitch(this, \"selectAllSessions\")));\n            }\n\n\n            list.sort((a, b) => {\n                if (order === 'duration') {\n                    return b.duration - a.duration\n                }\n                if (order === 'date') {\n                    return a.start - b.start\n                }\n                if (order === 'weirdness') {\n                    return b.weirdness - a.weirdness\n                }\n                return b.size - a.size\n            })\n\n\n            const cntr = db.div(\"MatcToolbarSessionList\").build()\n            this.sessionCheckBoxes = {};\n            for (let i = 0; i < list.length; i++) {\n                const session = list[i];\n                const row = db.div(\"MatcToobarRow MatcToobarRowIconCntr\").build(cntr);\n\n                const chk = this.$new(CheckBox);\n                css.add(chk.domNode, \"MatcToolbarItem\");\n                chk.setValue(true);\n                if (order === 'duration') {\n                    chk.setLabel(\"Test \" + (session.id) + \" - \" + session.duration + \"s\"); // + session.taskPerformance +\" Tasks - \"\n                }\n                if (order === 'date') {\n                    chk.setLabel(\"Test \" + (session.id) + \" - \" + session.date + \"\"); // + session.taskPerformance +\" Tasks - \"\n                }\n                if (order === 'events') {\n                    chk.setLabel(\"Test \" + (session.id) + \" - \" + session.size + \"\"); // + session.taskPerformance +\" Tasks - \"\n                }\n\n                if (order === 'weirdness') {\n                    chk.setLabel(\"Test \" + (session.id) + \" - \" + session.weirdness * 100 + \"%\"); // + session.taskPerformance +\" Tasks - \"\n                }\n                chk.placeAt(db.div().build(row));\n\n                if (this.hasSessionDetails) {\n                    const details = db.div(\"MatcToolbarSessionListDetails\").build(row)\n\n                    const duration = db.div().build(details)\n                    duration.appendChild(iconDOM(\"Clock\"))\n                    db.span(\"\",session.duration + 's').build(duration)\n\n                    const events = db.div().build(details)\n                    events.appendChild(iconDOM(\"Count\"))\n                    db.span(\"\",session.size).build(events)\n                }\n\n\n\n          \n\n                this.sessionCheckBoxes[session.session] = chk;\n                this.own(on(chk, \"change\", lang.hitch(this, \"selectSession\")));\n                this.own(on(row, \"mouseover\", lang.hitch(this, \"hoverSession\", session)))\n                this.own(on(row, \"mouseout\", lang.hitch(this, \"hoverSession\", null)))\n\n                var play = db.div(\"MatcToobarRowRightIcon\").span(\"mdi mdi-play\").build(row)\n                this.own(on(play, \"click\", lang.hitch(this, \"showSession\", session)));\n            }\n\n            this.sessionScroller = this.$new(ScrollContainer);\n            this.sessionScroller.placeAt(content);\n            this.sessionScroller.wrap(cntr, 40);\n        },\n\n        hoverSession(session) {\n            if (this.analyticMode !== 'UserJourney') {\n                return\n            }\n            if (this.canvas) {\n                this.canvas.highlightSession(session?.session)\n            }\n        },\n\n        showUserJourneyOutlier(showOutlier) {\n            if (showOutlier) {\n                let outliers = this.canvas.getOutlierScores();\n                for (let session in this.sessionCheckBoxes) {\n                    let chkBx = this.sessionCheckBoxes[session];\n                    if (outliers[session]) {\n                        css.remove(chkBx.domNode, \"MatcToolbarItemStrikeThrough\");\n                    } else {\n                        css.add(chkBx.domNode, \"MatcToolbarItemStrikeThrough\");\n                    }\n                }\n\n            } else {\n                for (let session in this.sessionCheckBoxes) {\n                    let chkBx = this.sessionCheckBoxes[session];\n                    css.remove(chkBx.domNode, \"MatcToolbarItemPassive\");\n                    css.remove(chkBx.domNode, \"MatcToolbarItemStrikeThrough\");\n                }\n            }\n            this.showUserJourney();\n        },\n        /**\n         * Update the UI according the selected task. Show task color selector\n         * and also fade out not matching sessions\n         */\n        selectUserJournyTask(taskNumber) {\n\n            if (taskNumber >= 0) {\n                // css.remove(this.sessionTaskLineColor.domNode, \"hidden\");\n                // css.remove(this.sessionLineColor.domNode, \"hidden\")\n                let task = this.testSettings.tasks[taskNumber];\n                let taskPerformance = this.canvas.getTaskPerformance();\n                for (let session in this.sessionCheckBoxes) {\n                    let chkBx = this.sessionCheckBoxes[session];\n                    if (taskPerformance[session] && taskPerformance[session][task.id]) {\n                        css.remove(chkBx.domNode, \"MatcToolbarItemStrikeThrough\");\n                        //chkBx.setValue(true);\n                    } else {\n                        //chkBx.setValue(false);\n                        css.add(chkBx.domNode, \"MatcToolbarItemStrikeThrough\");\n                    }\n                }\n            } else {\n                // css.add(this.sessionTaskLineColor.domNode, \"hidden\");\n                // css.add(this.sessionLineColor.domNode, \"hidden\")\n                for (let session in this.sessionCheckBoxes) {\n                    let chkBx = this.sessionCheckBoxes[session];\n                    css.remove(chkBx.domNode, \"MatcToolbarItemPassive\");\n                    css.remove(chkBx.domNode, \"MatcToolbarItemStrikeThrough\");\n                }\n            }\n            this.showUserJourney();\n        },\n\n        setSelectSessions(ids) {\n            if (this.sessionCheckBoxes) {\n                for (var id in this.sessionCheckBoxes) {\n                    if (ids.indexOf(id) >= 0) {\n                        this.sessionCheckBoxes[id].setValue(true);\n                    } else {\n                        this.sessionCheckBoxes[id].setValue(false);\n                    }\n                }\n                if (this.sessionAllCheckBox) {\n                    this.sessionAllCheckBox.setValue(false);\n                }\n\n                this.onSessionSelectionChanged();\n            }\n        },\n\n        selectAllSessions(value) {\n            for (let id in this.sessionCheckBoxes) {\n                this.sessionCheckBoxes[id].setValue(value);\n            }\n            this.onSessionSelectionChanged();\n        },\n\n        selectSession() {\n            this.onSessionSelectionChanged();\n        },\n\n        onSessionSelectionChanged() {\n            this.logger.log(-1, \"onSessionSelectionChanged\", \"enter\")\n            this.reRenderAnalyticMode()\n        },\n\n        getSelectedSessions () {\n            const sessions = {};\n\t\t\tfor(var id in this.sessionCheckBoxes){\n\t\t\t\tsessions[id] = this.sessionCheckBoxes[id].getValue();\n\t\t\t}\n            return sessions\n        },\n\n        _getTestList(events, annotatation, testSettings) {\n\n            const list = [];\n            if (!testSettings.tasks) {\n                testSettings.tasks = [];\n                console.warn(\"_getTestList() > Added missing task array\")\n            }\n\n            const df = new DataFrame(events);\n            df.sortBy(\"time\");\n            const sessionGroup = df.groupBy(\"session\");\n            const sessions = sessionGroup.data;\n\n            const annoSession = new DataFrame(annotatation).groupBy(\"reference\");\n            const analytics = new Analytics();\n            const taskCount = testSettings.tasks.length;\n            const tasksPerformance = analytics.getMergedTaskPerformance(df, testSettings.tasks, annotatation);\n            const tasksBySession = tasksPerformance.count(\"session\");\n\n            const outliers = this.canvas.getOutlierScores()\n\n            let id = 1;\n            for (let sessionID in sessions) {\n\n                let session = sessions[sessionID];\n                let date = this.formatDate(session.min(\"time\"), true);\n\n                let anno = annoSession.get(sessionID);\n                let status = '<span class=\"MatchDashStatusSuccess\">Valid</span>';\n                let isValid = true;\n                if (anno) {\n                    isValid = anno.get(0).get(\"isValid\");\n                    if (!isValid) {\n                        status = '<span class=\"MatchDashStatusFailure\">Failure</span>';\n                    }\n                }\n\n                let taskSuccess = tasksBySession.get(sessionID);\n                if (!taskSuccess) {\n                    taskSuccess = 0;\n                }\n\n                const df = new DataFrame(session.data)\n                //const actionsEvents = this.getActionEvents(df);\n                const clicks = df.select(\"type\", \"in\", [\"ScreenClick\", \"WidgetClick\", \"WidgetChange\", \"ScreenGesture\", \"WidgetGesture\"])\n\n\n                const item = {\n                    session: sessionID,\n                    taskPerformance: taskSuccess + \" / \" + taskCount,\n                    weirdness: outliers[sessionID],\n                    duration: (Math.ceil((session.max(\"time\") - session.min(\"time\")) / 1000)),\n                    date: date,\n                    start: session.min(\"time\"),\n                    size: clicks.size(),\n                    status: status,\n                    isValid: isValid,\n                    id: id,\n                    screens: session.unique(\"screen\")\n                };\n\n                list.push(item);\n                id++;\n            }\n\n            list.sort((a, b) => {\n                return a.id - b.id;\n            });\n\n            return list;\n        },\n\n\n        renderGestureProperties() {\n\n            var db = new DomBuilder();\n\n            this.gestureOptionsDiv = this.createSection(\"Options\", this.properties);\n\n            let content = this.createContent(this.gestureOptionsDiv);\n\n            var row = db.div(\"MatcToobarRow MatcMarginBottomXXL\").build(content);\n            db.span(\"MatcToolbarItemLabel\", \"Gesture Color\").build(row);\n\n            this.gestureLineColor = this.$new(ToolbarColor, { updateColor: true, hasCustomColor: false, hasPicker: false });\n            this.gestureLineColor.placeAt(row);\n            this.gestureLineColor.setLabel('Line Color');\n            this.gestureLineColor.setModel(this.model);\n            this.gestureLineColor.setValue(\"#0099cc\");\n            this.own(on(this.gestureLineColor, \"change\", lang.hitch(this, \"showGestureMap\")));\n\n\n        },\n\n\n        /*****************************************************************************************************\n         * Screen Mode\n         ****************************************************************************************************/\n\n\n        renderScreenModes() {\n            this.logger.log(3, \"renderScreenModes\", \"entry\");\n\n            this.screenModeDiv = this.createSection(\"Options\", this.properties);\n\n            const content = this.createContent(this.screenModeDiv);\n\n            const row = this.db.div(\"MatcToobarRow MatcMarginBottom\").build(content);\n\n            const list = this.$new(RadioBoxList);\n            css.add(list.domNode, \"MatcToolbarRadioList\");\n            list.setOptions([\n                { label: 'Dwell Time', value: \"HeatmapDwelTime\", icon: \"mdi mdi-timelapse\" },\n                { label: 'Scroll', value: \"HeatmapScrollView\", icon: \"mdi mdi-swap-vertical\" },\n                { label: 'Scroll Time', value: \"HeatmapScrollTime\", icon: \"mdi mdi-timer\" },\n                //{ label: 'Discovery Time', value: \"HeatmapDiscoryTime\", icon: \"mdi mdi-timer\" }\n            ]);\n            list.setValue(\"HeatmapDwelTime\")\n\n            this.screenModeRadioList = list\n            list.placeAt(row);\n            this.own(list.on(\"change\", lang.hitch(this, \"showScreenMode\")));\n        },\n\n        /*****************************************************************************************************\n         * show properties section and make sure the scroll bar is moved too!\n         ****************************************************************************************************/\n\n        showProperties() {\n            css.remove(this.propertiesCntr, \"MatcToolbarSectionHidden\");\n            if (this.canvas) {\n                css.add(this.canvas.scrollRight, \"MatcCanvasScrollBarRightOpen\");\n            }\n        },\n\n        hideProperties() {\n            if (this.analyticMode == \"UserJourney\") {\n                this.hideAllSections();\n                this.showSessionProperties();\n                return\n            }\n\n            if (this.analyticMode == \"HeatmapClick\") {\n                this.hideAllSections();\n                this.showHeatMapProperties();\n                return\n            }\n            this.hideAllSections();\n        },\n\n\n        hideAllSections() {\n            this.logger.log(3, \"hideAllSections\", \"entry\");\n            for (var i = 0; i < this.sections.length; i++) {\n                var section = this.sections[i];\n                css.add(section, \"MatcToolbarSectionHidden\");\n            }\n        },\n\n\n        /**********************************************************************\n         * Canvas Delegates\n         **********************************************************************/\n\n\n\n        /**********************************************************************\n         * DI stuff\n         **********************************************************************/\n\n\n        setController(c) {\n            this.logger.log(3, \"setController\", \"entry\");\n            this.controller = c;\n        },\n\n        setCanvas(c) {\n            this.logger.log(3, \"setCanvas\", \"entry\");\n            this.canvas = c;\n\n        },\n\n        setModelFactory(f) {\n            this.logger.log(3, \"setModelFactory\", \"entry\");\n            this.factory = f;\n        },\n\n        setModel(m) {\n            this.model = this.createInheritedModel(m);\n            this.modelName = m.name\n            this.renderToolbar();\n            this.render();\n        },\n\n        setAnnotation(a) {\n            this.logger.log(-1, \"setAnnotation\", \"enter > # \");\n            this.annotation = a;\n        },\n\n        setTest(t) {\n            this.logger.log(2, \"setTest\", \"enter > # \");\n            this.testSettings = t;\n        },\n\n        setEvents(events) {\n            this.logger.log(2, \"setEvents\", \"enter > # \" + events.length);\n            this.events = events;\n        },\n\n        setMode(mode) {\n            this.logger.log(2, \"setMode\", \"entry > '\" + mode + \"'\");\n            this.mode = mode;\n            this.onModeChange();\n        },\n\n\n        onModeChange() {\n\n        },\n\n\n        /********************************************************\n         * Helper\n         ********************************************************/\n\n        setSelectedViewButton() {\n        },\n\n        createRing(lbl, help, distCallBack) {\n\n            var bgColor = \"#cecece\";\n            var settings = this.canvas.getSettings();\n            if (settings.canvasTheme == \"MatcDark\") {\n                bgColor = \"#777\";\n            }\n            var ring = this.$new(Ring, { size: 100, width: 5, backgroundColor: bgColor, color: \"#365fff\", color2: \"#83b600\", color3: \"#ffa713\" });\n            ring.setDomSize(120, 120);\n            ring.setLabel(lbl);\n\n            if (distCallBack) {\n                ring.setAction(\"mdi mdi-chart-bar\");\n                this.tempOwn(ring.on(\"action\", lang.hitch(this, distCallBack)));\n            }\n\n            if (help) {\n                ring.setHelp(true);\n                this.tempOwn(ring.on(\"help\", lang.hitch(this, \"showHelpDialog\", help)));\n            }\n\n            css.add(ring.domNode, \"MatcMarginTop\");\n            return ring;\n        },\n\n        createToolBarItem(label, callback, icon, parent) {\n            var a = document.createElement(\"div\");\n            css.add(a, \"MatcToolbarItem MatcToolbarPrimaryItem\");\n\n            if (icon) {\n                var i = document.createElement(\"span\");\n                css.add(i, icon);\n                a.appendChild(i);\n            }\n\n            // var lbl = document.createElement(\"label\");\n            // css.add(lbl, \"MatcToolbarLabel\");\n            // lbl.innerHTML =label;\n            // a.appendChild(lbl);\n\n\n            if (callback) {\n                this.tempOwn(on(a, touch.press, lang.hitch(this, callback)));\n            }\n            if (!parent) {\n                this.properties.appendChild(a);\n            } else {\n                parent.appendChild(a);\n            }\n\n            return a;\n        },\n\n\n        createInput(content, placeholder) {\n\n            var div = document.createElement(\"div\");\n            css.add(div, \"MatcToolbarItem\");\n            content.appendChild(div);\n\n            let input = document.createElement(\"input\");\n            input.disabled = true;\n            css.add(input, \"MatcIgnoreOnKeyPress MatcToobarInput  MatcToobarInlineEditDisabled\");\n            div.appendChild(input);\n\n            if (placeholder) {\n                input.placeholder = placeholder;\n            }\n            return input;\n        },\n\n        createContent(parent) {\n            var content = document.createElement(\"div\");\n            css.add(content, \"MatcToolbarSectionContent\");\n            parent.appendChild(content);\n            return content;\n        },\n\n        createSection(lbl, parentNode, canBeHidden = true) {\n\n            const parent = document.createElement(\"div\");\n            css.add(parent, \"MatcToolbarSection\");\n\n            const header = this.createSectionHeader(parent, lbl);\n\n            /**\n             * store the value somehow in a cookie? and use it during restore??\n             */\n            this.own(on(header, touch.press, () => {\n                css.toggle(parent, \"MatcToolbarSectionCollabsed\");\n                return false;\n            }));\n\n            if (canBeHidden) {\n                this.sections.push(parent);\n            }\n            parentNode.appendChild(parent);\n            return parent;\n        },\n\n        createSectionHeader(parent, lbl, hasTemplateMarker) {\n            var div = document.createElement(\"div\");\n            css.add(div, \"MatcToolbarSectionLabel\");\n            parent.appendChild(div);\n\n            div.innerHTML = lbl;\n\n            if (hasTemplateMarker) {\n                var span = document.createElement(\"span\");\n                css.add(span, \"MatcToolbarSectionMarker\");\n                span.innerHTML = \" *\";\n                div.appendChild(span);\n            }\n\n            var chev = document.createElement(\"span\");\n            css.add(chev, \"MatcToolbarSectionChevron mdi mdi-chevron-down\");\n            div.appendChild(chev);\n\n            return div;\n        },\n\n\n\n        createBigNumber(db, cntr, label, help) {\n            var numberCntr = db.div(\"MatcToolBarNumberCntr MatcMarginTop\").build(cntr);\n            let l = db.div(\"MatcDashLabel\", label).build(numberCntr);\n            var main = db.div(\"MatcToolbarBigLabel\").build(numberCntr);\n            var little = db.div(\"MatcToolbarDetailLabel\").build(numberCntr);\n            if (help) {\n                var node = db.span(\"mdi mdi-help-circle MatcHelpIcon\").build(l);\n                this.tempOwn(on(node, touch.press, lang.hitch(this, \"showHelpDialog\", help)));\n            }\n\n            return [main, little];\n        },\n\n\n        /********************************************************\n         * Main menu handlers\n         ********************************************************/\n\n        onExit() {\n            this.logger.log(0, \"onExit\", \"entry\", this.isPublic);\n            if (this.isPublic) {\n                hash(\"#/examples/\" + this.model.id + \"/design.html\");\n            } else {\n                hash(\"#/apps/\" + this.model.id + \"/design.html\");\n            }\n        },\n\n        onShare() {\n            this.logger.log(0, \"onShare\", \"entry\");\n        },\n\n        /********************************************************\n         * Selection handlers!\n         ********************************************************/\n\n        onWidgetSelected(widget) {\n            this.logger.log(2, \"onWidgetSelected\", \"entry\");\n\n            /**\n             * We might want to blur some stuff\n             */\n            if (this._selectedWidget && this._selectedWidget.id != widget.id) {\n                this.logger.log(3, \"onWidgetSelected\", \"exit > no new selection!\");\n                this.blurWidgetProperties();\n            }\n\n\n            this.cleanUp();\n\n\n            this._selection = \"widget\";\n            this._selectedWidget = widget;\n            this.showWidgetProperties(widget);\n\n\n            this.logger.log(3, \"onWidgetSelected\", \"exit\");\n        },\n\n\n        onScreenSelected(screen) {\n            this.logger.log(-1, \"onScreenSelected\", \"entry\", this._selectedScreen);\n\n            /**\n             * We don not want to rerender on scroll\n             */\n            if (this._selectedScreen && this._selectedScreen.id == screen.id) {\n                this.logger.log(3, \"onScreenSelected\", \"exit > no new selection!\");\n                return;\n            }\n\n            this.cleanUp();\n            this._selection = \"screen\";\n            this._selectedScreen = screen;\n            this.showScreenProperties(screen);\n\n\n            this.logger.log(4, \"onScreenSelected\", \"exit\");\n        },\n\n\n\n\n        onLineSelected(line) {\n            this.cleanUp();\n            this._selection = \"line\";\n            this._selectedLine = line;\n        },\n\n\n\n        onMultiSelect(selection) {\n            this.cleanUp();\n\n            this._selection = \"multi\";\n            this._selectedMulti = selection;\n        },\n\n        onGroupSelect(group) {\n            this.cleanUp();\n            this._selection = \"group\";\n            this._selectedGroup = group;\n            this.showGroupProperties(group);\n        },\n\n\n\n        onCanvasSelected() {\n            this.cleanUp();\n            this.hideProperties();\n        },\n\n\n        /**\n         * method which will update all properties. method is called from controller!\n         */\n        updatePropertiesView() {\n\n            if (this._selectedWidget) {\n                this.onWidgetSelected(this._selectedWidget);\n            }\n        },\n\n\n\n        /********************************************************\n         * Player\n         ********************************************************/\n\n        showSession(session, e) {\n            //console.debug(\"showSession\", session.session, this.events.length);\n\n            const sessionID = session.session;\n            const dialog = new Dialog();\n\n            const db = new DomBuilder();\n\n            const div = db.div(\"MatcDialog MatcPlayerDialog \").build();\n            const cntr = db.div(\"\").build(div);\n\n            dialog.onOpen(() => {\n                if (this.isPublic) {\n                    Promise.all([\n                        this.modelService.findPublicTagAnnotations(this.model.id),\n                        this.modelService.findPublicMouseBySession(this.model.id, sessionID)\n                    ]).then(values => {\n                        this._showSession(sessionID, cntr, dialog, values);\n                    });\n                } else {\n                    Promise.all([\n                        this.modelService.findTagAnnotations(this.model.id),\n                        this.modelService.findMouseBySession(this.model.id, sessionID)\n                    ]).then(values => {\n                        this._showSession(sessionID, cntr, dialog, values);\n                    });\n                }\n            })\n\n            dialog.popup(div, e.target);\n        },\n\n        _showSession(sessionID, cntr, dialog, data) {\n\n            try {\n                const mouse = data[1];\n\n                const df = new DataFrame(this.events);\n                df.sortBy(\"time\");\n                const sessionGroup = df.groupBy(\"session\");\n                const events = sessionGroup.get(sessionID);\n\n                const player = this.$new(VideoPlayer);\n                player.setDialog(dialog)\n                player.placeAt(cntr);\n                player.setModel(this.model);\n                player.setTestSettings(this.testSettings)\n                player.setMouse(mouse);\n                player.setMouse(mouse);\n                player.setSession(events, sessionID);\n\n\n                dialog.own(on(dialog, \"close\", function () {\n                    player.destroy();\n                }));\n            } catch (e) {\n                console.error(e);\n            }\n        },\n\n        _getSessionAnnotation(annotations, appID) {\n\n            if (annotations.length > 1) {\n                /**\n                 * This should not happen, but we have seen it happeing. We delete this now...\n                 */\n                for (let i = 1; i < annotations.length; i++) {\n                    var a = annotations[i];\n                    this._doDelete(\"rest/annotations/apps/\" + appID + \"/\" + a.id + \".json\");\n                }\n            }\n\n            if (annotations.length >= 1) {\n                return annotations[0];\n            } else {\n                //console.debug(\"Create Tag annotation...\");\n                return {\n                    appID: appID,\n                    type: \"tags\",\n                    reference: \"\",\n                    sessions: {}\n                };\n            }\n        },\n\n        /********************************************************\n         * Show Settings\n         ********************************************************/\n\n\n        onShowSettings(e) {\n\n            var db = new DomBuilder();\n\n            db = new DomBuilder();\n            var popup = db.div(\"MatcDialog MatcHeaderDialog MatcPadding\").build();\n\n            var cntr = db.div(\"\").build(popup);\n\n            var settings = this.canvas.getSettings();\n\n\n            /**\n             * Themes\n             */\n            db.label(\"\", \"Theme :\").build(cntr);\n            var themeList = this.$new(RadioBoxList);\n            themeList.setOptions([\n                { value: \"MatcDark\", label: \"Dark\" },\n                { value: \"MatcLight\", label: \"Light\" }\n            ]);\n            themeList.setValue(settings.canvasTheme);\n            themeList.placeAt(cntr);\n\n\n\n            /**\n             * Mouse Wheel\n             */\n            db.label(\"MatcMarginTop\", \"Mouse Wheel / Touchpad Scroll :\").build(cntr);\n            var mouseWheelList = this.$new(RadioBoxList);\n            mouseWheelList.setOptions([\n                { value: \"scroll\", label: \"Scroll Canvas\" },\n                { value: \"zoom\", label: \"Zoom Canvas\" }\n            ]);\n            mouseWheelList.setValue(settings.mouseWheelMode);\n            mouseWheelList.placeAt(cntr);\n\n\n            var bar = db.div(\"MatcButtonBar MatcMarginTopXL\").build(popup);\n            var save = db.a(\"MatcButton MatcButtonPrimary\", \"Save\").build(bar);\n            var cancel = db.a(\" MatcLinkButton \", \"Cancel\").build(bar);\n\n\n\n            var dialog = new Dialog();\n            dialog.own(on(cancel, touch.press, lang.hitch(dialog, \"close\")));\n            dialog.own(on(save, touch.press, lang.hitch(this, \"onSaveSettings\", dialog, themeList, mouseWheelList)));\n\n            dialog.popup(popup, e.target);\n\n            this.canvas.enableMouseZoom(false);\n            this.canvas.setState(\"simulate\");\n\n            this.logger.log(0, \"onShowSettings\", \"exit > \");\n        },\n\n        onSaveSettings(dialog, themeList, mouseWheelList) {\n            var settings = {\n                canvasTheme: themeList.getValue(),\n                mouseWheelMode: mouseWheelList.getValue()\n            };\n\n            this.canvas.setSettings(settings);\n            this.canvas.enableMouseZoom(true);\n            dialog.close();\n        },\n\n\n        /********************************************************\n         * SignUp\n         ********************************************************/\n\n\n        showSignUpDialog(e) {\n\n            var d = new Dialog();\n\n            var db = new DomBuilder();\n\n            var div = db.div(\"MatcDialog \").build();\n\n\n            this._createSignUpForm(d, div);\n\n            d.popup(div, e.target);\n        },\n\n\n        _createSignUpForm(d, div) {\n            let f = this.$new(Form);\n            f.render([\n                {\n                    label: \"Email\",\n                    name: \"email\",\n                    type: \"text\",\n                    required: \"true\",\n                    placeholder: \"Your email\",\n                    css: \"input-lg MatcIgnoreOnKeyPress\",\n                    error: \"We need your email.\"\n                },\n                {\n                    label: \"Password\",\n                    name: \"password\",\n                    type: \"password\",\n                    min: 6,\n                    placeholder: \"Your password\",\n                    css: \"input-lg MatcIgnoreOnKeyPress\",\n                    error: \"The password should have at least six characters.\"\n                },\n                {\n                    label: 'I have read the <a href=\"#/termsofservice.html\" target=\"_blank\">terms of service</a>',\n                    name: \"tos\",\n                    type: \"check\",\n                    required: \"true\",\n                    css: \"MatcFormCheckBox MatcIgnoreOnKeyPress\",\n                    error: \"You must accept the terms of service!\"\n                }\n            ], [\n                { label: \"Cancel\", css: \"MatcLinkButton\", click: lang.hitch(d, \"close\") },\n                { label: \"Create Free Account\", css: \"MatcButton MatchButtonGreen\", click: lang.hitch(this, \"_signUpAndNew\", d, f) }\n            ]);\n\n            f.placeAt(div);\n            f.startup();\n\n            return f;\n        },\n\n        _signUpAndNew(dialog, form, data) {\n\n            var valid = form.validateForm(null, true);\n\n            if (valid) {\n\n                result = this._doPost(\"rest/user\", data);\n\n                if (result.type == \"error\") {\n                    if (result.errors.indexOf(\"user.email.not.unique\") >= 0) {\n                        form.showError(\"The email is already taken! Please enter another one!\", \"email\");\n                    } else {\n                        form.showError(\"Something went wrong! Please try again!\", \"\");\n                    }\n\n                    dialog.shake();\n                } else {\n                    dialog.close();\n\n                    var result = this._doPost(\"rest/login/\", data);\n                    if (result.type != \"error\") {\n\n                        window.location.href = \"/my-account.html\";\n\n                    } else {\n                        console.error(\"_signUpAndSave() > Could not sign in user\");\n                    }\n                }\n            } else {\n                dialog.shake();\n            }\n        }\n    },\n    mounted() {\n        this.db = new DomBuilder();\n    }\n}\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AnalyticToolbarRender.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AnalyticToolbarRender.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnalyticToolbarRender.vue?vue&type=template&id=73bc01ce&\"\nimport script from \"./AnalyticToolbarRender.vue?vue&type=script&lang=js&\"\nexport * from \"./AnalyticToolbarRender.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n<template>\n     <div class=\"MatcToolbar MatcAnalyticsToolbar MatcLayerListVisible\">\n\n\t\t<div class=\"MatcToolbarLayerList MatcToolbarAnalyticList MatcToobarPropertiesSection\" >\n\t\t\t<div class=\"MatcToolbarLayerListCntr\" data-dojo-attach-point=\"testListCntr\">\n\t\t\t\t\t\t\t\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\n\t\t<div class=\"MatcToolbarTop \">\n\t\t\t<div class=\"MatcToolbarTopHome\">\n\t\t\t\t<HomeMenu @select=\"onHomeMenu\"  :name=\"modelName\" />\n\t\t\t</div>\n\n\t\t\t<div class=\"MatcToolbarTopCntr\" >\n\t\t\t\t<div class=\"MatcToolbarSection MatcToolbarTopLeft\">\n<!-- \n\t\t\t\t\t<div :class=\"['MatcToolbarItem MatcToolbarPrimaryItem', {'MatcToolbarItemSelected': mode === 'edit'} ]\" data-dojo-attach-point=\"editBtn\"  @click=\"onEdit\">\n\t\t\t\t\t\t<QIcon icon=\"Edit\" />\n\t\t\t\t\t</div> \n\n\t\t\t\t\t<div :class=\"['MatcToolbarItem MatcToolbarPrimaryItem', {'MatcToolbarItemSelected': mode === 'move'} ]\" data-dojo-attach-point=\"moveBtn\"  @click=\"onMove\">\n\t\t\t\t\t\t<QIcon icon=\"EditMove\" />\n\t\t\t\t\t</div> -->\n\n\t\t\t\t\t<div :class=\"['MatcToolbarItem MatcToolbarPrimaryItem', {'MatcToolbarItemSelected': mode === 'addComment'} ]\" data-dojo-attach-point=\"commentBtn\"  @click=\"onNewComment\">\n\t\t\t\t\t\t<QIcon icon=\"Comment\" />\n\t\t\t\t\t</div>\t\n\t\t\t\t</div>\n\t\t\n\t\t\t\t<div class=\"MatcToolbarTopCenterCntr\">\n\t\t\t\t\t<div class=\"MatcToolbarSection\" data-dojo-attach-point=\"screenSection\">\n\t\t\t\t\t\t<AnalyticViewModeButton @change=\"onChangeViewMode\" v-if=\"events\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\n\n\t\t\t\t<div class=\"MatcToolbarNotificationSection MatcToolbarTopRight MatcToolbarSection\" data-dojo-attach-point=\"notificationSection\">\n\t\t\t\t\t<ToolbarPluginSection :events=\"events\" :user=\"user\" :mode=\"model\" />\n\t\t\t\t\t<ViewConfig :value=\"canvasViewConfig\" @change=\"onChangeCanvasViewConfig\" :analytic=\"true\"/>\n\t\t\t\t\t<HelpButton :hasNotifications=\"false\" :hasToolbar=\"true\" ref=\"helpBtn\" v-if=\"false\"/>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"MatcToobarPropertiesSection MatcToolbarSectionHidden\" data-dojo-attach-point=\"propertiesCntr\">\n\t\t</div>\n\n\t</div>\n</template>\n<script>\nimport DojoWidget from 'dojo/DojoWidget'\nimport css from 'dojo/css'\nimport lang from 'dojo/_base/lang'\n\nimport on from 'dojo/on'\nimport touch from 'dojo/touch'\nimport hash from 'dojo/hash'\n\nimport Util from 'core/Util'\nimport _Color from 'common/_Color'\n\nimport Logger from 'common/Logger'\nimport DomBuilder from 'common/DomBuilder'\n\nimport Dialog from 'common/Dialog'\nimport _Tooltip from 'common/_Tooltip'\nimport RadioBoxList from 'common/RadioBoxList'\nimport Form from 'common/Form'\nimport Ring from 'common/Ring'\nimport Histogram from 'dash/Histogram'\nimport Analytics from 'dash/Analytics'\nimport VideoPlayer from 'views/apps/test/VideoPlayer'\nimport DataFrame from 'common/DataFrame'\nimport ViewConfig from 'canvas/toolbar/components/ViewConfig'\nimport ToolbarPluginSection from '../../plugins/ToolbarPluginSection'\nimport HelpButton from 'help/HelpButton'\nimport HomeMenu from './AnalyticHomeMenu.vue'\nimport Help from 'help/Help'\nimport QIcon from 'page/QIcon'\nimport AnalyticViewModeButton from './AnalyticViewModeButton'\nimport AnalyticToolbarRender from './AnalyticToolbarRender'\n//import SessionList from './SessionList'\n\nexport default {\n    name: 'AnalyticToolbar',\n    mixins:[Util,_Color,  _Tooltip, DojoWidget, AnalyticToolbarRender],\n    data: function () {\n        return {\n\t\t\tmode:'',\n\t\t\tmodelName: 'Loading...',\n\t\t\tevents: null,\n\t\t\tmodel: null,\n\t\t\tuser: null,\n\t\t\tvalue: false,\n\t\t\tanalyticMode: \"HeatmapClick\",\n\t\t\tanalyticHeatMapClicks: -1,\n\t\t\tcanvasViewConfig: {}\n        }\n    },\n    components: {\n\t\t\t'ViewConfig': ViewConfig,\n\t\t\t'HelpButton': HelpButton,\n\t\t\t'ToolbarPluginSection': ToolbarPluginSection,\n\t\t\t'HomeMenu': HomeMenu,\n\t\t\t'QIcon': QIcon,\n\t\t\t'AnalyticViewModeButton': AnalyticViewModeButton,\n\t\t\t//'SessionList': SessionList\n\t\t},\n    methods: {\n        postCreate(){\n\t\t\tthis.logger = new Logger(\"AnalyticToolbar\");\n\t\t\tthis.logger.log(2,\"constructor\", \"entry\");\n\t\t\tthis.renderToolbar()\n\t\t},\n\n\t\tonMove (e){\n\t\t\tthis.stopEvent(e);\n\t\t\tthis.canvas.setMode(\"move\");\n\t\t},\n\n\t\tonEdit (e){\n\t\t\tthis.stopEvent(e);\n\t\t\tthis.canvas.setMode(\"edit\");\n\t\t},\n\n\t\n\t\tshowHelpDialog(helpID){\n\t\t\tif (this.$refs.helpBtn) {\n\t\t\t\tthis.$refs.helpBtn.show('analytics.canvas', helpID)\n\t\t\t}\n\t\t},\n\n\t\tonHomeMenu (option, e) {\n\t\t\tthis.logger.log(-1,\"onHomeMenu\", \"entry\", e);\n\t\t\tif (this[option.value]) {\n\t\t\t\tthis[option.value](e)\n\t\t\t}\n\t\t},\n\n\t\tonChangeViewMode (option) {\n\t\t\tthis.logger.log(-1,\"onChangeViewMode\", \"entry\", option);\n\t\t\tif (this[option]) {\n\t\t\t\tthis[option]()\n\t\t\t}\n\t\t},\n\n\t\tshowHelp(e) {\n\t\t\tlet dialog = new Dialog()\n\t\t\tvar db = new DomBuilder();\n\t\t\tlet popup = db.div(\"MatcDialog MatcHelpDialog MatcPadding\").build();\n\t\t\tdialog.popup(popup, e.target);\n\t\t\tlet help = this.$new(Help)\n\t\t\thelp.placeAt(popup)\n\t\t},\n\n\n\t\tonNewComment(e){\n\t\t\tthis.logger.log(2,\"onNewComment\", \"entry\");\n\t\t\tthis.stopEvent(e);\n\t\t\tthis.emit(\"newComment\", {\"type\" : \"comment\", \"event\" : e});\n\t\t},\n\n\t\tsetAnalyticMode(mode, params, callback){\n\t\t\tthis.logger.log(2,\"setAnalyticMode\", \"entry > mode: \" + mode);\n\t\t\tthis.analyticMode = mode;\n\t\t\tthis.analyticModeCallback = callback\n\t\t\tif (!callback) {\n\t\t\t\tconsole.warn(\"setAnalyticMode() called with callback\", this.mode)\n\t\t\t}\n\t\t\tif(this.canvas){\n\t\t\t\tthis.canvas.setAnalyticMode(mode, params);\n\t\t\t}\n\t\t\tthis.hideProperties();\n\t\t},\n\n\t\tonCanvasSelected () {\n\t\t\tthis.logger.log(-2,\"onCanvasSelected\", \"entry > mode: \" + this.analyticMode);\n\n\t\t\tif (this.analyticMode === \"HeatmapClick\") {\n\t\t\t\tthis.hideAllSections()\n\t\t\t\tthis.showHeatMapProperties()\n\t\t\t}\n\t\t},\n\n\t\treRenderAnalyticMode () {\n\t\t\tthis.logger.log(-2,\"reRenderAnalyticMode\", \"entry\", this.analyticMode);\n\t\t\tif (this.analyticModeCallback){\n\t\t\t\tthis.analyticModeCallback()\n\t\t\t} else {\n\t\t\t\tthis.logger.error(\"reRenderAnalyticMode\", \"No callback\");\n\t\t\t}\n\t\t},\n\n\t\tsetModelService (s) {\n\t\t\tthis.modelService = s\n\t\t\tsetTimeout(lang.hitch(this, \"initMouseData\"), 500);\n\t\t},\n\n\t\tsetPublic(p){\n\t\t\tthis.isPublic = p;\n\t\t\tif(p){\n\t\t\t\t// css.remove(this.signupSection, \"MatcToolbarSectionHidden\");\n\t\t\t}\n\t\t},\n\n\t\tsetCanvasViewConfig (viewConfig) {\n\t\t\tthis.canvasViewConfig = viewConfig\n\t\t},\n\n\t\tonChangeCanvasViewConfig (key, value) {\n\t\t\tif (this.canvas) {\n\t\t\t\tthis.canvas.setCanvasViewConfig(key, value)\n\t\t\t}\n\t\t},\n\n\t\tsetUser(u) {\n\t\t\tthis.user = u\n\t\t},\n\n\t\tasync initMouseData(){\n\t\t\tthis.logger.log(2,\"initMouseData\", \"entry\");\n\t\t\tif(this.isPublic){\n\t\t\t\t//this._doGet(\"/examples/mouse/\" + this.model.id + \".json\", lang.hitch(this,\"setMouseData\"));\n\t\t\t\tlet res = await this.modelService.findPublicMouse(this.model.id)\n\t\t\t\tthis.setMouseData(res)\n\t\t\t} else {\n\t\t\t\tlet res = await this.modelService.findMouse(this.model.id)\n\t\t\t\tthis.setMouseData(res)\n\t\t\t\t//this._doGet(\"rest/mouse/\" + this.model.id + \".json\", lang.hitch(this,\"setMouseData\"));\n\t\t\t}\n\t\t},\n\n\t\tsetMouseData(data){\n\t\t\tthis.logger.log(2,\"setMouseData\", \"entry >\"  +data.length);\n\t\t\tthis.mouseData = data;\n\t\t},\n\n\n\t\t/**********************************************************************\n\t\t * Callbacks to canvas\n\t\t **********************************************************************/\n\n\n\t\tshowClickHeatMap(){\n\t\t\tthis.logger.log(-2,\"showClickHeatMap\", \"entry > \" + this.analyticHeatMapClicks);\n\t\t\tthis.setAnalyticMode(\"HeatmapClick\", {\n\t\t\t\t\tnumberOfClicks : this.analyticHeatMapClicks,\n\t\t\t\t\tsessions: this.getSelectedSessions(),\n\t\t\t\t}, \n\t\t\t\t() => this.showClickHeatMap()\n\t\t\t);\n\t\t\tthis.showHeatMapProperties();\n\t\t},\n\n\t\tshowFirstClickHeatMap(i){\n\t\t\tthis.logger.log(-1,\"showFirstClickHeatMap\", \"entry > \"+ i);\n\t\t\tthis.analyticHeatMapClicks = i;\n\t\t\tthis.setHeatMapLabel(i)\n\t\t\tif (i === 'mouse') {\n\t\t\t\tthis.showMouseHeatMap()\n\t\t\t} else {\t\t\n\t\t\t\tthis.setAnalyticMode(\"HeatmapClick\",{\n\t\t\t\t\tnumberOfClicks : this.analyticHeatMapClicks,\n\t\t\t\t\tsessions: this.getSelectedSessions()\n\t\t\t\t} , () => this.showFirstClickHeatMap(i));\n\t\t\t}\n\t\t},\n\n\t\tshowMouseHeatMap(){\n\t\t\tthis.logger.log(-2,\"showMouseHeatMap\", \"entry\");\n\t\t\tif(!this.mouseData){\n\t\t\t\tthis.canvas.showHint(\"Loading data...\");\n\t\t\t\tif(this.isPublic){\n\t\t\t\t\tthis._doGet(\"/examples/mouse/\" + this.model.id + \".json\", lang.hitch(this,\"_onMouseDataLoaded\"))\n\t\t\t\t} else {\n\t\t\t\t\tthis._doGet(\"rest/mouse/\" + this.model.id + \".json\", lang.hitch(this,\"_onMouseDataLoaded\"))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.canvas.setMouseData(this.mouseData);\n\t\t\t\tthis.setAnalyticMode(\"HeatmapMouse\", {\n\t\t\t\t\tsessions: this.getSelectedSessions()\n\t\t\t\t}, () => this.showMouseHeatMap());\n\t\t\t}\n\t\t\tthis.showHeatMapProperties();\n\t\t},\n\n\n\t\t_onMouseDataLoaded(data){\n\t\t\tthis.logger.log(2,\"_onMouseDataLoaded\", \"entry >\"  +data.length);\n\t\t\tthis.mouseData = data;\n\t\t\tthis.canvas.setMouseData(this.mouseData);\n\t\t\tthis.setAnalyticMode(\"HeatmapMouse\", {\n\t\t\t\tsessions: this.getSelectedSessions()\n\t\t\t}, () => this.showMouseHeatMap());\n\t\t},\n\n\t\n\t\tshowViewMap(){\n\t\t\tthis.logger.log(2,\"showViewMap\", \"entry\");\n\t\t\tthis.setAnalyticMode(\"HeatmapViews\", {\t\t\n\t\t\t\tsessions: this.getSelectedSessions()\n\t\t\t}, () => this.showViewMap());\n\t\t},\n\n\t\tshowDropOff () {\n\t\t\tthis.logger.log(-1,\"showDropOff\", \"entry\");\n\t\t\tthis.showDropOffProperties()\n\t\t},\n\n\t\tshowUserJourney(){\n\t\t\tthis.logger.log(-1,\"showUserJourney\", \"entry > \");\t\n\t\t\tconst params = {\n\t\t\t\tsessions: this.getSelectedSessions(),\n\t\t\t\ttime: this.sessionTimeCheckBox.getValue(),\n\t\t\t\tcolor : this.sessionLineColor.getValue(),\n\t\t\t\ttree: this.sessionTreeCheckBox.getValue(),\n\t\t\t\ttask: this.sessionTaskBtn.getValue(),\n\t\t\t\ttaskColor: this.sessionTaskLineColor.getValue(),\n\t\t\t\toutlier: this.sessionOutlierCheckbox.getValue(),\n\t\t\t\toutlierColor: this.sessionOutlierColor.getValue()\n\t\t\t};\n\t\t\tthis.setAnalyticMode(\"UserJourney\",params, () => this.showUserJourney());\n\t\t\tthis.showSessionProperties();\n\t\t},\n\n\n\n\t\tshowGestureMap(){\n\t\t\tthis.logger.log(2,\"showGestureMap\", \"entry > \");\t\n\t\t\tthis.setAnalyticMode(\"Gesture\", {\n\t\t\t\tcolor: this.gestureLineColor.getValue(),\n\t\t\t\tsessions: this.getSelectedSessions()\n\t\t\t}, () => this.showGestureMap());\n\t\t\tthis.showGestureProperties();\n\t\t},\n\n\n\t\tshowScreenMode () {\n\t\t\tconst newMode = this.screenModeRadioList.getValue()\n\t\t\tthis.setAnalyticMode(newMode, {\n\t\t\t\tsessions: this.getSelectedSessions()\n\t\t\t}, () => this.showScreenMode());\n\t\t\tcss.remove(this.screenModeDiv, \"MatcToolbarSectionHidden\")\n\t\t\tthis.logger.log(-1,\"showScreenMode\", \"exit > \", newMode);\n\t\t}, \n\t\t\n\t\tchangeScreenMode (m) {\n\t\t\tthis.logger.log(0,\"changeScreenMode\", \"entry > \", m);\n\t\t},\n\n\t\t/*****************************************************************************************************\n\t\t * Dialogs\n\t\t ****************************************************************************************************/\n\n\n\n\t\tshowDwellDistribution(e){\n\t\t\tthis.logger.log(0,\"showDwellDistribution\", \"entry > \" );\n\n\t\t\tif(this._selectedScreen){\n\n\t\t\t\tvar df = new DataFrame(this.events);\n\t\t\t\tvar analytics  = new Analytics();\n\t\t\t\tvar screenTimeGrouping = analytics.getScreenTimeGrouping(df);\n\t\t\t\tvar dwellTimes = screenTimeGrouping.get(this._selectedScreen.id);\n\n\t\t\t\tif(dwellTimes){\n\n\t\t\t\t\tvar db = new DomBuilder();\n\t\t\t\t\tvar dialog = new Dialog();\n\t\t\t\t\tvar d = db.div(\"MatcPadding DashTaskListDetailsDialog\").build();\n\n\t\t\t\t\tdb.h2(\"MatcDialogTitle\", \"Dwell Time Distribution &quot\" + this._selectedScreen.name + \"&quot\").build(d);\n\n\t\t\t\t\tvar cntr = db.div(\"DashTaskListDialogHist\").build(d);\n\n\t\t\t\t\tvar duration_dist = dwellTimes.hist(null, 10);\n\n\t\t\t\t\tvar hist = this.$new(Histogram);\n\t\t\t\t\thist.setFormTo(function(v){\n\t\t\t\t\t\treturn Math.round(v/1000) + \" sec\";\n\t\t\t\t\t});\n\t\t\t\t\thist.onHover(function(bucket){\n\t\t\t\t\t\treturn  Math.round(bucket.from/1000) + \" - \"  + Math.round(bucket.to/1000) + \" sec (\" +bucket.count + \" x)\" ;\n\t\t\t\t\t});\n\t\t\t\t\thist.setValue(duration_dist, dwellTimes.mean());\n\t\t\t\t\thist.placeAt(cntr);\n\n\t\t\t\t\tdialog.popup(d, e.target);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\n\n\t\t/*****************************************************************************************************\n\t\t * properties view\n\t\t ****************************************************************************************************/\n\n\t\tshowGestureProperties(){\n\t\t\tthis.logger.log(1,\"showGestureProperties\", \"entry > \");\n\t\t\tthis.showProperties();\n\t\t\tcss.remove(this.gestureOptionsDiv, \"MatcToolbarSectionHidden\");\n\t\t},\n\n\n\t\tshowWidgetProperties(model){\n\t\t\tthis.logger.log(1,\"showWidgetProperties\", \"entry > \" + model.id + \" \" + model.name);\n\t\t\tthis.showProperties();\n\n\t\t\tcss.remove(this.widgetNameDiv, \"MatcToolbarSectionHidden\");\n\t\t\tthis.widgetName.value = model.name;\n\n\t\t\tconst data = this.canvas.getWidgetData(model);\n\n\t\t\tif(data[model.id]){\n\t\t\t\tconst widgetData = data[model.id];\n\n\t\t\t\tthis.widgetClickRing.setPs(widgetData.clicksRel);\n\t\t\t\tthis.widgetClickRing.setValue(widgetData.clicksAbs);\n\n\t\t\t\t// vs firstClicksRelApp\n\t\t\t\tif(isNaN(widgetData.firstClicksRelScreen)){\n\t\t\t\t\twidgetData.firstClicksRelScreen = 0;\n\t\t\t\t}\n\t\t\t\tthis.widgetFirstClickRing.setPs(widgetData.firstClicksRelScreen);\n\t\t\t\tthis.widgetFirstClickRing.setValue(widgetData.firstClicksAbs);\n\n\n\t\t\t\tthis.setTextContent(this.widgetDiscoverSTDLabel, \"+/-\" + Math.round(widgetData.discoverTimeStd / 1000) + \"s\")\n\t\t\t\tthis.setTextContent(this.widgetDiscoverLabel, Math.round(widgetData.discoverTimeAbs / 1000) + \"s\");\n\t\t\t}\n\t\t},\n\n\n\n\t\tshowScreenProperties(model){\n\t\t\tthis.logger.log(-1,\"showScreenProperties\", \"entry\");\n\t\t\tthis.showProperties();\n\n\t\t\tcss.remove(this.screenNameDiv, \"MatcToolbarSectionHidden\");\n\n\t\t\tthis.screenName.value = model.name;\n\n\t\t\tvar times;\n\t\t\tvar views;\n\t\t\tvar clicks;\n\t\t\tvar widgetClicks;\n\t\t\tvar screenTests;\n\t\t\tif(!model.style.overlay){\n\t\t\t\ttimes = this.canvas.getScreenDwellTime();\n\t\t\t\tviews = this.canvas.getScreenViews();\n\t\t\t\tclicks = this.canvas.getScreenClicks();\n\t\t\t\twidgetClicks = this.canvas.getScreenWidgetClicks();\n\t\t\t\tscreenTests = this.canvas.getScreenTests();\n\t\t\t} else {\n\t\t\t\ttimes = this.canvas.getOverlayDwellTime();\n\t\t\t\tviews = this.canvas.getOverlayViews();\n\t\t\t\tclicks = this.canvas.getOverlayClicks();\n\t\t\t\twidgetClicks = this.canvas.getOverlayWidgetClicks();\n\t\t\t\tscreenTests = this.canvas.getOverlayTest();\n\t\t\t}\n\n\t\t\tvar time =times.times[model.id];\n\t\t\tif(!time){\n\t\t\t\ttime = 0;\n\t\t\t}\n\n\n\t\t\tvar sClick = clicks.clicks[model.id];\n\t\t\tvar wClicks = widgetClicks.clicks[model.id];\n\n\t\t\tvar totalClicksOnScreen = sClick + wClicks;\n\t\t\tvar avgDwell = (time /times.sessions) ;\n\n\t\t\tvar count =views.counts[model.id];\n\t\t\tif(!count){\n\t\t\t\tcount = 0;\n\t\t\t}\n\n\t\t\tvar tests = screenTests.counts[model.id];\n\t\t\tif(!tests){\n\t\t\t\ttests = 0;\n\t\t\t}\n\n\n\t\t\tthis.screenTotalViewRing.setValue(count);\n\t\t\tthis.screenTotalViewRing.setPs((count / views.total));\n\n\t\t\t//(count / times.sessions)\n\t\t\tthis.screenTestRing.setValue(tests);\n\t\t\tthis.screenTestRing.setPs((tests / screenTests.sessions));\n\n\n\t\t\tthis.screenClickRing.setPs(sClick / totalClicksOnScreen);\n\t\t\tthis.screenClickRing.setValue(sClick);\n\n\n\t\t\tthis.screenWidgetClickRing.setPs(wClicks / totalClicksOnScreen);\n\t\t\tthis.screenWidgetClickRing.setValue(wClicks);\n\n\n\t\t\tthis.screenDwellRing.setPs(time / times.total);\n\t\t\tthis.screenDwellRing.setValue(Math.round( avgDwell / 1000) + \"s\");\n\n\n\t\t},\n\n\n\t\tshowSessionProperties(){\n\t\t\tthis.logger.log(1,\"showSessionProperties\", \"entry\");\n\t\t\tthis.showProperties();\n\n\t\t\t// css.remove(this.sessionDiv, \"MatcToolbarSectionHidden\");\n\t\t\tcss.remove(this.sessionOptionsDiv, \"MatcToolbarSectionHidden\");\n\t\n\n\t\t\tif (this.sessionTreeCheckBox.getValue()){\n\t\t\t\tcss.add(this.sessionTaskCntr, \"MatcToolbarSectionHidden\")\n\t\t\t\tcss.add(this.sessionLineColor.domNode, \"hidden\");\n\t\t\t\tcss.add(this.sessionTaskBtn.domNode, \"hidden\");\n\t\t\t\tcss.remove(this.sessionShowDiv, 'MatcToolbarSectionHidden')\n\t\t\t\t// css.add(this.sessionTaskLineColor.domNode, \"hidden\");\n\t\t\t\tcss.add(this.sessionLineColor.domNode, \"hidden\");\n\t\t\t\tcss.add(this.sessionOutlierDiv, \"MatcToolbarSectionHidden\")\n\t\t\t\tcss.add(this.sessionOutlierCheckbox.domNode, \"hidden\");\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tcss.remove(this.sessionTaskCntr, \"MatcToolbarSectionHidden\")\n\t\t\t\tcss.remove(this.sessionLineColor.domNode, \"hidden\");\n\t\t\t\tcss.remove(this.sessionTaskBtn.domNode, \"hidden\");\n\t\t\t\tcss.add(this.sessionShowDiv, 'MatcToolbarSectionHidden')\n\t\t\t\t// css.remove(this.sessionTaskLineColor.domNode, \"hidden\");\n\t\t\t\tcss.remove(this.sessionLineColor.domNode, \"hidden\");\n\t\t\t\tcss.remove(this.sessionOutlierDiv, \"MatcToolbarSectionHidden\")\n\t\t\t\tcss.remove(this.sessionOutlierCheckbox.domNode, \"hidden\");\n\t\t\t}\n\t\t},\n\n\n\t\t/*****************************************************************************************************\n\t\t * drop off\n\t\t ****************************************************************************************************/\n\t\tselectDropOffTask () {\n\t\t\tthis.showDropOffProperties()\n\t\t},\n\n\t\tshowDropOffProperties(){\n\t\t\tthis.logger.log(0,\"showDropOffProperties\", \"entry\");\n\n\n\t\t\tlet taskNumber = this.dropOffTaskBtn.getValue()\n\t\t\tlet task = this.testSettings.tasks[taskNumber];\n\t\t\tif (task) {\n\t\t\t\tthis.setAnalyticMode(\"DropOff\", {\n\t\t\t\t\ttime: this.dropOffTimeCheckBox.getValue(),\n\t\t\t\t\ttask: task,\n\t\t\t\t\tcolor: '#ccc'\n\t\t\t\t}, () => this.showDropOffProperties());\n\t\t\t\tcss.remove(this.dropOffConfigDiv, \"MatcToolbarSectionHidden\")\n\t\t\t\tcss.remove(this.dropOffOptionsDiv, \"MatcToolbarSectionHidden\");\n\t\t\t\tcss.remove(this.dropOffChartDivCntr, \"MatcToolbarSectionHidden\")\n\t\t\t\t//css.remove(this.dropOffFunnelDivCntr, \"MatcToolbarSectionHidden\")\n\t\t\t\tthis.showDropOffChart(task)\n\t\t\t\tthis.showProperties();\n\t\t\t} else {\n\t\t\t\tthis.setAnalyticMode(\"DropOff\", {\n\t\t\t\t\ttime: this.dropOffTimeCheckBox.getValue(),\n\t\t\t\t\ttask: null,\n\t\t\t\t\tcolor: '#ccc'\n\t\t\t\t}, () => this.showDropOffProperties());\n\t\t\t\tcss.remove(this.dropOffConfigDiv, \"MatcToolbarSectionHidden\")\n\t\t\t\tcss.remove(this.dropOffOptionsDiv, \"MatcToolbarSectionHidden\")\n\t\t\t\tthis.showProperties();\n\t\t\t}\n\t\t},\n\n\t\tshowDropOffChart (task) {\n\t\t\tvar df = new DataFrame(this.events);\n\t\t\tvar analytics  = new Analytics();\n\t\t\tlet funnel = analytics.getFunnelSummary(df, task, this.annotation);\n\n\t\t\tlet lastStep = funnel[funnel.length-1]\n\n\t\t\tthis.dropoffTaskSuccess.setPs(lastStep.p)\n\t\t\tthis.dropoffTaskSuccess.setValue(Math.round(lastStep.p * 100) + '%')\n\n\t\t\tthis.dropOffTaskDuration.innerText = Math.round(lastStep.durationMean / 100) / 10 + 's'\n\t\t\tthis.dropOffTaskDurationLabel.innerText = '+/-' + Math.round(lastStep.durationStd / 100) / 10 + 's'\n\n\t\t\tthis.dropOffInteractions.innerText = Math.round(lastStep.interactionsMean)\n\t\t\tthis.dropOffInteractionsLabel.innerText = '+/-' + Math.round(lastStep.interactionsStd)\n\t\t},\n\n\t\tshowDropOffFunnel (funnel) {\n\t\t\tthis.dropOffChartDiv.innerHTML = ''\n\t\t\tlet db = new DomBuilder()\n\t\t\tlet cntr = db.div().build()\n\t\t\tfunnel.forEach((step, i) => {\n\t\t\t\tif(step.event){\n\t\t\t\t\tdb.span('MatcDashLabel', this.getNiceEventLabel(step.event, i)).build(cntr)\n\t\t\t\t\tlet bar = db.div('MatcToolbarDropOffChartBar', Math.round(step.p * 100) + '%').build(cntr)\n\t\t\t\t\tbar.style.background = this.greenToRed(step.p)\n\t\t\t\t\tbar.style.width = step. p * 100 + '%'\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.dropOffChartDiv.appendChild(cntr)\n\t\t},\n\n\t\tgetNiceEventLabel (event, i){\n\t\t\tif (this.model){\n\t\t\t\tvar row = [];\n\t\t\t\tif(event.widget){\n\t\t\t\t\tif(event.type ==\"WidgetGesture\" && event.gesture){\n\t\t\t\t\t\tlet gesture = event.gesture;\n\t\t\t\t\t\trow = [this.getGestureLabel(gesture.type),  this.getWidgetName(event.widget)];\n\t\t\t\t\t} else if(event.state && (event.type == \"WidgetClick\" || event.type == \"WidgetChange\")  ){\n\t\t\t\t\t\treturn this.getEventStateLabel(event.state) + ` -  ` + this.getWidgetName(event.widget) + ' @ ' + this.getScreenName(event.screen);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn this.getEventLabel(event.type) + ` -  ` + this.getWidgetName(event.widget) + ' @ ' + this.getScreenName(event.screen);\n\t\t\t\t\t}\n\t\t\t\t} else if(event.type ==\"ScreenGesture\" && event.gesture){\n\t\t\t\t\tlet gesture = event.gesture;\n\t\t\t\t\trow = [\"Screen \" + this.getGestureLabel(gesture.type), this.getScreenName(event.screen)];\n\t\t\t\t}else {\n\t\t\t\t\trow = [this.getEventLabel(event.type), this.getScreenName(event.screen)];\n\t\t\t\t}\n\t\t\t\treturn row[0] + \" - \" +row[1]+ \"\";\n\t\t\t}\n\t\t\treturn this.getNLS(\"dash.perf.dropoff.step\") + i;\n\t\t},\n\n\n\t\tshowHeatMapProperties(){\n\t\t\tthis.showProperties();\n\t\t\tcss.remove(this.heatmapDiv,\"MatcToolbarSectionHidden\" );\n\t\t\tthis.heatmapClickList.setValue(this.analyticHeatMapClicks);\n\t\t},\n\n\n\n\t\t/*****************************************************************************************************\n\t\t * show properties section and make sure the scroll bar is moved too!\n\t\t ****************************************************************************************************/\n\n\t\tshowProperties(){\n\t\t\tcss.remove(this.propertiesCntr, \"MatcToolbarSectionHidden\");\n\t\t\tif(this.canvas){\n\t\t\t\tcss.add(this.canvas.scrollRight, \"MatcCanvasScrollBarRightOpen\");\n\t\t\t}\n\t\t},\n\n\t\thideProperties(){\n\t\t\tconsole.debug(\"hideProperties() > enter\")\n\t\t\tif (this.analyticMode == \"UserJourney\"){\n\t\t\t\tthis.hideAllSections();\n\t\t\t\tthis.showSessionProperties();\n\t\t\t\treturn\n\t\t\t} \n\t\t\t\n\t\t\tif (this.analyticMode == \"HeatmapClick\"){\n\t\t\t\tthis.hideAllSections();\n\t\t\t\tthis.showHeatMapProperties();\n\t\t\t\treturn\n\t\t\t} \n\t\t\t\n\t\t\t// if (this.analyticMode == \"HeatmapClick\"){\n\t\t\t// \tthis.hideAllSections();\n\t\t\t// \tthis.showHeatMapProperties();\n\t\t\t// \treturn\n\t\t\t// } \n\t\t\t\n\t\t\t// css.add(this.propertiesCntr, \"MatcToolbarSectionHidden\");\n\t\t\t// if(this.canvas){\n\t\t\t// \tcss.remove(this.canvas.scrollRight, \"MatcCanvasScrollBarRightOpen\");\n\t\t\t// }\n\t\t\tthis.hideAllSections();\n\t\t\t\n\t\t},\n\n\n\t\thideAllSections(){\n\t\t\tthis.logger.log(3,\"hideAllSections\", \"entry\");\n\t\t\tfor(var i=0; i< this.sections.length; i++){\n\t\t\t\tvar section = this.sections[i];\n\t\t\t\tcss.add(section, \"MatcToolbarSectionHidden\");\n\t\t\t}\n\t\t},\n\n\n\t\t/**********************************************************************\n\t\t * Canvas Delegates\n\t\t **********************************************************************/\n\n\n\n\t\t/**********************************************************************\n\t\t * DI stuff\n\t\t **********************************************************************/\n\n\n\t\tsetController(c){\n\t\t\tthis.logger.log(3,\"setController\", \"entry\");\n\t\t\tthis.controller = c;\n\t\t},\n\n\t\tsetCanvas(c){\n\t\t\tthis.logger.log(3,\"setCanvas\", \"entry\");\n\t\t\tthis.canvas = c;\n\n\t\t},\n\n\t\tsetModelFactory(f){\n\t\t\tthis.logger.log(3,\"setModelFactory\", \"entry\");\n\t\t\tthis.factory = f;\n\t\t},\n\n\t\tsetModel(m){\n\t\t\tthis.model = this.createInheritedModel(m);\n\t\t\tthis.modelName = m.name\n\t\t\tthis.renderToolbar();\n\t\t\tthis.render();\n\t\t},\n\n\t\tsetAnnotation(a){\n\t\t\tthis.logger.log(-1,\"setAnnotation\", \"enter > # \" );\n\t\t\tthis.annotation = a;\n\t\t},\n\n\t\tsetTest(t){\n\t\t\tthis.logger.log(2,\"setTest\", \"enter > # \" );\n\t\t\tthis.testSettings = t;\n\t\t},\n\n\t\tsetEvents(events){\n\t\t\tthis.logger.log(2,\"setEvents\", \"enter > # \" + events.length);\n\t\t\tthis.events = events;\n\t\t},\n\n\t\tsetMode(mode){\n\t\t\tthis.logger.log(2,\"setMode\", \"entry > '\" + mode + \"'\");\n\t\t\tthis.mode = mode;\n\t\t\tthis.onModeChange();\n\t\t},\n\n\n\t\tonModeChange () {\n\n\t\t},\n\n\n\t\t/********************************************************\n\t\t * Helper\n\t\t ********************************************************/\n\n\t\tsetSelectedViewButton(){\n\t\t},\n\n\t\tcreateRing(lbl, help, distCallBack){\n\n\t\t\tvar bgColor = \"#cecece\";\n\t\t\tvar settings = this.canvas.getSettings();\n\t\t\tif(settings.canvasTheme == \"MatcDark\"){\n\t\t\t\tbgColor = \"#777\";\n\t\t\t}\n\t\t\tvar ring = this.$new(Ring, {size:100, width:5, backgroundColor: bgColor, color:\"#365fff\", color2:\"#83b600\", color3:\"#ffa713\"});\n\t\t\tring.setDomSize(120,120);\n\t\t\tring.setLabel(lbl);\n\n\t\t\tif(distCallBack){\n\t\t\t\tring.setAction(\"mdi mdi-chart-bar\");\n\t\t\t\tthis.tempOwn(ring.on(\"action\", lang.hitch(this, distCallBack)));\n\t\t\t}\n\n\t\t\tif(help){\n\t\t\t\tring.setHelp(true);\n\t\t\t\tthis.tempOwn(ring.on(\"help\", lang.hitch(this, \"showHelpDialog\", help)));\n\t\t\t}\n\n\t\t\tcss.add(ring.domNode, \"MatcMarginTop\");\n\t\t\treturn ring;\n\t\t},\n\n\t\tcreateToolBarItem(label, callback, icon, parent){\n\t\t\tvar a = document.createElement(\"div\");\n\t\t\tcss.add(a,\"MatcToolbarItem MatcToolbarPrimaryItem\");\n\n\t\t\tif(icon){\n\t\t\t\tvar i = document.createElement(\"span\");\n\t\t\t\tcss.add(i,icon);\n\t\t\t\ta.appendChild(i);\n\t\t\t}\n\n\t\t\t// var lbl = document.createElement(\"label\");\n\t\t\t// css.add(lbl, \"MatcToolbarLabel\");\n\t\t\t// lbl.innerHTML =label;\n\t\t\t// a.appendChild(lbl);\n\n\n\t\t\tif(callback){\n\t\t\t\tthis.tempOwn(on(a, touch.press, lang.hitch(this, callback)));\n\t\t\t}\n\t\t\tif(!parent){\n\t\t\t\tthis.properties.appendChild(a);\n\t\t\t} else {\n\t\t\t\tparent.appendChild(a);\n\t\t\t}\n\n\t\t\treturn a;\n\t\t},\n\n\n\t\tcreateInput(content,placeholder){\n\n\t\t\tvar div = document.createElement(\"div\");\n\t\t\tcss.add(div, \"MatcToolbarItem\");\n\t\t\tcontent.appendChild(div);\n\n\t\t\tlet input = document.createElement(\"input\");\n\t\t\tinput.disabled = true;\n\t\t\tcss.add(input, \"MatcIgnoreOnKeyPress MatcToobarInput  MatcToobarInlineEditDisabled\");\n\t\t\tdiv.appendChild(input);\n\n\t\t\tif(placeholder){\n\t\t\t\tinput.placeholder = placeholder;\n\t\t\t}\n\t\t\treturn input;\n\t\t},\n\n\t\tcreateContent(parent){\n\t\t\tvar content = document.createElement(\"div\");\n\t\t\tcss.add(content, \"MatcToolbarSectionContent\");\n\t\t\tparent.appendChild(content);\n\t\t\treturn content;\n\t\t},\n\n\t\tcreateSection(lbl, parentNode, canBeHidden = true){\n\n\t\t\tconst parent = document.createElement(\"div\");\n\t\t\tcss.add(parent, \"MatcToolbarSection\");\n\n\t\t\tconst header = this.createSectionHeader( parent, lbl);\n\n\t\t\t/**\n\t\t\t * store the value somehow in a cookie? and use it during restore??\n\t\t\t */\n\t\t\tthis.own(on(header, touch.press, () => {\n\t\t\t\tcss.toggle(parent, \"MatcToolbarSectionCollabsed\");\n\t\t\t\treturn false;\n\t\t\t}));\n\n\t\t\tif (canBeHidden) {\n\t\t\t\tthis.sections.push(parent);\n\t\t\t}\n\t\t\tparentNode.appendChild(parent);\n\t\t\treturn parent;\n\t\t},\n\n\t\tcreateSectionHeader(parent, lbl, hasTemplateMarker){\n\t\t\tvar div = document.createElement(\"div\");\n\t\t\tcss.add(div,\"MatcToolbarSectionLabel\");\n\t\t\tparent.appendChild(div);\n\n\t\t\tdiv.innerHTML=lbl;\n\n\t\t\tif(hasTemplateMarker){\n\t\t\t\tvar span = document.createElement(\"span\");\n\t\t\t\tcss.add(span, \"MatcToolbarSectionMarker\");\n\t\t\t\tspan.innerHTML=\" *\";\n\t\t\t\tdiv.appendChild(span);\n\t\t\t}\n\n\t\t\tvar chev = document.createElement(\"span\");\n\t\t\tcss.add(chev, \"MatcToolbarSectionChevron mdi mdi-chevron-down\");\n\t\t\tdiv.appendChild(chev);\n\n\t\t\treturn div;\n\t\t},\n\n\n\n\t\tcreateBigNumber(db, cntr, label, help){\n\t\t\tvar numberCntr = db.div(\"MatcToolBarNumberCntr MatcMarginTop\").build(cntr);\n\t\t\tlet l = db.div(\"MatcDashLabel\", label).build(numberCntr);\n\t\t\tvar main =  db.div(\"MatcToolbarBigLabel\").build(numberCntr);\n\t\t\tvar little =  db.div(\"MatcToolbarDetailLabel\").build(numberCntr);\n\t\t\tif(help){\n\t\t\t\tvar node =  db.span(\"mdi mdi-help-circle MatcHelpIcon\").build(l);\n\t\t\t\tthis.tempOwn(on(node, touch.press, lang.hitch(this, \"showHelpDialog\", help)));\n\t\t\t}\n\n\t\t\treturn [main, little];\n\t\t},\n\n\n\t\t/********************************************************\n\t\t * Main menu handlers\n\t\t ********************************************************/\n\n\t\tonExit(){\n\t\t\tthis.logger.log(0,\"onExit\", \"entry\", this.isPublic);\n\t\t\tif(this.isPublic){\n\t\t\t\thash(\"#/examples/\"+ this.model.id + \"/design.html\");\n\t\t\t} else {\n\t\t\t\thash(\"#/apps/\"+ this.model.id + \"/design.html\");\n\t\t\t}\n\t\t},\n\n\t\tonShare(){\n\t\t\tthis.logger.log(0,\"onShare\", \"entry\");\n\t\t},\n\n\t\t/********************************************************\n\t\t * Selection handlers!\n\t\t ********************************************************/\n\n\t\tonWidgetSelected(widget){\n\t\t\tthis.logger.log(2,\"onWidgetSelected\", \"entry\");\n\n\t\t\t/**\n\t\t\t * We might want to blur some stuff\n\t\t\t */\n\t\t\tif(this._selectedWidget && this._selectedWidget.id != widget.id){\n\t\t\t\tthis.logger.log(3,\"onWidgetSelected\", \"exit > no new selection!\");\n\t\t\t\tthis.blurWidgetProperties();\n\t\t\t}\n\n\n\t\t\tthis.cleanUp();\n\n\n\t\t\tthis._selection = \"widget\";\n\t\t\tthis._selectedWidget = widget;\n\t\t\tthis.showWidgetProperties(widget);\n\n\n\t\t\tthis.logger.log(3,\"onWidgetSelected\", \"exit\");\n\t\t},\n\n\n\t\tonScreenSelected(screen){\n\t\t\tthis.logger.log(-1, \"onScreenSelected\", \"entry\", this._selectedScreen);\n\n\t\t\t/**\n\t\t\t * We don not want to rerender on scroll\n\t\t\t */\n\t\t\tif(this._selectedScreen && this._selectedScreen.id == screen.id){\n\t\t\t\tthis.logger.log(3,\"onScreenSelected\", \"exit > no new selection!\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.cleanUp();\n\t\t\tthis._selection = \"screen\";\n\t\t\tthis._selectedScreen = screen;\n\t\t\tthis.showScreenProperties(screen);\n\n\n\t\t\tthis.logger.log(4,\"onScreenSelected\", \"exit\");\n\t\t},\n\n\n\n\n\t\tonLineSelected(line){\n\t\t\tthis.cleanUp();\n\t\t\tthis._selection = \"line\";\n\t\t\tthis._selectedLine = line;\n\t\t},\n\n\n\n\t\tonMultiSelect(selection){\n\t\t\tthis.cleanUp();\n\n\t\t\tthis._selection = \"multi\";\n\t\t\tthis._selectedMulti = selection;\n\t\t},\n\n\t\tonGroupSelect(group){\n\t\t\tthis.cleanUp();\n\t\t\tthis._selection = \"group\";\n\t\t\tthis._selectedGroup = group;\n\t\t\tthis.showGroupProperties(group);\n\t\t},\n\n\n\n\t\t// onCanvasSelected(){\n\t\t// \tthis.cleanUp();\n\t\t// \tthis.hideProperties();\n\t\t// },\n\n\n\t\t/**\n\t\t * method which will update all properties. method is called from controller!\n\t\t */\n\t\tupdatePropertiesView(){\n\n\t\t\tif(this._selectedWidget ){\n\t\t\t\tthis.onWidgetSelected(this._selectedWidget );\n\t\t\t}\n\t\t},\n\n\n\n\t\t/********************************************************\n\t\t * Player\n\t\t ********************************************************/\n\n\t\tshowSession(session,e){\n\t\t\t//console.debug(\"showSession\", session.session, this.events.length);\n\n\t\t\tconst sessionID = session.session;\n\t\t\tconst dialog = new Dialog();\n\t\t\n\t\t\tconst db = new DomBuilder();\n\n\t\t\tconst div = db.div(\"MatcDialog MatcPlayerDialog \").build();\n\t\t\tconst cntr = db.div(\"\").build(div);\n\n\t\t\tdialog.onOpen(() => {\n\t\t\t\tif (this.isPublic){\n\t\t\t\t\tPromise.all([\n\t\t\t\t\t\tthis.modelService.findPublicTagAnnotations(this.model.id),\n\t\t\t\t\t\tthis.modelService.findPublicMouseBySession(this.model.id, sessionID)\n\t\t\t\t\t]).then(values => {\n\t\t\t\t\t\tthis._showSession(sessionID, cntr, dialog, values);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tPromise.all([\n\t\t\t\t\t\tthis.modelService.findTagAnnotations(this.model.id),\n\t\t\t\t\t\tthis.modelService.findMouseBySession(this.model.id, sessionID)\n\t\t\t\t\t]).then(values => {\n\t\t\t\t\t\tthis._showSession(sessionID, cntr, dialog, values);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tdialog.popup(div, e.target);\n\t\t},\n\n\t\t_showSession(sessionID, cntr, dialog, data) {\n\n\t\t\ttry {\n\t\t\t\tconst mouse = data[1];\n\n\t\t\t\tconst df = new DataFrame(this.events);\n\t\t\t\tdf.sortBy(\"time\");\n\t\t\t\tconst sessionGroup = df.groupBy(\"session\");\n\t\t\t\tconst events = sessionGroup.get(sessionID);\n\n\t\t\t\tconst player = this.$new(VideoPlayer);\n\t\t\t\tplayer.setDialog(dialog)\n\t\t\t\tplayer.placeAt(cntr);\n\t\t\t\tplayer.setModel(this.model);\n\t\t\t\tplayer.setTestSettings(this.testSettings)\n\t\t\t\tplayer.setMouse(mouse);\n\t\t\t\tplayer.setMouse(mouse);\n\t\t\t\tplayer.setSession(events, sessionID);\n\t\t\n\n\t\t\t\tdialog.own(on(dialog, \"close\", function () {\n\t\t\t\t\tplayer.destroy();\n\t\t\t\t}));\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t},\n\n\t\t_getSessionAnnotation(annotations, appID){\n\n\t\t\tif(annotations.length > 1){\n\t\t\t\t/**\n\t\t\t\t * This should not happen, but we have seen it happeing. We delete this now...\n\t\t\t\t */\n\t\t\t\tconsole.warn(\"Too many annotations!\");\n\t\t\t\tfor(var i=1; i< annotations.length; i++){\n\t\t\t\t\tvar a = annotations[i];\n\t\t\t\t\tthis._doDelete(\"rest/annotations/apps/\"+ appID + \"/\" + a.id + \".json\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(annotations.length >= 1){\n\t\t\t\treturn  annotations[0];\n\t\t\t}else {\n\t\t\t\t//console.debug(\"Create Tag annotation...\");\n\t\t\t\treturn {\n\t\t\t\t\tappID : appID,\n\t\t\t\t\ttype : \"tags\",\n\t\t\t\t\treference : \"\",\n\t\t\t\t\tsessions :{}\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\n\t\t/********************************************************\n\t\t * Show Settings\n\t\t ********************************************************/\n\n\n\t\tonShowSettings(e){\n\n\t\t\tvar db = new DomBuilder();\n\n\t\t\tdb = new DomBuilder();\n\t\t\tvar popup = db.div(\"MatcDialog MatcHeaderDialog MatcPadding\").build();\n\n\t\t\tvar cntr = db.div(\"\").build(popup);\n\n\t\t\tvar settings = this.canvas.getSettings();\n\n\n\t\t\t/**\n\t\t\t * Themes\n\t\t\t */\n\t\t\tdb.label(\"\",\"Theme :\").build(cntr);\n\t\t\tvar themeList = this.$new(RadioBoxList);\n\t\t\tthemeList.setOptions([\n\t\t\t\t{value:\"MatcDark\", label:\"Dark\"},\n\t\t\t\t{value:\"MatcLight\", label: \"Light\"}\n\t\t\t]);\n\t\t\tthemeList.setValue(settings.canvasTheme);\n\t\t\tthemeList.placeAt(cntr);\n\n\n\n\t\t\t/**\n\t\t\t * Mouse Wheel\n\t\t\t */\n\t\t\tdb.label(\"MatcMarginTop\",\"Mouse Wheel / Touchpad Scroll :\").build(cntr);\n\t\t\tvar mouseWheelList = this.$new(RadioBoxList);\n\t\t\tmouseWheelList.setOptions([\n\t\t\t\t{value:\"scroll\", label: \"Scroll Canvas\"},\n\t\t\t\t{value:\"zoom\", label:\"Zoom Canvas\"}\n\t\t\t]);\n\t\t\tmouseWheelList.setValue(settings.mouseWheelMode);\n\t\t\tmouseWheelList.placeAt(cntr);\n\n\n\t\t\tvar bar = db.div(\"MatcButtonBar MatcMarginTopXL\").build(popup);\n\t\t\tvar save = db.a(\"MatcButton MatcButtonPrimary\", \"Save\").build(bar);\n\t\t\tvar cancel = db.a(\" MatcLinkButton \", \"Cancel\").build(bar);\n\n\n\n\t\t\tvar dialog = new Dialog();\n\t\t\tdialog.own(on(cancel, touch.press, lang.hitch(dialog, \"close\")));\n\t\t\tdialog.own(on(save, touch.press, lang.hitch(this, \"onSaveSettings\", dialog, themeList, mouseWheelList)));\n\n\t\t\tdialog.popup(popup, e.target);\n\n\t\t\tthis.canvas.enableMouseZoom(false);\n\t\t\tthis.canvas.setState(\"simulate\");\n\n\t\t\tthis.logger.log(0,\"onShowSettings\", \"exit > \");\n\t\t},\n\n\t\tonSaveSettings(dialog, themeList,mouseWheelList){\n\t\t\tvar settings = {\n\t\t\t\tcanvasTheme: themeList.getValue(),\n\t\t\t\tmouseWheelMode : mouseWheelList.getValue()\n\t\t\t};\n\n\t\t\tthis.canvas.setSettings(settings);\n\t\t\tthis.canvas.enableMouseZoom(true);\n\t\t\tdialog.close();\n\t\t},\n\n\n\t\t/********************************************************\n\t\t * SignUp\n\t\t ********************************************************/\n\n\n\t\tshowSignUpDialog(e){\n\n\t\t\tvar d = new Dialog();\n\n\t\t\tvar db = new DomBuilder();\n\n\t\t\tvar div = db.div(\"MatcDialog \").build();\n\n\n\t\t\tthis._createSignUpForm(d, div);\n\n\t\t\td.popup(div, e.target);\n\t\t},\n\n\n\t\t_createSignUpForm(d, div){\n\t\t\tlet f = this.$new(Form);\n\t\t\tf.render([\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Email\",\n\t\t\t\t\tname:\"email\",\n\t\t\t\t\ttype:\"text\",\n\t\t\t\t\trequired:\"true\",\n\t\t\t\t\tplaceholder:\"Your email\",\n\t\t\t\t\tcss:\"input-lg MatcIgnoreOnKeyPress\",\n\t\t\t\t\terror:\"We need your email.\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Password\",\n\t\t\t\t\tname:\"password\",\n\t\t\t\t\ttype:\"password\",\n\t\t\t\t\tmin:6,\n\t\t\t\t\tplaceholder:\"Your password\",\n\t\t\t\t\tcss:\"input-lg MatcIgnoreOnKeyPress\",\n\t\t\t\t\terror:\"The password should have at least six characters.\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'I have read the <a href=\"#/termsofservice.html\" target=\"_blank\">terms of service</a>',\n\t\t\t\t\tname:\"tos\",\n\t\t\t\t\ttype:\"check\",\n\t\t\t\t\trequired:\"true\",\n\t\t\t\t\tcss:\"MatcFormCheckBox MatcIgnoreOnKeyPress\",\n\t\t\t\t\terror:\"You must accept the terms of service!\"\n\t\t\t\t}\n\t\t\t], [\n\t\t\t\t{label : \"Cancel\", css:\"MatcLinkButton\", click: lang.hitch(d, \"close\")},\n\t\t\t\t{label : \"Create Free Account\", css:\"MatcButton MatchButtonGreen\", click: lang.hitch(this, \"_signUpAndNew\",d,f)}\n\t\t\t]);\n\n\t\t\tf.placeAt(div);\n\t\t\tf.startup();\n\n\t\t\treturn f;\n\t\t},\n\n\t\t_signUpAndNew(dialog, form, data){\n\n\t\t\tvar valid = form.validateForm(null, true);\n\n\t\t\tif(valid){\n\n\t\t\t\tresult = this._doPost(\"rest/user\", data);\n\n\t\t\t\tif(result.type==\"error\"){\n\t\t\t\t\tif(result.errors.indexOf(\"user.email.not.unique\") >=0){\n\t\t\t\t\t\tform.showError(\"The email is already taken! Please enter another one!\", \"email\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tform.showError(\"Something went wrong! Please try again!\", \"\");\n\t\t\t\t\t}\n\n\t\t\t\t\tdialog.shake();\n\t\t\t\t} else {\n\t\t\t\t\tdialog.close();\n\n\t\t\t\t\tvar result = this._doPost(\"rest/login/\", data);\n\t\t\t\t\tif(result.type!=\"error\"){\n\n\t\t\t\t\t\twindow.location.href = \"/my-account.html\";\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error(\"_signUpAndSave() > Could not sign in user\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdialog.shake();\n\t\t\t}\n\t\t},\n\n\t\t/********************************************************\n\t\t * CleanUp\n\t\t ********************************************************/\n\n\n\t\tcleanUp(){\n\t\t\tthis.hideAllSections();\n\t\t\tthis.unselect()\n\t\t},\n\n\t\tunselect() {\n\t\t\tthis._selectedWidget = null;\n\t\t\tthis._selectedLine  = null;\n\t\t\tthis._selectedScreen = null;\n\t\t\tthis._selectedMulti = null;\n\t\t\tthis._selectedGroup = null;\n\t\t\tthis._selection = null;\n\t\t},\n\n\t\tblurWidgetProperties(){\n\n\t\t}\n    },\n    mounted () {\n\t\tthis.db = new DomBuilder();\n    }\n}\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AnalyticToolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AnalyticToolbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnalyticToolbar.vue?vue&type=template&id=444e8b69&\"\nimport script from \"./AnalyticToolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./AnalyticToolbar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcCanvas MatcAnalyticCanvas\"},[_c('div',{staticClass:\"MatcCanvasFrame\",attrs:{\"data-dojo-attach-point\":\"frame\"}},[_c('div',{staticClass:\"MatcCanvasContainer MatcCanvasZoomable\",attrs:{\"data-dojo-attach-point\":\"container\"}},[_c('div',{staticClass:\"MatcCanvasContainer\",attrs:{\"data-dojo-attach-point\":\"zoomContainer\"}},[_c('div',{staticClass:\"MatcCanvasLayer\",attrs:{\"data-dojo-attach-point\":\"screenContainer\"}}),_c('div',{staticClass:\"MatcCanvasLayer\",attrs:{\"data-dojo-attach-point\":\"widgetContainer\"}}),_c('div',{staticClass:\"MatcCanvasLayer MatcCanvasSVGLayer\",attrs:{\"data-dojo-attach-point\":\"svgContainer\"}})]),_c('div',{staticClass:\"MatcDnDLayer\",attrs:{\"data-dojo-attach-point\":\"dndContainer\"}})])]),_c('div',{staticClass:\"MatcCanvasScrollBar MatcCanvasScrollBarRight\",attrs:{\"data-dojo-attach-point\":\"scrollRight\"}},[_c('div',{staticClass:\"MatcCanvasScrollBarCntr MatcCanvasScrollBarCntrRight\",attrs:{\"data-dojo-attach-point\":\"scrollRightCntr\"}},[_c('div',{staticClass:\"MatchCanvasScrollHandle\",attrs:{\"data-dojo-attach-point\":\"scrollRightHandler\"}})])]),_c('div',{staticClass:\"MatcCanvasScrollBar MatcCanvasScrollBarBottom\",attrs:{\"data-dojo-attach-point\":\"scrollBottom\"}},[_c('div',{staticClass:\"MatcCanvasScrollBarCntr MatcCanvasScrollBarCntrBottom\",attrs:{\"data-dojo-attach-point\":\"scrollBottomCntr\"}},[_c('div',{staticClass:\"MatchCanvasScrollHandle\",attrs:{\"data-dojo-attach-point\":\"scrollBottomHandler\"}})])]),_c('div',{staticClass:\"MatcMessage\",attrs:{\"data-dojo-attach-point\":\"message\"}})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcCanvas MatcAnalyticCanvas\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n    <div class=\"MatcCanvas MatcAnalyticCanvas\">\n    </div>\n  </template>\n  \n\n  <script>\n \n  import css from \"dojo/css\";\n  import on from \"dojo/on\";\n  import lang from \"dojo/_base/lang\";\n  import DomBuilder from \"common/DomBuilder\"; \n  \n  export default {\n    name: \"UserJourney\",\n    mixins: [],\n    data: function () {\n      return {\n      };\n    },\n    components: {},\n    methods: {\n\n      highlightSession (sessionID = false) {\n        if (!this.analyticParams.tree) {\n          this.highlightAnalyticLine(sessionID)\n        }\n      },\n\n\n      highlightAnalyticLine(sessionID) {\n        this.logger.log(1, \"highlightAnalyticLine\", \"entry > \", sessionID);\n          if (this.analyticLines) {\n            for (let id in this.analyticLines) {\n              let line = this.analyticLines[id]\n              if (!sessionID || sessionID === id) {\n                // somebug when tasks are selected\n                line.style('opacity', 1)\n              } else {\n                line.style('opacity', 0)\n              }\n\n              if (this.analyticCircles[id]) {\n                let divs = this.analyticCircles[id]             \n                divs.forEach(div => {\n                  if (!sessionID || sessionID === id) {\n                    div.style.opacity = 1                  \n                  } else {\n                    div.style.opacity = 0\n                  }\n                })   \n              }\n            }\n          }\n      },\n    \n  \n      _render_global_UserJourney() {\n        this.logger.log(1, \"_render_global_UserJourney\", \"entry > \");\n        this.setBW(true);\n        this.cleanUpAnalytics()\n        if (!this.analyticParams.tree) {\n          this._renderUserSingleLines();\n        } else {\n          this._renderUserTree();\n        }\n      },\n  \n      _renderUserTree() {\n        let sessions = this.getUserJourney();\n        let db = new DomBuilder();\n        let time = this.analyticParams.time\n        \n        let selectedSessions = this.analyticParams.sessions;\n        let graph = {};\n        let maxCount = 0;\n        let maxMeanDuration = 0\n      \n        for (let sessionID in selectedSessions) {\n          if (selectedSessions[sessionID] === true) {\n            let session = sessions[sessionID];\n            if (session) {\n              this._getSessionGraph(session, graph, time);\n              maxCount++;\n            } else {\n              console.debug(\"_renderUserTree() > No session for \", sessionID);\n            }\n          }\n        }\n  \n        /**\n         * We might have the situation that the users creates loopes\n         * in one session. This will cause the count to be bigger than the\n         * session count (maxCount). This messes up the graph. To make it\n         * nice again, we update maxCount\n         */\n    \n        for (let id in graph) {\n          const l = graph[id]\n          if (l.count > maxCount) {\n            console.warn(\"_renderUserTree() > Update maxcount, because l.count bigger than max count\", )\n            maxCount = l.count\n          }\n          const meanDuration = l.duration / l.count\n          maxMeanDuration = Math.max(meanDuration, maxMeanDuration)\n        }\n  \n        const divs = {};\n        for (let id in graph) {\n          const l = graph[id];\n          const line = [];\n          line.push({\n            x: l.from.x,\n            y: l.from.y,\n            d: \"right\",\n          });\n          line.push({\n            x: l.to.x,\n            y: l.to.y,\n            d: \"right\",\n          });\n  \n          const meanDuration = l.duration / l.count\n          const p = time ?\n              Math.min(1, meanDuration / maxMeanDuration):\n              Math.min(1, l.count / maxCount)\n  \n          const width = Math.min(15, Math.max(1, Math.round(p * 25))) + 1;\n          const color = this.mixColor(Math.min(1, p));\n          const toID = l.to.x + \",\" + l.to.y;\n          const fromID = l.from.x + \",\" + l.from.y;\n          \n          if (!divs[toID]) {\n            divs[toID] = this._renderTreeEvent(l.to.x, l.to.y, width, color, db);\n          }\n        \n          if (!divs[fromID]) {\n            divs[fromID] = this._renderTreeEvent(l.from.x,l.from.y,width,color,db);\n          }\n  \n          this.drawAnalyticLine(id, line, color, width, this.taskLineOpacity);\n        }\n      },\n  \n  \n  \n      _renderTreeEvent(x, y, width, color, db) {\n        const cntr = db\n          .div(\"MatcAnalyticCanvasEventCntr\")\n          .build(this.widgetContainer);\n\n        cntr.style.left = Math.round(x) + \"px\";\n        cntr.style.top = Math.round(y) + \"px\";\n  \n        const div = db\n          .div(\"MatcAnalyticCanvasEvent MatcAnalyticCanvasEvent\")\n          .build(cntr);\n  \n        const r = Math.round(width * 2);\n        div.style.width = r + \"px\";\n        div.style.height = r + \"px\";\n        div.style.top = -1 * Math.round(r / 2) + \"px\";\n        div.style.left = -1 * Math.round(r / 2) + \"px\";\n        div.style.background = color;\n      },\n  \n      _renderUserSingleLines() {\n        const sessions = this.getUserJourney();\n        const outlierScores = this.getOutlierScores()\n\n        const taskPerformance = this.getTaskPerformance();\n        const db = new DomBuilder();\n  \n        let task = null;\n        if (this.analyticParams.task !== false && this.analyticParams.task >= 0) {\n          task = this.testSettings.tasks[this.analyticParams.task];\n        }\n\n        const selectedSessions = this.analyticParams.sessions;\n        for (let sessionID in selectedSessions) {\n          if (selectedSessions[sessionID] === true) {\n            const session = sessions[sessionID];\n            const matches = taskPerformance[sessionID];\n            const outlierScore = outlierScores[sessionID]\n            if (session) {\n              this._renderUserGraph(sessionID, session, db, task, matches, outlierScore);\n            } else {\n              console.debug( \"_render_global_UserJourney() > No session for \", sessionID   );\n            }\n          }\n        }\n\n        if (this.analyticParams.outlier) {\n          this.showHint(`Found ${Object.values(outlierScores).filter(v => v ===1).length} outliers`)\n        }\n      },\n  \n      \n  \n      _renderUserGraph(sessionID, session, db, task, matches, isOutlier) {\n    \n        const sessionEvents = session.data;\n        const line = [];\n        const sessionLength = sessionEvents.length\n        const matchLines = [];\n  \n        let e = null;\n        let lastDurationEvent\n        let duration = 0\n        let maxDuration = 0\n        let match;\n        if (task && matches) {\n          match = matches[task.id];\n        }\n  \n        // compute line\n        for (let i = 0; i < sessionLength; i++) {\n          e = sessionEvents[i];\n          if (lastDurationEvent) {\n            duration = e.time - lastDurationEvent.time\n            maxDuration = Math.max(duration, maxDuration)\n          }\n          \n          const screenID = this.getEventScreenId(e);\n          const sourceScreen = this.sourceModel.screens[screenID];\n                  const zoomedScreen = this.model.screens[screenID];\n          if (sourceScreen && zoomedScreen) {\n            if (e.type == \"SessionStart\") {\n              const x = sourceScreen.x - Math.max(10, Math.round(30 * this.zoom));\n              const y = sourceScreen.y + Math.max(10, Math.round(30 * this.zoom));\n              line.push({ x: x, y: y, d: \"right\", duration:duration, type: e.type, session: e.session });\n            } else if (e.x >= 0 && e.y >= 0 && !e.noheat) {\n              const x = e.x * sourceScreen.w + sourceScreen.x;\n              const y = e.y * sourceScreen.h + sourceScreen.y;\n              line.push({ x: x, y: y, d: \"right\", duration: duration , type: e.type, session: e.session});\n              lastDurationEvent = e\n            }\n            if (match && match.startPosition <= i && match.endPosition >= i) {\n              const point = line[line.length - 1];\n              point.match = true\n              matchLines.push(point);\n            }\n          } else {\n            console.warn(\"_renderUserGraph()\", \"Screen is not there\", e.screen);\n          }\n        }\n        \n        /** Since 4.0.60 we add a last node, if it was screen load */\n        if (e && e.type === 'ScreenLoaded') {\n          const screenID = this.getEventScreenId(e);\n          const sourceScreen = this.sourceModel.screens[screenID];\n          let x = Math.round(sourceScreen.x + sourceScreen.w / 2);\n          let y = Math.round(sourceScreen.y + sourceScreen.h / 2);\n          line.push({ x: x, y: y, d: \"right\", duration:duration, type: e.type, session: e.session});\n          if (match && match.startPosition <=  sessionLength-1 && match.endPosition >= sessionLength-1) {\n              const point = line[line.length - 1];\n              point.match = true\n              matchLines.push(point);\n            }\n        }\n  \n        this.analyticCircles[sessionID] = []\n        // draw all points\n        for (let i = 0; i < line.length; i++) {\n          const p = line[i]\n          const width = Math.round(40 * (p.duration / maxDuration)) + 25\n          const [div, halo, cntr] = this._renderScreenEvent(p.x,p.y, p.type, \"\",db, p.session, width);\n          if (i == line.length -1) {\n            css.add(cntr, \"MatcAnalyticCanvasEventSessionEnd\");\n            div.style.background = this.userJourneyEndColor\n            halo.style.background = this.userJourneyEndColor + 28;\n            halo.style.borderColor = this.userJourneyEndColor;\n          } else if (i > 0) {\n            if (p.match) {\n              div.style.background = this.analyticParams.taskColor;\n              halo.style.background = this.analyticParams.taskColor + 28;\n              halo.style.borderColor = this.analyticParams.taskColor;\n            } else if (isOutlier && this.analyticParams.outlier) {\n            \n              div.style.background = this.analyticParams.outlierColor\n              halo.style.background = this.analyticParams.outlierColor + 28;\n              halo.style.borderColor = this.analyticParams.outlierColor;\n\n            } else {\n              div.style.background = this.analyticParams.color\n              halo.style.background = this.analyticParams.color + 28;\n              halo.style.borderColor = this.analyticParams.color;\n            }\n          }\n          this.analyticCircles[sessionID].push(cntr)\n      \n\n\n        }\n    \n        /**\n         * Render successful lines on top\n         */\n        let lineColor = this.analyticParams.color\n        let lineOpacity = this.taskLineOpacity\n        let lineWidth = 2\n\n        if (this.analyticParams.outlier) {\n          if (isOutlier) {\n            lineColor = this.analyticParams.outlierColor\n            lineOpacity = this.taskLineOpacity\n            lineWidth = 4\n          } else {\n            lineOpacity = this.taskLineOpacity * 0.5\n          }\n        }\n        \n        if (task) {\n          lineOpacity = this.taskLineOpacity * 0.5\n          this.drawStraightAnalyticLine(sessionID, line, lineColor, lineWidth, lineOpacity);\n          this.drawStraightAnalyticLine(sessionID, matchLines,this.analyticParams.taskColor, 4 ,this.taskLineOpacity);\n        } else {\n          this.drawStraightAnalyticLine(sessionID,line, lineColor, lineWidth, lineOpacity);\n        }\n  \n        return false;\n      },\n  \n     \n      _renderScreenEvent(x, y, type, label, db, screenID, width, r = 15) {\n        const cntr = db\n          .div(\"MatcAnalyticCanvasEventCntr\")\n          .build(this.widgetContainer);\n        cntr.style.left = Math.round(x) + \"px\";\n        cntr.style.top = Math.round(y) + \"px\";\n  \n  \n        const halo = db\n          .div(\"MatcAnalyticCanvasEventHalo\")\n          .build(cntr);\n  \n        halo.style.width = width + \"px\";\n        halo.style.height = width + \"px\";\n        halo.style.top = -1 * Math.round(width / 2) + \"px\";\n        halo.style.left = -1 * Math.round(width / 2) + \"px\";\n   \n        const div = db\n          .div(\"MatcAnalyticCanvasEvent MatcAnalyticCanvasClickableEvent MatcAnalyticCanvasEvent\" + type)\n          .build(cntr);\n  \n        div.style.width = r + \"px\";\n        div.style.height = r + \"px\";\n        div.style.top = -1 * Math.round(r / 2) + \"px\";\n        div.style.left = -1 * Math.round(r / 2) + \"px\";\n  \n        this.tempOwn(on(div, \"click\", lang.hitch(this, \"onScreenEventClick\", screenID)));\n  \n        return [div, halo, cntr];\n      },\n  \n      onScreenEventClick(id, e) {\n        this.stopEvent(e);\n        if (this.toolbar) {\n          this.toolbar.setSelectSessions([id]);\n        }\n      },\n  \n      _getSessionGraph(session, graph) {\n    \n        const sessionEvents = session.data;\n        let from;\n        let e = null\n        let lastDurationEvent// = sessionEvents[0]\n        let duration = 0\n        for (let i = 0; i < sessionEvents.length; i++) {\n          e = sessionEvents[i];\n          // we start only counting durations once there\n          // was an click event\n          if (lastDurationEvent) {\n            duration = e.time - lastDurationEvent.time\n          }\n          \n        /**\n           * Be aware of the overlay...\n           */\n          const screenID = this.getEventScreenId(e);\n          const screen = this.sourceModel.screens[screenID];\n          if (screen) {\n            const to = {};\n            if (e.type == \"SessionStart\") {\n              to.x = screen.x - Math.max(10, Math.round(30));\n              to.y = screen.y + Math.max(10, Math.round(30));\n              from = this._addToGraph(from, to, graph, 0);\n            } else if (e.x >= 0 && e.y >= 0 && !e.noheat) { // some click\n              if (e.widget && this.sourceModel.widgets[e.widget]) {\n                const widget = this.sourceModel.widgets[e.widget];\n                to.x = Math.round(widget.x + widget.w / 2);\n                to.y = Math.round(widget.y + widget.h / 2);\n                from = this._addToGraph(from, to, graph, duration);\n                lastDurationEvent = e\n              } else {\n                to.x = Math.round(Math.min(1, e.x) * screen.w + screen.x);\n                to.y = Math.round(Math.min(1, e.y) * screen.h + screen.y);\n                from = this._addToGraph(from, to, graph, duration);\n                lastDurationEvent = e\n              }\n            }\n          } else {\n            console.warn(\"_getSessionGraph()\", \"Screen is not there\", e.screen);\n          }\n        }\n  \n          /** Since 4.0.60 we add a last node, if it was screen load */\n        if (e && e.type === 'ScreenLoaded') {\n          const screenID = this.getEventScreenId(e);\n          const screen = this.sourceModel.screens[screenID];\n          const to = {\n            x: Math.round(screen.x + screen.w / 2),\n            y: Math.round(screen.y + screen.h / 2)\n          }\n          from = this._addToGraph(from, to, graph, duration);\n        }\n  \n  \n      },\n  \n      _addToGraph(from, to, graph, duration) {\n        if (from) {\n          const id = from.x + \";\" + from.y + \"-\" + to.x + \";\" + to.y;\n          if (!graph[id]) {\n            graph[id] = {\n              from: from,\n              to: to,\n              count: 0,\n              duration: 0\n            };\n          }\n          graph[id].count++;\n          graph[id].duration += duration * 1;\n          return to;\n        }\n        return to;\n      }\n    },\n    mounted() {},\n  };\n  </script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserJourney.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserJourney.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserJourney.vue?vue&type=template&id=33701dd5&\"\nimport script from \"./UserJourney.vue?vue&type=script&lang=js&\"\nexport * from \"./UserJourney.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcCanvas MatcAnalyticCanvas\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n    <div class=\"MatcCanvas MatcAnalyticCanvas\">\n     \n    </div>\n  </template>\n  \n  \n  <script>\n  \n  import on from \"dojo/on\";\n  import DomBuilder from \"common/DomBuilder\";\n  import DataFrame from \"common/DataFrame\";\n  import Analytics from \"dash/Analytics\";\n \n  export default {\n    name: \"DropOff\",\n    mixins: [],\n    data: function () {\n      return {\n      };\n    },\n    components: {},\n    methods: {\n     \n  \n      /**********************************************************************\n       * DropOff\n       **********************************************************************/\n  \n      _render_global_DropOff() {\n        this.logger.log(1, \"_render_global_DropOff\", \"entry > \", this.analyticParams.task);\n        this.setBW(true);\n        if (this.analyticParams.task) {\n          if (this.analyticParams.time) {\n            this._render_dropoff_task_time(this.analyticParams.task);\n          } else {\n            this._render_dropoff_task_success(this.analyticParams.task);\n          }\n        } else {\n          this.showError('No task selected')\n        }\n      },\n  \n       _render_dropoff_task_time (task) {\n  \n        const db = new DomBuilder()\n  \n        const df = new DataFrame(this.events);\n        const analytics  = new Analytics();\n        const funnel = analytics.getFunnelSummary(df, task, this.annotation);\n  \n\n  \n        const length = task.flow.length\n        if (task.flow && task.flow.length > 1) {\n  \n          /**\n           * We take here to total task time...\n           */\n          const maxTime = Math.max(1,funnel[funnel.length-1].durationMean)\n  \n          for (let i=0; i < task.flow.length - 1; i++){\n            const startSummary = funnel[i+1]\n            const endSummary = funnel[i+2]\n            const start = task.flow[i]\n            const end = task.flow[i+1]\n  \n  \n            const time = endSummary.durationMean - startSummary.durationMean\n            const p = Math.min(1, time  / maxTime)\n  \n  \n            const startPos = this._getDropOffBoxPosition(start, i , length)\n            const endPos = this._getDropOffBoxPosition(end, i+ 1, length)\n            const line = [startPos, endPos]\n  \n            let color = this.mixColor(p)\n            let width = Math.max(3, Math.round(this.dropOffLineWidth * p))\n            this.drawAnalyticLine('dropOffLine'+i,line, color , width, this.taskLineOpacity);\n  \n            /**\n             * Render Points\n             */\n            this._renderDropOffEvent(endPos.x, endPos.y, 'FlowStep', db, color, width + this.dropOffEventWidth, Math.round(time / 100) / 10, 's')\n            if (i === 0) {\n                color = this.mixColor(p)\n                width = Math.max(3, Math.round(this.dropOffLineWidth * p))\n                this._renderDropOffEvent(startPos.x, startPos.y, 'FlowStep', db, color, width + this.dropOffEventWidth, '0', 's')\n            }\n  \n          }\n        } else {\n          this.showError('Cannot show task times. The selected task has only one step.')\n        }\n      },\n  \n      _render_dropoff_task_success (task) {\n  \n        const db = new DomBuilder()\n  \n        const df = new DataFrame(this.events);\n        const analytics  = new Analytics();\n        const funnel = analytics.getFunnelSummary(df, task, this.annotation);\n  \n        const length = task.flow.length\n        if (task.flow && task.flow.length > 1) {\n          for (let i=0; i < task.flow.length - 1; i++){\n  \n            const startSummary = funnel[i+1]\n            const endSummary = funnel[i+2]\n            const start = task.flow[i]\n            const end = task.flow[i+1]\n  \n            const startPos = this._getDropOffBoxPosition(start, i, length)\n            const endPos = this._getDropOffBoxPosition(end, i + 1, length)\n            const line = [startPos, endPos]\n  \n            let color = this.greenToRed(endSummary.p)\n            let width = Math.max(3, Math.round(this.dropOffLineWidth * endSummary.p))\n            this.drawAnalyticLine('dropOffLine'+i,line, color , width, this.taskLineOpacity);\n  \n            /**\n             * Render drop off\n             */\n            if (startSummary && endSummary) {\n                const p = startSummary.p - endSummary.p\n                const dropOffPos = {\n                  x: startPos.x + 100,\n                  y: startPos.y + 100\n                }\n                const dropOffLine = [startPos, dropOffPos]\n                width = Math.max(3, Math.round(this.dropOffLineWidth * p))\n                this.drawAnalyticLine('dropOffLineDrop'+i,dropOffLine, this.dropOffLineColor , width, this.taskLineOpacity);\n                this._renderDropOffEvent(dropOffPos.x, dropOffPos.y, 'FlowStep', db, this.dropOffLineColor, width + this.dropOffEventWidth, Math.round(-100 * p))\n            }\n  \n            /**\n             * Render points\n             */\n            this._renderDropOffEvent(endPos.x, endPos.y, 'FlowStep', db, color, width + this.dropOffEventWidth, Math.round(endSummary.p * 100))\n            if (i === 0) {\n                color = this.greenToRed(startSummary.p)\n                width = Math.max(3, Math.round(this.dropOffLineWidth * startSummary.p))\n                this._renderDropOffEvent(startPos.x, startPos.y, 'FlowStep', db, color, width + this.dropOffEventWidth, Math.round(startSummary.p * 100))\n            }\n  \n          }\n        } else {\n          this.showError('Cannot show task times. The selected task has only one step.')\n        }\n      },\n  \n      _getDropOffBoxPosition (e, i = 0, l = 1) {\n  \n        if (e.widget) {\n          let widget = this.sourceModel.widgets[e.widget]\n          if (widget) {\n              let pos = {}\n              pos.x = Math.round(widget.x + widget.w / 2);\n              pos.y = Math.round(widget.y + widget.h / 2);\n              return pos\n          } else {\n             this.logger.warn(\"_geDropOffBoxPosition\", \"no widget > \", e.widget);\n          }\n  \n        }\n        if (e.screen) {\n          let sourceScreen = this.sourceModel.screens[e.screen]\n          if (sourceScreen) {\n              let pos = {}\n              pos.x = Math.round(sourceScreen.x + sourceScreen.w / 2);\n              pos.y = Math.min(sourceScreen.y + sourceScreen.h, Math.round(sourceScreen.y + sourceScreen.h / 3) + (sourceScreen.h * i / (l * 2)));\n              return pos\n          } else {\n             this.logger.warn(\"_geDropOffBoxPosition\", \"no screen > \", e.screen);\n          }\n        }\n      },\n  \n      _renderDropOffEvent(x, y, type, db, color, width, p, unit='%') {\n        var cntr = db\n          .div(\"MatcAnalyticCanvasEventCntr\")\n          .build(this.widgetContainer);\n        cntr.style.left = Math.round(x) + \"px\";\n        cntr.style.top = Math.round(y) + \"px\";\n  \n        var div = db\n          .div(\"MatcAnalyticCanvasEvent MatcAnalyticCanvasEvent\" + type,)\n          .build(cntr);\n  \n        var r = Math.max(5, Math.round(width));\n        div.style.width = r + \"px\";\n        div.style.height = r + \"px\";\n        div.style.top = -1 * Math.round(r / 2) + \"px\";\n        div.style.left = -1 * Math.round(r / 2) + \"px\";\n        div.style.background = color\n        this.tempOwn(on(div, 'click', (e) => this.selectDropOffPoint(e)))\n      \n        if (unit) {\n          db.span('MatcAnalyticCanvasEventLabel', p + unit).build(div)\n        }\n  \n        return div;\n      },\n  \n      selectDropOffPoint () {\n  \n      }\n    },\n    mounted() {},\n  };\n  </script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DropOff.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DropOff.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DropOff.vue?vue&type=template&id=6d3beb0a&\"\nimport script from \"./DropOff.vue?vue&type=script&lang=js&\"\nexport * from \"./DropOff.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcCanvas MatcAnalyticCanvas\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n  <div class=\"MatcCanvas MatcAnalyticCanvas\">\n\n  </div>\n</template>\n  \n  \n<script>\n\nimport DataFrame from \"common/DataFrame\";\nimport Analytics from \"dash/Analytics\";\nimport * as Outlier from 'dash/Outlier'\n\nexport default {\n  name: \"DataProcessing\",\n  mixins: [],\n  data: function () {\n    return {\n    };\n  },\n  components: {},\n  methods: {\n\n\n    getOutlierScores() {\n      if (!this.cache[\"outliers\"]) {\n        const df = new DataFrame(this.events);\n        //const outliers = Outlier.computeOutliersIRQ(df);\n        const outliers = Outlier.computeOutliersMAD(df, 2)\n        this.cache[\"outliers\"] = outliers\n      }\n      return this.cache[\"outliers\"];\n    },\n\n    getGestures() {\n      if (!this.cache[\"gestures\"]) {\n        var df = new DataFrame(this.events);\n        var gestures = df.select(\"type\", \"in\", [\n          \"ScreenGesture\",\n          \"WidgetGesture\",\n        ]);\n        this.cache[\"gestures\"] = gestures.data;\n      }\n\n      return this.cache[\"gestures\"];\n    },\n\n    getUserJourney() {\n      if (!this.cache[\"userJourney\"]) {\n        var df = new DataFrame(this.events);\n        df.sortBy(\"time\");\n        var sessionGroup = df.groupBy(\"session\");\n        let sessions = sessionGroup.data;\n        this.cache[\"userJourney\"] = sessions;\n      }\n      return this.cache[\"userJourney\"];\n    },\n\n    getTaskPerformance() {\n      if (!this.cache[\"taskPerformance\"]) {\n        const analytics = new Analytics();\n        const df = new DataFrame(this.events);\n        df.sortBy(\"time\");\n\n        const temp = analytics.getTaskPerformance(\n          df, this.testSettings.tasks, false, false\n        );\n        const sessions = {};\n        for (let i = 0; i < temp.data.length; i++) {\n          const match = temp.data[i];\n          if (!sessions[match.session]) {\n            sessions[match.session] = {};\n          }\n          if (!sessions[match.session][match.task]) {\n            sessions[match.session][match.task] = match;\n          } else {\n            console.warn(\"getTaskPerformance() Double mactch\", match);\n          }\n        }\n        this.cache[\"taskPerformance\"] = sessions;\n      }\n      return this.cache[\"taskPerformance\"];\n    },\n\n    getOverlayViews() {\n      if (!this.cache[\"overlayViews\"]) {\n        var screenLoads = this.df.select(\"type\", \"==\", \"OverlayLoaded\");\n\n        var screenLoadCounts = screenLoads.count(\"overlay\");\n        var totalScreenLoads = screenLoads.size();\n\n        var views = {};\n        var screens = this.getScreens(this.sourceModel);\n        for (var s = 0; s < screens.length; s++) {\n          var screen = screens[s];\n          views[screen.id] = screenLoadCounts.get(screen.id, null, 0);\n        }\n\n        this.cache[\"overlayViews\"] = {\n          total: totalScreenLoads,\n          counts: views,\n        };\n      }\n      return this.cache[\"overlayViews\"];\n    },\n\n    getOverlayTest() {\n      if (!this.cache[\"overlayTests\"]) {\n        var sessions = this.df.groupBy(\"session\");\n        var sessionCount = sessions.size().size();\n\n        var tests = {};\n        var screens = this.getScreens(this.sourceModel);\n        for (var s = 0; s < screens.length; s++) {\n          var screen = screens[s];\n          tests[screen.id] = 0;\n        }\n\n        sessions.foreach(function (df) {\n          var screenCounts = df.count(\"overlay\"); // diference to screenTest\n          screenCounts.foreach(function (row, id) {\n            tests[id] += 1;\n          });\n        });\n\n        this.cache[\"overlayTests\"] = {\n          sessions: sessionCount,\n          counts: tests,\n        };\n      }\n      return this.cache[\"overlayTests\"];\n    },\n\n    getScreenViews() {\n      if (!this.cache[\"screenViews\"]) {\n        var screenLoads = this.df.select(\"type\", \"==\", \"ScreenLoaded\");\n        var screenLoadCounts = screenLoads.count(\"screen\");\n        var totalScreenLoads = screenLoads.size();\n\n        var views = {};\n        var screens = this.getScreens(this.sourceModel);\n        for (var s = 0; s < screens.length; s++) {\n          var screen = screens[s];\n          views[screen.id] = screenLoadCounts.get(screen.id, null, 0);\n        }\n\n        this.cache[\"screenViews\"] = {\n          total: totalScreenLoads,\n          counts: views,\n        };\n      }\n      return this.cache[\"screenViews\"];\n    },\n\n    getScreenTests() {\n      if (!this.cache[\"screenTests\"]) {\n        var sessions = this.df.groupBy(\"session\");\n        var sessionCount = sessions.size().size();\n\n        var tests = {};\n        var screens = this.getScreens(this.sourceModel);\n        for (var s = 0; s < screens.length; s++) {\n          var screen = screens[s];\n          tests[screen.id] = 0;\n        }\n\n        sessions.foreach(function (df) {\n          var screenCounts = df.count(\"screen\");\n          screenCounts.foreach(function (row, id) {\n            tests[id] += 1;\n          });\n        });\n\n        this.cache[\"screenTests\"] = {\n          sessions: sessionCount,\n          counts: tests,\n        };\n      }\n      return this.cache[\"screenTests\"];\n    },\n\n    getScreenDwellTime() {\n      if (!this.cache[\"screenDwell\"]) {\n        var count = this.df.count(\"session\");\n        var sessionCount = count.size();\n\n        var analytics = new Analytics();\n        var screenTimeGrouping = analytics.getScreenTimeGrouping(this.df);\n        var totalTime = screenTimeGrouping.sum().sum();\n\n        var times = {};\n        var screens = this.getScreens(this.sourceModel);\n        for (var s = 0; s < screens.length; s++) {\n          var screen = screens[s];\n          var screenTimeDF = screenTimeGrouping.get(screen.id);\n          if (screenTimeDF) {\n            times[screen.id] = screenTimeDF.sum();\n          } else {\n            times[screen.id] = 0;\n          }\n        }\n\n        this.cache[\"screenDwell\"] = {\n          total: totalTime,\n          times: times,\n          sessions: sessionCount,\n        };\n      }\n      return this.cache[\"screenDwell\"];\n    },\n\n    getOverlayDwellTime() {\n      if (!this.cache[\"overlayDwell\"]) {\n        var count = this.df.count(\"session\");\n        var sessionCount = count.size();\n\n        var analytics = new Analytics();\n\n        /**\n         * We calculate the overlay time relative to the absolute screen time...\n         */\n        var screenTimeGrouping = analytics.getScreenTimeGrouping(this.df);\n        var totalTime = screenTimeGrouping.sum().sum();\n\n        var overlayGrouping = analytics.getOverlayTimeGrouping(this.df);\n\n        var times = {};\n        var screens = this.getScreens(this.sourceModel);\n        for (var s = 0; s < screens.length; s++) {\n          var screen = screens[s];\n          var screenTimeDF = overlayGrouping.get(screen.id);\n          if (screenTimeDF) {\n            times[screen.id] = screenTimeDF.sum();\n          } else {\n            times[screen.id] = 0;\n          }\n        }\n\n        this.cache[\"overlayDwell\"] = {\n          total: totalTime,\n          times: times,\n          sessions: sessionCount,\n        };\n      }\n      return this.cache[\"overlayDwell\"];\n    },\n\n    getScreenWidgetClicks() {\n      if (!this.cache[\"screenWidgetClicks\"]) {\n        /**\n         * FIXME: This could be nice with regards to the overlays....\n         *\n         * Some clicks should be attributed the to overlay, nit the clicks, or?\n         */\n        var widgetEvents = this.df.select(\"type\", \"==\", \"WidgetClick\");\n        var widgetScreenEvents = widgetEvents.count(\"screen\");\n        var totalWidgetEvents = widgetScreenEvents.sum();\n\n        /**\n         * Now filter out overlay events\n         */\n        widgetEvents = widgetEvents.select(\"overlay\", \"==\", null);\n        widgetScreenEvents = widgetEvents.count(\"screen\");\n\n        var clicks = {};\n        var screens = this.getScreens(this.sourceModel);\n        for (var s = 0; s < screens.length; s++) {\n          var screen = screens[s];\n          clicks[screen.id] = widgetScreenEvents.get(screen.id, null, 0);\n        }\n\n        this.cache[\"screenWidgetClicks\"] = {\n          clicks: clicks,\n          total: totalWidgetEvents,\n        };\n      }\n\n      return this.cache[\"screenWidgetClicks\"];\n    },\n\n\n    getScreenClicksOnBackground(df) {\n\n      const screenClicks = df.select(\"type\", \"==\", \"ScreenClick\");\n      return screenClicks\n\n    },\n\n    getMissedClicks(df) {\n     \n        /** \n         * Get all screens that do not have a line\n         */\n        var screens = Object.values(this.sourceModel.screens);\n        let passiveScreens = {}\n        screens.forEach(s => {\n          let linesFrom = this.getFromLines(s)\n          if (linesFrom.length === 0) {\n            passiveScreens[s.id] = true\n          }\n        })\n\n\n        /**\n         * Get all the widgets that do not have a line\n         * AND that are not inputs \n         */\n        let passiveWidgets = []\n        let widgets = Object.values(this.sourceModel.widgets)\n        widgets.forEach(w => {\n          if (w.type === \"Box\" || w.type === \"Button\" || w.type === \"HotSpot\") {\n            let linesFrom = this.getFromLines(w)\n            if (linesFrom.length === 0) {\n              passiveWidgets[w.id] = true\n            }\n          }\n        })\n\n        /**\n         * Filter screenclicks for these screens\n         */\n        let clickEvents = df\n          .select(\"type\", \"in\", [\"ScreenClick\", \"WidgetClick\"])\n          .as_array();\n\n\n        let missedClicks = clickEvents.filter(e => {\n          if (e.type === \"ScreenClick\" && passiveScreens[e.screen] === true) {\n            return true\n          }\n          if (e.type === \"WidgetClick\" && passiveWidgets[e.widget] === true) {\n            return true\n          }\n\n          return false\n        })\n\n        return missedClicks;\n\n\n      \n    },\n\n\n    getScreenClicks() {\n      if (!this.cache[\"screenClicks\"]) {\n        /**\n         * FIXME: This could be nice with regards to the overlays....\n         *\n         * Some clicks should be attributed the to overlay, nit the clicks, or?\n         */\n        var clickEvents = this.df.select(\"type\", \"in\", [\n          \"ScreenClick\",\n          \"WidgetClick\",\n        ]);\n        var clickEventsCount = clickEvents.count(\"screen\");\n        var totalWidgetEvents = clickEventsCount.sum();\n\n        var widgetEvents = this.df.select(\"type\", \"==\", \"ScreenClick\");\n        var widgetScreenEvents = widgetEvents.count(\"screen\");\n\n        var clicks = {};\n        var screens = this.getScreens(this.sourceModel);\n        for (var s = 0; s < screens.length; s++) {\n          var screen = screens[s];\n          clicks[screen.id] = widgetScreenEvents.get(screen.id, null, 0);\n        }\n\n        this.cache[\"screenClicks\"] = {\n          clicks: clicks,\n          total: totalWidgetEvents,\n        };\n      }\n\n      return this.cache[\"screenClicks\"];\n    },\n\n    getOverlayClicks() {\n      if (!this.cache[\"overlayCicks\"]) {\n        /**\n         * FIXME: This could be nice with regards to the overlays....\n         *\n         * Some clicks should be attributed the to overlay, nit the clicks, or?\n         */\n        var widgetEvents = this.df.select(\"type\", \"==\", \"ScreenClick\");\n        var widgetScreenEvents = widgetEvents.count(\"overlay\");\n        var totalWidgetEvents = widgetScreenEvents.sum();\n\n        var clicks = {};\n        var screens = this.getScreens(this.sourceModel);\n        for (var s = 0; s < screens.length; s++) {\n          var screen = screens[s];\n          clicks[screen.id] = widgetScreenEvents.get(screen.id, null, 0);\n        }\n\n        this.cache[\"overlayCicks\"] = {\n          clicks: clicks,\n          total: totalWidgetEvents,\n        };\n      }\n\n      return this.cache[\"overlayCicks\"];\n    },\n\n    getOverlayWidgetClicks() {\n      if (!this.cache[\"overlayWidgetCicks\"]) {\n        /**\n         * FIXME: This could be nice with regards to the overlays....\n         *\n         * Some clicks should be attributed the to overlay, nit the clicks, or?\n         */\n        var widgetEvents = this.df.select(\"type\", \"==\", \"WidgetClick\");\n        var widgetScreenEvents = widgetEvents.count(\"overlay\");\n        var totalWidgetEvents = widgetScreenEvents.sum();\n\n        var clicks = {};\n        var screens = this.getScreens(this.sourceModel);\n        for (var s = 0; s < screens.length; s++) {\n          var screen = screens[s];\n          clicks[screen.id] = widgetScreenEvents.get(screen.id, null, 0);\n        }\n\n        this.cache[\"overlayWidgetCicks\"] = {\n          clicks: clicks,\n          total: totalWidgetEvents,\n        };\n      }\n\n      return this.cache[\"overlayWidgetCicks\"];\n    },\n\n    getLineWidgetData() {\n      if (!this.cache[\"lineWidgetData\"]) {\n        let result = {}\n        let allWidetData = this.getWidgetData()\n        let maxClicksAbs = 0\n        // filter only for clicks on lines, and calcuate the clicksRel\n        for (let id in this.model.lines) {\n          let from = this.model.lines[id].from\n          if (allWidetData[from]) {\n            const clicksAbs = allWidetData[from].clicksAbs\n            result[from] = {\n              clicksAbs: clicksAbs\n            }\n            maxClicksAbs = Math.max(maxClicksAbs, clicksAbs)\n          }\n          Object.values(result).forEach(v => {\n            v.clicksRel = v.clicksAbs / maxClicksAbs\n          })\n        }\n        this.cache[\"lineWidgetData\"] = result\n      }\n      return this.cache[\"lineWidgetData\"]\n    },\n\n    getWidgetData() {\n      if (!this.cache[\"widgetData\"]) {\n        var analytics = new Analytics();\n        var widgets = {};\n        var data = analytics.getWidgetStatistics(this.sourceModel, this.df);\n        for (var id in data) {\n          widgets[id] = data[id];\n        }\n        this.cache[\"widgetData\"] = widgets;\n      }\n      return this.cache[\"widgetData\"];\n    },\n\n    getFirstNClicksData(events, n) {\n      console.debug('getFirstNClicksData', events.length)\n      const analytics = new Analytics();\n      return analytics.getFirstNClicks(events, n);\n    },\n\n\n  },\n  mounted() { },\n};\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DataProcessing.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DataProcessing.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataProcessing.vue?vue&type=template&id=2ca697e6&\"\nimport script from \"./DataProcessing.vue?vue&type=script&lang=js&\"\nexport * from \"./DataProcessing.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n<template>\n  <div class=\"MatcCanvas MatcAnalyticCanvas\">\n    <div class=\"MatcCanvasFrame\" data-dojo-attach-point=\"frame\">\n      <div class=\"MatcCanvasContainer MatcCanvasZoomable\"  data-dojo-attach-point=\"container\" >\n        <div class=\"MatcCanvasContainer\" data-dojo-attach-point=\"zoomContainer\">\n          <div  data-dojo-attach-point=\"screenContainer\" class=\"MatcCanvasLayer\" ></div>\n          <div data-dojo-attach-point=\"widgetContainer\" class=\"MatcCanvasLayer\"></div>\n\t\t\t\t\t<div data-dojo-attach-point=\"svgContainer\" class=\"MatcCanvasLayer MatcCanvasSVGLayer\"></div>\n        </div>\n        <div data-dojo-attach-point=\"dndContainer\" class=\"MatcDnDLayer\"></div>\n      </div>\n    </div>\n    <div class=\"MatcCanvasScrollBar MatcCanvasScrollBarRight\" data-dojo-attach-point=\"scrollRight\">\n      <div class=\"MatcCanvasScrollBarCntr MatcCanvasScrollBarCntrRight\" data-dojo-attach-point=\"scrollRightCntr\" >\n        <div class=\"MatchCanvasScrollHandle\" data-dojo-attach-point=\"scrollRightHandler\"\n        ></div>\n      </div>\n    </div>\n    <div class=\"MatcCanvasScrollBar MatcCanvasScrollBarBottom\" data-dojo-attach-point=\"scrollBottom\" >\n      <div class=\"MatcCanvasScrollBarCntr MatcCanvasScrollBarCntrBottom\" data-dojo-attach-point=\"scrollBottomCntr\" >\n        <div class=\"MatchCanvasScrollHandle\" data-dojo-attach-point=\"scrollBottomHandler\"\n        ></div>\n      </div>\n    </div>\n    <div class=\"MatcMessage\" data-dojo-attach-point=\"message\"></div>\n  </div>\n</template>\n\n<style lang=\"css\">\n  @import url(\"../../style/css/legacy.css\");\n</style>\n<style lang=\"scss\">\n  @import \"../../style/matc.scss\";\n  @import \"../../style/canvas/all.scss\";\n  @import '../../style/toolbar/all.scss';\n</style>\n\n<script>\nimport DojoWidget from \"dojo/DojoWidget\";\nimport css from \"dojo/css\";\n\nimport Logger from \"common/Logger\";\nimport on from \"dojo/on\";\nimport touch from \"dojo/touch\";\nimport lang from \"dojo/_base/lang\";\n\nimport win from \"dojo/_base/win\";\nimport topic from \"dojo/topic\";\n\nimport DomBuilder from \"common/DomBuilder\";\nimport DataFrame from \"common/DataFrame\";\nimport _DragNDrop from \"common/_DragNDrop\";\n\nimport Heat from \"dash/Heat\";\nimport Render from \"canvas/Render\";\nimport Lines from \"canvas/Lines\";\nimport DnD from \"canvas/DnD\";\nimport Add from \"canvas/Add\";\nimport Select from \"canvas/Select\";\nimport Distribute from \"canvas/Distribute\";\nimport Tools from \"canvas/Tools\";\nimport Zoom from \"canvas/Zoom\";\nimport Util from \"core/Util\";\nimport InlineEdit from \"canvas/InlineEdit\";\nimport Scroll from \"canvas/Scroll\";\nimport Upload from \"canvas/Upload\";\nimport Comment from \"canvas/Comment\";\nimport KeyBoard from \"canvas/KeyBoard\";\nimport Resize from \"canvas/Resize\";\nimport Replicate from \"canvas/Replicate\";\nimport Analytics from \"dash/Analytics\";\nimport FastDomUtil from \"core/FastDomUtil\";\nimport * as d3 from \"d3\";\nimport _Color from 'common/_Color'\n\nimport UserJourney from './UserJourney'\nimport DropOff from './DropOff'\nimport DataProcessing from './DataProcessing'\n\nexport default {\n  name: \"AnalyticCanvas\",\n  mixins: [\n    DojoWidget,\n    _DragNDrop,\n    _Color,\n    Util,\n    Render,\n    Lines,\n    DnD,\n    Add,\n    Select,\n    Distribute,\n    Tools,\n    Zoom,\n    InlineEdit,\n    Scroll,\n    Upload,\n    KeyBoard,\n    Resize,\n    Replicate,\n    Comment,\n    Heat,\n    UserJourney,\n    DropOff,\n    DataProcessing\n  ],\n  data: function () {\n    return {\n      mode: \"view\",\n      zoom: 0.5,\n      analyticMode: \"HeatmapClick\",\n      resizeEnabled: false,\n      renderDND: true,\n      dragNDropMinTimeSpan: 0,\n      wireInheritedWidgets: true,\n      taskLineOpacity: 1,\n      isBlackAndWhite: false,\n      dropOffLineWidth: 25,\n      dropOffLineColor: '#555',\n      dropOffEventWidth: 40,\n      userJourneyEndColor: '#f03131'\n    };\n  },\n  components: {},\n  methods: {\n    postCreate() {\n      this.logger = new Logger(\"AnalyticCanvas\");\n      this.logger.log(2, \"constructor\", \"entry\");\n      this.cache = {};\n      this.moveMode = \"classic\";\n      this.domUtil = new FastDomUtil();\n\t\t\tthis.analyticLines = {}\n      this.analyticCircles = {}\n\n      this.logger.log(2, \"postCreate\", \"entry\");\n      this.initSize();\n\n      /**\n       * init container size and position\n       */\n      this.canvasPos = {\n        x: this.canvasStartX,\n        y: this.canvasStartY,\n        w: this.canvasFlowWidth,\n        h: this.canvasFlowHeight,\n      };\n      this.initContainerSize();\n      this.setContainerPos();\n\n      /**\n       * Init remaining sub components\n       */\n      this.initSelection()\n      this.initRender();\n\t\t\tthis.initAnalyticSVG()\n      this.initZoom();\n      this.initScrollBars();\n      this.initComment();\n      this.initSettings();\n      this.initWiring();\n      this.initKeys();\n      this.initMouseTracker()\n\n      this.db = new DomBuilder();\n\n      /**\n       * Init Listeners\n       */\n      this.own(\n        topic.subscribe(\n          \"matc/toolbar/click\",\n          lang.hitch(this, \"onToolbarClick\")\n        )\n      );\n      this.own(on(win.body(), \"keydown\", lang.hitch(this, \"onKeyPress\")));\n      this.own(on(win.body(), \"keyup\", lang.hitch(this, \"onKeyUp\")));\n\n      this.logger.log(2, \"postCreate\", \"exit!!!\");\n    },\n\n    showError (msg){\n\t\t\tif(this.message){\n\t\t\t\tcss.add(this.message, \"MatcMessageError\");\n\t\t\t\tcss.remove(this.message, \"MatcMessageSuccess MatcMessageHint\");\n\t\t\t\tthis.message.textContent = msg;\n\t\t\t\tsetTimeout(lang.hitch(this,\"hideMessage\"), 3000);\n\t\t\t}\n\t\t},\n\n\n    XlineFunction (line) {\n    \treturn this.straightLineFunction(line)\n    },\n\n    setPublic(isPublic) {\n      this.isPublic = isPublic;\n    },\n\n    setModelService(s) {\n      this.sourceModelService = s;\n    },\n\n    setCommentService(s) {\n      this.commentService = s;\n    },\n\n    setToolbar(t) {\n      this.toolbar = t;\n      this.onChangeCanvasViewConfig();\n    },\n\n\t\tsetMouseListener (callback) {\n\t\t\tthis.mouseListenerCallback = callback\n\t\t},\n\n    inlineEditInit() {\n      this.logger.log(2, \"inlineEditInit\", \"enter\");\n    },\n\n    setMouseData(data) {\n      this.logger.log(0, \"setMouseData\", \"enter > \" + data.length);\n      // this.mouseData = this.computeMouseDistribution(data, this.sourceModel);\n      this.mouseData = data;\n      if (data.length == 0) {\n        this.showError(\"No Mouse data was recorded\");\n      }\n    },\n\n    setBW(isBW) {\n      this.logger.log(1, \"setBW\", \"enter > \" + isBW);\n      if (isBW) {\n        css.add(this.container, \"MatcCanvasBW\");\n      } else {\n        css.remove(this.container, \"MatcCanvasBW\");\n      }\n    },\n\n    onChangeCanvasViewConfig() {\n      if (this.toolbar) {\n        this.toolbar.setCanvasViewConfig({\n          zoom: this.zoom,\n          renderLines: this.renderLines,\n          showComments: this.showComments,\n          isBlackAndWhite: this.isBlackAndWhite,\n        });\n      }\n    },\n\n    setCanvasViewConfig(key, value) {\n      this.logger.log(-1, \"setCanvasViewConfig\", \"enter > \" + key, value);\n      if (key === \"zoom\") {\n        this.setZoomFactor(value);\n      }\n\n      if (key === \"renderLines\") {\n        this.setViewLines(value);\n      }\n\n      if (key === \"showComments\") {\n        this.setCommentView(value);\n      }\n\n      if (key === \"isBlackAndWhite\") {\n        this.isBlackAndWhite = value;\n        this.setBW(value);\n      }\n    },\n\n\t\t/**********************************************************************\n     * Lines\n     **********************************************************************/\n\n\t\tinitAnalyticSVG (){\n\t\t\tthis.logger.log(3, \"initAnalyticSVG\", \"entry\");\n\t\t\tlet bodySelection = d3.select(this.svgContainer);\n\t\t\tthis.analyticSVG = bodySelection.append(\"svg\").attr(\"width\", this.canvasPos.h).attr(\"height\",this.canvasPos.w);\n\t  },\n\n\t\tcleanUpAnalyticLines () {\n\t\t\tif (this.analyticSVG) {\n\t\t\t\tthis.analyticSVG.selectAll(\"*\").remove();\n\t\t\t}\n\t\t\tthis.analyticLines = {}\n      this.analyticCircles = {}\n\t\t},\n\n    drawLine (id, line){\n      let color = this.defaultLineColor\n      let width = this.defaultLineWidth\n      if (this.model && this.model.lines && this.model.lines[id]) {\n        let modelLine = this.model.lines[id]\n        let widgetData = this.getLineWidgetData()\n        if (widgetData[modelLine.from]) {\n          let data = widgetData[modelLine.from]\n          let p = data.clicksRel\n          //width = Math.max(0.3, Math.round(1 * p))\n          color = this.mixColor(p)\n        }\n      }\n\t\t\treturn this.drawSVGLine(id, line, color, width, 1);\n\t\t},\n\n\t\tdrawAnalyticLine(id, line, color, width, opacity) {\n\t\t\tconst svg = this.analyticSVG.append(\"path\")\n\t\t\t\t\t\t\t.attr(\"d\", this.lineFunction(line))\n\t\t\t\t\t\t\t.attr(\"stroke\", color)\n\t\t\t\t\t\t\t.attr(\"stroke-width\", width )\n\t\t\t\t\t\t\t.attr(\"fill\", \"none\")\n\t\t\t\t\t\t\t.style(\"opacity\", opacity);\n\n\t\t\tthis.analyticLines[id] = svg\n\t\t},\n\n\n\t\tdrawStraightAnalyticLine(id, line, color, width, opacity) {\n\t\t\tconst svg = this.analyticSVG.append(\"path\")\n\t\t\t\t\t\t\t.attr(\"d\", this.straightLineFunction(line))\n\t\t\t\t\t\t\t.attr(\"stroke\", color)\n\t\t\t\t\t\t\t.attr(\"stroke-width\", width )\n\t\t\t\t\t\t\t.attr(\"fill\", \"none\")\n\t\t\t\t\t\t\t.style(\"opacity\", opacity);\n\n\t\t\tthis.analyticLines[id] = svg\n\t\t},\n\n    \n\n    /**********************************************************************\n     * Wiring\n     **********************************************************************/\n\n    initWiring() {\n      this.logger.log(-1, \"initWiring\", \"enter\");\n      this.own(on(this.dndContainer, \"mousedown\", (e) => this.dispatchMouseDown(e)));\n    },\n\n    dispatchMouseDownScreen(e, id) {\n      this.logger.log(-1, \"dispatchMouseDownScreen\", \"enter\", id);\n      let dndDiv = this.screenDivs[id];\n      let screen = this.model.screens[id];\n      this.onScreenDndClick(screen.id, dndDiv, null);\n    },\n\n    dispatchMouseDownWidget(e, id) {\n      this.logger.log(-1, \"dispatchMouseDownWidget\", \"enter\", id);\n      let div = this.widgetDivs[id];\n      this.onWidgetDndClick(id, div);\n    },\n\n    /**********************************************************************\n     * Settings\n     **********************************************************************/\n\n\t\tafterUpdateDnd (zoomedModel) {\n      this.logger.log(1, \"afterUpdateDnd\", \"enter > \", zoomedModel);\n\t\t},\n\n    initSettings() {\n      this.logger.log(1, \"initSettings\", \"enter > \");\n      /**\n       * default settings\n       */\n      this.settings = {\n        canvasTheme: \"MatcLight\",\n        lineColor: \"#333\",\n        lineWidth: 1,\n        storePropView: true,\n        moveMode: \"ps\",\n        mouseWheelMode: \"scroll\",\n      };\n\n      var s = this._getStatus(\"matcSettings\");\n      if (s) {\n        if (s.canvasTheme) {\n          this.settings.canvasTheme = s.canvasTheme;\n        }\n        if (s.lineColor) {\n          this.settings.lineColor = s.lineColor;\n        }\n        if (s.lineWidth) {\n          this.settings.lineWidth = s.lineWidth;\n        }\n      } else {\n        this.logger.log(2, \"initSettings\", \"exit>  no saved settings\");\n      }\n\n      this.applySettings(this.settings);\n    },\n\n    getSettings() {\n      return this.settings;\n    },\n\n    setSettings(s) {\n      /**\n       * Mixin values\n       */\n      if (s.canvasTheme) {\n        this.settings.canvasTheme = s.canvasTheme;\n      }\n      if (s.lineColor) {\n        this.settings.lineColor = s.lineColor;\n      }\n      if (s.lineWidth) {\n        this.settings.lineWidth = s.lineWidth;\n      }\n      if (s.storePropView != null) {\n        this.settings.storePropView = s.storePropView;\n      }\n\n      if (s.mouseWheelMode != null) {\n        this.settings.mouseWheelMode = s.mouseWheelMode;\n      }\n\n      this._setStatus(\"matcSettings\", this.settings);\n\n      this.applySettings(this.settings);\n      this.rerender();\n    },\n\n    applySettings(s) {\n      this.logger.log(\n        2,\n        \"applySettings\",\n        \"enter > \" + s.canvasTheme + \" &> \" + s.moveMode\n      );\n\n      if (s.lineColor) {\n        this.defaultLineColor = s.lineColor;\n      }\n      if (s.lineWidth) {\n        this.defaultLineWidth = s.lineWidth;\n      }\n      if (s.canvasTheme) {\n        if (this._lastCanvasTheme) {\n          css.remove(win.body(), this._lastCanvasTheme);\n        }\n        css.add(win.body(), s.canvasTheme);\n        this._lastCanvasTheme = s.canvasTheme;\n\n        /**\n         * FIXME: Kind of hack\n         */\n        if (s.canvasTheme == \"MatcLight\") {\n          this.defaultLineColor = \"#777\";\n        } else {\n          this.defaultLineColor = \"#333\";\n        }\n      }\n\n      if (s.mouseWheelMode) {\n        this._mouseWheelMode = s.mouseWheelMode;\n      }\n\n      this.settings = s;\n    },\n\n    /**********************************************************************\n     * DnD.js overwrites\n     **********************************************************************/\n\n    onWidgetDndClick(id, div, pos, e) {\n      this.logger.log(2, \"onWidgetDndClick\", \"enter > \" + id);\n      this.stopEvent(e);\n      this.onWidgetSelected(id);\n      this.selectAnalyticDiv(id);\n      this.setState(0);\n    },\n\n    onScreenDndClick(id, div, pos, e) {\n      this.logger.log(2, \"onScreenDndClick\", \"entry > \" + id);\n      this.stopEvent(e);\n      this.setSelectedScreens([id]);\n      this.selectAnalyticDiv(id);\n      this.setState(0);\n    },\n\n    onCanvasSelected() {\n      this.logger.log(2, \"onCanvasSelected\", \"entry > \");\n      this.selectAnalyticDiv(null);\n      if (this.toolbar) {\n        this.toolbar.unselect();\n        this.toolbar.onCanvasSelected()\n      }\n    },\n\n    selectAnalyticDiv(id) {\n      if (this._analyticLastSelectedDiv) {\n        css.remove(this._analyticLastSelectedDiv, \"MatcHeapMapWidgetSelected\");\n        delete this._analyticLastSelectedDiv;\n      }\n      if (this.analyticsDivs && this.analyticsDivs[id]) {\n        let div = this.analyticsDivs[id];\n        css.add(div, \"MatcHeapMapWidgetSelected\");\n        this._analyticLastSelectedDiv = div;\n      }\n\n      if (this.widgetDivs && this.widgetDivs[id]) {\n        let div = this.widgetDivs[id];\n        css.add(div, \"MatcHeapMapWidgetSelected\");\n        this._analyticLastSelectedDiv = div;\n      }\n    },\n\n    /**********************************************************************\n     * Rendering\n     **********************************************************************/\n\n    renderLayerList() {\n      this.logger.log(1, \"renderLayerList\", \"entry > \");\n    },\n\n    afterRender() {\n      this.logger.log(1, \"afterRender\", \"entry > \" + this.analyticMode);\n      this.cleanUpAnalytics();\n \n      try {\n        this._renderHeatMap();\n      } catch (e) {\n        this.logger.error(\"afterRender\", \"Could not render heatmaps \", e);\n        this.logger.sendError(e);\n      }\n    },\n\n    hasSelect() {\n      return this.mode != \"addComment\";\n    },\n\n    _renderHeatMap() {\n      this.logPageView(\"/analytics/workspace/\" + this.analyticMode + \".html\");\n\n      this.setBW(this.isBlackAndWhite);\n\n      /**\n       * Init everything so the _Heat.js code works correctly\n       */\n      this.cleanUpHeat();\n\n      /**\n       * FIXME: Make this customisable\n       */\n      if (\n        this.sourceModel.type == \"smartphone\" ||\n        this.sourceModel.type == \"tablet\"\n      ) {\n        this.defaultRadius = this.sourceModel.screenSize.w / 20;\n        this.defaultBlur = this.sourceModel.screenSize.w / 15;\n      } else {\n        this.defaultRadius = this.sourceModel.screenSize.w / 120;\n        this.defaultBlur = this.sourceModel.screenSize.w / 100;\n      }\n\n      this.logger.log(0,\"onScreenRendered\", \"adjust radios to \" + this.defaultRadius);\n\n      const screenGrouping = this.df.groupBy(\"screen\");\n\n      this.heatmapDivs = {};\n      for (var id in this.sourceModel.screens) {\n        const screen = this.sourceModel.screens[id];\n\n        const screenDF = screenGrouping.get(id);\n        let screenEvents = [];\n        if (screenDF) {\n          screenEvents = screenDF.as_array();\n        }\n\n        if (this[\"_render_\" + this.analyticMode]) {\n          /**\n           * create canvas\n           */\n          const div = this.createBox(screen);\n          css.add(div, \"MatcHeatMapScreen\");\n          const cntr = this.db.div(\"MatcHeapMapContainer\").build(div);\n\n          const canvas = this.db.canvas(screen.w, screen.h).build(cntr);\n          const ctx = canvas.getContext(\"2d\");\n\n          this[\"_render_\" + this.analyticMode](screenEvents, screen, ctx, div);\n\n          if (this.hasSelect()) {\n            this.tempOwn(on(div,touch.press,lang.hitch(this, \"onScreenDndClick\", screen.id, div, null)));\n          }\n\n          this.widgetContainer.appendChild(div);\n\n          this.heatmapDivs[screen.id] = div;\n          this.analyticsDivs[screen.id] = div;\n        }\n      }\n\n      /**\n       * now draw a div for every widgert so we can also select them.\n       * A little hack but I dunno have a better way...\n       */\n      if (\"UserJourney\" != this.analyticMode && \"Gesture\" != this.analyticMode && 'DropOff' != this.analyticMode) {\n        this.hideWidgetDND = true;\n      } else {\n        this.hideWidgetDND = false;\n      }\n\n      if (this[\"_render_global_\" + this.analyticMode]) {\n        this[\"_render_global_\" + this.analyticMode]();\n      }\n    },\n\n    _render_HeatmapMouse(screenEvents, screen, ctx) {\n      this.logger.log(0, \"_render_HeatmapMouse\", \"entry > \" + screen.name);\n      /**\n       * FIXME: we could make this fastter by caching some stuff,\n       * or at least soft the events by screen\n       */\n      let mouseData = this.mouseData.filter((m) => m.screen === screen.id);\n      mouseData = this._filterSelectedSessions(mouseData)\n      let data = this.computeMouseDistribution(mouseData, this.sourceModel);\n      if (data[screen.id]) {\n        let d = data[screen.id];\n        this.draw(ctx, d.values, d.max, screen.w, screen.h);\n      }\n    },\n\n    _render_HeatmapClick(screenEvents, screen, ctx, div) {\n      this.logger.log(2, \"_render_HeatmapClick\", \"entry > \");\n\n      const events = this._filterSelectedSessions(this.events)\n\n      const df = new DataFrame(events)\n      var numberOfClicks = -1;\n      if (this.analyticParams) {\n        numberOfClicks = this.analyticParams.numberOfClicks;\n      }\n\n      if (numberOfClicks === \"screenClicks\") {\n\n        let screenClicks = this.getScreenClicksOnBackground(df);\n        screenClicks = screenClicks.as_array();\n        this._render_pixel_screen_heatmap(screenClicks, screen, ctx, div);\n\n      } else if (numberOfClicks === \"missedClicks\") {\n\n        let missedClicks = this.getMissedClicks(df);\n        this._render_pixel_screen_heatmap(missedClicks, screen, ctx, div);\n\n      } else if (numberOfClicks > 0) {\n\n        let firstNEvents = this.getFirstNClicksData(events, numberOfClicks);\n        this._render_pixel_screen_heatmap(firstNEvents, screen, ctx, div);\n\n      } else {\n\n        let filtered = this.getClickEvents(new DataFrame(events));\n        let actionEvents = filtered.as_array();\n        this._render_pixel_screen_heatmap(actionEvents, screen, ctx, div);\n        \n      }\n    },\n\n    _filterSelectedSessions (events) {\n      if (this.analyticParams && this.analyticParams.sessions) {\n        const sessions = this.analyticParams.sessions\n        return events.filter(e => {\n          return sessions[e.session] === true\n        })\n      }\n      return events\n    },\n\n    _render_pixel_screen_heatmap(actionEvents, screen, ctx) {\n      if (screen.w <= 0 || screen.h <= 0) {\n        this.logger.error(\"_render_pixel_screen_heatmap\", \"Error > bad screen dimension: \" + screen.name);\n        return\n      }\n      try {\n        const events = [];\n        for (let i = 0; i < actionEvents.length; i++) {\n          const e = actionEvents[i];\n          const screenID = this.getEventScreenId(e);\n          if (screenID == screen.id) {\n            events.push(e);\n          }\n        }\n        const dist = this.computeClickDistribution(events, screen.w, screen.h);\n        this.draw(ctx, dist.values, dist.max, screen.w, screen.h);\n      } catch (err) {\n        this.logger.error(\"_render_pixel_screen_heatmap\", \"Error > \" + screen.name);\n      }\n  \n    },\n\n    _render_HeatmapScrollView(screenEvents, screen, ctx) {\n      this.logger.log(2, \"_render_HeatmapScrollView\", \"entry > \");\n\n      var dist = this.computeScrollVisibiltyDistribution(\n        screenEvents,\n        this.sourceModel.screenSize.h,\n        screen.h\n      );\n      this.drawSections(dist, ctx, screen.h, screen.w);\n    },\n\n    _render_HeatmapScrollTime(screenEvents, screen, ctx) {\n      this.logger.log(2, \"_render_HeatmapScrollTime\", \"entry > \");\n\n      var dist = this.computeScrollDurationDistrubtion(\n        screenEvents,\n        this.sourceModel.screenSize.h,\n        screen.h\n      );\n      this.drawSections(dist, ctx, screen.h, screen.w);\n    },\n\n    _render_HeatmapViews(screenEvents, screen, ctx) {\n      this.logger.log(2, \"HeatmapViews\", \"entry > \");\n\n      if (screen.style.overlay) {\n        let screenViews = this.getOverlayViews();\n        let count = screenViews.counts[screen.id];\n        if (!count) {\n          count = 0;\n        }\n\n        ctx.globalAlpha = 0.4;\n        let color = this.mixColor(count / screenViews.total);\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, screen.w, screen.h);\n      } else {\n        let screenViews = this.getScreenViews();\n        let count = screenViews.counts[screen.id];\n        if (!count) {\n          count = 0;\n        }\n\n        ctx.globalAlpha = 0.4;\n        let color = this.mixColor(count / screenViews.total);\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, screen.w, screen.h);\n      }\n    },\n\n    _render_HeatmapDwelTime(screenEvents, screen, ctx) {\n      this.logger.log(2, \"HeatmapDwelTime\", \"entry > \");\n\n      if (screen.style.overlay) {\n        let times = this.getOverlayDwellTime();\n        let time = times.times[screen.id];\n        if (!time) {\n          time = 0;\n        }\n        ctx.globalAlpha = 0.4;\n        let color = this.mixColor(time / times.total);\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, screen.w, screen.h);\n      } else {\n        let times = this.getScreenDwellTime();\n        let time = times.times[screen.id];\n        if (!time) {\n          time = 0;\n        }\n        ctx.globalAlpha = 0.4;\n        let color = this.mixColor(time / times.total);\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, screen.w, screen.h);\n      }\n    },\n\n   \n\n    drawDurationLine (session, line, defaultColor, maxDuration) {\n      for (let i = 0; i < line.length-1; i++) {\n        let start = line[i]\n        let end = line[i+1]\n        let p = end.duration / maxDuration\n        let width = Math.round(p * 6) + 2\n        let color = defaultColor\n        if (!defaultColor) {\n          //color = this.mixColor(Math.min(1, p))\n        }\n        this.drawStraightAnalyticLine(session,[start, end], color, width, this.taskLineOpacity);\n      }\n    },\n\n\n\n    /**********************************************************************\n     * Gesture\n     **********************************************************************/\n\n    _render_global_Gesture() {\n      this.logger.log(0, \"_render_global_Gesture\", \"entry > \");\n\n      var gestures = this.getGestures();\n      var db = new DomBuilder();\n\n      for (var i = 0; i < gestures.length; i++) {\n        var e = gestures[i];\n        var gesture = e.gesture;\n\n        var screenID = this.getEventScreenId(e);\n        var screen = this.sourceModel.screens[screenID];\n        if (screen && gesture) {\n          var line = [];\n\n          var start = e.gesture.start;\n          var end = e.gesture.end;\n          if (start && end) {\n            var x = start.x * screen.w + screen.x;\n            var y = start.y * screen.h + screen.y;\n            line.push({ x: x, y: y, d: \"right\" });\n\n            this._renderGestureStart(x, y, this.analyticParams.color, db);\n\n            x = end.x * screen.w + screen.x;\n            y = end.y * screen.h + screen.y;\n            line.push({ x: x, y: y, d: \"right\" });\n\n            var r = Math.max(1, Math.round(3 * this.zoom));\n            this.drawSVGLine(\"\", line, this.analyticParams.color, r, 1);\n          }\n        } else {\n          console.warn(\n            \"_render_global_Gesture()\",\n            \"Screen is not there\",\n            e.screen\n          );\n        }\n      }\n    },\n\n    _renderGestureStart(x, y, color, db) {\n      var cntr = db\n        .div(\"MatcAnalyticCanvasEventCntr\")\n        .build(this.widgetContainer);\n      cntr.style.left = Math.round(x) + \"px\";\n      cntr.style.top = Math.round(y) + \"px\";\n\n      var div = db\n        .div(\"MatcAnalyticCanvasEvent MatcAnalyticCanvasEvent\")\n        .build(cntr);\n      var r = Math.max(5, Math.round(15 * this.zoom));\n      div.style.width = r + \"px\";\n      div.style.height = r + \"px\";\n      div.style.top = -1 * Math.round(r / 2) + \"px\";\n      div.style.left = -1 * Math.round(r / 2) + \"px\";\n      div.style.backgroundColor = color;\n      return div;\n    },\n\n\n    cleanUpAnalytics() {\n\t\t\tthis.cleanUpAnalyticLines()\n\n\t\t\tthis.cleanUpNode(this.widgetContainer)\n      this.analyticsDivs = {};\n    },\n\n   \n\n    /**********************************************************************\n     * DI\n     **********************************************************************/\n\n    setController(c) {\n      this.logger.log(2, \"setController\", \"enter\");\n      this.controller = c;\n      c.setCanvas(this);\n    },\n\n    getController() {\n      if (this._controllerCallback) {\n        this[this._controllerCallback]();\n      }\n      return this.controller;\n    },\n\n    setControllerCallback(c) {\n      this._controllerCallback = c;\n    },\n\n    setModelFactory(f) {\n      this.logger.log(3, \"setModelFactory\", \"enter\");\n      this.factory = f;\n    },\n\n    setRenderFactory(f) {\n      this.logger.log(3, \"setRenderFactory\", \"enter\");\n      this.renderFactory = f;\n    },\n\n    setModel(model) {\n      this.sourceModel = model;\n      this.grid = this.sourceModel.grid;\n      this.loadComments();\n    },\n\n    setEvents(events) {\n      this.logger.log(1, \"setEvents\", \"enter > # \" + events.length);\n      var analytics = new Analytics();\n      this.events = analytics.nornalizeContainerChildEvents(events);\n      this.df = new DataFrame(events);\n      this.df.sortBy(\"time\");\n      this.fixGestures(events);\n    },\n\n    setAnnotation(a) {\n      this.logger.log(2, \"setAnnotation\", \"enter > # \");\n      this.annotation = a;\n    },\n\n    setTest(t) {\n      this.logger.log(2, \"setTest\", \"enter > # \");\n      this.testSettings = t;\n    },\n\n    setAnalyticMode(mode, params) {\n      this.logger.log(2, \"setAnalyticMode\", \"entry > mode: \" + mode);\n      this.analyticMode = mode;\n      this.analyticParams = params;\n      this.rerender();\n\n      if (this.analyticCSS) {\n        css.remove(this.domNode, this.analyticCSS);\n      }\n\n      this.analyticCSS = mode;\n      css.add(this.domNode, this.analyticCSS);\n    },\n\n    setUser(u) {\n      this.user = u;\n    },\n\n    setMode(mode, forceRender) {\n      this.logger.log( 2, \"setMode\", \"enter > \" + mode + \" != \" + this.mode + \" > \" + forceRender);\n      if (mode != this.mode) {\n        this.mode = mode;\n        if (this.toolbar) {\n          this.toolbar.setMode(mode);\n        }\n        this.rerender();\n      } else if (forceRender) {\n        this.rerender();\n      }\n    },\n\n    /***************************************************************************\n     * Keyboard handling\n     ***************************************************************************/\n\n    onKeyPress(e) {\n      this._currentKeyEvent = e;\n\n      if (this.state == \"simulate\" || this.state == \"dialog\") {\n        return;\n      }\n\n      var target = e.target;\n      if (css.contains(target, \"MatcIgnoreOnKeyPress\")) {\n        return;\n      }\n\n      /**\n       * The keycode is differently in every browser!\n       */\n      var k = e.keyCode ? e.keyCode : e.which;\n\n      if (k == 32) {\n        // space\n\n        if (!this._inlineEditStarted) {\n          this.stopEvent(e);\n          if(this.getMode() != \"move\"){\n              this.setMode(\"move\");\n              this.showHint(\"Move the mouse to move canvas...\");\n              this.onDragStart(this.container, \"container\", \"onCanvasDnDStart\", \"onCanvasDnDMove\", \"onCanvasDnDEnd\", null, this._lastMouseMoveEvent, true);\n            }\n        }\n\n        /**\n         * Arrow dispatch...\n         */\n      } else if (k == 37) {\n        this.onArrowLeft();\n      } else if (k == 39) {\n        this.onArrowRight();\n      } else if (k == 40) {\n        this.onArrowDown();\n      } else if (k == 38) {\n        this.onArrowUp();\n      } else if (k == 171 || k == 187) {\n        // +\n\n        if (!this._inlineEditStarted) {\n          this.onClickPlus();\n          this.stopEvent(e);\n        }\n      } else if (k == 173 || k == 189) {\n        //-\n\n        if (!this._inlineEditStarted) {\n          this.onClickMinus();\n          this.stopEvent(e);\n        }\n      }\n    },\n\n    getMode (){\n\t\t\treturn this.mode;\n\t\t},\n\n    onKeyUp(e) {\n      var k = e.keyCode ? e.keyCode : e.which;\n      if (k == 32) {\n        this.onDragEnd(this._lastMouseMoveEvent);\n        this.setMode(\"view\");\n      }\n\n      delete this._currentKeyEvent;\n    },\n\n    /***************************************************************************\n     * Helper Functons\n     ***************************************************************************/\n\n    initMouseTracker() {\n      this.own(on(win.body(),\"mousemove\", lang.hitch(this,\"onMouseMove\")));\n    },\n\n    onMouseMove(e) {\n      var pos2 = this.getCanvasMousePosition(e, true);\n      //this._debugMouseLabel.innerHTML = \"[\" + Math.round(pos2.x) +\" , \"+ Math.round(pos2.y) + \"]\";\n      this._lastMousePos = pos2;\n      this._lastMouseMoveEvent = e;\n    },\n\n    destroy() {\n      this.cleanUp();\n    },\n\n    logPageView(url) {\n      this.logger.log(4, \"logPageView\", \"enter\", url);\n    },\n  },\n  mounted() {},\n};\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AnalyticCanvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AnalyticCanvas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnalyticCanvas.vue?vue&type=template&id=13eee60a&\"\nimport script from \"./AnalyticCanvas.vue?vue&type=script&lang=js&\"\nexport * from \"./AnalyticCanvas.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AnalyticCanvas.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./AnalyticCanvas.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import lang from 'dojo/_base/lang'\nimport win from 'dojo/win'\nimport Logger from 'common/Logger'\nimport Core from 'core/Core'\nimport CoreUtil from 'core/CoreUtil'\n\nexport default class AnalyticController extends Core{\n\n\tconstructor () {\n\t\tsuper()\n\t\tthis.logger = new Logger(\"AnalyticController\");\n\t\tthis.logger.log(2,\"constructor\", \"exit\");\n\t}\n\n\tsetModelService (s) {\n\t\tthis.modelService = s\n\t}\n\n\tsetCanvas(c){\n\t\tthis.logger.log(3,\"setCanvas\", \"entry\");\n\t\tthis._canvas = c;\n\t}\n\n\tsetToolbar(t){\n\t\tthis.logger.log(3,\"setToolbar\", \"entry\");\n\t\tthis.toolbar = t;\n\t}\n\n\tsetModelFactory(f){\n\t\tthis.logger.log(3,\"setModelFactory\", \"entry\");\n\t\tthis.factory = f;\n\t}\n\n\tsetModel(m, screenID){\n\n\t\tthis.logger.log(2,\"setModel\", \"entry > \" + screenID);\n\t\tthis.model = m;\n\t\tthis.inheritedModel = this.createInheritedModel(m);\n\t\tthis.inheritedModel = Core.addContainerChildrenToModel(this.inheritedModel);\n\t\tthis.oldModel = lang.clone(m);\n\t\tthis.render(screenID, () => {\n\t\t\tif(this.toolbar){\n\t\t\t\tthis.toolbar.setModel(m);\n\t\t\t} else {\n\t\t\t\tconsole.debug(\"No toolbar in controller!\");\n\t\t\t}\n\t\n\t\t});\n\n\t\tif (this._canvas) {\n\t\t\tthis._canvas.setFonts(m.fonts)\n\t\t}\n\n\t\tthis.logger.log(3,\"setModel\", \"entry > \" + screenID);\n\t}\n\n\tsetMode(mode){\n\t\tthis.logger.log(0,\"setMode\", \"entry > \" + mode);\n\t\tthis.toolbar.setMode(mode);\n\t\tthis._canvas.setMode(mode);\n\t}\n\n\tsetSinglePage(enabled){\n\t\tthis.logger.log(0,\"setSinglePage\", \"entry > \" + enabled);\n\t}\n\n\tgetZoomFactor(){\n\t\tif(this._canvas){\n\t\t\treturn this._canvas.getZoomFactor();\n\t\t}\n\t\treturn 1;\n\t}\n\n\t/**********************************************************************\n\t * Canvas Delegates\n\t **********************************************************************/\n\n\trender(screenID, afterRenderCallback){\n\t\tthis.logger.log(2,\"render\", \"enter > screenID : \" + screenID);\n\t\tif(this._canvas){\n\t\t\t/**\n\t\t\t * resize the model\n\t\t\t */\n\t\t\tconst inheritedModel = CoreUtil.createInheritedModel(this.model)\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis._canvas.render(inheritedModel);\n\t\t\t\tif(screenID){\n\t\t\t\t\tthis._canvas.moveToScreen(screenID);\n\t\t\t\t}\n\t\t\t\tif (afterRenderCallback) {\n\t\t\t\t\tafterRenderCallback()\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\t_requestRendering(screenID){\n\t\tif (this._zoomedModel){\n\t\t\tthis._canvas.render(this._zoomedModel);\n\t\t\tif(screenID){\n\t\t\t\tthis._canvas.moveToScreen(screenID);\n\t\t\t}\n\t\t}\n\t\tthis._zoomedModel = null;\n\t}\n\n\t_zoomToScreen(screenID){\n\t\tif (screenID && this.model.screens[screenID]){\n\t\t\t/**\n\t\t\t * here we make sure the selected screen fits in the\n\t\t\t * browser window. We simply find the smallest possible\n\t\t\t * zoom factor and subtract 0.2 to make sure it fits in\n\t\t\t * browser\n\t\t\t */\n\t\t\tvar screen = this.model.screens[screenID];\n\t\t\tlet winBox = win.getBox();\n\t\t\tlet x =  winBox.w / screen.w;\n\t\t\tlet y =  winBox.h / screen.h;\n\t\t\tvar zoom = (Math.floor( Math.min(x,y) * 10) / 10) -0.2 ;\n\t\t\tthis._canvas.setZoom(zoom);\n\n\t\t}\n\t}\n\n\t/**********************************************************************\n\t * Selection methods\n\t **********************************************************************/\n\n\tonWidgetSelected(id){\n\t\tthis.logger.log(0,\"onWidgetSelected\", \"enter > \"+ id);\n\t\tvar widget = this.inheritedModel.widgets[id];\n\t\tif(widget){\n\t\t\tif(this.toolbar){\n\t\t\t\tthis.toolbar.onWidgetSelected(widget);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"onWidgetSelected() > No width with id\", id);\n\t\t}\n\t}\n\n\n\tonScreenSelected(id){\n\t\tthis.logger.log(1,\"onScreenSelected\", \"enter > \"+ id);\n\t\tvar screen = this.model.screens[id];\n\t\tif(this.toolbar){\n\t\t\tthis.toolbar.onScreenSelected(screen);\n\t\t}\n\t}\n\n\tonCanvasSelected(){\n\t\tthis.logger.log(1,\"onCanvasSelected\", \"enter \");\n\t\tif(this.toolbar){\n\t\t\tthis.toolbar.onCanvasSelected();\n\t\t}\n\t}\n\n\tonLineSelected(id){\n\t\tthis.logger.log(1,\"onLineSelected\", \"enter > \" + id);\n\t\tvar line = this.model.lines[id];\n\t\tif(this.toolbar){\n\t\t\tthis.toolbar.onLineSelected(line);\n\t\t}\n\t}\n\n\tonMultiSelect(selection){\n\t\tthis.logger.log(1,\"onMultiSelect\", \"enter > \");\n\t\tif(this.toolbar){\n\t\t\t/**\n\t\t\t * TODO: get all the model elements\n\t\t\t */\n\t\t\tthis.toolbar.onMultiSelect(selection);\n\t\t}\n\t}\n\n\tonGroupSelected(id){\n\t\tthis.logger.log(1,\"onGroupSelected\", \"enter > \" + id);\n\t\tif(this.model.groups && this.model.groups[id]){\n\t\t\tif(this.toolbar){\n\t\t\t\tvar group = this.model.groups[id];\n\t\t\t\tthis.toolbar.onGroupSelect(group);\n\t\t\t}\n\t\t}\n\t}\n\n\tunSelect(){\n\t\tif(this._canvas){\n\t\t\tthis._canvas.unSelect();\n\t\t}\n\t\tif(this.toolbar){\n\t\t\tthis.toolbar.cleanUp();\n\t\t}\n\t}\n\n\n\tshowSuccess(msg){\n\t\tif(this._canvas){\n\t\t\tthis._canvas.showSuccess(msg);\n\t\t}\n\t}\n\n\tshowError(msg){\n\t\tif(this._canvas){\n\t\t\tthis._canvas.showError(msg);\n\t\t}\n\t}\n}","<template>\n  <div class=\"MatcCanvasPage\" id=\"CanvasNode\">\n      <AnalyticToolbar ref=\"toolbar\" />\n      <AnalyticCanvas ref=\"canvas\" />\n  </div>\n</template>\n\n<style lang=\"scss\">\n  @import \"../../style/matc.scss\";\n</style>\n<style lang=\"sass\">\n  @import \"../../style/bulma.sass\"\n</style>\n\n<script>\nimport DojoWidget from \"dojo/DojoWidget\";\nimport css from 'dojo/css'\nimport win from 'dojo/win'\n\nimport ModelFactory from 'core/ModelFactory'\nimport RenderFactory from 'core/RenderFactory'\nimport lang from 'dojo/_base/lang'\nimport on from 'dojo/on'\nimport Services from 'services/Services'\n\nimport AnalyticToolbar from 'canvas/analytic/AnalyticToolbar'\nimport AnalyticCanvas from 'canvas/analytic/AnalyticCanvas'\nimport AnalyticController from 'canvas/analytic/AnalyticController'\n\nimport Logger from \"common/Logger\";\n\nexport default {\n  name: \"Design\",\n  mixins: [DojoWidget],\n  data: function() {\n    return {\n    };\n  },\n  components: {\n      'AnalyticToolbar': AnalyticToolbar,\n      'AnalyticCanvas': AnalyticCanvas\n  },\n  computed: {\n    isPublic () {\n      return this.$route.meta && this.$route.meta.isPublic\n    }\n  },\n  methods: {\n    loadData () {\n      let id = this.$route.params.id\n      this.logger.log(0, 'loadData', 'enter', id)\n      Promise.all([\n        this.modelService.findApp(id),\n        this.modelService.findTest(id),\n        this.modelService.findEvents(id),\n        this.modelService.findSessionAnnotations(id),\n        this.modelService.findInvitation(id)\n      ]).then(values => {\n        let invitations = values[4];\n        var temp = {};\n        for (var key in invitations) {\n          temp[invitations[key]] = key;\n        }\n        let hash = temp[1];\n        this.buildCanvas(values[0], values[1], values[2], values[3], hash)\n      })\n    },\n    buildCanvas (model, test, events, annotation, hash) {\n      this.logger.log(-1, 'buildCanvas', 'enter', hash)\n\n      let canvas = this.$refs.canvas\n      let toolbar = this.$refs.toolbar\n\n      let controller = new AnalyticController()\n      let service = Services.getModelService()\n\n      /**\n       * model factory\n       */\n      var factory = new ModelFactory();\n      factory.setModel(model);\n\n      /**\n       * render factory\n       */\n      var renderFactory = new RenderFactory();\n      renderFactory.setModel(model);\n      renderFactory.setHash(hash)\n\n      /**\n       * Dependency injection\n       */\n      controller.setModelService(service)\n      controller.setToolbar(toolbar);\n      controller.setModelFactory(factory);\n\n\n      toolbar.setController(controller);\n      toolbar.setCanvas(canvas);\n      toolbar.setUser(this.user);\n      toolbar.setModelFactory(factory);\n      toolbar.setModelService(service)\n      toolbar.setEvents(events);\n      toolbar.setAnnotation(annotation);\n      toolbar.setTest(test);\n      toolbar.setPublic(this.isPublic)\n\n      canvas.setController(controller);\n      canvas.setToolbar(toolbar);\n      canvas.setRenderFactory(renderFactory);\n      canvas.setModelFactory(factory);\n      canvas.setCommentService(Services.getCommentService())\n      canvas.setUser(this.user)\n      canvas.setEvents(events);\n      canvas.setAnnotation(annotation);\n      canvas.setTest(test);\n\n      // wire shit together\n      this.tempOwn(on(toolbar, \"newComment\", lang.hitch(canvas, \"addComment\")));\n\n      var startScreen = null;\n      for(var screenID in model.screens){\n        var screen = model.screens[screenID];\n        if (screen.props && screen.props.start){\n            startScreen = screenID;\n            break;\n        }\n      }\n      /**\n       * controller will render screen\n       */\n      controller.setModel(model, startScreen);\n    }\n  },\n  async mounted() {\n    this.logger = new Logger(\"Analyze\");\n    css.add(win.body(), 'MatcVisualEditor')\n    this.user = await Services.getUserService().load()\n    this.modelService = Services.getModelService(this.$route)\n    this.loadData()\n    this.logger.log(3, 'mounted', 'exit')\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Analyze.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Analyze.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Analyze.vue?vue&type=template&id=c3a781c2&\"\nimport script from \"./Analyze.vue?vue&type=script&lang=js&\"\nexport * from \"./Analyze.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Analyze.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./Analyze.vue?vue&type=style&index=1&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcCanvasPage\",attrs:{\"id\":\"CanvasNode\"},on:{\"wheel\":_vm.onMouseWheel}},[_c('Toolbar',{ref:\"toolbar\",attrs:{\"pub\":_vm.pub}}),_c('Canvas',{ref:\"canvas\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Logger from '../../core/Logger'\nimport Services from '../../services/Services'\n\nexport default class CollabSession {\n\n  constructor (user) {\n    this.user = user\n    this.collabUsers = []\n  }\n\n  initWebsocket(model, canvas, controller, toolbar) {\n    Logger.log(3, \"CollabSession.initWebsocket()\", \"enter\");\n    try {\n      let user = this.user\n      let websocket = Services.getWebSocketService(model.id, user.token, user)\n      if (websocket) {\n        websocket.onMessage(msg => this.dispatchWebSocketMessage(canvas, controller, toolbar, user, msg))\n        websocket.init(success => {\n          if (success) {\n            this.sendHello()\n          }\n          canvas.setMouseListener(pos => {\n            this.sendMouse(pos)\n          })\n          controller.setModelChangeListener(changeEvent => {\n            this.sendChange(changeEvent)\n          })\n\n          // FIXME: all also the command stack??\n        })\n\n        this.websocket = websocket\n      } else {\n        Logger.log(1, \"CollabSession.initWebsocket()\", \"exit > No session created\");\n      }\n    } catch (err) {\n      Logger.error('CollabSession.initWebsocket()', \"Cannot init WebSocket\", err)\n    }\n  }\n\n  hasOtherUsers () {\n    let others = this.collabUsers.find(u => u.id !== this.user.id)\n    return others !== undefined\n  }\n\n\n  sendChange (changeEvent) {\n    Logger.log(1, \"CollabSession.sendChange()\", \"enter\", changeEvent);\n    /**\n     * We do not want to overload our websocket server,\n     * so we just send events if there is another user.\n     */\n    if (this.websocket && this.hasOtherUsers()) {\n      Logger.log(2, \"CollabSession.sendChange()\", \"send\", changeEvent);\n      this.websocket.send({type: 'change', changeEvent: changeEvent})\n    } else {\n      Logger.log(2, \"CollabSession.sendChange()\", \"NOT SEND\");\n    }\n  }\n\n  sendMouse (pos) {\n    /**\n     * We do not want to overload our websocket server,\n     * so we just send events if there is another user.\n     */\n    if (this.websocket && this.hasOtherUsers()) {\n      //Logger.log(-5, \"CollabSession.sendMouse()\", \"enter\");\n      this.websocket.send({type: 'mouse', pos: pos})\n    }\n  }\n\n  sendBye () {\n    Logger.log(-1, \"CollabSession.sendBye()\", \"enter\");\n    if (this.websocket) {\n      this.websocket.send({type: 'bye'})\n    }\n  }\n\n  sendHello () {\n    Logger.log(2, \"CollabSession.sendHello()\", \"enter\");\n    if (this.websocket) {\n      this.websocket.send({type: 'hello'})\n    }\n  }\n\n  sendImHere () {\n    Logger.log(2, \"CollabSession.sendImHere()\", \"enter\");\n    if (this.websocket) {\n      this.websocket.send({type: 'imhere'})\n    }\n  }\n\n  dispatchWebSocketMessage (canvas, controller, toolbar, user, msg) {\n\n    if (msg.type === 'hello') {\n        Logger.log(2, \"CollabSession.dispatchWebSocketMessage()\", \"hello\");\n        toolbar.addCollabUser(msg.user)\n        canvas.addCollabUser(msg.user)\n        this.addCollabUser(msg.user)\n        this.sendImHere()\n    }\n    if (msg.type === 'imhere') {\n      Logger.log(2, \"CollabSession.dispatchWebSocketMessage()\", \"imhere\");\n      toolbar.addCollabUser(msg.user)\n      canvas.addCollabUser(msg.user)\n      this.addCollabUser(msg.user)\n    }\n    if (msg.type === 'bye') {\n      Logger.log(2, \"CollabSession.dispatchWebSocketMessage()\", \"bye\");\n      toolbar.removeCollabUser(msg.user)\n      canvas.removeCollabUser(msg.user)\n      this.removeCollabUser(msg.user)\n    }\n    if (msg.type === 'mouse') {\n      //Logger.log(2, \"CollabSession.dispatchWebSocketMessage()\", \"mouse\");\n      canvas.setCollabMouse(msg.user, msg.pos)\n    }\n\n    if (msg.type === 'change') {\n      Logger.log(2, \"CollabSession.dispatchWebSocketMessage()\", \"change\");\n      controller.collabRecieveChanges(msg.user, msg.changeEvent)\n    }\n  }\n\n\n  addCollabUser (user) {\n    Logger.log(1, \"CollabSession.addCollabUser()\", user);\n    const found = this.collabUsers.find(u => u.id === user.id)\n    if (!found) {\n      this.collabUsers.push(user)\n    }\n  }\n\n  removeCollabUser (user) {\n    Logger.log(1, \"CollabSession.removeCollabUser()\", user);\n    this.collabUsers = this.collabUsers.filter(u => u.id !== user.id)\n  }\n\n  close () {\n    Logger.log(1, \"CollabSession.dispatchWebSocketMessage()\", \"close\");\n    if (this.websocket) {\n      this.websocket.close()\n    }\n  }\n}","<template>\n  <div class=\"MatcCanvasPage\" id=\"CanvasNode\" @wheel=\"onMouseWheel\">\n    <Toolbar ref=\"toolbar\" :pub=\"pub\" />\n    <Canvas ref=\"canvas\" />\n  </div>\n</template>\n\n<style lang=\"scss\">\n  @import \"../../style/matc.scss\";\n  @import \"../../style/canvas/all.scss\";\n  @import '../../style/toolbar/all.scss';\n</style>\n<style lang=\"sass\">\n  @import \"../../style/bulma.sass\"\n</style>\n\n<script>\nimport DojoWidget from \"dojo/DojoWidget\";\nimport css from \"dojo/css\";\nimport win from \"dojo/win\";\nimport Toolbar from \"canvas/toolbar/Toolbar\";\nimport Canvas from \"canvas/Canvas\";\nimport Controller from \"canvas/controller/Controller\";\nimport ModelFactory from \"core/ModelFactory\";\nimport RenderFactory from \"core/RenderFactory\";\nimport lang from \"dojo/_base/lang\";\nimport on from \"dojo/on\";\nimport Services from \"services/Services\";\nimport Logger from \"common/Logger\";\nimport CollabSession from '../../canvas/controller/CollabSession'\n\nexport default {\n  name: \"Design\",\n  mixins: [DojoWidget],\n  data: function() {\n    return {};\n  },\n  components: {\n    Toolbar: Toolbar,\n    Canvas: Canvas\n  },\n  computed: {\n    pub() {\n      return this.$route.meta && this.$route.meta.isPublic;\n    },\n    mode() {\n      if (this.pub) {\n        return \"public\";\n      }\n      return \"private\";\n    }\n  },\n  methods: {\n    onMouseWheel (e) {\n      /**\n       * Cancel all left and right swipes to surpress back navigation\n       */\n      if (e && Math.abs(e.deltaX) > 50 ) {\n        this.logger.log(-1, \"onMouseWheel\", \"cancel\");\n        e.preventDefault();\n      }\n    },\n    loadData() {\n      let id = this.$route.params.id;\n      this.logger.log(3, \"loadData\", \"enter\", id);\n      Promise.all([\n        this.modelService.findApp(id),\n        this.modelService.getCommands(id),\n        this.modelService.findInvitation(id)\n      ]).then(values => {\n        let invitations = values[2];\n        var temp = {};\n        for (var key in invitations) {\n          temp[invitations[key]] = key;\n        }\n        let hash = temp[1];\n        this.buildCanvas(values[0], values[1], hash);\n      });\n    },\n    buildCanvas(model, stack, hash) {\n      this.logger.log(3, \"buildCanvas\", \"enter\");\n      let canvas = this.$refs.canvas;\n      let toolbar = this.$refs.toolbar;\n      let controller = new Controller();\n      let service = this.modelService;\n\n      /**\n       * model factory\n       */\n      var factory = new ModelFactory();\n      factory.setModel(model);\n\n      /**\n       * render factory\n       */\n      var renderFactory = new RenderFactory();\n      renderFactory.setModel(model);\n      renderFactory.setHash(hash);\n\n      /**\n       * Dependency injection\n       */\n      controller.setModelService(service);\n      controller.setToolbar(toolbar);\n      controller.setModelFactory(factory);\n      if (this.pub) {\n        controller.setPublic(true);\n        canvas.setPublic(true);\n        toolbar.setPublic(true);\n      }\n\n      toolbar.setController(controller);\n      toolbar.setCanvas(canvas);\n      toolbar.setUser(this.user);\n      toolbar.setModelFactory(factory);\n      toolbar.setContext(this.context);\n      toolbar.setHash(hash);\n\n      canvas.setController(controller);\n      canvas.setToolbar(toolbar);\n      canvas.setRenderFactory(renderFactory);\n      canvas.setModelFactory(factory);\n      canvas.setModelService(service);\n      canvas.setCommentService(Services.getCommentService());\n      canvas.setUser(this.user);\n\n      // wire shit together\n      this.tempOwn(on(toolbar, \"newScreen\", lang.hitch(canvas, \"addScreen\"))); // deprecated\n      this.tempOwn(on(toolbar, \"newWidget\", lang.hitch(canvas, \"addWidget\"))); // deprecated\n\n      this.tempOwn(on(toolbar, \"newLine\", lang.hitch(canvas, \"addLine\")));\n      this.tempOwn(on(toolbar, \"newComment\", lang.hitch(canvas, \"addComment\")));\n\n      this.tempOwn(on(toolbar, \"newTemplatedWidget\", lang.hitch(canvas, \"addTemplatedWidget\")));\n      this.tempOwn(on(toolbar, \"newTemplatedScreen\", lang.hitch(canvas, \"addTemplatedScreen\")));\n      this.tempOwn(on(toolbar, \"newTemplatedGroup\", lang.hitch(canvas, \"addTemplatedGroup\")));\n\n      this.tempOwn(on(toolbar, \"newThemedScreen\", lang.hitch(canvas, \"addThemedScreen\")));\n      this.tempOwn(on(toolbar, \"newThemedGroup\", lang.hitch(canvas, \"addThemedGroup\")));\n      this.tempOwn(on(toolbar, \"newThemedWidget\", lang.hitch(canvas, \"addThemedWidget\")));\n      this.tempOwn(on(toolbar, \"newMultiThemedScreen\", lang.hitch(canvas, \"addMultiThemedScreens\")));\n      this.tempOwn(on(toolbar, \"newThemedScreenAndWidget\", lang.hitch(canvas, \"addThemedScreenAndWidgets\")));\n      this.tempOwn(on(toolbar, \"newImportApp\", lang.hitch(canvas, \"addImportedApp\")));\n\n      this.tempOwn(on(toolbar, \"onNewLogicObject\", lang.hitch(canvas, \"addLogicGroup\")));\n      this.tempOwn(on(toolbar, \"onNewRestObject\", lang.hitch(canvas, \"addRestObject\")));\n      this.tempOwn(on(toolbar, \"onNewScriptObject\", lang.hitch(canvas, \"addScriptObject\")));\n      this.tempOwn(on(toolbar, \"onNewSVG\", lang.hitch(canvas, \"addSVG\")))\n      this.tempOwn(on(toolbar, \"onEditSVG\", lang.hitch(canvas, \"openSVGEditor\")))\n      \n\n      /**\n       * last set the model\n       */\n      controller.setCommandStack(stack);\n\n      /**\n       * controller will render screen\n       */\n      controller.setModel(model, this.$route.params.sid);\n\n      /**\n       * Init layer list\n       */\n      canvas.initLayer();\n\n      if (!this.pub && this.user.role !== 'guest') {\n        this.collabSession = new CollabSession(this.user)\n        this.collabSession.initWebsocket(model, canvas, controller, toolbar)\n        window.onbeforeunload = () => {this.collabSession.sendBye()}\n      }\n    },\n\n  },\n  beforeDestroy () {\n    if (this.collabSession) {\n      this.collabSession.sendBye()\n      this.collabSession.close()\n    }\n  },\n  async mounted() {\n    this.logger = new Logger(\"Design\");\n    css.add(win.body(), \"MatcVisualEditor\");\n    this.user = await Services.getUserService().load();\n    this.modelService = Services.getModelService(this.$route);\n    this.loadData();\n    this.logger.log(3, \"mounted\", \"exit\");\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Design.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Design.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Design.vue?vue&type=template&id=4104a4a8&\"\nimport script from \"./Design.vue?vue&type=script&lang=js&\"\nexport * from \"./Design.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Design.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./Design.vue?vue&type=style&index=1&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcCanvasPage MatcShare\",attrs:{\"id\":\"CanvasNode\"}},[_c('ShareCanvas',{ref:\"canvas\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MatcCanvas MatcAnalyticCanvas\"},[_c('div',{staticClass:\"MatcCanvasFrame\",attrs:{\"data-dojo-attach-point\":\"frame\"}},[_c('div',{staticClass:\"MatcCanvasContainer MatcCanvasZoomable \",attrs:{\"data-dojo-attach-point\":\"container\"}},[_c('div',{staticClass:\"MatcCanvasContainer \",attrs:{\"data-dojo-attach-point\":\"zoomContainer\"}},[_c('div',{staticClass:\"MatcCanvasLayer\",attrs:{\"data-dojo-attach-point\":\"screenContainer\"}}),_c('div',{staticClass:\"MatcCanvasLayer\",attrs:{\"data-dojo-attach-point\":\"widgetContainer\"}})]),_c('div',{staticClass:\"MatcDnDLayer\",attrs:{\"data-dojo-attach-point\":\"dndContainer\"}})])]),_c('div',{staticClass:\"MatcCanvasScrollBar MatcCanvasScrollBarRight\",attrs:{\"data-dojo-attach-point\":\"scrollRight\"}},[_c('div',{staticClass:\"MatcCanvasScrollBarCntr MatcCanvasScrollBarCntrRight\",attrs:{\"data-dojo-attach-point\":\"scrollRightCntr\"}},[_c('div',{staticClass:\"MatchCanvasScrollHandle\",attrs:{\"data-dojo-attach-point\":\"scrollRightHandler\"}})])]),_c('div',{staticClass:\"MatcCanvasScrollBar MatcCanvasScrollBarBottom\",attrs:{\"data-dojo-attach-point\":\"scrollBottom\"}},[_c('div',{staticClass:\"MatcCanvasScrollBarCntr MatcCanvasScrollBarCntrBottom\",attrs:{\"data-dojo-attach-point\":\"scrollBottomCntr\"}},[_c('div',{staticClass:\"MatchCanvasScrollHandle\",attrs:{\"data-dojo-attach-point\":\"scrollBottomHandler\"}})])]),_c('div',{staticClass:\"MatcMessage\",attrs:{\"data-dojo-attach-point\":\"message\"}})])}]\n\nexport { render, staticRenderFns }","\n<template>\n\t<div class=\"MatcCanvas MatcAnalyticCanvas\">\n\t\t<div class=\"MatcCanvasFrame\" data-dojo-attach-point=\"frame\">\n\t\t\t<div class=\"MatcCanvasContainer MatcCanvasZoomable \" data-dojo-attach-point=\"container\">\n\t\t\t\t<div class=\"MatcCanvasContainer \" data-dojo-attach-point=\"zoomContainer\">\n\t\t\t\t\t<div data-dojo-attach-point=\"screenContainer\" class=\"MatcCanvasLayer\"></div>\n\t\t\t\t\t<div data-dojo-attach-point=\"widgetContainer\" class=\"MatcCanvasLayer\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div data-dojo-attach-point=\"dndContainer\" class=\"MatcDnDLayer\"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"MatcCanvasScrollBar MatcCanvasScrollBarRight\" data-dojo-attach-point=\"scrollRight\">\n\t\t\t<div class=\"MatcCanvasScrollBarCntr MatcCanvasScrollBarCntrRight\" data-dojo-attach-point=\"scrollRightCntr\">\n\t\t\t\t<div class=\"MatchCanvasScrollHandle\" data-dojo-attach-point=\"scrollRightHandler\"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"MatcCanvasScrollBar MatcCanvasScrollBarBottom\" data-dojo-attach-point=\"scrollBottom\">\n\t\t\t<div class=\"MatcCanvasScrollBarCntr MatcCanvasScrollBarCntrBottom\" data-dojo-attach-point=\"scrollBottomCntr\">\n\t\t\t\t<div class=\"MatchCanvasScrollHandle\" data-dojo-attach-point=\"scrollBottomHandler\"></div>\n\t\t\t</div>\n\t\t</div>\n\n\n\t\t<div class=\"MatcMessage\" data-dojo-attach-point=\"message\">\n\t\t</div>\n\t</div>\n</template>\n<style lang=\"css\"></style>\n<style lang=\"scss\">\n@import \"../../style/matc.scss\";\n@import \"../../style/share.scss\";\n@import \"../../style/canvas/all.scss\";\n@import '../../style/toolbar/all.scss';\n</style>\n<script>\nimport DojoWidget from 'dojo/DojoWidget'\nimport css from 'dojo/css'\n\nimport Logger from 'common/Logger'\nimport on from 'dojo/on'\nimport lang from 'dojo/_base/lang'\n\nimport win from 'dojo/_base/win'\nimport topic from 'dojo/topic'\nimport domGeom from 'dojo/domGeom'\n\nimport DomBuilder from 'common/DomBuilder'\nimport Dialog from 'common/Dialog'\nimport ScrollContainer from 'common/ScrollContainer'\nimport _DragNDrop from 'common/_DragNDrop'\n\nimport Heat from 'dash/Heat'\nimport Render from 'canvas/Render'\nimport Lines from 'canvas/Lines'\nimport DnD from 'canvas/DnD'\nimport Add from 'canvas/Add'\nimport Select from 'canvas/Select'\nimport Distribute from 'canvas/Distribute'\nimport Tools from 'canvas/Tools'\nimport Zoom from 'canvas/Zoom'\nimport InlineEdit from 'canvas/InlineEdit'\nimport Scroll from 'canvas/Scroll'\nimport Upload from 'canvas/Upload'\nimport Comment from 'canvas/Comment'\n\nimport Simulator from 'core/Simulator'\nimport Util from 'core/Util'\nimport QR from 'core/QR'\n\nimport KeyBoard from \"canvas/KeyBoard\";\nimport Resize from \"canvas/Resize\";\nimport Replicate from \"canvas/Replicate\";\n\nimport DomUtil from 'core/FastDomUtil'\n\nexport default {\n\tname: 'ShareCanvas',\n\tmixins: [DojoWidget, _DragNDrop, Util, Render, Lines, DnD, Add, Select, Distribute,\n\t\tTools, Zoom, InlineEdit, Scroll, Upload, Comment, KeyBoard, Resize, Replicate, Heat],\n\tdata: function () {\n\t\treturn {\n\t\t\tmode: \"view\",\n\t\t\tzoom: 0.4,\n\t\t\tzoomLevelPos: 3,\n\t\t\tanalyticMode: \"HeatmapClick\",\n\t\t\tresizeEnabled: false,\n\t\t\trenderDND: true,\n\t\t\tdragNDropMinTimeSpan: 0,\n\t\t\twireInheritedWidgets: true,\n\t\t\ttaskLineOpacity: 1\n\t\t}\n\t},\n\tcomponents: {},\n\tmethods: {\n\n\t\tpostCreate() {\n\t\t\tthis.logger = new Logger(\"ShareCanvas\");\n\t\t\tthis.logger.log(2, \"postCreate\", \"entry\");\n\t\t\tthis.domUtil = new DomUtil()\n\n\t\t\tthis.initSize()\n\t\t\tthis.initWiring()\n\n\t\t\tthis.cache = {};\n\t\t\tthis.moveMode = \"classic\";\n\t\t\t/**\n\t\t\t * init container size and position\n\t\t\t */\n\t\t\tthis.canvasPos = {\n\t\t\t\tx: this.canvasStartX,\n\t\t\t\ty: this.canvasStartY,\n\t\t\t\tw: this.canvasFlowWidth,\n\t\t\t\th: this.canvasFlowHeight\n\t\t\t};\n\t\t\tthis.initContainerSize();\n\t\t\tthis.setContainerPos();\n\n\t\t\tthis.db = new DomBuilder();\n\n\n\t\t\t/**\n\t\t\t * Init remaining sub components\n\t\t\t */\n\t\t\tthis.initSelection()\n\t\t\tthis.initRender();\n\t\t\tthis.initZoom();\n\t\t\tthis.initScrollBars();\n\t\t\tthis.initComment();\n\t\t\tthis.initSettings();\n\t\t\tthis.initMouseTracker();\n\t\t\tthis.initButtons()\n\n\t\t\t/**\n\t\t\t * Init Listeners\n\t\t\t */\n\t\t\tthis.own(topic.subscribe(\"matc/toolbar/click\", lang.hitch(this, \"onToolbarClick\")));\n\t\t\tthis.own(on(win.body(), \"keydown\", lang.hitch(this, \"onKeyPress\")));\n\t\t\tthis.own(on(win.body(), \"keyup\", lang.hitch(this, \"onKeyUp\")));\n\n\t\t\tthis.logger.log(2, \"postCreate\", \"exit!!!\");\n\t\t},\n\n\t\tcloseSVGEditor() {\n\n\t\t},\n\n\t\tsetModelService(s) {\n\t\t\tthis.modelService = s\n\t\t},\n\n\t\tsetCommentService(s) {\n\t\t\tthis.commentService = s\n\t\t},\n\n\t\tsetPublic(isPublic) {\n\t\t\tthis.isPublic = isPublic;\n\t\t},\n\n\n\t\tinlineEditInit() {\n\t\t\tthis.logger.log(2, \"inlineEditInit\", \"enter\");\n\t\t},\n\n\t\tonZoomMinusClick() {\n\t\t\tlet z = Math.round((this.zoom - 0.1) * 10) / 10\n\t\t\tthis.setZoomFactor(z)\n\t\t},\n\n\t\tonZoomPlusClick() {\n\t\t\tlet z = Math.round((this.zoom + 0.1) * 10) / 10\n\t\t\tthis.setZoomFactor(z)\n\t\t},\n\n\t\tonTogggleLine() {\n\t\t\tthis.setViewLines(!this.renderLines)\n\t\t},\n\n\t\tsetBW(isBW) {\n\t\t\tthis.logger.log(-1, \"setBW\", \"enter > \" + isBW);\n\t\t\tif (isBW) {\n\t\t\t\tcss.add(this.container, \"MatcCanvasBW\");\n\t\t\t} else {\n\t\t\t\tcss.remove(this.container, \"MatcCanvasBW\");\n\t\t\t}\n\t\t},\n\n\t\tonChangeCanvasViewConfig() {\n\t\t},\n\n\t\tsetCanvasViewConfig(key, value) {\n\t\t\tthis.logger.log(-1, \"setCanvasViewConfig\", \"enter > \" + key, value);\n\t\t},\n\n\t\tsetHash(h) {\n\t\t\tthis.logger.log(-1, \"setHash\", \"entry > \", h);\n\t\t\tthis.hash = h;\n\t\t},\n\n\t\t/**********************************************************************\n\t\t * Button render\n\t\t **********************************************************************/\n\t\trenderLayerList() {\n\t\t\tthis.logger.log(1, \"renderLayerList\", \"entry > \");\n\t\t},\n\n\n\t\t/**********************************************************************\n\t\t * Button render\n\t\t **********************************************************************/\n\n\t\tinitButtons() {\n\n\n\t\t\tvar btn = this.db.div(\"MatcTestCommentButton MatcAnimated MatcFadeOut\").build(this.domNode); //\n\t\t\tthis.db.span(\"mdi mdi-comment MatcMiddle\").build(btn);\n\t\t\tthis.own(on(btn, \"click\", lang.hitch(this, \"onNewComment\")));\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tcss.remove(btn, \"MatcFadeOut\")\n\t\t\t}, 1250);\n\n\n\t\t\tvar btnSim = this.db.div(\"MatcTestQRButton  MatcAnimated MatcFadeOut\").build(this.domNode);\n\t\t\tthis.db.span(\"mdi mdi-play MatcMiddle\").build(btnSim);\n\t\t\tthis.own(on(btnSim, \"click\", lang.hitch(this, \"onSimulator\")));\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tcss.remove(btnSim, \"MatcFadeOut\")\n\t\t\t}, 1500);\n\n\n\t\t\tvar btnZoomIn = this.db.div(\"MatcTestQRButton  MatcShareZoomIn MatcAnimated MatcFadeOut\").build(this.domNode);\n\t\t\tthis.db.span(\"mdi mdi-magnify-plus-outline MatcMiddle\").build(btnZoomIn);\n\t\t\tthis.own(on(btnZoomIn, \"click\", lang.hitch(this, \"onZoomPlusClick\")));\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tcss.remove(btnZoomIn, \"MatcFadeOut\")\n\t\t\t}, 2000);\n\n\t\t\tvar btnZoomOut = this.db.div(\"MatcTestQRButton MatcShareZoomOut MatcAnimated MatcFadeOut\").build(this.domNode);\n\t\t\tthis.db.span(\"mdi mdi-magnify-minus-outline MatcMiddle\").build(btnZoomOut);\n\t\t\tthis.own(on(btnZoomOut, \"click\", lang.hitch(this, \"onZoomMinusClick\")));\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tcss.remove(btnZoomOut, \"MatcFadeOut\")\n\t\t\t}, 1750);\n\n\n\t\t\tvar lineButton = this.db.div(\"MatcTestQRButton MatcShareLine MatcAnimated MatcFadeOut\").build(this.domNode);\n\t\t\tthis.db.span(\"mdi mdi-vector-line MatcMiddle\").build(lineButton);\n\t\t\tthis.own(on(lineButton, \"click\", lang.hitch(this, \"onTogggleLine\")));\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tcss.remove(lineButton, \"MatcFadeOut\")\n\t\t\t}, 2250);\n\n\t\t},\n\n\t\t/**********************************************************************\n\t\t * Comment Overwirtes\n\t\t **********************************************************************/\n\n\t\tloadComments() {\n\t\t\tthis.logger.log(0, \"loadComments\", \"enter > \" + this.hash);\n\t\t\tthis.showComments = true;\n\t\t\tif (this.model) {\n\t\t\t\tthis._doGet(\"/rest/comments/hash/\" + this.hash + \"/\" + this.model.id + \"/ScreenComment.json\", lang.hitch(this, \"onCommentsLoaded\"));\n\t\t\t} else {\n\t\t\t\tthis.logger.error(\"loadComments\", \"ERROR > No model\");\n\t\t\t}\n\t\t},\n\n\t\tonNewComment(e) {\n\t\t\tthis.logger.log(1, \"onNewComment\", \"enter > \");\n\t\t\tthis.addComment({ event: e, type: \"comment\" });\n\t\t},\n\n\t\t\n\t\t/**\n\t\t * Overrides some behaviour from Canvas.Share.\n\t\t *\n\t\t * 1) We set mode to view\n\t\t *\n\t\t * 2) we use other public api\n\t\t */\n\t\tonCommentAdded(pos, model, e) {\n\t\t\tthis._onAddDone();\n\t\t\tthis.setState(0);\n\t\t\tthis.setMode(\"view\");\n\t\t\tthis.logger.log(0, \"onCommentAdded\", \"enter\");\n\t\t\tif (this.model) {\n\t\t\t\tif (this.model.isTryOut) {\n\t\t\t\t\tthis.showHint(\"Register to add comments...\");\n\t\t\t\t\tthis._onCommentAdded(pos, e, []);\n\t\t\t\t} else {\n\t\t\t\t\t// use hashed URL here\n\t\t\t\t\tthis._doGet(\"/rest/comments/hash/\" + this.hash + \"/\" + this.model.id + \"/ScreenComment.json\", lang.hitch(this, \"_onCommentAdded\", pos, e));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tsaveDNDChange(comment) {\n\t\t\t/**\n\t\t\t * send to server!\n\t\t\t */\n\t\t\tif (this.model) {\n\t\t\t\tif (this.model.isTryOut) {\n\t\t\t\t\tthis.showSuccess(\"Register to comment...\");\n\t\t\t\t} else {\n\t\t\t\t\tthis._doPost(\"/rest/comments/hash/\" + this.hash + \"/\" + this.model.id + \"/\" + comment.id + \".json\", comment, \"onCommentSaved\");\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\tonSaveComment(comment) {\t\n\t\t\tif (this.model.isTryOut) {\n\t\t\t\tthis.showSuccess(\"Register to comment...\");\n\t\t\t} else {\n\t\t\t\tif (comment.id) {\n\t\t\t\t\tconst old = this.comments[comment.id];\n\t\t\t\t\told.message = comment.message\n\t\t\t\t\told.modified = new Date().getTime()\n\t\t\t\t\told.edited = true\n\t\t\t\t\tthis._doPost(\"/rest/comments/hash/\" + this.hash + \"/\" + this.model.id + \"/\" + old.id + \".json\", old, \"onCommentSaved\");\n\t\t\t\t} else {\n\t\t\t\t\tthis._doPost(\"/rest/comments/hash/\" + this.hash + \"/\" + this.model.id, comment, \"onCommentSaved\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.onCloseCommentPopup();\n\t\t},\n\n\n\t\t/**********************************************************************\n\t\t * Simulator stuff\n\t\t **********************************************************************/\n\n\n\t\tonSimulator(e) {\n\t\t\t// make sure we use an un-zoomed model like\n\t\t\t// the toolbar would do\n\t\t\tthis.startSimulator(e, this.controller.model)\n\t\t},\n\n\t\tstartSimulator(e, model) {\n\t\t\tthis.logger.log(1, \"startSimulator\", \"enter > \");\n\n\t\t\t/**\n\t\t\t * Since 2.1.7 we have better scalling. Keep in\n\t\t\t * sync with _Dialogs.startSimilator()\n\t\t\t */\n\t\t\tconst pos = domGeom.position(win.body());\n\t\t\tconst maxHeight = pos.h - 100\n\t\t\tcss.add(win.body(), 'MatcCanvasSimulatorVisible')\n\t\t\tif (model.type == \"desktop\") {\n\t\t\t\tpos.w = pos.w * 0.75;\n\t\t\t\tpos.h = pos.h * 0.75;\n\t\t\t\tthis._showDesktopSimulator(model, pos, maxHeight);\n\t\t\t} else if (model.type == \"tablet\") {\n\t\t\t\tif (this.model.screenSize.w > this.model.screenSize.h) {\n\t\t\t\t\tpos.w = pos.w * 0.65;\n\t\t\t\t\tpos.h = pos.h * 0.65;\n\t\t\t\t\tthis._showMobileTest(model, pos, \"MatchSimulatorWrapperTablet\", maxHeight);\n\t\t\t\t} else {\n\t\t\t\t\tpos.w = pos.w * 0.35;\n\t\t\t\t\tpos.h = pos.h * 0.35;\n\t\t\t\t\tthis._showMobileTest(model, pos, \"MatchSimulatorWrapperTablet\", maxHeight);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpos.w = pos.w * 0.25;\n\t\t\t\tpos.h = pos.h * 0.25;\n\t\t\t\tthis._showMobileTest(model, pos, \"MatchSimulatorWrapperMobile\", maxHeight);\n\t\t\t}\n\t\t},\n\n\n\t\t_showDesktopSimulator(model, pos, maxHeight) {\n\n\t\t\tconst dialog = document.createElement(\"div\");\n\t\t\tcss.add(dialog, \"MatchSimulatorDialog\");\n\n\t\t\tconst container = document.createElement(\"div\");\n\t\t\tcss.add(container, \"MatchSimulatorContainer\");\n\t\t\tdialog.appendChild(container);\n\n\t\t\tpos = this.getScaledSize(pos, \"width\", model);\n\t\t\tif (pos.h > maxHeight) {\n\t\t\t\tlet factor = pos.h / maxHeight\n\t\t\t\tpos.h = pos.h / factor\n\t\t\t\tpos.w = pos.w / factor\n\t\t\t}\n\n\t\t\tcontainer.style.width = Math.round(pos.w) + \"px\";\n\t\t\tcontainer.style.height = Math.round(pos.h) + \"px\";\n\n\t\t\tconst s = this.$new(Simulator, { mode: \"debug\", logData: false, hash: this.hash });\n\t\t\ts.scrollListenTarget = \"parent\";\n\n\t\t\tconst scroller = this.$new(ScrollContainer, { canDestroy: false });\n\t\t\tscroller.placeAt(container);\n\t\t\ts.setScrollContainer(scroller);\n\n\n\t\t\tconst d = new Dialog();\n\t\t\td.popup(dialog, this.simulatorButton);\n\t\t\td.own(d.on(\"close\", lang.hitch(this, \"stopSimulator\", s, scroller)));\n\n\t\t\tconst screen = this._getSimulatorScreen();\n\t\t\tsetTimeout(function () {\n\t\t\t\tscroller.wrap(s.domNode);\n\t\t\t\ts.setStartScreen(screen);\n\t\t\t\ts.setModel(model);\n\t\t\t}, 500);\n\n\t\t\t/**\n\t\t\t * otherwise the mouse wheel listener will prevent\n\t\t\t * scrolling in the simulator!\n\t\t\t */\n\t\t\tthis.enableMouseZoom(false);\n\t\t\tthis.setState(\"simulate\");\n\n\t\t},\n\n\t\tresizeSimualtor(container, model, factor, dialog) {\n\t\t\tcontainer.innerHTML = \"\"\n\n\t\t\tconst screen = this._getSimulatorScreen();\n\t\t\tlet pos = domGeom.position(win.body());\n\t\t\tpos.w = pos.w * factor;\n\t\t\tpos.h = pos.h * factor;\n\t\t\tpos = this.getScaledSize(pos, \"width\", model);\n\t\t\tcontainer.style.width = Math.round(pos.w) + \"px\";\n\t\t\tcontainer.style.height = Math.round(pos.h) + \"px\";\n\n\t\t\tconst s = this.$new(Simulator, { mode: \"debug\", logData: false, hash: this.hash });\n\t\t\ts.scrollListenTarget = \"parent\";\n\t\t\ts.setStartScreen(screen);\n\n\t\t\tconst scroller = this.$new(ScrollContainer, { canDestroy: false });\n\t\t\tscroller.placeAt(container);\n\t\t\ts.setScrollContainer(scroller);\n\t\t\tscroller.wrap(s.domNode);\n\t\t\ts.setModel(model);\n\n\t\t\tdialog.resize(container)\n\t\t},\n\n\n\n\t\t_showMobileTest(model, pos, clazz, maxHeight) {\n\t\t\tconsole.debug('_showMobileTest', maxHeight)\n\t\t\tvar dialog = document.createElement(\"div\");\n\t\t\tcss.add(dialog, \"MatchSimulatorDialog\");\n\n\t\t\tvar wrapper = document.createElement(\"div\");\n\t\t\tcss.add(wrapper, \"MatchSimulatorWrapper \");\n\t\t\tif (clazz) {\n\t\t\t\tcss.add(wrapper, clazz);\n\t\t\t}\n\t\t\tdialog.appendChild(wrapper);\n\n\t\t\tvar container = document.createElement(\"div\");\n\t\t\tcss.add(container, \"MatchSimulatorContainer\");\n\n\t\t\tpos = this.getScaledSize(pos, \"width\", model);\n\t\t\tif (pos.h > maxHeight) {\n\t\t\t\tlet factor = pos.h / maxHeight\n\t\t\t\tpos.h = pos.h / factor\n\t\t\t\tpos.w = pos.w / factor\n\t\t\t}\n\n\t\t\tcontainer.style.width = Math.ceil(pos.w) + \"px\";\n\t\t\tcontainer.style.height = Math.ceil(pos.h) + \"px\";\n\t\t\twrapper.appendChild(container);\n\n\t\t\tvar scroller = this.$new(ScrollContainer, { canDestroy: false });\n\t\t\tscroller.placeAt(container);\n\n\t\t\tvar s = this.$new(Simulator, { mode: \"debug\", logData: false, hash: this.hash });\n\t\t\ts.scrollListenTarget = \"parent\";\n\t\t\ts.setScrollContainer(scroller);\n\n\t\t\tvar img = document.createElement(\"img\");\n\t\t\tQR.getQRCode(this.hash, false, false).then(url => {\n\t\t\t\timg.src = url\n\t\t\t})\n\t\t\t//img.src = \"rest/invitation/hash/\" + this.hash+ \"/debug.jpg\";\n\n\t\t\tcss.add(img, \"MatcSimulatorQR\");\n\t\t\tdialog.appendChild(img);\n\n\t\t\tvar d = new Dialog();\n\t\t\td.popup(dialog, this.simulatorButton);\n\t\t\td.on(\"close\", lang.hitch(this, \"stopSimulator\", s, scroller));\n\n\t\t\tvar screen = this._getSimulatorScreen();\n\t\t\ts.setStartScreen(screen);\n\t\t\tsetTimeout(function () {\n\t\t\t\tscroller.wrap(s.domNode);\n\t\t\t\ts.setModel(model);\n\t\t\t}, 500);\n\n\t\t\t/**\n\t\t\t * otherwise the mouse wheel listener will prevent\n\t\t\t * scrolling in the simulator!\n\t\t\t */\n\t\t\tthis.enableMouseZoom(false);\n\t\t\tthis.setState(\"simulate\");\n\n\t\t},\n\n\n\t\tstopSimulator(s, scroller) {\n\t\t\tcss.remove(win.body(), 'MatcCanvasSimulatorVisible')\n\t\t\tthis.enableMouseZoom(true);\n\t\t\tthis.setState(0);\n\t\t\tif (s) {\n\t\t\t\ts.destroy();\n\t\t\t}\n\t\t\tif (scroller) {\n\t\t\t\tscroller.destroy();\n\t\t\t}\n\t\t},\n\n\t\t_getSimulatorScreen() {\n\t\t\tif (this.getSelectedScreen()) {\n\t\t\t\treturn this.getSelectedScreen();\n\t\t\t}\n\t\t\tif (this._selectedWidget) {\n\t\t\t\treturn this.getParentScreen(this._selectedWidget);\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/**********************************************************************\n\t * Wiring\n\t **********************************************************************/\n\n\t\tinitWiring() {\n\t\t\tthis.logger.log(-1, \"initWiring\", \"enter\");\n\t\t\tthis.own(\n\t\t\t\ton(this.dndContainer, \"mousedown\", (e) => this.dispatchMouseDown(e))\n\t\t\t);\n\t\t},\n\n\t\tdispatchMouseDownCanvas(e) {\n\t\t\tthis.logger.log(1, \"dispatchMouseDownCanvas\", \"enter\", e, this.mode);\n\t\t\tthis.onDragStart(this.container, \"container\", \"onCanvasDnDStart\", \"onCanvasDnDMove\", \"onCanvasDnDEnd\", null, e);\n\t\t},\n\n\t\tdispatchMouseDownScreen(e, id) {\n\t\t\tthis.logger.log(-1, \"dispatchMouseDownScreen\", \"enter\", id);\n\t\t},\n\n\t\tdispatchMouseDownWidget(e, id) {\n\t\t\tthis.logger.log(-1, \"dispatchMouseDownWidget\", \"enter\", id);\n\t\t\tlet div = this.widgetDivs[id];\n\t\t\tthis.onWidgetDndClick(id, div);\n\t\t},\n\n\t\tonWidgetDndClick(id, div, pos, e) {\n\t\t\tthis.stopEvent(e);\n\t\t\tthis.logger.log(1, \"onWidgetDndClick\", \"enter > \" + id);\n\t\t\tthis.setState(0);\n\t\t\t// var widget = this.model.widgets[id];\n\t\t\t// if(widget){\n\t\t\t// \tvar lines = this.getLinesForWidget(widget);\n\t\t\t// \tif (lines) {\n\t\t\t// \t\tvar clickLine = this.getLineForGesture(lines, \"click\")\n\t\t\t// \t\tif (!clickLine){\n\t\t\t// \t\t\tclickLine = lines[0]\n\t\t\t// \t\t}\n\t\t\t// \t\tif (clickLine){\n\t\t\t// \t\t\tthis.animateToScreen(clickLine.to, this.container);\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// } else {\n\t\t\t// \tthis.highlightActionWidgets();\n\t\t\t// }\n\t\t},\n\n\t\thighlightActionWidgets() {\n\t\t\tthis.logger.log(2, \"highlightActionWidgets\", \"entry > \");\n\t\t\tvar divs = [];\n\t\t\tfor (var id in this.model.widgets) {\n\t\t\t\tvar widget = this.model.widgets[id];\n\t\t\t\tif (widget) {\n\t\t\t\t\tvar lines = this.getLinesForWidget(widget);\n\t\t\t\t\tif (lines) {\n\t\t\t\t\t\tvar div = this.analyticsDivs[widget.id];\n\t\t\t\t\t\tif (div) {\n\t\t\t\t\t\t\tdivs.push(div);\n\t\t\t\t\t\t\tcss.add(div, \"MatcSimulatorWidgetHightlight\")\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetTimeout(function () {\n\t\t\t\tfor (var i = 0; i < divs.length; i++) {\n\t\t\t\t\tcss.remove(divs[i], \"MatcSimulatorWidgetHightlight\")\n\t\t\t\t}\n\t\t\t}, 500)\n\t\t},\n\n\n\t\tonScreenDndClick(id, div, pos, e) {\n\t\t\tthis.logger.log(-1, \"onScreenDndClick\", \"entry > \" + id);\n\t\t\tthis.stopEvent(e);\n\t\t\tthis.highlightActionWidgets();\n\t\t\t// TODO: Check for lines\n\t\t\tthis.setState(0);\n\t\t\t// call canvas click to make sure comment popups close\n\t\t\tthis.onCanvasSelected();\n\t\t},\n\n\t\tonCanvasSelected() {\n\t\t\tthis.logger.log(2, \"onCanvasSelected\", \"entry > \");\n\t\t\t//this.inherited(arguments) ;\n\t\t},\n\n\t\t/**********************************************************************\n\t\t * Rendering\n\t\t **********************************************************************/\n\n\n\t\tanimateToScreen(screenID, container) {\n\t\t\t// css.add(container, \"MatcShareCanvasAnimatedContainer\");\n\t\t\tthis.moveToScreen(screenID);\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tcss.remove(container, \"MatcShareCanvasAnimatedContainer\");\n\t\t\t}, 500);\n\t\t},\n\n\n\t\t/**********************************************************************\n\t\t * Rendering\n\t\t **********************************************************************/\n\n\n\t\tafterRender() {\n\t\t\tthis.logger.log(-1, \"afterRender\", \"entry > \" + this.analyticMode);\n\t\t\tthis.cleanUpAnalytics();\n\n\n\t\t},\n\n\t\thasSelect() {\n\t\t\treturn this._mode != \"addComment\";\n\t\t},\n\n\n\t\t/**********************************************************************\n\t\t * Gesture\n\t\t **********************************************************************/\n\n\t\tcleanUpAnalytics() {\n\t\t\tthis.analyticsDivs = {};\n\t\t},\n\n\n\t\t/**********************************************************************\n\t\t * DI\n\t\t **********************************************************************/\n\n\n\t\tsetController(c) {\n\t\t\tthis.logger.log(2, \"setController\", \"enter\");\n\t\t\tthis.controller = c;\n\t\t\tc.setCanvas(this);\n\t\t},\n\n\t\tgetController() {\n\t\t\tif (this._controllerCallback) {\n\t\t\t\tthis[this._controllerCallback]();\n\t\t\t}\n\t\t\treturn this.controller;\n\t\t},\n\n\t\tsetControllerCallback(c) {\n\t\t\tthis._controllerCallback = c;\n\t\t},\n\n\n\t\tsetModelFactory(f) {\n\t\t\tthis.logger.log(3, \"setModelFactory\", \"enter\");\n\t\t\tthis.factory = f;\n\t\t},\n\n\t\tsetRenderFactory(f) {\n\t\t\tthis.logger.log(0, \"setRenderFactory\", \"enter\");\n\t\t\tthis.renderFactory = f;\n\t\t},\n\n\t\tsetModel(model) {\n\t\t\tthis.logger.log(3, \"setModel\", \"enter\");\n\t\t\tthis.model = model;\n\t\t\tthis.grid = this.model.grid;\n\t\t\tthis.loadComments()\n\t\t},\n\n\n\t\tsetTest(t) {\n\t\t\tthis.logger.log(2, \"setTest\", \"enter > # \");\n\t\t\tthis.testSettings = t;\n\t\t},\n\n\n\t\tsetUser(u) {\n\t\t\tthis.user = u;\n\t\t},\n\n\t\tsetMode(mode, forceRender) {\n\t\t\tthis.logger.log(2, \"setMode\", \"enter > \" + mode + \" != \" + this._mode + \" > \" + forceRender);\n\t\t\tif (mode != this._mode) {\n\t\t\t\tthis._mode = mode;\n\t\t\t\tif (this.toolbar) {\n\t\t\t\t\tthis.toolbar.setMode(mode);\n\t\t\t\t}\n\t\t\t\tthis.rerender();\n\t\t\t} else if (forceRender) {\n\t\t\t\tthis.rerender();\n\t\t\t}\n\t\t},\n\n\n\t\tgetMode() {\n\t\t\treturn this._mode;\n\t\t},\n\n\n\n\n\t\t/***************************************************************************\n\t\t * Keyboard handling\n\t\t ***************************************************************************/\n\n\t\tonKeyPress(e) {\n\n\t\t\tthis._currentKeyEvent = e;\n\n\t\t\tif (this.state == \"simulate\" || this.state == \"dialog\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar target = e.target;\n\t\t\tif (css.contains(target, \"MatcIgnoreOnKeyPress\")) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * The keycode is differently in every browser!\n\t\t\t */\n\t\t\tvar k = e.keyCode ? e.keyCode : e.which;\n\n\t\t\tif (k == 32) { // space\n\t\t\t\tif (!this._inlineEditStarted) {\n\t\t\t\t\tthis.stopEvent(e);\n\t\t\t\t\tif (this.getMode() != \"move\") {\n\t\t\t\t\t\tthis.showHint(\"Move the mouse to move canvas...\");\n\t\t\t\t\t\tthis.onDragStart(this.container, \"container\", \"onCanvasDnDStart\", \"onCanvasDnDMove\", \"onCanvasDnDEnd\", null, this._lastMouseMoveEvent, true);\n\t\t\t\t\t\tthis.setMode(\"move\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t/**\n\t\t\t\t * Zoom\n\t\t\t\t */\n\t\t\t} else if (k == 171 || k == 187) { // +\n\t\t\t\tif (!this._inlineEditStarted) {\n\t\t\t\t\tthis.onClickPlus();\n\t\t\t\t\tthis.stopEvent(e);\n\t\t\t\t}\n\t\t\t} else if (k == 173 || k == 189) { //-\n\n\t\t\t\tif (!this._inlineEditStarted) {\n\t\t\t\t\tthis.onClickMinus();\n\t\t\t\t\tthis.stopEvent(e);\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\n\t\tonKeyUp(e) {\n\t\t\tvar k = e.keyCode ? e.keyCode : e.which;\n\t\t\tif (k == 32) {\n\t\t\t\tthis.onDragEnd(this._lastMouseMoveEvent);\n\t\t\t\tthis.setMode(\"view\");\n\t\t\t}\n\n\t\t\tdelete this._currentKeyEvent;\n\t\t},\n\n\n\t\t/***************************************************************************\n\t\t * Settings\n\t\t ***************************************************************************/\n\n\n\t\tinitSettings() {\n\t\t\tthis.logger.log(1, \"initSettings\", \"enter > \");\n\t\t\t/**\n\t\t\t * default settings\n\t\t\t */\n\t\t\tthis.settings = {\n\t\t\t\tcanvasTheme: \"MatcLight\",\n\t\t\t\tlineColor: \"#999\",\n\t\t\t\tlineWidth: 1,\n\t\t\t\tstorePropView: true,\n\t\t\t\tmoveMode: \"ps\",\n\t\t\t\tmouseWheelMode: \"scroll\"\n\t\t\t};\n\n\n\t\t\tvar s = this._getStatus(\"matcSettings\");\n\t\t\tif (s) {\n\t\t\t\tif (s.canvasTheme) {\n\t\t\t\t\t//this.settings.canvasTheme = s.canvasTheme;\n\t\t\t\t}\n\t\t\t\tif (s.lineColor) {\n\t\t\t\t\tthis.settings.lineColor = s.lineColor;\n\t\t\t\t}\n\t\t\t\tif (s.lineWidth) {\n\t\t\t\t\tthis.settings.lineWidth = s.lineWidth;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.logger.log(2, \"initSettings\", \"exit>  no saved settings\");\n\t\t\t}\n\n\n\t\t\tthis.applySettings(this.settings);\n\t\t},\n\n\t\tgetSettings() {\n\t\t\treturn this.settings;\n\t\t},\n\n\t\tsetSettings(s) {\n\n\t\t\t/**\n\t\t\t * Mixin values\n\t\t\t */\n\t\t\tif (s.canvasTheme) {\n\t\t\t\tthis.settings.canvasTheme = s.canvasTheme;\n\t\t\t}\n\t\t\tif (s.lineColor) {\n\t\t\t\t//this.settings.lineColor = s.lineColor;\n\t\t\t}\n\t\t\tif (s.lineWidth) {\n\t\t\t\tthis.settings.lineWidth = s.lineWidth;\n\t\t\t}\n\t\t\tif (s.storePropView != null) {\n\t\t\t\tthis.settings.storePropView = s.storePropView;\n\t\t\t}\n\n\t\t\tif (s.mouseWheelMode != null) {\n\t\t\t\tthis.settings.mouseWheelMode = s.mouseWheelMode;\n\t\t\t}\n\n\t\t\tthis._setStatus(\"matcSettings\", this.settings);\n\n\t\t\tthis.applySettings(this.settings);\n\t\t\tthis.rerender();\n\t\t},\n\n\n\t\tapplySettings(s) {\n\n\t\t\tthis.logger.log(2, \"applySettings\", \"enter > \" + s.canvasTheme + \" &> \" + s.moveMode);\n\n\t\t\tif (s.lineWidth) {\n\t\t\t\tthis.defaultLineWidth = s.lineWidth;\n\t\t\t}\n\t\t\tif (s.canvasTheme) {\n\t\t\t\tif (this._lastCanvasTheme) {\n\t\t\t\t\tcss.remove(win.body(), this._lastCanvasTheme);\n\t\t\t\t}\n\t\t\t\tcss.add(win.body(), s.canvasTheme)\n\t\t\t\tthis._lastCanvasTheme = s.canvasTheme;\n\t\t\t}\n\n\t\t\tif (s.mouseWheelMode) {\n\t\t\t\tthis._mouseWheelMode = s.mouseWheelMode;\n\t\t\t}\n\n\t\t\tthis.settings = s;\n\n\t\t},\n\n\n\t\t/***************************************************************************\n\t\t * Helper Functons\n\t\t ***************************************************************************/\n\n\n\t\t/**\n\t\t * Returns all lines for a widget or its parent group.\n\t\t *\n\t\t * 1) If there is one or more lines for the widget, this will be\n\t\t * returned\n\t\t *\n\t\t * 2) Else, if there is a group and the group has one or more line,\n\t\t * the group lines will be returned!\n\t\t */\n\t\tgetLinesForWidget(widget) {\n\n\t\t\t/**\n\t\t\t * In case of an inherited widget, use the lines of the master\n\t\t\t */\n\t\t\tif (widget.inherited && this.model.widgets[widget.inherited]) {\n\t\t\t\twidget = this.model.widgets[widget.inherited];\n\t\t\t}\n\n\t\t\tvar widgetID = widget.id;\n\t\t\tvar lines = this.getFromLines(widget);\n\t\t\tif (lines && lines.length > 0) {\n\t\t\t\treturn lines;\n\t\t\t}\n\n\t\t\tvar group = this.getParentGroup(widgetID);\n\t\t\tif (group) {\n\t\t\t\tvar groupLine = this.getFromLines(group);\n\t\t\t\tif (groupLine && groupLine.length > 0) {\n\t\t\t\t\treturn groupLine;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Return the line with a given type (lines[i].event === type).\n\t\t * Handles also old school where there was not event\n\t\t */\n\t\tgetLineForGesture(lines, type) {\n\t\t\tfor (var i = 0; i < lines.length; i++) {\n\t\t\t\tif (lines[i].event === type || (\"click\" === type && !lines[i].event)) {\n\t\t\t\t\treturn lines[i];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tinitMouseTracker() {\n\t\t\tthis.own(on(win.body(), \"mousemove\", lang.hitch(this, \"onMouseMove\")));\n\t\t},\n\n\t\tonMouseMove(e) {\n\t\t\tvar pos2 = this.getCanvasMousePosition(e, true);\n\t\t\tthis._lastMousePos = pos2;\n\t\t\tthis._lastMouseMoveEvent = e;\n\t\t},\n\n\n\t\tdestroy() {\n\t\t\tthis.cleanUp();\n\t\t}\n\t},\n\tmounted() {\n\n\t}\n}\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ShareCanvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ShareCanvas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShareCanvas.vue?vue&type=template&id=25f015e7&\"\nimport script from \"./ShareCanvas.vue?vue&type=script&lang=js&\"\nexport * from \"./ShareCanvas.vue?vue&type=script&lang=js&\"\nimport style1 from \"./ShareCanvas.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport lang from 'dojo/_base/lang'\nimport win from 'dojo/win'\nimport Logger from 'common/Logger'\nimport Core from 'core/Core'\nimport CoreUtil from 'core/CoreUtil'\n\nexport default class ShareController extends Core{\n\n\tconstructor (){\n\t\tsuper()\n\t\tthis.logger = new Logger(\"ShareContoller\");\n\t\tthis.logger.log(2,\"constructor\", \"exit\");\n\t}\n\n\t/**********************************************************************\n\t * Dependencies\n\t **********************************************************************/\n\n\tsetCanvas (c){\n\t\tthis.logger.log(3,\"setCanvas\", \"entry\");\n\t\tthis._canvas = c;\n\t}\n\n\tsetToolbar (t){\n\t\tthis.logger.log(3,\"setToolbar\", \"entry\");\n\t\tthis.toolbar = t;\n\t}\n\n\tsetModelService (s) {\n\t\tthis.modelService = s\n\t}\n\n\tsetModelFactory (f){\n\t\tthis.logger.log(3,\"setModelFactory\", \"entry\");\n\t\tthis.factory = f;\n\t}\n\n\tsetModel (m, screenID){\n\t\tthis.logger.log(2,\"setModel\", \"entry > \" + screenID);\n\t\tthis.model = m;\n\n\t\t// Zoom out if large model!\n\t\tvar count = this.countProps(m.screens);\n\t\tif (count > 4) {\n\t\t\tif(this._canvas){\n\t\t\t\tthis._canvas.zoom = 0.25;\n\t\t\t\tthis._canvas.zoomLevelPos = 2;\n\t\t\t}\n\t\t}\n\n\t\tthis.inheritedModel = this.createInheritedModel(m);\n\t\tthis.oldModel = lang.clone(m);\n\t\tthis.render(screenID);\n\n\t\tif(this.toolbar){\n\t\t\tthis.toolbar.setModel(m);\n\t\t} else {\n\t\t\tconsole.debug(\"No toolbar in controller!\");\n\t\t}\n\n\t\tif (this._canvas) {\n\t\t\tthis._canvas.setFonts(m.fonts)\n\t\t}\n\n\t\tthis.logger.log(3,\"setModel\", \"entry > \" + screenID);\n\t}\n\n\n\tsetMode (mode){\n\t\tthis.logger.log(0,\"setMode\", \"entry > \" + mode);\n\t\tif (this.toolbar) {\n\t\t\tthis.toolbar.setMode(mode);\n\t\t}\n\t\tthis._canvas.setMode(mode);\n\t}\n\n\tsetSinglePage (enabled){\n\t\tthis.logger.log(0,\"setSinglePage\", \"entry > \" + enabled);\n\t}\n\n\n\tgetZoomFactor (){\n\t\tif(this._canvas){\n\t\t\treturn this._canvas.getZoomFactor();\n\t\t}\n\t\treturn 1;\n\t}\n\n\t/**********************************************************************\n\t * Canvas Delegates\n\t **********************************************************************/\n\n\trender (screenID){\n\t\tthis.logger.log(2,\"render\", \"enter > screenID : \" + screenID);\n\n\t\tif(this._canvas){\n\t\t\tlet inheritedModel = CoreUtil.createInheritedModel(this.model)\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis._canvas.render(inheritedModel);\n\t\t\t\tif(screenID){\n\t\t\t\t\tthis._canvas.moveToScreen(screenID);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\t_requestRendering (screenID){\n\t\tif(this._zoomedModel){\n\t\t\tthis._canvas.render(this._zoomedModel);\n\t\t\tif(screenID){\n\t\t\t\tthis._canvas.moveToScreen(screenID);\n\t\t\t}\n\t\t}\n\t\tthis._zoomedModel = null;\n\t}\n\n\t_zoomToScreen (screenID){\n\t\tif(screenID && this.model.screens[screenID]){\n\t\t\t/**\n\t\t\t * here we make sure the selected screen fits in the\n\t\t\t * browser window. We simply find the smallest possible\n\t\t\t * zoom factor and subtract 0.2 to make sure it fits in\n\t\t\t * browser\n\t\t\t */\n\t\t\tvar screen = this.model.screens[screenID];\n\t\t\tlet winBox = win.getBox();\n\t\t\tlet x =  winBox.w / screen.w;\n\t\t\tlet y =  winBox.h / screen.h;\n\t\t\tvar zoom = (Math.floor( Math.min(x,y) * 10) / 10) -0.2 ;\n\t\t\tthis._canvas.setZoom(zoom);\n\n\t\t}\n\t}\n\n\t/**********************************************************************\n\t * Selection methods\n\t **********************************************************************/\n\n\tonWidgetSelected (id){\n\t\tthis.logger.log(0,\"onWidgetSelected\", \"enter > \"+ id);\n\t\tvar widget = this.inheritedModel.widgets[id];\n\t\tif(widget){\n\t\t\tif(this.toolbar){\n\t\t\t\tthis.toolbar.onWidgetSelected(widget);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"onWidgetSelected() > No width with id\", id);\n\t\t}\n\t}\n\n\n\tonScreenSelected (id){\n\t\tthis.logger.log(1,\"onScreenSelected\", \"enter > \"+ id);\n\t\tvar screen = this.model.screens[id];\n\t\tif(this.toolbar){\n\t\t\tthis.toolbar.onScreenSelected(screen);\n\t\t}\n\t}\n\n\tonCanvasSelected (){\n\t\tthis.logger.log(1,\"onCanvasSelected\", \"enter \");\n\t\tif(this.toolbar){\n\t\t\tthis.toolbar.onCanvasSelected();\n\t\t}\n\t}\n\n\tonLineSelected (id){\n\t\tthis.logger.log(1,\"onLineSelected\", \"enter > \" + id);\n\t\tvar line = this.model.lines[id];\n\t\tif(this.toolbar){\n\t\t\tthis.toolbar.onLineSelected(line);\n\t\t}\n\t}\n\n\tonMultiSelect (selection){\n\t\tthis.logger.log(1,\"onMultiSelect\", \"enter > \");\n\t\tif(this.toolbar){\n\t\t\t/**\n\t\t\t * TODO: get all the model elements\n\t\t\t */\n\t\t\tthis.toolbar.onMultiSelect(selection);\n\t\t}\n\t}\n\n\tonGroupSelected (id){\n\t\tthis.logger.log(1,\"onGroupSelected\", \"enter > \" + id);\n\t\tif(this.model.groups && this.model.groups[id]){\n\t\t\tif(this.toolbar){\n\t\t\t\tvar group = this.model.groups[id];\n\t\t\t\tthis.toolbar.onGroupSelect(group);\n\t\t\t}\n\t\t}\n\t}\n\n\tunSelect (){\n\t\tif(this._canvas){\n\t\t\tthis._canvas.unSelect();\n\n\t\t}\n\t\tif(this.toolbar){\n\t\t\tthis.toolbar.cleanUp();\n\t\t}\n\t}\n\n\n\tshowSuccess (msg){\n\t\tif(this._canvas){\n\t\t\tthis._canvas.showSuccess(msg);\n\t\t}\n\t}\n\n\tshowError (msg){\n\t\tif(this._canvas){\n\t\t\tthis._canvas.showError(msg);\n\t\t}\n\t}\n\n}","<template>\n  <div class=\"MatcCanvasPage MatcShare\" id=\"CanvasNode\">\n      <ShareCanvas ref=\"canvas\" />\n  </div>\n</template>\n\n<style class=\"css\">\n\t@import url(\"../../style/css/legacy.css\");\n</style>\n\n<style lang=\"scss\">\n  @import \"../../style/matc.scss\";\n  @import \"../../style/test.scss\";\n</style>\n<style lang=\"sass\">\n  @import \"../../style/bulma.sass\"\n</style>\n\n<script>\nimport DojoWidget from \"dojo/DojoWidget\";\nimport css from 'dojo/css'\nimport win from 'dojo/win'\nimport ShareCanvas from 'canvas/share/ShareCanvas'\nimport ShareController from 'canvas/share/ShareController'\nimport ModelFactory from 'core/ModelFactory'\nimport RenderFactory from 'core/RenderFactory'\n//import lang from 'dojo/_base/lang'\n//import on from 'dojo/on'\nimport Services from 'services/Services'\nimport Logger from \"common/Logger\";\n\nexport default {\n  name: \"Design\",\n  mixins: [DojoWidget],\n  data: function() {\n    return {\n    };\n  },\n  components: {\n      'ShareCanvas': ShareCanvas\n  },\n  computed: {\n    pub () {\n      return this.$route.meta && this.$route.meta.isPublic\n    },\n    mode () {\n\t\t\tif (this.pub) {\n\t\t\t\treturn 'public'\n\t\t\t}\n\t\t\treturn 'private'\n\t\t}\n  },\n  methods: {\n    loadData () {\n      let id = this.$route.query.h\n      this.logger.log(0, 'loadData', 'enter', id)\n      Promise.all([\n          this.modelService.findAppByHash(id),\n      ]).then(values => {\n         this.buildCanvas(values[0])\n      })\n    },\n    buildCanvas (model) {\n      this.logger.log(0, 'buildCanvas', 'enter')\n      let canvas = this.$refs.canvas\n      let controller = new ShareController()\n      let service = this.modelService\n\n      /**\n       * model factory\n       */\n      var factory = new ModelFactory();\n      factory.setModel(model);\n\n      /**\n       * render factory\n       */\n      var renderFactory = new RenderFactory();\n      renderFactory.setModel(model);\n      renderFactory.setHash(this.$route.query.h)\n\n      /**\n       * Dependency injection\n       */\n      controller.setModelService(service)\n      controller.setModelFactory(factory);\n      if (this.pub) {\n        controller.setPublic(true)\n      }\n\n      canvas.setController(controller);\n      canvas.setRenderFactory(renderFactory);\n      canvas.setModelFactory(factory);\n      canvas.setModelService(service);\n      canvas.setCommentService(Services.getCommentService())\n      canvas.setUser(this.user)\n      canvas.setHash(this.$route.query.h);\n\n  \n\n      var startScreen = null;\n      for(var screenID in model.screens){\n        var screen = model.screens[screenID];\n        if (screen.props && screen.props.start){\n            startScreen = screenID;\n            break;\n        }\n      }\n      /**\n       * controller will render screen\n       */\n      controller.setModel(model, startScreen);\n\n    }\n  },\n  async mounted() {\n    this.logger = new Logger(\"Design\");\n    css.add(win.body(), 'MatcVisualEditor')\n    this.modelService = Services.getModelService(this.$route)\n    this.user = await Services.getUserService().load()\n    this.loadData()\n    this.logger.log(3, 'mounted', 'exit')\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Share.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Share.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Share.vue?vue&type=template&id=02bee507&\"\nimport script from \"./Share.vue?vue&type=script&lang=js&\"\nexport * from \"./Share.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Share.vue?vue&type=style&index=0&class=css&lang=css&\"\nimport style1 from \"./Share.vue?vue&type=style&index=1&lang=scss&\"\nimport style2 from \"./Share.vue?vue&type=style&index=2&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","ref","staticRenderFns","_m","modelName","on","onHomeMenu","class","mode","onNewComment","onChangeViewMode","_e","events","user","model","canvasViewConfig","onChangeCanvasViewConfig","name","mixins","data","x_prefix","components","methods","postCreate","setPopoverFct","f","setLabel","l","setMaxMin","fct","setFormTo","onHover","setValue","hist","mean","bar","css","me","to","from","db","lblCntr","mounted","component","props","value","_v","_s","$event","stopPropagation","_l","i","key","onSelect","label","selectedTool","tools","icon","computed","items","t","e","onHide","init","style","highlightWidth","highlightX","m","refInFor","selected","setSelected","modes","hasData","setHighlight","nextView","watch","v","setTimeout","hasSelectAll","renderToolbar","renderScreenProperties","cntr","renderWidgetProperties","renderHeatMapProperties","list","setHeatMapLabel","lbl","renderDropOffProperties","maxLabelLength","content","row","tasks","build","nodes","renderSessionProperties","updateColor","hasCustomColor","hasPicker","renderSessionSection","onSelectSessionInvert","console","onSelectSesionAll","onSelectSesionsTask","onSortSessionList","renderSessionList","order","chk","duration","hoverSession","session","showUserJourneyOutlier","showOutlier","selectUserJournyTask","taskNumber","setSelectSessions","ids","selectAllSessions","selectSession","onSessionSelectionChanged","getSelectedSessions","sessions","_getTestList","annotatation","testSettings","df","isValid","status","taskSuccess","taskPerformance","weirdness","date","start","size","id","screens","renderGestureProperties","renderScreenModes","showProperties","hideProperties","hideAllSections","setController","c","setCanvas","setModelFactory","setModel","setAnnotation","a","setTest","setEvents","setMode","onModeChange","setSelectedViewButton","createRing","help","distCallBack","bgColor","width","backgroundColor","color","color2","color3","ring","createToolBarItem","callback","parent","createInput","placeholder","input","div","createContent","createSection","parentNode","createSectionHeader","hasTemplateMarker","span","createBigNumber","onExit","hash","onShare","onWidgetSelected","widget","onScreenSelected","screen","onLineSelected","line","onMultiSelect","selection","onGroupSelect","group","onCanvasSelected","updatePropertiesView","showSession","dialog","Promise","then","_showSession","sessionID","player","_getSessionAnnotation","annotations","appID","type","reference","onShowSettings","themeList","mouseWheelList","onSaveSettings","canvasTheme","mouseWheelMode","showSignUpDialog","d","_createSignUpForm","required","error","min","click","_signUpAndNew","form","result","window","analyticMode","analyticHeatMapClicks","onMove","onEdit","showHelpDialog","helpID","option","showHelp","setAnalyticMode","params","reRenderAnalyticMode","setModelService","s","setPublic","p","setCanvasViewConfig","viewConfig","setUser","u","initMouseData","res","setMouseData","showClickHeatMap","numberOfClicks","showFirstClickHeatMap","showMouseHeatMap","_onMouseDataLoaded","showViewMap","showDropOff","showUserJourney","time","tree","task","taskColor","outlier","outlierColor","showGestureMap","showScreenMode","changeScreenMode","showDwellDistribution","showGestureProperties","showWidgetProperties","widgetData","showScreenProperties","times","views","clicks","widgetClicks","screenTests","count","tests","showSessionProperties","selectDropOffTask","showDropOffProperties","showDropOffChart","showDropOffFunnel","funnel","getNiceEventLabel","event","showHeatMapProperties","cleanUp","unselect","blurWidgetProperties","highlightSession","highlightAnalyticLine","divs","_render_global_UserJourney","_renderUserTree","maxCount","maxMeanDuration","x","y","Math","_renderTreeEvent","_renderUserSingleLines","_renderUserGraph","matches","isOutlier","match","maxDuration","lastDurationEvent","point","matchLines","halo","lineColor","lineOpacity","lineWidth","_renderScreenEvent","screenID","onScreenEventClick","_getSessionGraph","graph","_addToGraph","_render_global_DropOff","_render_dropoff_task_time","_render_dropoff_task_success","_getDropOffBoxPosition","pos","_renderDropOffEvent","selectDropOffPoint","getOutlierScores","getGestures","getUserJourney","getTaskPerformance","getOverlayViews","total","counts","getOverlayTest","screenCounts","getScreenViews","getScreenTests","getScreenDwellTime","getOverlayDwellTime","getScreenWidgetClicks","widgetEvents","widgetScreenEvents","getScreenClicksOnBackground","getMissedClicks","passiveScreens","widgets","passiveWidgets","select","as_array","getScreenClicks","getOverlayClicks","getOverlayWidgetClicks","getLineWidgetData","clicksAbs","maxClicksAbs","Object","getWidgetData","getFirstNClicksData","n","DojoWidget","_DragNDrop","_Color","Util","Render","Lines","DnD","Add","Select","Distribute","Tools","Zoom","InlineEdit","Scroll","Upload","KeyBoard","Resize","Replicate","Comment","Heat","UserJourney","DropOff","DataProcessing","zoom","resizeEnabled","renderDND","dragNDropMinTimeSpan","wireInheritedWidgets","taskLineOpacity","isBlackAndWhite","dropOffLineWidth","dropOffLineColor","dropOffEventWidth","userJourneyEndColor","w","h","topic","lang","showError","msg","XlineFunction","isPublic","setCommentService","setToolbar","setMouseListener","inlineEditInit","setBW","isBW","renderLines","showComments","initAnalyticSVG","cleanUpAnalyticLines","drawLine","drawAnalyticLine","opacity","attr","drawStraightAnalyticLine","initWiring","dispatchMouseDownScreen","dispatchMouseDownWidget","afterUpdateDnd","zoomedModel","initSettings","storePropView","moveMode","getSettings","setSettings","applySettings","onWidgetDndClick","onScreenDndClick","selectAnalyticDiv","renderLayerList","afterRender","hasSelect","_renderHeatMap","screenEvents","_render_HeatmapMouse","ctx","mouseData","_render_HeatmapClick","screenClicks","_filterSelectedSessions","_render_pixel_screen_heatmap","actionEvents","_render_HeatmapScrollView","_render_HeatmapScrollTime","_render_HeatmapViews","_render_HeatmapDwelTime","drawDurationLine","defaultColor","_render_global_Gesture","_renderGestureStart","cleanUpAnalytics","getController","setControllerCallback","setRenderFactory","forceRender","onKeyPress","getMode","onKeyUp","initMouseTracker","onMouseMove","destroy","logPageView","url","AnalyticController","logger","Logger","log","modelService","_canvas","toolbar","factory","inheritedModel","createInheritedModel","Core","addContainerChildrenToModel","oldModel","clone","debug","setFonts","fonts","enabled","getZoomFactor","afterRenderCallback","CoreUtil","requestAnimationFrame","moveToScreen","_zoomedModel","winBox","win","getBox","floor","setZoom","warn","lines","groups","unSelect","showSuccess","loadData","temp","buildCanvas","test","annotation","renderFactory","controller","canvas","startScreen","Services","onMouseWheel","pub","CollabSession","collabUsers","websocket","getWebSocketService","token","onMessage","dispatchWebSocketMessage","success","sendHello","sendMouse","setModelChangeListener","changeEvent","sendChange","err","others","find","undefined","hasOtherUsers","send","addCollabUser","sendImHere","removeCollabUser","setCollabMouse","collabRecieveChanges","found","push","filter","close","Toolbar","Canvas","stack","beforeDestroy","zoomLevelPos","closeSVGEditor","onZoomMinusClick","onZoomPlusClick","onTogggleLine","setHash","initButtons","loadComments","onCommentAdded","saveDNDChange","comment","onSaveComment","old","onSimulator","startSimulator","_showDesktopSimulator","maxHeight","container","logData","canDestroy","scroller","resizeSimualtor","factor","_showMobileTest","clazz","wrapper","QR","img","stopSimulator","_getSimulatorScreen","dispatchMouseDownCanvas","highlightActionWidgets","animateToScreen","getLinesForWidget","getLineForGesture","ShareController","countProps"],"sourceRoot":""}