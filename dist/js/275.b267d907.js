"use strict";(self["webpackChunkquant_ux"]=self["webpackChunkquant_ux"]||[]).push([[275],{71021:function(e,t,n){n.d(t,{Z:function(){return g}});var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"VommondCheckBoxWrapper"},[e._m(0),e.label?n("span",{staticClass:"VommondCheckBoxLabel"},[e._v(e._s(e.label))]):e._e()])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"VommondCheckBox"},[n("span",{staticClass:"VommondCheckBoxHook",attrs:{"data-dojo-attach-point":"hook"}})])}],r=n(60245),a=n(28379),o=n(75790),l=n(59344),h=n(48039),c=n(54524),d={name:"CheckBox",mixins:[r.Z],data:function(){return{checked:!1}},props:["label","value"],components:{},methods:{postCreate(){this.log=new c.Z("CheckBox"),this.own((0,h.Z)(this.domNode,o.Z.press,l.Z.hitch(this,"onChange"))),(this.value||"true"===this.value)&&this.setValue(!0)},getValue(){return this.checked},setValue(e){this.checked=e,e?a.Z.add(this.domNode,"VommondCheckBoxChecked"):a.Z.remove(this.domNode,"VommondCheckBoxChecked")},setLabel(e){this.label=e},onChange(e){this.stopEvent(e),this.setValue(!this.checked),this.emit("change",this.checked),this.emit("input",this.checked)}},watch:{value(e){this.setValue(e)}},mounted(){this.log.log(10,"mounted","enter")}},u=d,m=n(1001),f=(0,m.Z)(u,s,i,!1,null,null,null),g=f.exports},72712:function(e,t,n){n.d(t,{Z:function(){return D}});var s,i,r=n(60245),a=n(59344),o=n(28379),l=n(48039),h=n(16328),c=n(17386),d=n(77528),u=n(40475),m=n(42323),f=n(821),g=n(23521),p=n(42598),v=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"VommondSlideLeftButton"},[n("div",{staticClass:"VommondSlideLeftButtonLabel",attrs:{type:"button","data-dojo-attach-point":"button"}},[n("span",{staticClass:"MatcPointer mdi mdi-dots-horizontal",attrs:{"data-dojo-attach-point":"label"}})]),n("div",{staticClass:"VommondSlideLeftPopup",attrs:{"data-dojo-attach-point":"popup"}},[n("div",{staticClass:"VommondSlideLeftPopupCntr",attrs:{"data-dojo-attach-point":"cntr"}})])])}],w=n(75790),C={name:"SlideLeftButton",mixins:[r.Z],data:function(){return{value:!1,hasObjects:!1,updateLabel:!0,maxLabelLength:-1,openCSS:"VommondSlideLeftPopupOpen",labelCSS:"VommondSlideLeftPopupOpenLabel",isOpen:!1}},components:{},methods:{postCreate:function(){this._lis={},this.own((0,l.Z)(this.button,w.Z.press,a.Z.hitch(this,"toggleDropDown")))},toggleDropDown(e){this.stopEvent(e),this.isOpen?o.Z.remove(this.domNode,this.openCSS):o.Z.add(this.domNode,this.openCSS),this.isOpen=!this.isOpen},setOptions(e){this._lis={};for(var t=null,n=0;n<e.length;n++){var s=e[n],i=document.createElement("a");if(o.Z.add(i,"VommondSlideLeftPopupOpenItem"),(s.label||s.icon)&&null!=s.value){if(this.hasObjects=!0,s.icon){var r=document.createElement("span");o.Z.add(r,s.icon),i.appendChild(r)}if(s.label){var h=document.createElement("a");o.Z.add(h,this.labelCSS),h.innerHTML=s.label,i.appendChild(h)}s.selected&&(t=s.value),s.href?i.href=s.href:s.callback?this.own((0,l.Z)(i,w.Z.press,s.callback)):this.own((0,l.Z)(i,w.Z.press,a.Z.hitch(this,"onChange",s.value))),this._lis[s.value]=i}else i.innerHTML=s,this._lis[s]=i,this.own((0,l.Z)(i,w.Z.press,a.Z.hitch(this,"onChange",e[n])));this.cntr.appendChild(i)}this._options=e,t&&this.setValue(t)},onChange(e,t){this.stopEvent(t),this.emit("change",e,t)}},mounted(){}},b=C,S=n(1001),Z=(0,S.Z)(b,v,y,!1,null,null,null),x=Z.exports,k={},M={},B={name:"Util",mixins:[d.Z,r.Z],data:function(){return{eventLabels:{WidgetClick:"Click",ScreenLoaded:"View",ScreenClick:"Click",WidgetChange:"Change",ScreenScroll:"Scroll",OverlayLoaded:"View Overlay",OverlayRemoved:"Removed Overlay",ValidationError:"Widget ValiationError",ValidationErrorLine:"Form Validation Error",ValidationOK:"Validation OK",ScreenGesture:"Gesture",WidgetGesture:"Gesture"},gestureLabels:{swipeLeft:"Swipe Left",swipeRight:"Swipe Right",swipeUp:"Swipe Up",swipeDown:"Swipe Down"}}},components:{},methods:{getIcons:function(){return this._matcIcons},fixGestures:function(e){e.sort((function(e,t){return e.time-t.time}));for(var t=null,n=0,s=0;s<e.length;s++){var i=e[s];"SessionStart"==i.type&&(t=i.device),"ScreenGesture"==i.type&&i.gesture&&(i.gesture.start&&i.gesture.start.x>1&&t&&(i.gesture.start.x=Math.min(.99,i.gesture.start.x/t.w),i.gesture.start.y=Math.min(.99,i.gesture.start.y/t.h),n++),i.gesture.end&&i.gesture.end.x>1&&t&&(i.gesture.end.x=Math.min(.99,i.gesture.end.x/t.w),i.gesture.end.y=Math.min(.99,i.gesture.end.y/t.h),n++),i.gesture.start&&(i.x=i.gesture.start.x,i.y=i.gesture.start.y)),(i.x>1||i.y>1)&&console.warn("fixGestures() > exit. No device, could not fix! ")}n&&console.debug("fixGestures() > exit. Fixed Errors: ",n)},_distributedPositions(e,t,n){return p.qd(this.model,e,t,n)},getClones:function(e,t){var n=[],s=[],i=this.getBoundingBox(e),r=1;i.x>t.x&&(r=-1);var a=1;i.y>t.y&&(a=-1);var o=Math.floor(t.w/i.w),l=Math.floor(t.h/i.h),h=Math.round((t.w-o*i.w)/Math.max(1,o-1)),c=Math.round((t.h-l*i.h)/Math.max(1,l-1)),d={};for(let v=0;v<e.length;v++){let t=e[v];var u=this.getBoxById(t);d[t]={x:u.x-i.x,y:u.y-i.y,box:u}}var m=0;for(let v=0;v<o;v++)for(let t=0;t<l;t++)if(0!=v||0!=t){let o;for(let s=0;s<e.length;s++){o=e[s];var f=d[o],g={w:i.w,h:i.h,x:i.x+(v*(i.w+h)+f.x)*r,y:i.y+(t*(i.h+c)+f.y)*a,z:f.box.z,group:m,cloneOff:o};n.push(g)}var p={w:i.w,h:i.h,x:i.x+v*(i.w+h)*r,y:i.y+t*(i.h+c)*a,z:0,cloneOff:o};s.push(p),m++}return{previews:s,clones:n}},_getGroupChildResizePosition:function(e,t,n,s){return m.Z.getGroupChildResizePosition(e,t,n,s)},getObjectFromArray(e,t){return console.error("Util.vue .getObjectFromArray() > DEPRECATED!"),f.Z.getObjectFromArray(e,t)},getWidgetsByDistanceAndType:function(e,t){var n=[];if(this.model){let i=this.getParentScreen(e),r=i.children;for(let a=0;a<r.length;a++){let i=r[a];if(i!=e.id){let e=this.model.widgets[i];var s=e.type;t.indexOf(s)>=0&&n.push({d:0,y:e.y,w:e})}}n.sort((function(e,t){return e.y-t.y}))}return n},getObjectLength:function(e){return e?Object.keys(e).length:0},getEventStateLabel:function(e){return"hidden"==e.type?e.options.hidden?"Hide Password":"Show Password":"text"==e.type||"typing"==e.type?"Change Text":"checked"==e.type?e.value?"Checked":"Unchecked":"open"==e.type?"Open":"select"==e.type?"Select":"pos"==e.type?"Move":"open"==e.type?"Open Popup":"navigate"==e.type?"Popup Click":"Change"},getGestureLabel:function(e){return this.gestureLabels[e]?this.gestureLabels[e]:e},getEventLabel(e){return this.eventLabels[e]?this.eventLabels[e]:e},getScreenName(e,t=!1){if(this.model.screens[e]&&this.model.screens[e].name){let n=this.model.screens[e].name;return t&&n.length>16&&(n=n.substring(0,16)+"..."),n}return e},getWidgetName:function(e){return this.model.widgets[e]&&this.model.widgets[e].name?this.model.widgets[e].name:e},filterEvents:function(e,t){var n={};for(let o=0;o<t.length;o++){var s=t[o];s.isValid||(n[s.reference]=!0)}var i=[],r=e.length;for(let o=0;o<r;o++){var a=e[o];n[a.session]||i.push(a)}return i},getActionEvents(e){g.Z.start("Util.getActionEvents()");const t=e.select("type","in",["ScreenClick","WidgetClick","WidgetChange","ValidationError","ValidationErrorLine","ScreenLoaded","OverlayLoaded","OverlayRemoved","ScreenGesture","WidgetGesture"]);return g.Z.end("Util.getActionEvents()"),t},getClickEvents:function(e){return e.select("type","in",["ScreenClick","WidgetClick","WidgetChange"])},createEmptyImage:function(e,t,n){return{type:"Image",name:n,x:e,y:t,w:100,h:100,z:0,props:{},has:{onclick:!0,backgroundImage:!0,border:!0},actions:{},style:{borderTopRightRadius:0,borderTopLeftRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopWidth:0,borderBottomWidth:0,borderRightWidth:0,borderLeftWidth:0,borderTopColor:"#333333",borderBottomColor:"#333333",borderRightColor:"#333333",borderLeftColor:"#333333",backgroundImage:null}}},createEmptyScreen:function(e,t,n){return{x:e,y:t,h:this.model.screenSize.h,w:this.model.screenSize.w,name:n,type:"Screen",style:{background:"#ffffff"},min:{w:this.model.screenSize.w,h:this.model.screenSize.h},has:{image:!0},props:{start:!1},children:[]}},getAppTypeIcon(e){return"smartphone"==e.type?"mdi mdi-crop-portrait":(e.type,"mdi mdi-crop-landscape")},getDomain:function(){var e=window.location.hostname;return"127.0.0.1"==e||"flowalytics.com"==e?"flowalytics.com":"quant-ux.com"},ring:function(e,t,n,s,i,r){i||(i=200),r||(r=this.RING_BACKGROUND);var a=this.$new(k);return a.width=10,a.size=i,a.color=this.RING_FOREGROUND,a.backgroundColor=r,a.setLabel(e),a.setValue(t),a.setPs(n),a.placeAt(s),a},simpleStats:function(e,t,n,s){var i=this.getDB(),r=i.div("MatcDashNumberContainer").build(s);i.div("MatcDashLabel",e).build(r),i.div("MatcDashNumber",t+" ").build(r),i.div("MatcDashLabelHint","+/- "+n).build(r)},getDB:function(){return this.domBuilder||(this.domBuilder=new c.Z),this.domBuilder},progress:function(e,t,n,s){var i=document.getElementById(s),r=document.createElement("div");o.Z.add(r,"row"),i.appendChild(r);var a=document.createElement("div");o.Z.add(a,"col-md-4"),r.appendChild(a);var l=document.createElement("span");l.innerHTML=e,a.appendChild(l),a=document.createElement("div"),o.Z.add(a,"col-md-8"),r.appendChild(a);var h=this.$new(M);return h.color=this.PROGRESS_COLOR,h.placeAt(a),h.setValue(n),h},bulletGraph:function(e,t,n){for(var s=this.getDB(),i=0;i<t.length;i++){var r=t[i],a=s.div().build(e);s.div("MatcDashCompareTableLabelSmall",r.label).build(a);var l=s.div("").build(a);o.Z.add(l,"MatcDashCompareTableGraph");var h=this.$new(M);h.color=this.PROGRESS_COLOR,h.placeAt(l),h.setValue(r.p),r.empty?n&&h.setLabel(n):h.setLabel(r.a)}},bulletGraphTable:function(e,t,n){for(var s=this.getDB(),i=s.table(" MatcDashCompareTable").tbody().build(e),r=0;r<t.length;r++){var a=t[r],l=s.tr().build(i);s.td("MatcDashCompareTableLabel",a.label).build(l);var h=s.td("").build(l);if(a.empty)n&&s.span("MatcHint MatcLeft",n).build(h);else{o.Z.add(h,"MatcDashCompareTableGraph");var c=this.$new(M);c.color=!0,c.placeAt(h),c.setValue(a.p),c.setLabel(a.a)}}},createUserImage:function(e,t){var n=document.createElement("div");if(o.Z.add(n,"MatcUserImageCntr"),t.appendChild(n),e&&"guest"!=e.role)if(e.image){o.Z.add(n,"MatcUserImageCntrTrans");let t=document.createElement("img");t.src="/rest/user/"+e.id+"/images/"+e.name+"_"+e.lastname+"/"+e.image,o.Z.add(t,"MatcUserImage"),n.appendChild(t)}else{let t=document.createElement("div");o.Z.add(t,"MatcUserImageNone");var s=document.createElement("span");t.appendChild(s),o.Z.add(s,"MatcMiddle MatcUserLetters"),s.innerHTML=this.getUserLetter(e),n.appendChild(t)}else{let e=document.createElement("div");o.Z.add(e,"MatcCommentGuest"),e.innerHTML='<span class="mdi mdi-account"></span>',n.appendChild(e)}return n},getCommentUserName:function(e){return e.user&&e.user.name||e.user.lastname?this.getUserName(e.user):"Guest"},getUserLetter:function(e){let t="";if(e.name)t+=e.name.substring(0,1).toUpperCase(),e.lastname&&(t+=e.lastname.substring(0,1).toUpperCase());else{let n=e.email.split(".");n.length>0&&(t+=n[0].substring(0,1).toUpperCase()),n.length>1&&(t+=n[1].substring(0,1).toUpperCase())}return t},getUserName:function(e){var t="";return e.name&&(t=e.name+" "),e.lastname&&(t+=e.lastname),0==t.length&&(t=e.email),t},resizeSimulatorContainer:function(e,t,n){var s;return console.error("Util.resizeSimulatorContainer() > DEPRECATED"),o.Z.add(t,"MatchSimulatorContainer"),"desktop"==e.type?(s=h.Z.getBox(),s.w=s.w*n,s.h=s.h*n,s=this.getScaledSize(s,"width",e),t.style.width=Math.round(s.w)+"px",t.style.height=Math.round(s.h)+"px"):(s={w:150,h:400},s=h.Z.getBox(),s.w=s.w*n,s.h=s.h*n,s=this.getScaledSize(s,"height",e),t.style.width=Math.ceil(s.w)+"px",t.style.height=Math.ceil(s.h)+"px"),s},renderCommentPopup:function(e,t,n,s,i){o.Z.add(n,"MatcActionBox");var r=s.div("MatcMarginBottom").build(n),h=s.div("MatcCommentRow").build(r),c=this.createUserImage(e.user,h);o.Z.add(c,"MatcUserImageCntrSmall MatcCommentPic");var d=s.div("MatcCommentText").build(h);s.div("MatcFloatClear").build(r);var u=s.div("MatcCommentMeta").build(d);if(s.div("MatcCommentMeta",this.getCommentUserName(e)).build(u),s.div("MatcCommentTime",this.formatDate(e.created)).build(u),e.userID==t.id){let t=s.textarea("form-control MatcIgnoreOnKeyPress",e.message).build(n);t.setAttribute("data-gramm_editor",!1),e.id?o.Z.add(t,"vommondInlineEdit"):t.focus();let i=s.div("MatcButtonBar MatcMarginTopL").build(n);if(e.id){var m=s.a("MatcButton MatcButtonPrimary","Update").build(i);this.tempOwn((0,l.Z)(m,"mousedown",a.Z.hitch(this,"onSaveComment",t,e)));let r=s.a("MatcLinkButton","Close").build(i);this.tempOwn((0,l.Z)(r,"mousedown",a.Z.hitch(this,"onCloseCommentPopup",e)));let o=this.$new(x);o.placeAt(n),o.setOptions([{value:"edit",icon:"mdi mdi-comment-edit-outline",callback:function(e){e.preventDefault(),e.stopPropagation(),t.focus(),t.select()}},{value:"delete",icon:"mdi mdi-trash-can-outline",callback:a.Z.hitch(this,"onDeleteComment",e)}])}else{let n=s.a("MatcButton MatcButtonPrimary","Create").build(i);this.tempOwn((0,l.Z)(n,"mousedown",a.Z.hitch(this,"onSaveComment",t,e)));let r=s.a("MatcLinkButton","Close").build(i);this.tempOwn((0,l.Z)(r,"mousedown",a.Z.hitch(this,"onCloseCommentPopup",e)))}}else{if(i){let t=this.$new(x);t.placeAt(n),t.setOptions([{value:"delete",icon:"mdi mdi-trash-can-outline",callback:a.Z.hitch(this,"onDeleteComment",e)}])}s.div("MatcCommentMessage",e.message).build(n);let t=s.div("MatcButtonBar MatcMarginTopL").build(n),r=s.a("MatcLinkButton","Close").build(t);this.tempOwn((0,l.Z)(r,"mousedown",a.Z.hitch(this,"onCloseCommentPopup",e)))}},getWidgets:function(e,t){var n=[];if(e){var s=this.model.screens[e];if(s){var i=s.children;for(let e=0;e<i.length;e++){let t=i[e],s=this.model.widgets[t];s&&n.push(s)}}}else for(let a in this.model.widgets){let e=this.model.widgets[a];n.push(e)}if(n.sort((function(e,t){return e.y-t.y})),t){var r=[];for(let e=0;e<n.length;e++)t(n[e])&&r.push(n[e]);n=r}return n},getScreens:function(e){e||(e=this.model);var t=[];for(let s in e.screens){var n=e.screens[s];t.push(n)}return t.sort((function(e,t){return e.x-t.x})),t},getClickableWidgets:function(e){var t=[],n=e.children;for(let s=0;s<n.length;s++){let e=n[s],i=this.model.widgets[e];this.isClickable(i)&&t.push(i)}return t.sort((function(e,t){return e.y-t.y})),t},getModelChildren:function(e){var t=[];for(let n in this.model.widgets){let s=e.children.indexOf(n);s>=0&&t.push(this.model.widgets[n])}return t},getWidgetsWithoutParent:function(){var e=[],t=[];for(let i in this.model.screens){var n=this.model.screens[i];t=t.concat(n.children)}for(let i in this.model.widgets){var s=t.indexOf(i);s<0&&e.push(this.model.widgets[i])}return this.getOrderedWidgets(e)},getBoxById:function(e){if(this.model.widgets[e])return this.model.widgets[e];if(this.model.screens[e])return this.model.screens[e];if(this.model.templates&&this.model.templates[e])return this.model.templates[e];if(!e||!e.split)return console.debug("getBoxById() > ID is wrong: "+e),null;var t=e.split("@");if(2==t.length){var n=t[0],s=t[1],i=this.model.screens[s],r=this.model.widgets[n];if(i&&r){var o=this.getHoverScreen(r),l=o.x-i.x,h=o.y-i.y,c=a.Z.clone(r);return c.id=e,c.inherited=r.id,c.inheritedOrder=1,c.x-=l,c.y-=h,c}console.warn("getBoxById() > No screen or widget for inherited id ",e)}return null},getToLines:function(e){var t=[];for(var n in this.model.lines){var s=this.model.lines[n];s.to==e.id&&t.push(s)}return t},getLines:function(e,t){var n=[],s={};for(let i in this.model.lines){let t=this.model.lines[i];t.to!=e.id&&t.from!=e.id||(n.push(t),s[t.id]=!0)}if(e.children&&t)for(let i=0;i<e.children.length;i++){let t=e.children[i];for(let e in this.model.lines){let i=this.model.lines[e];s[i.id]||i.from!=t&&i.to!=t||n.push(i)}}return n},hasLine:function(e){for(let t in this.model.lines){let n=this.model.lines[t];if(n.from==e.id)return!0}return!1},getLine:function(e){for(let t in this.model.lines){let n=this.model.lines[t];if(n.from==e.id)return n}return null},getFromBox(e){let t=this.model.widgets[e.from];if(t||(t=this.model.screens[e.from]),!t&&this.model.groups){const n=this.model.groups[e.from];if(n){const e=this.getAllGroupChildren(n);t=this.getBoundingBox(e)}}return t},getToBox(e){var t=this.model.screens[e.to];if(t||(t=this.model.widgets[e.to]),!t&&e.isGroup&&this.model.groups){var n=this.model.groups[e.to];n&&(t=this.getBoundingBox(n.children))}return t},getTemplateGroupOrderChildren(e){let t=[];for(var n=0;n<e.children.length;n++){const s=e.children[n],i=this.model.templates[s];t.push(i)}return t=this.getOrderedWidgets(t),t},getBoundingBox(e){return u.Z.getBoundingBox(e,this.model)},getBoundingBoxByBoxes(e){return u.Z.getBoundingBoxByBoxes(e)},getHoverScreen(e){return u.Z.getHoverScreen(e,this.model)},_getHoverScreen(e,t){return u.Z.getHoverScreen(e,t)},_isBoxChild(e,t){return!(e.x+e.w<t.x||t.x+t.w<e.x||e.y+e.h<t.y||t.y+t.h<e.y)},_isContainedInBox:function(e,t){return!!(t&&e.x>=t.x&&e.x+e.w<=t.w+t.x&&e.y>=t.y&&e.y+e.h<=t.y+t.h)},countProps:function(e){var t=0;for(let n in e)e.hasOwnProperty(n)&&t++;return t},objectEquals:function(e,t){if(typeof e!==typeof t)return!1;if("function"===typeof e)return e.toString()===t.toString();if(e instanceof Object&&t instanceof Object){if(this.countProps(e)!==this.countProps(t))return!1;var n=!0;for(let s in e)if(n=this.objectEquals(e[s],t[s]),!n)return!1;return!0}return e===t},round:function(e){return Math.round(100*e)/100},formatTime:function(e){return e=Math.round(e/1e3),e+"s"},formatSTD:function(e){return'<span class="MatcDashTableTdHint">( +/- '+this.formatNumber(e)+")</span>"},formatRound:function(e){return Math.round(100*e)/100},formatNumber:function(e){return e>1e6?(e=Math.floor(e/1e6)+"M",e):e>1e3?(e=Math.floor(e/1e3)+"K",e):e>100?(e=Math.floor(e),e):(e=Math.round(10*e)/10,e)},formatPercent:function(e){e=Math.round(100*e);var t="MatchDashStatusFailure";return e>70?t="MatchDashStatusSuccess":e>35&&(t="MatchDashStatusOK"),'<span class="'+t+'">'+e+"%</span>"},formatDate:function(e,t){var n=new Date(e);return t?n.toLocaleDateString():n.toLocaleString()},formatString:function(e,t){return e.length>t&&(e=e.substring(0,t-3)+"..."),e},getNormalizeWidgetZValues(e){const t=[];for(var n in e)t.push({id:n,z:e[n]});this.sortWidgetList(t);let s=0,i=null;const r={};for(let a=0;a<t.length;a++){let e=t[a];null!==i&&i==e.z||(s++,i=e.z),r[e.id]=s}return r},getMinZValue(e){var t=1e5,n=0;for(var s in e){var i=e[s];t=Math.min(i.z,t),n++}return n>0?t:0},getMaxZValue(e){var t=-1e4,n=0;for(var s in e){var i=e[s];t=Math.max(i.z,t),n++}return n>0?t:0},getZValues(e){var t={};for(var n in e){var s=e[n];this.fixMissingZValue(s),t[n]=s.z}return t}},mounted(){}},T=B,L=(0,S.Z)(T,s,i,!1,null,null,null),D=L.exports},43371:function(e,t,n){n.d(t,{Z:function(){return i}});var s=n(4873);class i{constructor(e){this.data=e,this._isDataFrame=!0}as_array(){if(this.data.length)return this.data;var e=[];return this.foreach((function(t){e.push(t)})),e}as_dict(e){const t=this.as_array(),n={};return t.forEach((t=>{n[t[e]]=t})),n}push(e){this.data.push?this.data.push(e):console.warn("Data is not array. cannot push")}select(e,t,n){const s=[];let r=null;return"in"===t&&Array.isArray(n)&&(r={},n.forEach((e=>{r[e]=!0}))),this.foreach((function(i){const a=i[e];switch(t){case"==":a==n&&s.push(i);break;case">=":a>=n&&s.push(i);break;case"<=":a<=n&&s.push(i);break;case">":a>n&&s.push(i);break;case"<":a<n&&s.push(i);break;case"!=":a!=n&&s.push(i);break;case"in":(r&&r[a]||n.indexOf(a)>=0)&&s.push(i);break;default:break}})),new i(s)}columns(){var e=[];for(let t in this.data){let n=this.data[t];for(let t in n)e.push(t);break}return new i(e)}shape(){var e=this.size(),t=0;for(let n in this.data){let e=this.data[n];for(let n in e)t++;0==t&&(t=1);break}return[e,t]}length(){return this.size()}size(){if(this.data&&this.data.length)return this.data.length;if(this.data){var e=0;return this.foreach((function(){e++})),e}return 0}row(e,t){if(!t){var n=this.data[e];return null==n||!isNaN(n)||n._isDataFrame||n.substring?n:new i(n)}this.data[e]=t}column(e,t){if(!t){let t={};return this.foreach((function(e,n){t[n]=e}),e),new i(t)}var n=this.data;this.foreach((function(s,i){n[i][e]=t.get(i)}),e)}get(e,t,n){if(null!=t&&null!=e)return this.data[e][t];if(null!=e){var s=this.data[e];return s&&isNaN(s)&&!s._isDataFrame&&!s.substring?new i(s):(null!=s&&void 0!=s||(s=n),s)}}col(e){var t=[];return this.foreach((function(n,s){t[s]=n[e]})),new i(t)}hist(e,t,n,s){var r=[],a=!1,o=!1;this.foreach((function(t){var n=t;e&&(n=t[e]),r.push(n),a=!1===a?n:Math.max(a,n),o=!1===o?n:Math.min(o,n)})),null!=n&&void 0!=n&&(o=n),null!=s&&void 0!=s&&(a=s);var l=(a-o)/t,h=[];for(let i=0;i<t;i++)h[i]={bucket:i,count:0,from:i*l+o,to:(i+1)*l+o};for(let i=0;i<r.length;i++)for(var c=r[i],d=0;d<t;d++){var u=h[d];if(c>=u.from&&c<=u.to){u.count++;break}}return new i(h)}set(e,t,n){null!=t&&null!=e?this.data[e][t]=n:null!=e&&(this.data[e]=n)}sortBy(e,t){this.data.length||0==this.data.length?this.data.sort((function(n,s){return n._isDataFrame&&s._isDataFrame?t?s.get(e)-n.get(e):n.get(e)-s.get(e):t?s[e]-n[e]:n[e]-s[e]})):console.error("Can onyl sort array of objects!")}add(e,t){t||(t=e,e=null),t._isDataFrame?this.foreach((function(e,n){return e+t.get(n)}),e):this.foreach((function(e){return e+t}),e)}minus(e,t){t||(t=e,e=null),t._isDataFrame?(console.debu,this.foreach((function(e,n){return e-t.get(n)}),e)):this.foreach((function(e){return e-t}),e)}mutliply(e,t){t||(t=e,e=null),t._isDataFrame?this.foreach((function(e,n){return e*t.get(n)}),e):this.foreach((function(e){return e*t}),e)}divide(e,t){t||(t=e,e=null),t._isDataFrame?this.foreach((function(e,n){return e/t.get(n)}),e):this.foreach((function(e){return e/t}),e)}median(e){let t=[];return this.foreach((function(e){t.push(e)}),e),t=t.sort((function(e,t){return e-t})),t.length>0?t[Math.max(0,Math.floor(t.length/2)-1)]:0}mean(e){const t=this.sum(e);return 0===this.size()?0:1*t/this.size()}max(e){let t=Number.MIN_VALUE;return this.foreach((function(e){t=Math.max(t,e)}),e),t}min(e){let t=Number.MAX_VALUE;return this.foreach((function(e){t=Math.min(t,e)}),e),t}variance(e){var t=this.mean(e),n=0;return this.foreach((function(e){var s=t-e;n+=s*s}),e),1*n/this.size()}std(e){return Math.sqrt(this.variance(e))}sum(e){var t=0;return this.foreach((function(e){t+=e}),e),t}unique(e){var t={},n=0;return this.foreach((function(e){t[e]||(t[e]=!0,n++)}),e),n}uniqueValues(e){var t={},n=[];return this.foreach((function(e){t[e]||(t[e]=!0,n.push(e))}),e),new i(n)}count(e){var t={};return this.foreach((function(e){t[e]||(t[e]=0),t[e]++}),e),new i(t)}groupBy(e){var t={};return this.foreach((function(n){var s=n[e];t[s]||(t[s]=new i([])),t[s].push(n)})),new s.Z(t)}foreach(e,t){if(this.data.length)for(let n=0;n<this.data.length;n++){let s=this.data[n];if(t){let i=e(s[t],n);null!=i&&(s[t]=i)}else{let t=e(s,n);null!=t&&(this.data[n]=t)}}else for(let n in this.data){let s=this.data[n];if(t){let i=e(s[t],n);null!=i&&(s[t]=i)}else{let t=e(s,n);null!=t&&(this.data[n]=t)}}}setIndex(e){var t={},n=e.length;this.foreach((function(s,i){var r=t;for(let t=0;t<n;t++){var a=e[t];let o=s[a];r[o]||(t==n-1?null==r[o]?r[o]=i:console.error("Multi index not supoprted"):r[o]={}),r=r[o]}})),this.index=t}ix(e,t){if(this.index)for(var n=this.index,s=e.length,i=0;i<s;i++){var r=e[i];if(null==n[r])return null;if(i==s-1){var a=n[r];return t?{row:this.data[a],index:a}:this.data[a]}n=n[r]}else console.error("DataFrame.ix() > Error: No Index!");return null}remove(e){this.data.length?this.data.splice(e,1):delete this.data[e]}print(){var e=!1,t=this,n="";return this.foreach((function(s){if(!e){e=!0;for(let e in s)n+=t._correctLength(e,Math.max(20,e.length))+" | ";n+="\n"}for(let e in s)n+=t._correctLength(s[e]+"",Math.max(20,e.length))+" | ";n+="\n"})),console.debug(n),n}_correctLength(e,t){if(e+="",e.length<t)while(e.length<t)e+=" ";else e=e.substring(0,t-3)+".. ";return e}toCSV(e){var t="",n=e.length;return this.foreach((function(s){for(let r=0;r<n;r++){var i=e[r];r>0&&(t+=","),t+=s[i]}t+="\n"})),t}roundTimestampToDate(e){this.foreach((function(e){if(e){var t=new Date(e);return t.setMinutes(0),t.setMilliseconds(0),t.getTime()}return 0}),e)}merge(e){if(Array.isArray(this.data)&&Array.isArray(e.data)){let t=this.data.concat(e.data);return new i(t)}return console.error("DataFrame.merge() > Cannot merge to object frames"),new i([])}}},96200:function(e,t,n){n.d(t,{Z:function(){return f}});var s=n(28379),i=n(59344),r=n(16328),a=n(48039),o=n(78449),l=n(75790),h=n(77050),c=n(19721),d=n(54524),u=n(5356),m=null;class f extends u.Z{static getCurrentDialog(){return m}constructor(e){super(),this.autoClose=!0,this.wrapperClass="",this.overflow=!1,this.isFullScreen=!1,this.hasCSSAnimation=!0,e&&e.overflow&&(this.overflow=e.overflow),e&&e.hasCSSAnimation&&(this.hasCSSAnimation=e.hasCSSAnimation),this.log=new d.Z("Dialog")}destroy(){this.log.info("destroy","enter"),m=null,this.cleanUpEvented()}setFullScreen(e){this.hasFullScreen=!0,this.fullScreenListener=e}popup(e,t,n){this.log.log(1,"popup","enter"),m=this,c.Z.publish("vommond/dialog/open",{});var d=document.createElement("div");if(s.Z.add(d,"VommondDialogBackground VommondDialogHidden VommondDialogContentHidden"),this.hasFullScreen){let e=document.createElement("span");s.Z.add(e,"VommondDialogFullScreen mdi mdi-fullscreen"),d.appendChild(e),this.own((0,a.Z)(e,l.Z.press,i.Z.hitch(this,"toggleFullScreen",e)))}var u=document.createElement("div");s.Z.add(u,"VommondDialogContainer"),d.appendChild(u);var f=document.createElement("div");s.Z.add(f,"VommondDialogWrapper"),this.overflow&&s.Z.add(f,"VommondDialogWrapperOverflow"),n&&s.Z.add(f,n),s.Z.add(f,this.wrapperClass),u.appendChild(f);var g=document.createElement("div");s.Z.add(g,"VommondDialogContent"),(0,o.Z)("mobile")&&(s.Z.add(g,"VommondDialogContentMobile"),s.Z.add(f,"VommondDialogWrapperMobile")),f.appendChild(g),g.appendChild(e),r.Z.body().appendChild(d),this.own((0,a.Z)(d,"onmousewheel",i.Z.hitch(this,"stopScroll"))),this.own((0,a.Z)(d,"mousewheel",i.Z.hitch(this,"stopScroll"))),this.own((0,a.Z)(d,"DOMMouseScroll",i.Z.hitch(this,"stopScroll"))),this.own(c.Z.subscribe("matc/canvas/esc",i.Z.hitch(this,"close")));var p=this.getStartPos(t),v=h.Z.position(f),y=h.Z.position(d);if(this.autoClose&&this.own((0,a.Z)(d,l.Z.press,i.Z.hitch(this,"onBackClick"))),f.style.top=p.y+"px",f.style.height=p.h+"px",f.style.width=p.w+"px",f.style.left=p.x+"px",this.hasCSSAnimation){var w=p.w/v.w,C=p.h/v.h,b=" scale("+w+","+C+")";f.style.transform=b}setTimeout((()=>{s.Z.remove(d,"VommondDialogHidden")}),1),setTimeout((()=>{s.Z.remove(d,"VommondDialogContentHidden")}),350),setTimeout((()=>{this.hasCSSAnimation&&(f.style.transform="scale(1,1)"),f.style.top=Math.round((y.h-v.h)/2)+"px",f.style.height=v.h+"px",f.style.width=v.w+"px",f.style.left=Math.round((y.w-v.w)/2)+"px"}),100),this.hasCSSAnimation&&setTimeout((()=>{f.style.transform=""}),500),setTimeout((()=>this.emitOpen()),500),this._dialogBackground=d,this.node=e,this.wrapper=f}onOpen(e){this._onOpenCallback=e}emitOpen(){this._onOpenCallback&&this._onOpenCallback()}getStartPos(e){if(e)return h.Z.position(e);var t=h.Z.position(r.Z.body());return{w:0,h:0,x:t.w/2,y:t.h/2}}resize(e){let t=this.wrapper,n=this._dialogBackground;e.appendChild&&(e=h.Z.position(e,!0));var s=h.Z.position(n);t.style.top=Math.round((s.h-e.h)/2)+"px",t.style.height=e.h+"px",t.style.width=e.w+"px",t.style.left=Math.round((s.w-e.w)/2)+"px"}stopScroll(e){if(this._dialogBackground==e.target)return this.stopEvent(e),!1}onBackClick(e){var t=e.target;t==this._dialogBackground&&(this.stopEvent(e),s.Z.add(this._dialogBackground," VommondDialogHidden"),setTimeout(i.Z.hitch(this,"close"),300))}shake(){var e=h.Z.position(this.wrapper);s.Z.add(this.wrapper,"VommondDialogWrapperShake");var t=this.wrapper;setTimeout((function(){t.style.left=e.x+50+"px"}),1),setTimeout((function(){t.style.left=e.x-50+"px"}),51),setTimeout((function(){t.style.left=e.x+50+"px"}),101),setTimeout((function(){t.style.left=e.x-50+"px"}),151),setTimeout((function(){t.style.left=e.x+"px",s.Z.remove(t,"VommondDialogWrapperShake")}),201)}toggleFullScreen(e){this.isFullScreen=!this.isFullScreen,this.fullScreenListener&&this.fullScreenListener(this.isFullScreen),this.isFullScreen?(s.Z.remove(e,"mdi-fullscreen"),s.Z.add(e,"mdi-fullscreen-exit")):(s.Z.add(e,"mdi-fullscreen"),s.Z.remove(e,"mdi-fullscreen-exit"))}hide(){this.close()}close(){this.emit("close",{}),this._dialogBackground&&r.Z.body().removeChild(this._dialogBackground),this.destroy()}}},4873:function(e,t,n){n.d(t,{Z:function(){return i}});var s=n(43371);class i{constructor(e){this.data=e,this._isDataFrame=!1}as_array(){var e=[];return this.foreach((function(t){e.push(t)})),e}size(){return this._foreach("size")}get(e){return this.data[e]}count(e){var t=this._foreach("count",e);return new i(t.data)}max(e){return this._foreach("max",e)}min(e){return this._foreach("min",e)}mean(e){return this._foreach("mean",e)}variance(e){return this._foreach("variance",e)}std(e){return this._foreach("std",e)}sum(e){return this._foreach("sum",e)}unique(e){return this._foreach("unique",e)}groupBy(){}foreach(e){for(let n in this.data){var t=this.data[n];e(t,n)}}_foreach(e,t){var n={};for(let s in this.data){var i=this.data[s],r=i[e](t);n[s]=r}return new s.Z(n)}print(e){for(let n in this.data){var t=this.data[n];e&&t.foreach((function(e,t){console.debug("  ",t,e)}))}}}},23521:function(e,t,n){var s=n(43918);class i{constructor(){this.data={},this.entries=[],this.payloads={}}start(e,t){const n=(new Date).getTime();this.data[e]=n,this.payloads[e]=t}end(e,t=2){if(!this.data[e])return void s.Z.warn("PerformanceMonitor.end() > no key",e);const n=this.data[e],i=(new Date).getTime(),r=i-n;this.entries.push({duration:r,key:e,payload:this.payloads[e]}),r>1e3?(s.Z.warn("PerformanceMonitor.end() > "+e+" took "+r+"ms"),console.table(this.entries)):s.Z.log(t,"PerformanceMonitor.end() > "+e+" took "+r+"ms"),delete this.data[e],delete this.payloads[e]}}t.Z=new i},3270:function(e,t,n){var s=n(59344),i=n(43371),r=n(4873),a=n(23521);t.Z=class{filterEvents(e,t){a.Z.start("Analytics.filterEvents()",e.length);const n={};for(let a=0;a<t.length;a++){let e=t[a];e.isValid||(n[e.reference]=!0)}const s=[],i=e.length;for(let a=0;a<i;a++){var r=e[a];n[r.session]||s.push(r)}return a.Z.end("Analytics.filterEvents()"),s}getSurveyAnswers(e,t,n,s){a.Z.start("Analytics.getSurveyAnswers()",e.length);const r=s.showId,o=s.showTasksSucess,l=s.showTaskDetails,h=s.showTaskDetails,c={ids:[],rows:[],cols:[],tasks:[],meta:{}},d=new i.Z(e);d.sortBy("time");let u={};if(n.tasks){const e=this.getTaskPerformance(d,n.tasks);e.foreach((e=>{u[e.session]||(u[e.session]={}),u[e.session][e.task]=e}))}let m={},f={};Object.values(t.widgets).forEach((e=>{f[e.id]=e.type,e.props&&e.props.isSurveyElement&&"Password"!==e.type&&(m[e.id]=e.name)})),c.cols=Array.from(new Set(Object.values(m))),c.cols.sort(((e,t)=>e.localeCompare(t))),c.cols.forEach((e=>{c.meta[e]={type:"data"}})),r&&(c.cols.unshift("id"),c.meta["id"]={type:"id",hidden:!0}),n.tasks&&n.tasks.forEach((e=>{o&&(c.cols.push(e.name),c.meta[e.name]={type:"task",hidden:!0}),l&&(c.cols.push(e.name+"_Duration"),c.meta[e.name+"_Duration"]={type:"task",hidden:!0,header:!1}),h&&(c.cols.push(e.name+"_Interactions"),c.meta[e.name+"_Interactions"]={type:"task",hidden:!0,header:!1})}));const g=d.groupBy("session");return g.foreach(((e,s)=>{const i={},a=[];c.cols.forEach((e=>i[e]="-")),e.sortBy("time");const l=e.as_array();l.forEach((e=>{if(delete e.user,t.widgets[e.widget]&&e.widget&&e.state&&m[e.widget]){const t=m[e.widget];if("Rating"===f[e.widget])i[t]=1*e.state.value+1;else{const n=e.state.value;Array.isArray(n)?i[t]=n.join(", "):i[t]=n}}})),r&&(i["id"]=s),n.tasks&&n.tasks.forEach((e=>{if(u[s]&&u[s][e.id]){const t=u[s][e.id];a.push(t),o&&(i[e.name]="Completed"),o&&(i[e.name+"_Duration"]=Math.round(t.duration/1e3)),o&&(i[e.name+"Interactions"]=t.interactions)}})),c.tasks.push(a),c.ids.push(s),c.rows.push(i)})),a.Z.end("Analytics.getSurveyAnswers()"),c}nornalizeContainerChildEvents(e){return e.forEach((e=>{e.widget&&e.widget.indexOf("-")>0&&(e.widget=e.widget.substring(0,e.widget.indexOf("-")))})),e}getFirstNClicks(e,t){var n=new i.Z(e),s=n.groupBy("session"),r=[];return s.foreach((function(e){e.sortBy("time");for(var n=e.as_array(),s=0,i=0;i<n.length;i++){var a=n[i];"ScreenLoaded"==a.type||"OverlayLoaded"==a.type?s=0:a.x>=0&&a.y>=0&&!a.noheat&&s<t&&(r.push(a),s++)}})),r}getPValueBionimial(){}getScreenExplorationRate(e,t){const n=Object.keys(t.screens).length,s=e.groupBy("session"),i=s.unique("screen");return i.mean()/n}getSuccessTaskNames(e,t){const n={};for(var s=0;s<t.length;s++)n[t[s].id]=t[s].name;const i={},r=e.groupBy("session");return r.foreach(((e,t)=>{const s=[],r=e.count("task").data;for(let i in r)s.push(n[i]);s.sort(),i[t]=s})),i}getTagAnalytics(e){const t={},n={},s={};for(let i=0;i<e.length;i++){const r=e[i],a=r.sessions;for(let e in a){const i=a[e],r={};for(let e=0;e<i.length;e++){const a=i[e];t[a.tag]||(t[a.tag]=0),t[a.tag]++,r[a.tag]||(n[a.tag]||(n[a.tag]=0),n[a.tag]++,r[a.tag]=!0),s[a.tag]||(s[a.tag]=0),s[a.tag]+=a.start}}}const r=[];for(let i in t)r.push({tag:i,count:t[i],sessions:n[i],time:s[i]/t[i]});return new i.Z(r)}createMatcher(e,t,n){return{name:e,match:null,flowPos:0,step:t[0],endStep:t[t.length-1],flow:t,start:null,startTime:0,strict:n,taskName:"",usePartialMatches:!1,init(e){this.start=e,this.startTime=e.time,this.interactions=0},next(e,t){let n=null;if(this.match&&("WidgetClick"!=e.type&&"WidgetChange"!=e.type&&"ScreenGesture"!=e.type&&"WidgetGesture"!=e.type&&"ScreenClick"!=e.type||this.interactions++),this._match(this.step,e)){if(null==this.match&&(this.match={startTime:e.time,discoveryTime:e.time-this.startTime,endTime:1,startPosition:t,endPosition:-1,duration:0,count:-1,interactions:-1,partial:!1,session:e.session,task:this.name,user:e.user,taskName:this.taskName,hits:[]},"WidgetClick"!=e.type&&"WidgetChange"!=e.type&&"ScreenGesture"!=e.type&&"WidgetGesture"!=e.type&&"ScreenClick"!=e.type||this.interactions++),this.match.hits.push({time:e.time,pos:t,step:this.flowPos}),this.flow.length==this.flowPos+1){var s=this.getEndTime(e);this.match.endTime=s,this.match.endPosition=t,this.match.interactions=this.interactions,this.match.duration=this.match.endTime-this.match.startTime,this.match.count=this.match.endPosition-this.match.startPosition+1,n=this.match,this.match=null,this.flowPos=-1}this.flowPos++,this.step=this.flow[this.flowPos]}return this.usePartialMatches&&null!=this.match&&!this._match(this.step,this.endStep)&&this._match(this.endStep,e)&&(this.match.endTime=e.time,this.match.endPosition=t,this.match.duration=this.match.endTime-this.match.startTime,this.match.count=this.match.endPosition-this.match.startPosition+1,this.match.partial=!0,n=this.match,this.reset()),n},getEndTime(e){if(e.state&&e.state.children){for(var t=e.state.children,n=e.time,s=0;s<t.length;s++)n=Math.max(n,t[s].time);return n}return e.time},_match(e,t){if(e.screen==t.screen&&e.widget==t.widget&&e.type==t.type){if("ScreenGesture"==e.type&&"ScreenGesture"==t.type||"WidgetGesture"==e.type&&"WidgetGesture"==t.type)return!(!e.gesture||!t.gesture)&&e.gesture.type==t.gesture.type;if(("WidgetClick"==e.type||"WidgetChange"==e.type)&&e.state&&t.state){var n=e.state,s=t.state;return"text"==n.type||"typing"==n.type||"select"==n.type||"open"==n.type||"navigate"==n.type?n.type==s.type:n.type==s.type&&n.value==s.value}return!(e.state&&!t.state||!e.state&&t.state)}return!1},reset(){this.match=null,this.flowPos=0,this.step=t[0]}}}matchFlowInSession(e,t,n,s){const i=[],r=this.createMatcher(n,t,s);e.sortBy("time");const a=e.as_array(),o=a.length;r.init(a[0]);for(let l=0;l<o;l++){const e=a[l],n=r.next(e,l);n&&(s?t.length==n.count&&i.push(n):i.push(n))}return i}getFunnelInteraction(e,t,n){const s={},i=this.getTaskPerformance(e,[t]);if(i.data.forEach((e=>{this.addFunnelInteractionSteps(s,e,!1)})),n){const n=this.getFunnelTasks(t);n.forEach((n=>{if(n.flow.length>2&&n.flow.length<t.flow.length){const t=this.getTaskPerformance(e,[n]);t.data.forEach((e=>{s[e.session]||this.addFunnelInteractionSteps(s,e,!0)}))}}))}return s}addFunnelInteractionSteps(e,t,n=!1){let s=0;e[t.session]=[],t.hits.forEach((i=>{const r=i.pos-s;e[t.session].push({value:r,dropoff:n}),s=i.pos}))}getFunnelDuration(e,t,n=!1){const s={},i=this.getTaskPerformance(e,[t]);if(i.data.forEach((e=>{this.addFunnelDurartionSteps(s,e)})),n){const n=this.getFunnelTasks(t);n.forEach((n=>{if(n.flow.length>2&&n.flow.length<t.flow.length){const t=this.getTaskPerformance(e,[n]);t.data.forEach((e=>{s[e.session]||this.addFunnelDurartionSteps(s,e,!0)}))}}))}return s}addFunnelDurartionSteps(e,t,n=!1){let s=t.startTime;e[t.session]=[],t.hits.forEach((i=>{const r=i.time-s;e[t.session].push({value:r,dropoff:n}),s=i.time}))}getFunnelMax(e){let t=0;for(let n in e){let s=e[n];s.forEach((e=>{t=Math.max(t,e.value)}))}return t}getSessionSummary(e){const t={},n=e.groupBy("session");return n.foreach(((e,n)=>{const s=e.count("type"),i=s.get("ScreenLoaded",null,0)+s.get("OverlayLoaded",null,0),r=e.unique("screen"),a=e.select("type","in",["ScreenClick","WidgetClick","WidgetChange","ScreenGesture","WidgetGesture"]);t[n]={session:n,size:e.size(),interactions:a.size(),date:e.min("time"),duration:Math.ceil(e.max("time")-e.min("time")),screenLoads:i,screenUnique:r,screenRatio:r/i,errors:s.get("ValidationError",null,0)}})),t}getSessionDetails(e,t){e.sortBy("time");const n=this.getSessionSummary(e);Object.values(n).forEach((e=>{e.tasks=0;for(let n=0;n<t.length;n++){const s=t[n];e[s.id]={name:s.name,success:0,duration:-1,interactions:-1}}}));const s=this.getTaskPerformance(e,t).data;return s.forEach((e=>{const t=n[e.session];if(t){t.tasks++;const n=t[e.task];n.success=1,n.duration=e.duration,n.interactions=e.interactions}else console.error("Analytics.getSessionDetails() > No session ??")})),new i.Z(Object.values(n))}convertSessionDetails(e){return e.data.map((e=>{const t={};for(let n in e)if("start"!==n){const s=e[n];s.name?t[n]=s.success:t[n]=s}return t}))}getTaskPerformance(e,t,n,s){a.Z.start("Analytics.getTaskPerformance()");const r=[],o=[];for(let i=0;i<t.length;i++){const e=t[i],n=e.flow;if(n&&n.length>0){const t=this.createMatcher(e.id,n,e.strict);t.taskName=e.name,o.push(t)}}const l=o.length;e.sortBy("time");const h=e.groupBy("session");return h.foreach((e=>{const t=e.as_array(),i=t.length;for(let n=0;n<l;n++){const e=o[n];e.reset(),e.init(t[0]),e.disabled=!1}for(let a=0;a<i;a++){const e=t[a];for(let t=0;t<l;t++){const i=o[t];if(!i.disabled){const t=i.next(e,a);t&&(t.partial&&s||!t.partial)&&(i.strict?t.count==i.flow.length&&r.push(t):r.push(t),n||(i.disabled=!0))}}}})),a.Z.end("Analytics.getTaskPerformance()"),new i.Z(r)}getMergedTaskPerformance(e,t,n){let s=[];const r=this.getTaskPerformance(e,t);r.setIndex(["session","task"]);const a=n.length;for(let i=0;i<a;i++){const e=n[i];if(e.isValid){const t=e.reference;for(let n in e.tasks){const i=e.tasks[n],a=r.ix([t,n],!0);if(i&&!a)s.push({startTime:-1,discoveryTime:-1,endTime:-1,startPosition:-1,endPosition:-1,duration:0,count:-1,partial:!1,session:t,task:n,user:""});else if(a&&!i){const e=a.index;r.remove(e)}}}}return s=r.data.concat(s),new i.Z(s)}getFunnelSummary(e,t,n){const s=this.getFunnelTasks(t),i=this.getTaskSummary(e,s,n),r=e.count("session").size(),a=[{label:t.name+"_all",id:t.id+"_all",value:r,sessionCount:r,p:1,flow:0}],o=a.concat(i.reverse());for(let l=1;l<o.length;l++){const e=o[l];e.event=t.flow[l-1]}return o}getFunnelTasks(e){const t=[],n=s.Z.clone(e.flow);while(n.length>0){const i=s.Z.clone(e);i.id=e.id+"_"+n.length,i.name+=e.name+"_"+n.length,i.flow=s.Z.clone(n),t.push(i),n.pop()}return t}getTaskStarts(e,t){const n=t.map((e=>{const t=s.Z.clone(e);return t.id=e.id,t.name=e.name,t.flow=[e.flow[0]],t})),i=this.getTaskPerformance(e,n);return i}getTaskSummary(e,t,n){const s=e.count("session").size(),i=this.getMergedTaskPerformance(e,t,n),r=i.groupBy("task"),a=this.getTaskStarts(e,t),o=a.groupBy("task"),l=[];for(let h=0;h<t.length;h++){const e=t[h];let n=r.get(e.id);if(n){const t=n.size(),i=o.get(e.id);let r=i?i.size():s;n=n.select("startTime",">",0),l.push({label:e.name,id:e.id,value:t,sessionCount:s,sessionStart:r/s,p:t/r,success:t/r,successRel:t/r,successAbs:t,flow:e.flow.length,startCount:r,startRel:r/s,startMean:n.mean("startPosition"),startStd:n.std("startPosition"),discoveryTimeMean:n.mean("discoveryTime"),discoveryTimeStd:n.std("discoveryTime"),durationMean:n.mean("duration"),durationMedian:n.median("duration"),durationStd:n.std("duration"),countMean:n.mean("count"),countStd:n.std("count"),interactionsMean:n.mean("interactions"),interactionsStd:n.std("interactions")})}else l.push({label:e.name,id:e.id,sessionCount:s,value:0,p:0,success:0,successRel:0,successAbs:0,flow:e.flow.length,startAbs:0,startMean:0,startStd:0,discoveryTimeMean:0,discoveryTimeStd:0,durationMean:0,durationMedian:0,durationStd:0,countMean:0,countStd:0,interactionsMean:0,interactionsStd:0})}return l}getOverlayTimeGrouping(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t={},s=-1,r=null,a=null;if(e.foreach((function(e){a=e["type"],s=e["time"];var o=e["overlay"];if("OverlayLoaded"==a&&(t[o]=s,r=o),"OverlayRemoved"==a){if(t[o]){n[o]||(n[o]=new i.Z([]));var l=s-t[o];n[o].push(l)}delete t[o]}if("ScreenLoaded"==a){for(let e in t){n[e]||(n[e]=new i.Z([]));let r=s-t[e];n[e].push(r)}t={}}})),t[r]&&s>0&&"OverlayLoaded"!=a){n[r]||(n[r]=new i.Z([]));var o=s-t[r];n[r].push(o)}})),new r.Z(n,i.Z)}getScreenTimeGrouping(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t=-1,s=-1,r=null,a=null;if(e.foreach((function(e){a=e["type"],s=e["time"];var o=e["screen"];if("ScreenLoaded"==a){if(t>-1){n[r]||(n[r]=new i.Z([]));var l=s-t;n[r].push(l)}t=s,r=o}})),t>0&&s>0&&"ScreenLoaded"!=a){n[r]||(n[r]=new i.Z([]));var o=s-t;n[r].push(o)}})),new r.Z(n,i.Z)}getScreenTime(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t=-1,s=null,i=null,r=-1;if(e.foreach((function(e){var i=e["type"];r=e["time"];var a=e["screen"];if("ScreenLoaded"==i){if(t>-1){n[s]||(n[s]=0);var o=r-t;n[s]+=o}t=r,s=a}})),t>0&&r>0&&"ScreenLoaded"!=i){n[s]||(n[s]=0);var a=r-t;n[s]+=a}})),new i.Z(n)}getWidgetStatistics(e,t){var n={},s=t.select("type","==","WidgetClick"),i=s.count("widget"),r=i.sum(),a=this.getWidgetDiscoverTime(t),o=a.mean(),l=o.max(),h=a.std(),c=a.size(),d=this.getWidgetFirstClick(t),u=d.sum(),m=t.select("type","in",["ScreenLoaded","OverlayLoaded"]),f=m.count("screen");for(var g in e.widgets){var p=this._getParentScreenID(e,g);n[g]={clicksAbs:i.get(g,null,0),clicksRel:i.get(g,null,0)/r,discoverTimeAbs:o.get(g,null,0),discoverTimeRel:o.get(g,null,0)/l,discoverTimeStd:h.get(g,null,0),views:c.get(g,null,0),firstClicksAbs:d.get(g,null,0),firstClicksRelApp:d.get(g,null,0)/u,firstClicksRelScreen:d.get(g,null,0)/f.get(p,null,0)}}return n}_getParentScreenID(e,t){for(var n in e.screens){var s=e.screens[n],i=s.children.indexOf(t);if(i>-1)return s.id}return null}getWidgetDiscoverTime(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t=0,s={};e.foreach((function(e){var r=e["type"],a=e["widget"],o=e["time"];"ScreenLoaded"==r||"OverlayLoaded"==r?(t=o,s={}):"WidgetClick"==r&&a&&(s[a]||(n[a]||(n[a]=new i.Z([])),n[a].push(o-t),s[a]=!0))}))})),new r.Z(n)}getWidgetFirstClick(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t=0;e.foreach((function(e){var s=e["type"],i=e["widget"];"ScreenLoaded"==s||"OverlayLoaded"==s?t=0:"WidgetClick"==s&&i&&0==t&&(n[i]||(n[i]=0),n[i]++,t++)}))})),new i.Z(n)}getWidgetDiscoverOrder(e){var t=e.groupBy("session"),n={};return t.foreach((function(e){e.sortBy("time");var t=null,s=0;e.foreach((function(e){t=e["type"];var r=e["widget"];"ScreenLoaded"!=t&&"OverlayLoaded"!=t||(s=0),r&&(s++,n[r]||(n[r]=new i.Z([])),n[r].push(s))}))})),new r.Z(n,i.Z)}}}}]);
//# sourceMappingURL=275.b267d907.js.map