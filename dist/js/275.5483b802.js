"use strict";(self["webpackChunkquant_ux"]=self["webpackChunkquant_ux"]||[]).push([[275],{71021:function(e,t,s){s.d(t,{Z:function(){return p}});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"VommondCheckBoxWrapper"},[e._m(0),e.label?s("span",{staticClass:"VommondCheckBoxLabel"},[e._v(e._s(e.label))]):e._e()])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"VommondCheckBox"},[s("span",{staticClass:"VommondCheckBoxHook",attrs:{"data-dojo-attach-point":"hook"}})])}],i=s(40282),a=s(28379),o=s(75790),l=s(59344),h=s(48039),d=s(54524),c={name:"CheckBox",mixins:[i.Z],data:function(){return{checked:!1}},props:["label","value"],components:{},methods:{postCreate(){this.log=new d.Z("CheckBox"),this.own((0,h.Z)(this.domNode,o.Z.press,l.Z.hitch(this,"onChange"))),(this.value||"true"===this.value)&&this.setValue(!0)},getValue(){return this.checked},setValue(e){this.checked=e,e?a.Z.add(this.domNode,"VommondCheckBoxChecked"):a.Z.remove(this.domNode,"VommondCheckBoxChecked")},setLabel(e){this.label=e},onChange(e){this.stopEvent(e),this.setValue(!this.checked),this.emit("change",this.checked),this.emit("input",this.checked)}},watch:{value(e){this.setValue(e)}},mounted(){this.log.log(10,"mounted","enter")}},u=c,m=s(1001),g=(0,m.Z)(u,n,r,!1,null,null,null),p=g.exports},72712:function(e,t,s){s.d(t,{Z:function(){return _}});var n,r,i=s(40282),a=s(59344),o=s(28379),l=s(48039),h=s(16328),d=s(17386),c=s(77528),u=s(40475),m=s(42323),g=s(821),p=s(23521),f=s(42598),v=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},y=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"VommondSlideLeftButton"},[s("div",{staticClass:"VommondSlideLeftButtonLabel",attrs:{type:"button","data-dojo-attach-point":"button"}},[s("span",{staticClass:"MatcPointer mdi mdi-dots-horizontal",attrs:{"data-dojo-attach-point":"label"}})]),s("div",{staticClass:"VommondSlideLeftPopup",attrs:{"data-dojo-attach-point":"popup"}},[s("div",{staticClass:"VommondSlideLeftPopupCntr",attrs:{"data-dojo-attach-point":"cntr"}})])])}],w=s(75790),C={name:"SlideLeftButton",mixins:[i.Z],data:function(){return{value:!1,hasObjects:!1,updateLabel:!0,maxLabelLength:-1,openCSS:"VommondSlideLeftPopupOpen",labelCSS:"VommondSlideLeftPopupOpenLabel",isOpen:!1}},components:{},methods:{postCreate:function(){this._lis={},this.own((0,l.Z)(this.button,w.Z.press,a.Z.hitch(this,"toggleDropDown")))},toggleDropDown(e){this.stopEvent(e),this.isOpen?o.Z.remove(this.domNode,this.openCSS):o.Z.add(this.domNode,this.openCSS),this.isOpen=!this.isOpen},setOptions(e){this._lis={};for(var t=null,s=0;s<e.length;s++){var n=e[s],r=document.createElement("a");if(o.Z.add(r,"VommondSlideLeftPopupOpenItem"),(n.label||n.icon)&&null!=n.value){if(this.hasObjects=!0,n.icon){var i=document.createElement("span");o.Z.add(i,n.icon),r.appendChild(i)}if(n.label){var h=document.createElement("a");o.Z.add(h,this.labelCSS),h.innerHTML=n.label,r.appendChild(h)}n.selected&&(t=n.value),n.href?r.href=n.href:n.callback?this.own((0,l.Z)(r,w.Z.press,n.callback)):this.own((0,l.Z)(r,w.Z.press,a.Z.hitch(this,"onChange",n.value))),this._lis[n.value]=r}else r.innerHTML=n,this._lis[n]=r,this.own((0,l.Z)(r,w.Z.press,a.Z.hitch(this,"onChange",e[s])));this.cntr.appendChild(r)}this._options=e,t&&this.setValue(t)},onChange(e,t){this.stopEvent(t),this.emit("change",e,t)}},mounted(){}},S=C,b=s(1001),Z=(0,b.Z)(S,v,y,!1,null,null,null),x=Z.exports,k={},M={},B={name:"Util",mixins:[c.Z,i.Z],data:function(){return{eventLabels:{WidgetClick:"Click",ScreenLoaded:"View",ScreenClick:"Click",WidgetChange:"Change",ScreenScroll:"Scroll",OverlayLoaded:"View Overlay",OverlayRemoved:"Removed Overlay",ValidationError:"Widget ValiationError",ValidationErrorLine:"Form Validation Error",ValidationOK:"Validation OK",ScreenGesture:"Gesture",WidgetGesture:"Gesture"},gestureLabels:{swipeLeft:"Swipe Left",swipeRight:"Swipe Right",swipeUp:"Swipe Up",swipeDown:"Swipe Down"}}},components:{},methods:{getIcons(){return this._matcIcons},fixGestures(e){e.sort((function(e,t){return e.time-t.time}));for(var t=null,s=0,n=0;n<e.length;n++){var r=e[n];"SessionStart"==r.type&&(t=r.device),"ScreenGesture"==r.type&&r.gesture&&(r.gesture.start&&r.gesture.start.x>1&&t&&(r.gesture.start.x=Math.min(.99,r.gesture.start.x/t.w),r.gesture.start.y=Math.min(.99,r.gesture.start.y/t.h),s++),r.gesture.end&&r.gesture.end.x>1&&t&&(r.gesture.end.x=Math.min(.99,r.gesture.end.x/t.w),r.gesture.end.y=Math.min(.99,r.gesture.end.y/t.h),s++),r.gesture.start&&(r.x=r.gesture.start.x,r.y=r.gesture.start.y)),(r.x>1||r.y>1)&&console.warn("fixGestures() > exit. No device, could not fix! ")}s&&console.debug("fixGestures() > exit. Fixed Errors: ",s)},_distributedPositions(e,t,s){return f.qd(this.model,e,t,s)},getClones(e,t){var s=[],n=[],r=this.getBoundingBox(e),i=1;r.x>t.x&&(i=-1);var a=1;r.y>t.y&&(a=-1);var o=Math.floor(t.w/r.w),l=Math.floor(t.h/r.h),h=Math.round((t.w-o*r.w)/Math.max(1,o-1)),d=Math.round((t.h-l*r.h)/Math.max(1,l-1)),c={};for(let v=0;v<e.length;v++){let t=e[v];var u=this.getBoxById(t);c[t]={x:u.x-r.x,y:u.y-r.y,box:u}}var m=0;for(let v=0;v<o;v++)for(let t=0;t<l;t++)if(0!=v||0!=t){let o;for(let n=0;n<e.length;n++){o=e[n];var g=c[o],p={w:r.w,h:r.h,x:r.x+(v*(r.w+h)+g.x)*i,y:r.y+(t*(r.h+d)+g.y)*a,z:g.box.z,group:m,cloneOff:o};s.push(p)}var f={w:r.w,h:r.h,x:r.x+v*(r.w+h)*i,y:r.y+t*(r.h+d)*a,z:0,cloneOff:o};n.push(f),m++}return{previews:n,clones:s}},_getGroupChildResizePosition(e,t,s,n){return console.warn("DEPRECATED: _getGroupChildResizePosition()"),m.Z.getGroupChildResizePosition(e,t,s,n)},getObjectFromArray(e,t){return console.error("Util.vue .getObjectFromArray() > DEPRECATED!"),g.Z.getObjectFromArray(e,t)},getWidgetsByDistanceAndType(e,t){var s=[];if(this.model){let r=this.getParentScreen(e),i=r.children;for(let a=0;a<i.length;a++){let r=i[a];if(r!=e.id){let e=this.model.widgets[r];var n=e.type;t.indexOf(n)>=0&&s.push({d:0,y:e.y,w:e})}}s.sort((function(e,t){return e.y-t.y}))}return s},getObjectLength(e){return e?Object.keys(e).length:0},getEventStateLabel(e){return"hidden"==e.type?e.options.hidden?"Hide Password":"Show Password":"text"==e.type||"typing"==e.type?"Change Text":"checked"==e.type?e.value?"Checked":"Unchecked":"open"==e.type?"Open":"select"==e.type?"Select":"pos"==e.type?"Move":"open"==e.type?"Open Popup":"navigate"==e.type?"Popup Click":"Change"},getGestureLabel(e){return this.gestureLabels[e]?this.gestureLabels[e]:e},getEventLabel(e){return this.eventLabels[e]?this.eventLabels[e]:e},getScreenName(e,t=!1){if(this.model.screens[e]&&this.model.screens[e].name){let s=this.model.screens[e].name;return t&&s.length>16&&(s=s.substring(0,16)+"..."),s}return e},getWidgetName(e){return this.model.widgets[e]&&this.model.widgets[e].name?this.model.widgets[e].name:e},filterEvents(e,t){var s={};for(let o=0;o<t.length;o++){var n=t[o];n.isValid||(s[n.reference]=!0)}var r=[],i=e.length;for(let o=0;o<i;o++){var a=e[o];s[a.session]||r.push(a)}return r},getActionEvents(e){p.Z.start("Util.getActionEvents()");const t=e.select("type","in",["ScreenClick","WidgetClick","WidgetChange","ValidationError","ValidationErrorLine","ScreenLoaded","OverlayLoaded","OverlayRemoved","ScreenGesture","WidgetGesture"]);return p.Z.end("Util.getActionEvents()"),t},getClickEvents(e){return e.select("type","in",["ScreenClick","WidgetClick","WidgetChange"])},createEmptyImage(e,t,s){return{type:"Image",name:s,x:e,y:t,w:100,h:100,z:0,props:{},has:{onclick:!0,backgroundImage:!0,border:!0},actions:{},style:{borderTopRightRadius:0,borderTopLeftRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopWidth:0,borderBottomWidth:0,borderRightWidth:0,borderLeftWidth:0,borderTopColor:"#333333",borderBottomColor:"#333333",borderRightColor:"#333333",borderLeftColor:"#333333",backgroundImage:null}}},createEmptyScreen(e,t,s){return{x:e,y:t,h:this.model.screenSize.h,w:this.model.screenSize.w,name:s,type:"Screen",style:{background:"#ffffff"},min:{w:this.model.screenSize.w,h:this.model.screenSize.h},has:{image:!0},props:{start:!1},children:[]}},getAppTypeIcon(e){return"smartphone"==e.type?"mdi mdi-crop-portrait":(e.type,"mdi mdi-crop-landscape")},getDomain(){var e=window.location.hostname;return"127.0.0.1"==e||"flowalytics.com"==e?"flowalytics.com":"quant-ux.com"},ring(e,t,s,n,r,i){r||(r=200),i||(i=this.RING_BACKGROUND);var a=this.$new(k);return a.width=10,a.size=r,a.color=this.RING_FOREGROUND,a.backgroundColor=i,a.setLabel(e),a.setValue(t),a.setPs(s),a.placeAt(n),a},getDB(){return this.domBuilder||(this.domBuilder=new d.Z),this.domBuilder},progress(e,t,s,n){var r=document.getElementById(n),i=document.createElement("div");o.Z.add(i,"row"),r.appendChild(i);var a=document.createElement("div");o.Z.add(a,"col-md-4"),i.appendChild(a);var l=document.createElement("span");l.innerHTML=e,a.appendChild(l),a=document.createElement("div"),o.Z.add(a,"col-md-8"),i.appendChild(a);var h=this.$new(M);return h.color=this.PROGRESS_COLOR,h.placeAt(a),h.setValue(s),h},bulletGraph(e,t,s){for(var n=this.getDB(),r=0;r<t.length;r++){var i=t[r],a=n.div().build(e);n.div("MatcDashCompareTableLabelSmall",i.label).build(a);var l=n.div("").build(a);o.Z.add(l,"MatcDashCompareTableGraph");var h=this.$new(M);h.color=this.PROGRESS_COLOR,h.placeAt(l),h.setValue(i.p),i.empty?s&&h.setLabel(s):h.setLabel(i.a)}},bulletGraphTable(e,t,s){for(var n=this.getDB(),r=n.table(" MatcDashCompareTable").tbody().build(e),i=0;i<t.length;i++){var a=t[i],l=n.tr().build(r);n.td("MatcDashCompareTableLabel",a.label).build(l);var h=n.td("").build(l);if(a.empty)s&&n.span("MatcHint MatcLeft",s).build(h);else{o.Z.add(h,"MatcDashCompareTableGraph");var d=this.$new(M);d.color=!0,d.placeAt(h),d.setValue(a.p),d.setLabel(a.a)}}},createUserImage(e,t){var s=document.createElement("div");if(o.Z.add(s,"MatcUserImageCntr"),t.appendChild(s),e&&"guest"!=e.role)if(e.image){o.Z.add(s,"MatcUserImageCntrTrans");let t=document.createElement("img");t.src="/rest/user/"+e.id+"/images/"+e.name+"_"+e.lastname+"/"+e.image,o.Z.add(t,"MatcUserImage"),s.appendChild(t)}else{let t=document.createElement("div");o.Z.add(t,"MatcUserImageNone");var n=document.createElement("span");t.appendChild(n),o.Z.add(n,"MatcMiddle MatcUserLetters"),n.innerHTML=this.getUserLetter(e),s.appendChild(t)}else{let e=document.createElement("div");o.Z.add(e,"MatcCommentGuest"),e.innerHTML='<span class="mdi mdi-account"></span>',s.appendChild(e)}return s},getCommentUserName(e){return e.user&&e.user.name||e.user.lastname?this.getUserName(e.user):"Guest"},getUserLetter(e){let t="";if(e.name)t+=e.name.substring(0,1).toUpperCase(),e.lastname&&(t+=e.lastname.substring(0,1).toUpperCase());else{let s=e.email.split(".");s.length>0&&(t+=s[0].substring(0,1).toUpperCase()),s.length>1&&(t+=s[1].substring(0,1).toUpperCase())}return t},getUserName(e){var t="";return e.name&&(t=e.name+" "),e.lastname&&(t+=e.lastname),0==t.length&&(t=e.email),t},resizeSimulatorContainer(e,t,s){var n;return o.Z.add(t,"MatchSimulatorContainer"),"desktop"==e.type?(n=h.Z.getBox(),n.w=n.w*s,n.h=n.h*s,n=this.getScaledSize(n,"width",e),t.style.width=Math.round(n.w)+"px",t.style.height=Math.round(n.h)+"px"):(n={w:150,h:400},n=h.Z.getBox(),n.w=n.w*s,n.h=n.h*s,n=this.getScaledSize(n,"height",e),t.style.width=Math.ceil(n.w)+"px",t.style.height=Math.ceil(n.h)+"px"),n},renderCommentPopup(e,t,s,n,r){o.Z.add(s,"MatcActionBox");var i=n.div("MatcMarginBottom").build(s),h=n.div("MatcCommentRow").build(i),d=this.createUserImage(e.user,h);o.Z.add(d,"MatcUserImageCntrSmall MatcCommentPic");var c=n.div("MatcCommentText").build(h),u=n.div("MatcCommentMeta").build(c);if(n.div("MatcCommentMeta",this.getCommentUserName(e)).build(u),n.div("MatcCommentTime",this.formatDate(e.created)).build(u),e.userID==t.id){let t=n.textarea("form-control MatcIgnoreOnKeyPress",e.message).build(s);t.setAttribute("data-gramm_editor",!1),e.id?o.Z.add(t,"vommondInlineEdit"):t.focus();let r=n.div("MatcButtonBar MatcMarginTopL").build(s);if(e.id){var m=n.a("MatcButton MatcButtonPrimary","Update").build(r);this.tempOwn((0,l.Z)(m,"mousedown",a.Z.hitch(this,"onSaveComment",t,e)));let i=n.a("MatcLinkButton","Close").build(r);this.tempOwn((0,l.Z)(i,"mousedown",a.Z.hitch(this,"onCloseCommentPopup",e)));let o=this.$new(x);o.placeAt(s),o.setOptions([{value:"edit",icon:"mdi mdi-comment-edit-outline",callback:function(e){e.preventDefault(),e.stopPropagation(),t.focus(),t.select()}},{value:"delete",icon:"mdi mdi-trash-can-outline",callback:a.Z.hitch(this,"onDeleteComment",e)}])}else{let s=n.a("MatcButton MatcButtonPrimary","Create").build(r);this.tempOwn((0,l.Z)(s,"mousedown",a.Z.hitch(this,"onSaveComment",t,e)));let i=n.a("MatcLinkButton","Close").build(r);this.tempOwn((0,l.Z)(i,"mousedown",a.Z.hitch(this,"onCloseCommentPopup",e)))}}else{if(r){let t=this.$new(x);t.placeAt(s),t.setOptions([{value:"delete",icon:"mdi mdi-trash-can-outline",callback:a.Z.hitch(this,"onDeleteComment",e)}])}n.div("MatcCommentMessage",e.message).build(s);let t=n.div("MatcButtonBar MatcMarginTopL").build(s),i=n.a("MatcLinkButton","Close").build(t);this.tempOwn((0,l.Z)(i,"mousedown",a.Z.hitch(this,"onCloseCommentPopup",e)))}},getWidgets(e,t){var s=[];if(e){var n=this.model.screens[e];if(n){var r=n.children;for(let e=0;e<r.length;e++){let t=r[e],n=this.model.widgets[t];n&&s.push(n)}}}else for(let a in this.model.widgets){let e=this.model.widgets[a];s.push(e)}if(s.sort((function(e,t){return e.y-t.y})),t){var i=[];for(let e=0;e<s.length;e++)t(s[e])&&i.push(s[e]);s=i}return s},getScreens(e){e||(e=this.model);var t=[];for(let n in e.screens){var s=e.screens[n];t.push(s)}return t.sort((function(e,t){return e.x-t.x})),t},getClickableWidgets(e){var t=[],s=e.children;for(let n=0;n<s.length;n++){let e=s[n],r=this.model.widgets[e];this.isClickable(r)&&t.push(r)}return t.sort((function(e,t){return e.y-t.y})),t},getModelChildren(e){var t=[];for(let s in this.model.widgets){let n=e.children.indexOf(s);n>=0&&t.push(this.model.widgets[s])}return t},getWidgetsWithoutParent(){var e=[],t=[];for(let r in this.model.screens){var s=this.model.screens[r];t=t.concat(s.children)}for(let r in this.model.widgets){var n=t.indexOf(r);n<0&&e.push(this.model.widgets[r])}return this.getOrderedWidgets(e)},getBoxById(e){if(this.model.widgets[e])return this.model.widgets[e];if(this.model.screens[e])return this.model.screens[e];if(this.model.templates&&this.model.templates[e])return this.model.templates[e];if(!e||!e.split)return console.debug("getBoxById() > ID is wrong: "+e),null;var t=e.split("@");if(2==t.length){var s=t[0],n=t[1],r=this.model.screens[n],i=this.model.widgets[s];if(r&&i){var o=this.getHoverScreen(i),l=o.x-r.x,h=o.y-r.y,d=a.Z.clone(i);return d.id=e,d.inherited=i.id,d.inheritedOrder=1,d.x-=l,d.y-=h,d}console.warn("getBoxById() > No screen or widget for inherited id ",e)}return null},getToLines(e){var t=[];for(var s in this.model.lines){var n=this.model.lines[s];n.to==e.id&&t.push(n)}return t},getLines(e,t){var s=[],n={};for(let r in this.model.lines){let t=this.model.lines[r];t.to!=e.id&&t.from!=e.id||(s.push(t),n[t.id]=!0)}if(e.children&&t)for(let r=0;r<e.children.length;r++){let t=e.children[r];for(let e in this.model.lines){let r=this.model.lines[e];n[r.id]||r.from!=t&&r.to!=t||s.push(r)}}return s},hasLine(e){for(let t in this.model.lines){let s=this.model.lines[t];if(s.from==e.id)return!0}return!1},getLine(e){for(let t in this.model.lines){let s=this.model.lines[t];if(s.from==e.id)return s}return null},getFromBox(e){let t=this.model.widgets[e.from];if(t||(t=this.model.screens[e.from]),!t&&this.model.groups){const s=this.model.groups[e.from];if(s){const e=this.getAllGroupChildren(s);t=this.getBoundingBox(e)}}return t},getToBox(e){var t=this.model.screens[e.to];if(t||(t=this.model.widgets[e.to]),!t&&e.isGroup&&this.model.groups){var s=this.model.groups[e.to];s&&(t=this.getBoundingBox(s.children))}return t},getTemplateGroupOrderChildren(e){let t=[];for(var s=0;s<e.children.length;s++){const n=e.children[s],r=this.model.templates[n];t.push(r)}return t=this.getOrderedWidgets(t),t},getBoundingBox(e){return u.Z.getBoundingBox(e,this.model)},getBoundingBoxByBoxes(e){return u.Z.getBoundingBoxByBoxes(e)},getHoverScreen(e){return u.Z.getHoverScreen(e,this.model)},_getHoverScreen(e,t){return u.Z.getHoverScreen(e,t)},_isBoxChild(e,t){return!(e.x+e.w<t.x||t.x+t.w<e.x||e.y+e.h<t.y||t.y+t.h<e.y)},_isContainedInBox(e,t){return!!(t&&e.x>=t.x&&e.x+e.w<=t.w+t.x&&e.y>=t.y&&e.y+e.h<=t.y+t.h)},countProps(e){var t=0;for(let s in e)e.hasOwnProperty(s)&&t++;return t},objectEquals(e,t){if(typeof e!==typeof t)return!1;if("function"===typeof e)return e.toString()===t.toString();if(e instanceof Object&&t instanceof Object){if(this.countProps(e)!==this.countProps(t))return!1;var s=!0;for(let n in e)if(s=this.objectEquals(e[n],t[n]),!s)return!1;return!0}return e===t},round(e){return Math.round(100*e)/100},formatTime(e){return e=Math.round(e/1e3),e+"s"},formatSTD(e){return'<span class="MatcDashTableTdHint">( +/- '+this.formatNumber(e)+")</span>"},formatRound(e){return Math.round(100*e)/100},formatNumber(e){return e>1e6?(e=Math.floor(e/1e6)+"M",e):e>1e3?(e=Math.floor(e/1e3)+"K",e):e>100?(e=Math.floor(e),e):(e=Math.round(10*e)/10,e)},formatPercent(e){e=Math.round(100*e);var t="MatchDashStatusFailure";return e>70?t="MatchDashStatusSuccess":e>35&&(t="MatchDashStatusOK"),'<span class="'+t+'">'+e+"%</span>"},formatDate(e,t){var s=new Date(e);return t?s.toLocaleDateString():s.toLocaleString()},formatString(e,t){return e.length>t&&(e=e.substring(0,t-3)+"..."),e},getNormalizeWidgetZValues(e){const t=[];for(var s in e)t.push({id:s,z:e[s]});this.sortWidgetList(t);let n=0,r=null;const i={};for(let a=0;a<t.length;a++){let e=t[a];null!==r&&r==e.z||(n++,r=e.z),i[e.id]=n}return i},getMinZValue(e){var t=1e5,s=0;for(var n in e){var r=e[n];t=Math.min(r.z,t),s++}return s>0?t:0},getMaxZValue(e){var t=-1e4,s=0;for(var n in e){var r=e[n];t=Math.max(r.z,t),s++}return s>0?t:0},getZValues(e){var t={};for(var s in e){var n=e[s];this.fixMissingZValue(n),t[s]=n.z}return t}},mounted(){}},T=B,L=(0,b.Z)(T,n,r,!1,null,null,null),_=L.exports},43371:function(e,t,s){s.d(t,{Z:function(){return r}});var n=s(4873);class r{constructor(e){this.data=e,this._isDataFrame=!0}as_array(){if(this.data.length)return this.data;var e=[];return this.foreach((function(t){e.push(t)})),e}as_dict(e){const t=this.as_array(),s={};return t.forEach((t=>{s[t[e]]=t})),s}push(e){this.data.push?this.data.push(e):console.warn("Data is not array. cannot push")}select(e,t,s){const n=[];let i=null;return"in"===t&&Array.isArray(s)&&(i={},s.forEach((e=>{i[e]=!0}))),this.foreach((function(r){const a=r[e];switch(t){case"==":a==s&&n.push(r);break;case">=":a>=s&&n.push(r);break;case"<=":a<=s&&n.push(r);break;case">":a>s&&n.push(r);break;case"<":a<s&&n.push(r);break;case"!=":a!=s&&n.push(r);break;case"in":(i&&i[a]||s.indexOf(a)>=0)&&n.push(r);break;default:break}})),new r(n)}columns(){var e=[];for(let t in this.data){let s=this.data[t];for(let t in s)e.push(t);break}return new r(e)}shape(){var e=this.size(),t=0;for(let s in this.data){let e=this.data[s];for(let s in e)t++;0==t&&(t=1);break}return[e,t]}length(){return this.size()}size(){if(this.data&&this.data.length)return this.data.length;if(this.data){var e=0;return this.foreach((function(){e++})),e}return 0}row(e,t){if(!t){var s=this.data[e];return null==s||!isNaN(s)||s._isDataFrame||s.substring?s:new r(s)}this.data[e]=t}column(e,t){if(!t){let t={};return this.foreach((function(e,s){t[s]=e}),e),new r(t)}var s=this.data;this.foreach((function(n,r){s[r][e]=t.get(r)}),e)}get(e,t,s){if(null!=t&&null!=e)return this.data[e][t];if(null!=e){var n=this.data[e];return n&&isNaN(n)&&!n._isDataFrame&&!n.substring?new r(n):(null!=n&&void 0!=n||(n=s),n)}}col(e){var t=[];return this.foreach((function(s,n){t[n]=s[e]})),new r(t)}hist(e,t,s,n){var i=[],a=!1,o=!1;this.foreach((function(t){var s=t;e&&(s=t[e]),i.push(s),a=!1===a?s:Math.max(a,s),o=!1===o?s:Math.min(o,s)})),null!=s&&void 0!=s&&(o=s),null!=n&&void 0!=n&&(a=n);var l=(a-o)/t,h=[];for(let r=0;r<t;r++)h[r]={bucket:r,count:0,from:r*l+o,to:(r+1)*l+o};for(let r=0;r<i.length;r++)for(var d=i[r],c=0;c<t;c++){var u=h[c];if(d>=u.from&&d<=u.to){u.count++;break}}return new r(h)}set(e,t,s){null!=t&&null!=e?this.data[e][t]=s:null!=e&&(this.data[e]=s)}sortBy(e,t){this.data.length||0==this.data.length?this.data.sort((function(s,n){return s._isDataFrame&&n._isDataFrame?t?n.get(e)-s.get(e):s.get(e)-n.get(e):t?n[e]-s[e]:s[e]-n[e]})):console.error("Can onyl sort array of objects!")}add(e,t){t||(t=e,e=null),t._isDataFrame?this.foreach((function(e,s){return e+t.get(s)}),e):this.foreach((function(e){return e+t}),e)}minus(e,t){t||(t=e,e=null),t._isDataFrame?(console.debu,this.foreach((function(e,s){return e-t.get(s)}),e)):this.foreach((function(e){return e-t}),e)}mutliply(e,t){t||(t=e,e=null),t._isDataFrame?this.foreach((function(e,s){return e*t.get(s)}),e):this.foreach((function(e){return e*t}),e)}divide(e,t){t||(t=e,e=null),t._isDataFrame?this.foreach((function(e,s){return e/t.get(s)}),e):this.foreach((function(e){return e/t}),e)}median(e){let t=[];return this.foreach((function(e){t.push(e)}),e),t=t.sort((function(e,t){return e-t})),t.length>0?t[Math.max(0,Math.floor(t.length/2)-1)]:0}mean(e){const t=this.sum(e);return 0===this.size()?0:1*t/this.size()}max(e){let t=Number.MIN_VALUE;return this.foreach((function(e){t=Math.max(t,e)}),e),t}min(e){let t=Number.MAX_VALUE;return this.foreach((function(e){t=Math.min(t,e)}),e),t}variance(e){var t=this.mean(e),s=0;return this.foreach((function(e){var n=t-e;s+=n*n}),e),1*s/this.size()}std(e){return Math.sqrt(this.variance(e))}sum(e){var t=0;return this.foreach((function(e){t+=e}),e),t}unique(e){var t={},s=0;return this.foreach((function(e){t[e]||(t[e]=!0,s++)}),e),s}uniqueValues(e){var t={},s=[];return this.foreach((function(e){t[e]||(t[e]=!0,s.push(e))}),e),new r(s)}count(e){var t={};return this.foreach((function(e){t[e]||(t[e]=0),t[e]++}),e),new r(t)}groupBy(e){var t={};return this.foreach((function(s){var n=s[e];t[n]||(t[n]=new r([])),t[n].push(s)})),new n.Z(t)}foreach(e,t){if(this.data.length)for(let s=0;s<this.data.length;s++){let n=this.data[s];if(t){let r=e(n[t],s);null!=r&&(n[t]=r)}else{let t=e(n,s);null!=t&&(this.data[s]=t)}}else for(let s in this.data){let n=this.data[s];if(t){let r=e(n[t],s);null!=r&&(n[t]=r)}else{let t=e(n,s);null!=t&&(this.data[s]=t)}}}setIndex(e){var t={},s=e.length;this.foreach((function(n,r){var i=t;for(let t=0;t<s;t++){var a=e[t];let o=n[a];i[o]||(t==s-1?null==i[o]?i[o]=r:console.error("Multi index not supoprted"):i[o]={}),i=i[o]}})),this.index=t}ix(e,t){if(this.index)for(var s=this.index,n=e.length,r=0;r<n;r++){var i=e[r];if(null==s[i])return null;if(r==n-1){var a=s[i];return t?{row:this.data[a],index:a}:this.data[a]}s=s[i]}else console.error("DataFrame.ix() > Error: No Index!");return null}remove(e){this.data.length?this.data.splice(e,1):delete this.data[e]}print(){var e=!1,t=this,s="";return this.foreach((function(n){if(!e){e=!0;for(let e in n)s+=t._correctLength(e,Math.max(20,e.length))+" | ";s+="\n"}for(let e in n)s+=t._correctLength(n[e]+"",Math.max(20,e.length))+" | ";s+="\n"})),console.debug(s),s}_correctLength(e,t){if(e+="",e.length<t)while(e.length<t)e+=" ";else e=e.substring(0,t-3)+".. ";return e}toCSV(e){var t="",s=e.length;return this.foreach((function(n){for(let i=0;i<s;i++){var r=e[i];i>0&&(t+=","),t+=n[r]}t+="\n"})),t}roundTimestampToDate(e){this.foreach((function(e){if(e){var t=new Date(e);return t.setMinutes(0),t.setMilliseconds(0),t.getTime()}return 0}),e)}merge(e){if(Array.isArray(this.data)&&Array.isArray(e.data)){let t=this.data.concat(e.data);return new r(t)}return console.error("DataFrame.merge() > Cannot merge to object frames"),new r([])}}},96200:function(e,t,s){s.d(t,{Z:function(){return g}});var n=s(28379),r=s(59344),i=s(16328),a=s(48039),o=s(78449),l=s(75790),h=s(77050),d=s(19721),c=s(54524),u=s(5356),m=null;class g extends u.Z{static getCurrentDialog(){return m}constructor(e){super(),this.autoClose=!0,this.wrapperClass="",this.overflow=!1,this.isFullScreen=!1,this.hasCSSAnimation=!0,e&&e.overflow&&(this.overflow=e.overflow),e&&e.hasCSSAnimation&&(this.hasCSSAnimation=e.hasCSSAnimation),this.log=new c.Z("Dialog")}destroy(){this.log.info("destroy","enter"),m=null,this.cleanUpEvented()}setFullScreen(e){this.hasFullScreen=!0,this.fullScreenListener=e}popup(e,t,s){this.log.log(1,"popup","enter"),m=this,d.Z.publish("vommond/dialog/open",{});var c=document.createElement("div");if(n.Z.add(c,"VommondDialogBackground VommondDialogHidden VommondDialogContentHidden"),this.hasFullScreen){let e=document.createElement("span");n.Z.add(e,"VommondDialogFullScreen mdi mdi-fullscreen"),c.appendChild(e),this.own((0,a.Z)(e,l.Z.press,r.Z.hitch(this,"toggleFullScreen",e)))}var u=document.createElement("div");n.Z.add(u,"VommondDialogContainer"),c.appendChild(u);var g=document.createElement("div");n.Z.add(g,"VommondDialogWrapper"),this.overflow&&n.Z.add(g,"VommondDialogWrapperOverflow"),s&&n.Z.add(g,s),n.Z.add(g,this.wrapperClass),u.appendChild(g);var p=document.createElement("div");n.Z.add(p,"VommondDialogContent"),(0,o.Z)("mobile")&&(n.Z.add(p,"VommondDialogContentMobile"),n.Z.add(g,"VommondDialogWrapperMobile")),g.appendChild(p),p.appendChild(e),i.Z.body().appendChild(c),this.own((0,a.Z)(c,"onmousewheel",r.Z.hitch(this,"stopScroll"))),this.own((0,a.Z)(c,"mousewheel",r.Z.hitch(this,"stopScroll"))),this.own((0,a.Z)(c,"DOMMouseScroll",r.Z.hitch(this,"stopScroll"))),this.own(d.Z.subscribe("matc/canvas/esc",r.Z.hitch(this,"close")));var f=this.getStartPos(t),v=h.Z.position(g),y=h.Z.position(c);if(this.autoClose&&this.own((0,a.Z)(c,l.Z.press,r.Z.hitch(this,"onBackClick"))),g.style.top=f.y+"px",g.style.height=f.h+"px",g.style.width=f.w+"px",g.style.left=f.x+"px",this.hasCSSAnimation){var w=f.w/v.w,C=f.h/v.h,S=" scale("+w+","+C+")";g.style.transform=S}setTimeout((()=>{n.Z.remove(c,"VommondDialogHidden")}),1),setTimeout((()=>{n.Z.remove(c,"VommondDialogContentHidden")}),350),setTimeout((()=>{this.hasCSSAnimation&&(g.style.transform="scale(1,1)"),g.style.top=Math.round((y.h-v.h)/2)+"px",g.style.height=v.h+"px",g.style.width=v.w+"px",g.style.left=Math.round((y.w-v.w)/2)+"px"}),100),this.hasCSSAnimation&&setTimeout((()=>{g.style.transform=""}),500),setTimeout((()=>this.emitOpen()),500),this._dialogBackground=c,this.node=e,this.wrapper=g}onOpen(e){this._onOpenCallback=e}emitOpen(){this._onOpenCallback&&this._onOpenCallback()}getStartPos(e){if(e)return h.Z.position(e);var t=h.Z.position(i.Z.body());return{w:0,h:0,x:t.w/2,y:t.h/2}}resize(e){let t=this.wrapper,s=this._dialogBackground;e.appendChild&&(e=h.Z.position(e,!0));var n=h.Z.position(s);t.style.top=Math.round((n.h-e.h)/2)+"px",t.style.height=e.h+"px",t.style.width=e.w+"px",t.style.left=Math.round((n.w-e.w)/2)+"px"}stopScroll(e){if(this._dialogBackground==e.target)return this.stopEvent(e),!1}onBackClick(e){var t=e.target;t==this._dialogBackground&&(this.stopEvent(e),n.Z.add(this._dialogBackground," VommondDialogHidden"),setTimeout(r.Z.hitch(this,"close"),300))}shake(){var e=h.Z.position(this.wrapper);n.Z.add(this.wrapper,"VommondDialogWrapperShake");var t=this.wrapper;setTimeout((function(){t.style.left=e.x+50+"px"}),1),setTimeout((function(){t.style.left=e.x-50+"px"}),51),setTimeout((function(){t.style.left=e.x+50+"px"}),101),setTimeout((function(){t.style.left=e.x-50+"px"}),151),setTimeout((function(){t.style.left=e.x+"px",n.Z.remove(t,"VommondDialogWrapperShake")}),201)}toggleFullScreen(e){this.isFullScreen=!this.isFullScreen,this.fullScreenListener&&this.fullScreenListener(this.isFullScreen),this.isFullScreen?(n.Z.remove(e,"mdi-fullscreen"),n.Z.add(e,"mdi-fullscreen-exit")):(n.Z.add(e,"mdi-fullscreen"),n.Z.remove(e,"mdi-fullscreen-exit"))}hide(){this.close()}close(){this.emit("close",{}),this._dialogBackground&&i.Z.body().removeChild(this._dialogBackground),this.destroy()}}},4873:function(e,t,s){s.d(t,{Z:function(){return r}});var n=s(43371);class r{constructor(e){this.data=e,this._isDataFrame=!1}as_array(){var e=[];return this.foreach((function(t){e.push(t)})),e}size(){return this._foreach("size")}get(e){return this.data[e]}count(e){var t=this._foreach("count",e);return new r(t.data)}max(e){return this._foreach("max",e)}min(e){return this._foreach("min",e)}mean(e){return this._foreach("mean",e)}variance(e){return this._foreach("variance",e)}std(e){return this._foreach("std",e)}sum(e){return this._foreach("sum",e)}unique(e){return this._foreach("unique",e)}groupBy(){}foreach(e){for(let s in this.data){var t=this.data[s];e(t,s)}}_foreach(e,t){var s={};for(let n in this.data){var r=this.data[n],i=r[e](t);s[n]=i}return new n.Z(s)}print(e){for(let s in this.data){var t=this.data[s];e&&t.foreach((function(e,t){console.debug("  ",t,e)}))}}}},23521:function(e,t,s){var n=s(43918);class r{constructor(){this.data={},this.entries=[],this.payloads={}}start(e,t){const s=(new Date).getTime();this.data[e]=s,this.payloads[e]=t}end(e,t=2){if(!this.data[e])return void n.Z.warn("PerformanceMonitor.end() > no key",e);const s=this.data[e],r=(new Date).getTime(),i=r-s;this.entries.push({duration:i,key:e,payload:this.payloads[e]}),i>1e3?(n.Z.warn("PerformanceMonitor.end() > "+e+" took "+i+"ms"),console.table(this.entries)):n.Z.log(t,"PerformanceMonitor.end() > "+e+" took "+i+"ms"),delete this.data[e],delete this.payloads[e]}}t.Z=new r},3270:function(e,t,s){var n=s(59344),r=s(43371),i=s(4873),a=s(23521);t.Z=class{filterEvents(e,t){a.Z.start("Analytics.filterEvents()",e.length);const s={};for(let a=0;a<t.length;a++){let e=t[a];e.isValid||(s[e.reference]=!0)}const n=[],r=e.length;for(let a=0;a<r;a++){var i=e[a];s[i.session]||n.push(i)}return a.Z.end("Analytics.filterEvents()"),n}getSurveyAnswers(e,t,s,n){a.Z.start("Analytics.getSurveyAnswers()",e.length);const i=n.showId,o=n.showTasksSucess,l=n.showTaskDetails,h=n.showTaskDetails,d={ids:[],rows:[],cols:[],tasks:[],meta:{}},c=new r.Z(e);c.sortBy("time");let u={};if(s.tasks){const e=this.getTaskPerformance(c,s.tasks);e.foreach((e=>{u[e.session]||(u[e.session]={}),u[e.session][e.task]=e}))}let m={},g={};Object.values(t.widgets).forEach((e=>{g[e.id]=e.type,e.props&&e.props.isSurveyElement&&"Password"!==e.type&&(m[e.id]=e.name)})),d.cols=Array.from(new Set(Object.values(m))),d.cols.sort(((e,t)=>e.localeCompare(t))),d.cols.forEach((e=>{d.meta[e]={type:"data"}})),i&&(d.cols.unshift("id"),d.meta["id"]={type:"id",hidden:!0}),s.tasks&&s.tasks.forEach((e=>{o&&(d.cols.push(e.name),d.meta[e.name]={type:"task",hidden:!0}),l&&(d.cols.push(e.name+"_Duration"),d.meta[e.name+"_Duration"]={type:"task",hidden:!0,header:!1}),h&&(d.cols.push(e.name+"_Interactions"),d.meta[e.name+"_Interactions"]={type:"task",hidden:!0,header:!1})}));const p=c.groupBy("session");return p.foreach(((e,n)=>{const r={},a=[];d.cols.forEach((e=>r[e]="-")),e.sortBy("time");const l=e.as_array();l.forEach((e=>{if(delete e.user,t.widgets[e.widget]&&e.widget&&e.state&&m[e.widget]){const t=m[e.widget];if("Rating"===g[e.widget])r[t]=1*e.state.value+1;else{const s=e.state.value;Array.isArray(s)?r[t]=s.join(", "):r[t]=s}}})),i&&(r["id"]=n),s.tasks&&s.tasks.forEach((e=>{if(u[n]&&u[n][e.id]){const t=u[n][e.id];a.push(t),o&&(r[e.name]="Completed"),o&&(r[e.name+"_Duration"]=Math.round(t.duration/1e3)),o&&(r[e.name+"Interactions"]=t.interactions)}})),d.tasks.push(a),d.ids.push(n),d.rows.push(r)})),a.Z.end("Analytics.getSurveyAnswers()"),d}nornalizeContainerChildEvents(e){return e.forEach((e=>{e.widget&&e.widget.indexOf("-")>0&&(e.widget=e.widget.substring(0,e.widget.indexOf("-")))})),e}getFirstNClicks(e,t){var s=new r.Z(e),n=s.groupBy("session"),i=[];return n.foreach((function(e){e.sortBy("time");for(var s=e.as_array(),n=0,r=0;r<s.length;r++){var a=s[r];"ScreenLoaded"==a.type||"OverlayLoaded"==a.type?n=0:a.x>=0&&a.y>=0&&!a.noheat&&n<t&&(i.push(a),n++)}})),i}getPValueBionimial(){}getScreenExplorationRate(e,t){const s=Object.keys(t.screens).length,n=e.groupBy("session"),r=n.unique("screen");return r.mean()/s}getSuccessTaskNames(e,t){const s={};for(var n=0;n<t.length;n++)s[t[n].id]=t[n].name;const r={},i=e.groupBy("session");return i.foreach(((e,t)=>{const n=[],i=e.count("task").data;for(let r in i)n.push(s[r]);n.sort(),r[t]=n})),r}getTagAnalytics(e){const t={},s={},n={};for(let r=0;r<e.length;r++){const i=e[r],a=i.sessions;for(let e in a){const r=a[e],i={};for(let e=0;e<r.length;e++){const a=r[e];t[a.tag]||(t[a.tag]=0),t[a.tag]++,i[a.tag]||(s[a.tag]||(s[a.tag]=0),s[a.tag]++,i[a.tag]=!0),n[a.tag]||(n[a.tag]=0),n[a.tag]+=a.start}}}const i=[];for(let r in t)i.push({tag:r,count:t[r],sessions:s[r],time:n[r]/t[r]});return new r.Z(i)}createMatcher(e,t,s){return{name:e,match:null,flowPos:0,step:t[0],endStep:t[t.length-1],flow:t,start:null,startTime:0,strict:s,taskName:"",usePartialMatches:!1,init(e){this.start=e,this.startTime=e.time,this.interactions=0},next(e,t){let s=null;if(this.match&&("WidgetClick"!=e.type&&"WidgetChange"!=e.type&&"ScreenGesture"!=e.type&&"WidgetGesture"!=e.type&&"ScreenClick"!=e.type||this.interactions++),this._match(this.step,e)){if(null==this.match&&(this.match={startTime:e.time,discoveryTime:e.time-this.startTime,endTime:1,startPosition:t,endPosition:-1,duration:0,count:-1,interactions:-1,partial:!1,session:e.session,task:this.name,user:e.user,taskName:this.taskName,hits:[]},"WidgetClick"!=e.type&&"WidgetChange"!=e.type&&"ScreenGesture"!=e.type&&"WidgetGesture"!=e.type&&"ScreenClick"!=e.type||this.interactions++),this.match.hits.push({time:e.time,pos:t,step:this.flowPos}),this.flow.length==this.flowPos+1){var n=this.getEndTime(e);this.match.endTime=n,this.match.endPosition=t,this.match.interactions=this.interactions,this.match.duration=this.match.endTime-this.match.startTime,this.match.count=this.match.endPosition-this.match.startPosition+1,s=this.match,this.match=null,this.flowPos=-1}this.flowPos++,this.step=this.flow[this.flowPos]}return this.usePartialMatches&&null!=this.match&&!this._match(this.step,this.endStep)&&this._match(this.endStep,e)&&(this.match.endTime=e.time,this.match.endPosition=t,this.match.duration=this.match.endTime-this.match.startTime,this.match.count=this.match.endPosition-this.match.startPosition+1,this.match.partial=!0,s=this.match,this.reset()),s},getEndTime(e){if(e.state&&e.state.children){for(var t=e.state.children,s=e.time,n=0;n<t.length;n++)s=Math.max(s,t[n].time);return s}return e.time},_match(e,t){if(e.screen==t.screen&&e.widget==t.widget&&e.type==t.type){if("ScreenGesture"==e.type&&"ScreenGesture"==t.type||"WidgetGesture"==e.type&&"WidgetGesture"==t.type)return!(!e.gesture||!t.gesture)&&e.gesture.type==t.gesture.type;if(("WidgetClick"==e.type||"WidgetChange"==e.type)&&e.state&&t.state){var s=e.state,n=t.state;return"text"==s.type||"typing"==s.type||"select"==s.type||"open"==s.type||"navigate"==s.type?s.type==n.type:s.type==n.type&&s.value==n.value}return!(e.state&&!t.state||!e.state&&t.state)}return!1},reset(){this.match=null,this.flowPos=0,this.step=t[0]}}}matchFlowInSession(e,t,s,n){const r=[],i=this.createMatcher(s,t,n);e.sortBy("time");const a=e.as_array(),o=a.length;i.init(a[0]);for(let l=0;l<o;l++){const e=a[l],s=i.next(e,l);s&&(n?t.length==s.count&&r.push(s):r.push(s))}return r}getFunnelInteraction(e,t,s){const n={},r=this.getTaskPerformance(e,[t]);if(r.data.forEach((e=>{this.addFunnelInteractionSteps(n,e,!1)})),s){const s=this.getFunnelTasks(t);s.forEach((s=>{if(s.flow.length>2&&s.flow.length<t.flow.length){const t=this.getTaskPerformance(e,[s]);t.data.forEach((e=>{n[e.session]||this.addFunnelInteractionSteps(n,e,!0)}))}}))}return n}addFunnelInteractionSteps(e,t,s=!1){let n=0;e[t.session]=[],t.hits.forEach((r=>{const i=r.pos-n;e[t.session].push({value:i,dropoff:s}),n=r.pos}))}getFunnelDuration(e,t,s=!1){const n={},r=this.getTaskPerformance(e,[t]);if(r.data.forEach((e=>{this.addFunnelDurartionSteps(n,e)})),s){const s=this.getFunnelTasks(t);s.forEach((s=>{if(s.flow.length>2&&s.flow.length<t.flow.length){const t=this.getTaskPerformance(e,[s]);t.data.forEach((e=>{n[e.session]||this.addFunnelDurartionSteps(n,e,!0)}))}}))}return n}addFunnelDurartionSteps(e,t,s=!1){let n=t.startTime;e[t.session]=[],t.hits.forEach((r=>{const i=r.time-n;e[t.session].push({value:i,dropoff:s}),n=r.time}))}getFunnelMax(e){let t=0;for(let s in e){let n=e[s];n.forEach((e=>{t=Math.max(t,e.value)}))}return t}getSessionSummary(e){const t={},s=e.groupBy("session");return s.foreach(((e,s)=>{const n=e.count("type"),r=n.get("ScreenLoaded",null,0)+n.get("OverlayLoaded",null,0),i=e.unique("screen"),a=e.select("type","in",["ScreenClick","WidgetClick","WidgetChange","ScreenGesture","WidgetGesture"]);t[s]={session:s,size:e.size(),interactions:a.size(),date:e.min("time"),duration:Math.ceil(e.max("time")-e.min("time")),screenLoads:r,screenUnique:i,screenRatio:i/r,errors:n.get("ValidationError",null,0)}})),t}getSessionDetails(e,t){e.sortBy("time");const s=this.getSessionSummary(e);Object.values(s).forEach((e=>{e.tasks=0;for(let s=0;s<t.length;s++){const n=t[s];e[n.id]={name:n.name,success:0,duration:-1,interactions:-1}}}));const n=this.getTaskPerformance(e,t).data;return n.forEach((e=>{const t=s[e.session];if(t){t.tasks++;const s=t[e.task];s.success=1,s.duration=e.duration,s.interactions=e.interactions}else console.error("Analytics.getSessionDetails() > No session ??")})),new r.Z(Object.values(s))}convertSessionDetails(e){return e.data.map((e=>{const t={};for(let s in e)if("start"!==s){const n=e[s];n.name?t[s]=n.success:t[s]=n}return t}))}getTaskPerformance(e,t,s,n){a.Z.start("Analytics.getTaskPerformance()");const i=[],o=[];for(let r=0;r<t.length;r++){const e=t[r],s=e.flow;if(s&&s.length>0){const t=this.createMatcher(e.id,s,e.strict);t.taskName=e.name,o.push(t)}}const l=o.length;e.sortBy("time");const h=e.groupBy("session");return h.foreach((e=>{const t=e.as_array(),r=t.length;for(let s=0;s<l;s++){const e=o[s];e.reset(),e.init(t[0]),e.disabled=!1}for(let a=0;a<r;a++){const e=t[a];for(let t=0;t<l;t++){const r=o[t];if(!r.disabled){const t=r.next(e,a);t&&(t.partial&&n||!t.partial)&&(r.strict?t.count==r.flow.length&&i.push(t):i.push(t),s||(r.disabled=!0))}}}})),a.Z.end("Analytics.getTaskPerformance()"),new r.Z(i)}getMergedTaskPerformance(e,t,s){let n=[];const i=this.getTaskPerformance(e,t);i.setIndex(["session","task"]);const a=s.length;for(let r=0;r<a;r++){const e=s[r];if(e.isValid){const t=e.reference;for(let s in e.tasks){const r=e.tasks[s],a=i.ix([t,s],!0);if(r&&!a)n.push({startTime:-1,discoveryTime:-1,endTime:-1,startPosition:-1,endPosition:-1,duration:0,count:-1,partial:!1,session:t,task:s,user:""});else if(a&&!r){const e=a.index;i.remove(e)}}}}return n=i.data.concat(n),new r.Z(n)}getFunnelSummary(e,t,s){const n=this.getFunnelTasks(t),r=this.getTaskSummary(e,n,s),i=e.count("session").size(),a=[{label:t.name+"_all",id:t.id+"_all",value:i,sessionCount:i,p:1,flow:0}],o=a.concat(r.reverse());for(let l=1;l<o.length;l++){const e=o[l];e.event=t.flow[l-1]}return o}getFunnelTasks(e){const t=[],s=n.Z.clone(e.flow);while(s.length>0){const r=n.Z.clone(e);r.id=e.id+"_"+s.length,r.name+=e.name+"_"+s.length,r.flow=n.Z.clone(s),t.push(r),s.pop()}return t}getTaskStarts(e,t){const s=t.map((e=>{const t=n.Z.clone(e);return t.id=e.id,t.name=e.name,t.flow=[e.flow[0]],t})),r=this.getTaskPerformance(e,s);return r}getTaskSummary(e,t,s){const n=e.count("session").size(),r=this.getMergedTaskPerformance(e,t,s),i=r.groupBy("task"),a=this.getTaskStarts(e,t),o=a.groupBy("task"),l=[];for(let h=0;h<t.length;h++){const e=t[h];let s=i.get(e.id);if(s){const t=s.size(),r=o.get(e.id);let i=r?r.size():n;s=s.select("startTime",">",0),l.push({label:e.name,id:e.id,value:t,sessionCount:n,sessionStart:i/n,p:t/i,success:t/i,successRel:t/i,successAbs:t,flow:e.flow.length,startCount:i,startRel:i/n,startMean:s.mean("startPosition"),startStd:s.std("startPosition"),discoveryTimeMean:s.mean("discoveryTime"),discoveryTimeStd:s.std("discoveryTime"),durationMean:s.mean("duration"),durationMedian:s.median("duration"),durationStd:s.std("duration"),countMean:s.mean("count"),countStd:s.std("count"),interactionsMean:s.mean("interactions"),interactionsStd:s.std("interactions")})}else l.push({label:e.name,id:e.id,sessionCount:n,value:0,p:0,success:0,successRel:0,successAbs:0,flow:e.flow.length,startAbs:0,startMean:0,startStd:0,discoveryTimeMean:0,discoveryTimeStd:0,durationMean:0,durationMedian:0,durationStd:0,countMean:0,countStd:0,interactionsMean:0,interactionsStd:0})}return l}getOverlayTimeGrouping(e){var t=e.groupBy("session"),s={};return t.foreach((function(e){e.sortBy("time");var t={},n=-1,i=null,a=null;if(e.foreach((function(e){a=e["type"],n=e["time"];var o=e["overlay"];if("OverlayLoaded"==a&&(t[o]=n,i=o),"OverlayRemoved"==a){if(t[o]){s[o]||(s[o]=new r.Z([]));var l=n-t[o];s[o].push(l)}delete t[o]}if("ScreenLoaded"==a){for(let e in t){s[e]||(s[e]=new r.Z([]));let i=n-t[e];s[e].push(i)}t={}}})),t[i]&&n>0&&"OverlayLoaded"!=a){s[i]||(s[i]=new r.Z([]));var o=n-t[i];s[i].push(o)}})),new i.Z(s,r.Z)}getScreenTimeGrouping(e){var t=e.groupBy("session"),s={};return t.foreach((function(e){e.sortBy("time");var t=-1,n=-1,i=null,a=null;if(e.foreach((function(e){a=e["type"],n=e["time"];var o=e["screen"];if("ScreenLoaded"==a){if(t>-1){s[i]||(s[i]=new r.Z([]));var l=n-t;s[i].push(l)}t=n,i=o}})),t>0&&n>0&&"ScreenLoaded"!=a){s[i]||(s[i]=new r.Z([]));var o=n-t;s[i].push(o)}})),new i.Z(s,r.Z)}getScreenTime(e){var t=e.groupBy("session"),s={};return t.foreach((function(e){e.sortBy("time");var t=-1,n=null,r=null,i=-1;if(e.foreach((function(e){var r=e["type"];i=e["time"];var a=e["screen"];if("ScreenLoaded"==r){if(t>-1){s[n]||(s[n]=0);var o=i-t;s[n]+=o}t=i,n=a}})),t>0&&i>0&&"ScreenLoaded"!=r){s[n]||(s[n]=0);var a=i-t;s[n]+=a}})),new r.Z(s)}getWidgetStatistics(e,t){var s={},n=t.select("type","==","WidgetClick"),r=n.count("widget"),i=r.sum(),a=this.getWidgetDiscoverTime(t),o=a.mean(),l=o.max(),h=a.std(),d=a.size(),c=this.getWidgetFirstClick(t),u=c.sum(),m=t.select("type","in",["ScreenLoaded","OverlayLoaded"]),g=m.count("screen");for(var p in e.widgets){var f=this._getParentScreenID(e,p);s[p]={clicksAbs:r.get(p,null,0),clicksRel:r.get(p,null,0)/i,discoverTimeAbs:o.get(p,null,0),discoverTimeRel:o.get(p,null,0)/l,discoverTimeStd:h.get(p,null,0),views:d.get(p,null,0),firstClicksAbs:c.get(p,null,0),firstClicksRelApp:c.get(p,null,0)/u,firstClicksRelScreen:c.get(p,null,0)/g.get(f,null,0)}}return s}_getParentScreenID(e,t){for(var s in e.screens){var n=e.screens[s],r=n.children.indexOf(t);if(r>-1)return n.id}return null}getWidgetDiscoverTime(e){var t=e.groupBy("session"),s={};return t.foreach((function(e){e.sortBy("time");var t=0,n={};e.foreach((function(e){var i=e["type"],a=e["widget"],o=e["time"];"ScreenLoaded"==i||"OverlayLoaded"==i?(t=o,n={}):"WidgetClick"==i&&a&&(n[a]||(s[a]||(s[a]=new r.Z([])),s[a].push(o-t),n[a]=!0))}))})),new i.Z(s)}getWidgetFirstClick(e){var t=e.groupBy("session"),s={};return t.foreach((function(e){e.sortBy("time");var t=0;e.foreach((function(e){var n=e["type"],r=e["widget"];"ScreenLoaded"==n||"OverlayLoaded"==n?t=0:"WidgetClick"==n&&r&&0==t&&(s[r]||(s[r]=0),s[r]++,t++)}))})),new r.Z(s)}getWidgetDiscoverOrder(e){var t=e.groupBy("session"),s={};return t.foreach((function(e){e.sortBy("time");var t=null,n=0;e.foreach((function(e){t=e["type"];var i=e["widget"];"ScreenLoaded"!=t&&"OverlayLoaded"!=t||(n=0),i&&(n++,s[i]||(s[i]=new r.Z([])),s[i].push(n))}))})),new i.Z(s,r.Z)}}}}]);
//# sourceMappingURL=275.5483b802.js.map