"use strict";(self["webpackChunkquant_ux"]=self["webpackChunkquant_ux"]||[]).push([[55],{58761:function(t,e,s){s.d(e,{Z:function(){return l}});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.visible?s("div",{class:["ZoomDialogBackground",{ZoomDialogHidden:0==t.step},{ZoomDialogAnimation:t.step>=2}],on:{mousedown:t.close}},[s("div",{ref:"container",staticClass:"ZoomDialogContainer",on:{click:function(t){t.stopPropagation()},mousedown:function(t){t.stopPropagation()}}},[s("div",{ref:"wrapper",class:["ZoomDialogWrapper",{ZoomDialogWrapperOverflow:"visible"===t.overflow}]},[s("div",{ref:"content",staticClass:"ZoomDialogContent"},[t._t("default")],2)])])]):t._e()},a=[],i=(s(92222),{name:"ZoomDialog",props:["overflow"],data:function(){return{visible:!1,step:0}},methods:{show:function(t){var e=this,s=this.position(t);this.visible=!0,this.step=0,setTimeout((function(){e.animStep1(s)}),100)},animStep1:function(t){var e=this,s=this.$refs.container,n=this.$refs.content,a=this.position(n),i=t.w/a.w,o=t.h/a.h,r=Math.round(t.x-a.x),c=Math.round(t.y-a.y);s.style.transform="translate(".concat(r,"px, ").concat(c,"px) scale(").concat(i,", ").concat(o,")"),s.style.opacity=.3,this.step=1,setTimeout((function(){e.animStep2()}),100)},animStep2:function(){this.step=2;var t=this.$refs.container;t.style.transform="scale(1,1)",t.style.opacity=1},close:function(){this.visible=!1,this.step=0},position:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){t&&t.toLowerCase&&(t=document.getElementById(t));var s=t.getBoundingClientRect(),n={x:s.left,y:s.top,w:s.right-s.left,h:s.bottom-s.top};return e&&(n.x+=window.scrollX,n.y+=window.scrollY),n}return{x:0,y:0,w:100,h:100}},shake:function(){var t=this.$refs.wrapper;setTimeout((function(){t.style.left="50px"}),1),setTimeout((function(){t.style.left="-50px"}),51),setTimeout((function(){t.style.left="50px"}),101),setTimeout((function(){t.style.left="-50px"}),151),setTimeout((function(){t.style.left="0px"}),201)}}}),o=i,r=s(1001),c=(0,r.Z)(o,n,a,!1,null,null,null),l=c.exports},79944:function(t,e,s){s.d(e,{Z:function(){return H}});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcAppList"},[s("div",{staticClass:"MatcPageHeader"},[t._m(0),s("div",{staticClass:"MatcPageHeaderRight"},[t.hasSearch?s("div",{staticClass:"MatcListSearchCntr",attrs:{"data-dojo-attach-point":"searchCntr"}},[s("div",{staticClass:"MatcSearchForm"},[s("input",{attrs:{id:"MatcAppListSearchField",placeholder:"Search","data-dojo-attach-point":"searchInput"}}),s("QIcon",{staticClass:"MatcCreateSearchBtn",attrs:{icon:"Search"},on:{click:t.showSearch}})],1)]):t._e(),t.canAdd?s("a",{staticClass:"MatcButton MatcButtonPrimary  MatcButtonXS",on:{click:t.showNewDialog}},[t._v(" "+t._s(t.$t("app.create"))+" ")]):t._e()])]),s("CreateAppDialog",{ref:"dialog"}),s("div",{staticClass:"MatcAppListContainer",attrs:{"data-dojo-attach-point":"container"}})],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcPageHeaderLeft"},[s("h1",[t._v(" My Prototypes ")])])}],i=s(67906),o=s(16198),r=(s(74475),s(37268),s(2707),s(69826),s(41539),s(69720),s(68309),s(57327),s(40282)),c=s(28379),l=s(59344),d=s(48039),u=s(78449),h=s(54524),p=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcList"},[s("div",{staticClass:"MatcListContainer",attrs:{"data-dojo-attach-point":"container"}},[t._v("Loading...")])])}],v=s(77050),g=s(17386),f={name:"List",mixins:[r.Z],data:function(){return{columns:3,spacing:20,minSpacing:10,maxElementsToRender:1e3,maxElementsToRenderStep:200,colWidth:-1,grid:!1,add:!1,table:!1,animate:!0,isMobile:!1}},components:{},methods:{constructor:function(){this.log=new h.Z("List"),this.own((0,d.Z)(window,"resize",l.Z.hitch(this,"onResize")))},setValue:function(t){this.render(t,this.animate)},setColumns:function(t){this.columns=t},setSpacing:function(t){this.spacing=t},setItemFct:function(t){this.itemRenderFct=t},render:function(t,e){if(this.log.log(0,"render","enter > "+t.length),this.colWidth>0){var s=v.Z.position(this.container).w;this.columns=Math.floor(s/(this.colWidth+this.minSpacing)),this.log.log(3,"render","Set columns to "+this.columns)}var n=this.getColWidth(),a=this.getSpacing();this.container.innerHTML="";for(var i=document.createElement("div"),o=0,r=this.getElementsToRender(t),l=0;l<r;l++){var d=l+o;this._renderRow(d,i,n,a);var u=t[l],h=document.createElement("div");c.Z.add(h,"MatcListItem"),this.renderItem(h,u,l);var p=this.cols[d%this.columns];p.appendChild(h),e&&(c.Z.add(h,"MatcListItemHidden MatcListItemAnimated"),this.showItem(h,d))}this.container.appendChild(i),this._list=t,this.onRenderDone(t),this.renderMore(t,i),this.log.log(0,"render","exit > ")},renderMore:function(t,e){if(this.log.log(2,"renderMore","enter "+this.maxElementsToRender+" < "+t.length),this.maxElementsToRender<t.length){var s=new g.Z,n=s.div("MatcCenter MatcMarginBottom").a("MatcButton","Show More...").build(e);this.tempOwn((0,d.Z)(n,"click",l.Z.hitch(this,"showMore",t)))}},showMore:function(t){this.maxElementsToRender=Math.min(t.length,this.maxElementsToRenderStep+this.maxElementsToRender),this.log.log(2,"showMore","exit "+this.maxElementsToRender+" > "+t.length),this.onResize()},getElementsToRender:function(t){return this.log.log(2,"getElementsToRender","enter "+Math.min(t.length,this.maxElementsToRender)),Math.min(t.length,this.maxElementsToRender)},showItem:function(t,e){setTimeout((function(){c.Z.remove(t,"MatcListItemHidden")}),100+50*Math.min(e,10))},onRenderDone:function(){},onRenderAdd:function(){},renderItem:function(t,e,s){this.itemRenderFct&&this.itemRenderFct(t,e,s)},onBeforeResize:function(){},_renderRow:function(t,e,s,n){if(this.grid&&t%this.columns==0&&(this._colsCreated=!1),!this._colsCreated){var a=document.createElement("div");c.Z.add(a,"MatcListRow"),e.appendChild(a),this.cols=[];for(var i=0;i<this.columns;i++){var o=document.createElement("div");c.Z.add(o,"MatcListColumn"),o.style.width=s+"px",i<this.columns-1&&(o.style.marginRight=n+"px"),a.appendChild(o),this.cols[i]=o}this._colsCreated=!0}},getColWidth:function(){if(this.colWidth<0){var t=v.Z.position(this.container).w;return Math.floor((t-(this.columns-1)*this.spacing)/this.columns)}return this.colWidth},getSpacing:function(){if(this.spacing<0){var t=v.Z.position(this.container).w;return Math.floor((t-this.columns*this.colWidth)/(this.columns-1))}return this.spacing},cleanUp:function(){this._colsCreated=!1,this.cols=!0},onResize:function(){this.log.log(0,"onResize","enter"),this.cleanUp(),this.onBeforeResize(),this._list&&this.render(this._list)}},mounted:function(){}},b=f,w=s(1001),C=(0,w.Z)(b,p,m,!1,null,null,null),Z=C.exports,M=s(52426),S=s(38217),T=s(74702),y=s(77259),_=s(96200),x=s(66548),D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ZoomDialog",{ref:"dialog"},[s("div",{staticClass:"MatcDialog MatcResizeDialog"},[s("h2",{staticClass:"title"},[t._v("Create a new prototype")]),s("div",{staticClass:"form-group"},[s("label",[t._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"inputName",staticClass:"form-control",attrs:{type:"text",placeholder:"Enter App name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),s("div",{staticClass:"MatcErrorLabel"},[t._v(t._s(t.errorMessageName))])]),s("div",{staticClass:"form-group"},[s("label",[t._v("ScreenSize *")]),s("ScreenSizeSelector",{on:{change:t.setType}})],1),s("p",{staticClass:"has-text-grey is-size-6 MatcMarginBottom"},[t._v("* The screen size is measured in points and not pixel!")]),s("div",{staticClass:"MatcButtonBar"},[s("a",{staticClass:"MatcButton MatcButtonPrimary",on:{click:t.create}},[t._v("Create")]),s("a",{staticClass:"MatcLinkButton",on:{click:t.close}},[t._v("Cancel")])])])])},L=[],k=(s(92222),s(46161)),B=s(24246),E=s(58761),P={name:"CreateAppDialog",props:["pub"],mixins:[],data:function(){return{errorMessageName:"",name:"",type:null}},watch:{},components:{ScreenSizeSelector:k.Z,ZoomDialog:E.Z},methods:{close:function(){this.$refs.dialog.close()},show:function(t){this.$refs.dialog.show(t.target)},setType:function(t){this.type=t},create:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s,n,a;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.errorMessageName="",t.name){e.next=5;break}return t.$refs.dialog.shake(),t.errorMessageName="Please enter a name",e.abrupt("return");case 5:if(!t.$route.meta||!t.$route.meta.isTryout){e.next=10;break}t.logger.info("create","enter > tryout"),location.href="#/apps/tryout2.html?w=".concat(t.type.screenSize.w,"&h=").concat(t.type.screenSize.h,"&t=").concat(t.type.type),e.next=17;break;case 10:return t.logger.info("create","enter > user"),s=new B.Z,n=s.createAppModel(t.name,"",t.type),e.next=15,y.Z.getModelService().createApp(n);case 15:a=e.sent,a&&a.id?location.href="#/apps/"+a.id+"/create.html":t.showError("Could not create app");case 17:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.logger=new h.Z("CreateAppDialog"),setTimeout((function(){t.$refs.inputName&&t.$refs.inputName.focus()}),50);case 2:case"end":return e.stop()}}),e)})))()}},I=P,A=(0,w.Z)(I,D,L,!1,null,null,null),N=A.exports,R={name:"AppList",mixins:[r.Z,Z,M.Z],props:["small","big","pub","canAdd","size"],data:function(){return{columns:-1,spacing:-1,colWidth:240,maxElementsToRender:50,resizePreview:!1,popoverButtonLabel:"View",popoverVisible:!1,hasLink:!0,hasSearch:!0,searchFields:["name"],animate:!0,hasStackView:!1,isMobile:!1}},components:{QIcon:T.Z,CreateAppDialog:N},methods:{postCreate:function(){this.jwtToken=y.Z.getUserService().getToken(),this.isMobile=(0,u.Z)("mobile"),this.big&&(this.colWidth=352,c.Z.add(this.domNode,"MatcAppListBig"),this.columns=3),this.small&&(this.colWidth=180,c.Z.add(this.domNode,"MatcAppListSmall"),this.columns=1),this.isMobile&&c.Z.add(this.domNode,"MatcAppListMobile"),this.initListeners(),this.initLoading(),this.initSearch()},showNewDialog:function(t){this.$refs.dialog.show(t)},initLoading:function(){try{this.container.innerHTML="";var t=document.createElement("div");if(this.canAdd&&this.isMobile){var e=document.createElement("div");e.style.width=this.colWidth+"px",c.Z.add(e,"MatcListItem MatcAppListBox"),this.onRenderAdd(e),t.appendChild(e)}var s=document.createElement("div");c.Z.add(s,"MatcLoading"),s.innerHTML="Loading...",t.appendChild(s),this.container.appendChild(t)}catch(n){this.log.error("initLoading","Some error occuored"),this.log.sendError(n)}this.cleanUp()},initSearch:function(){this.searchInput.value="",this.hasSearch?(c.Z.remove(this.searchCntr,"hidden"),this.own((0,d.Z)(this.searchInput,"keypress",(function(t){t.stopPropagation()}))),this.own((0,d.Z)(this.searchInput,"keydown",(function(t){t.stopPropagation()}))),this.own((0,d.Z)(this.searchInput,"keyup",l.Z.hitch(this,"onSearch")))):c.Z.add(this.searchCntr,"hidden")},showSearch:function(){c.Z.add(this.searchCntr,"MatcListSearchVisible");var t=this;setTimeout((function(){t.searchInput.focus()}),10)},onSearch:function(t){t.stopPropagation(),this.cleanUp(),this.onBeforeResize();var e=this.searchInput.value;if(e&&e.length>=2){e=e.toLowerCase();for(var s=[],n=0;n<this.value.length;n++)for(var a=this.value[n],i=!1,o=0;o<this.searchFields.length;o++){var r=this.searchFields[o],l=a[r];!i&&l&&l.indexOf&&l.toLowerCase().indexOf(e)>=0&&(s.push(a),i=!0)}this.render(s),0===s.length&&c.Z.add(this.searchCntr,"MatcListSearchVisible")}else this.onBeforeResize(),this.render(this.value)},initListeners:function(){},load:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s,n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.pub){e.next=7;break}return e.next=3,y.Z.getModelService().findPublicSummaries();case 3:s=e.sent,t.setLoadingPreview(s),e.next=11;break;case 7:return e.next=9,y.Z.getModelService().findMyAppSummaries();case 9:n=e.sent,t.setLoadingPreview(n);case 11:case"end":return e.stop()}}),e)})))()},setLoadingPreview:function(t){var e=this;return(0,o.Z)((0,i.Z)().mark((function s(){var n,a;return(0,i.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.log.log(0,"setLoadingPreview","enter > "+t.length),t.sort((function(t,e){return e.lastUpdate-t.lastUpdate})),t=e.filterApps(t),e.value=t,e.render(t,e.animate),c.Z.add(e.domNode,"MatcAppListLoading"),!e.pub){s.next=13;break}return s.next=9,y.Z.getModelService().findPublic();case 9:n=s.sent,e.setApps(n),s.next=17;break;case 13:return s.next=15,y.Z.getModelService().findMyApps();case 15:a=s.sent,e.setApps(a);case 17:case"end":return s.stop()}}),s)})))()},setApps:function(t){this.log.log(0,"setApps","enter > "+t.length),t.sort((function(t,e){return e.lastUpdate-t.lastUpdate})),t=this.filterApps(t),this.value=t;for(var e=0;e<t.length;e++){var s=t[e];this.widgets[e]&&(this.widgets[e].loadingMessage="No Start Screen!",this.widgets[e].setModel(s))}c.Z.remove(this.domNode,"MatcAppListLoading"),this._list=t},filterApps:function(t){for(var e=[],s=0;s<t.length;s++){var n=t[s];n.isDeleted?console.warn("Filter deleted app",n):e.push(n)}return e},setValue:function(t){t.sort((function(t,e){return e.lastUpdate-t.lastUpdate})),this.value=t,this.render(t,!1)},renderItem:function(t,e,s){this.widgets||(this.widgets={});var n=document.createElement("a");t.appendChild(n),t=n,c.Z.add(t,"MatcAppListItem MatcContentBox MatcAppListBox");var a=this.createScreenWidget(e);if(a){if(this.hasStackView){var i=document.createElement("div");c.Z.add(i,"MatcAppListStack"),t.appendChild(i)}var o=document.createElement("div");c.Z.add(o,"MatcPreviewWrapper MatcPreviewWrapperLoadable"),this.setPreviewWrapperSize(o),a.loadingMessage="Loading...",t.appendChild(o),a.placeAt(o),this.widgets[s]=a,this.setMethod(n,e)}this.renderDescription(e,t)},setPreviewWrapperSize:function(t){if(this.resizePreview){var e=this.colWidth/this.model.screenSize.w,s=Math.min(Math.round(this.model.screenSize.h*e),.616*this.colWidth);t.style.height=s+"px"}},renderPopover:function(t){var e=document.createElement("span");c.Z.add(e," MatcPopoverBtn MatcVerticleCenter"),e.innerHTML=this.popoverButtonLabel,t.appendChild(e)},renderDescription:function(t,e){var s=this,n=document.createElement("div");c.Z.add(n,"MatcListItemDescription");var a=document.createElement("div");c.Z.add(a,"MatcListItemDescriptionTop"),n.appendChild(a);var i=document.createElement("h3");if(i.innerText=this.getDescription(t),a.appendChild(i),!this.pub){var o=document.createElement("div");o.innerText="...",c.Z.add(o,"MatcListItemDescriptionDots"),a.appendChild(o);var r=document.createElement("div");c.Z.add(r,"MatcListItemDescriptionMenu"),o.appendChild(r);var l=document.createElement("div");l.innerHTML=this.getNLS("btn.share"),r.appendChild(l),this.own((0,d.Z)(l,"click",(function(e){return s.onShare(e,t)})));var u=document.createElement("div");u.innerHTML=this.getNLS("btn.rename"),r.appendChild(u),this.own((0,d.Z)(u,"click",(function(e){return s.onRename(e,t)})));var h=document.createElement("div");h.innerHTML=this.getNLS("btn.delete"),r.appendChild(h),this.own((0,d.Z)(h,"click",(function(e){return s.onDelete(e,t)})))}var p=document.createElement("p");p.innerText=this.getNLS("app.lastEdit")+": "+this.formatDate(t.lastUpdate,!0),n.appendChild(p);var m=document.createElement("p");m.innerText=(t.sessionCount?t.sessionCount:0)+" "+this.getNLS("app.numberTests"),n.appendChild(m),e.appendChild(n)},onShare:function(t,e){var s=this;return(0,o.Z)((0,i.Z)().mark((function n(){var a,o,r,c,u,h,p,m,v;return(0,i.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s.stopEvent(t),n.next=3,y.Z.getModelService().findInvitation(e.id);case 3:a=n.sent,o=Object.entries(a).find((function(t){return 1===t[1]}))[0],r=s.db.div("MatcDialog MatcInfitationDialog MatcInfitationDialogLarge MatcPadding").build(),c=s.db.div("container").build(r),u=s.db.div("row").build(c),h=s.db.div("col-md-12").build(u),s.db.h3("",s.getNLS("share.Headline")).build(h),p=s.$new(x.Z),p.placeAt(h),p.setInvitation(o),p.setPublic(s.pub),u=s.db.div("row MatcMarginTop").build(c),h=s.db.div("col-md-12 MatcButtonBar").build(u),m=s.db.div("MatcButton","Close").build(h),v=new _.Z,v.own((0,d.Z)(m,"click",l.Z.hitch(v,"close"))),v.popup(r,t.target);case 20:case"end":return n.stop()}}),n)})))()},onDelete:function(t,e){var s=this;this.stopEvent(t);var n=this.db.div("MatcDeleteDialog").build();this.db.h3("title is-4","Delete Prototype").build(n),this.db.p("MatcMarginBottomXL","Do you want to delete the '".concat(e.name,"' prototype?")).build(n);var a=this.db.div("MatcButtonBar").build(n),i=this.db.a("MatcButton MatcButtonDanger",this.getNLS("btn.delete")).build(a),o=this.db.a("MatcLinkButton",this.getNLS("btn.cancel")).build(a),r=new _.Z;r.own((0,d.Z)(i,"click",(function(){return s.deleteApp(r,e)}))),r.own((0,d.Z)(o,"click",(function(){return r.close()}))),r.popup(n,t.target)},deleteApp:function(t,e){var s=this;return(0,o.Z)((0,i.Z)().mark((function n(){var a;return(0,i.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,y.Z.getModelService().deleteApp(e);case 2:t.close(),a=s.value.filter((function(t){return t.id!==e.id})),s.cleanUp(),s.onBeforeResize(),s.render(a);case 7:case"end":return n.stop()}}),n)})))()},onRename:function(t,e){var s=this;this.stopEvent(t);var n=this.db.div("MatcDeleteDialog").build();this.db.h3("title is-4","Rename Prototype").build(n);var a=this.db.div("MatcMarginBottomXL").input("form-control input-lg MatcIgnoreOnKeyPress",e.name,"Name of the prototype").build(n),i=this.db.div("MatcButtonBar").build(n),o=this.db.a("MatcButton",this.getNLS("btn.rename")).build(i),r=this.db.a("MatcLinkButton",this.getNLS("btn.cancel")).build(i),c=new _.Z;c.own((0,d.Z)(o,"click",(function(){return s.renameApp(c,e,a)}))),c.own((0,d.Z)(r,"click",(function(){return c.close()}))),c.popup(n,t.target)},renameApp:function(t,e,s){var n=this;return(0,o.Z)((0,i.Z)().mark((function a(){var o,r;return(0,i.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,y.Z.getModelService().updateAppProps(e.id,{id:e.id,name:s.value});case 2:o=a.sent,t.close(),"ok"===o.status?n.showSuccess("Name was saved..."):n.showError("Oooppps, Could not change the name. Try again!"),r=n.value.find((function(t){return t.id===e.id})),r&&(r.name=s.value),n.cleanUp(),n.onBeforeResize(),n.render(n.value);case 10:case"end":return a.stop()}}),a)})))()},formatDate:function(t,e){var s=new Date(t);return e?s.toLocaleDateString():s.toLocaleString()},onBeforeResize:function(){if(this.log.log(4,"onBeforeResize","enter"),this.widgets)for(var t=0;t<this.widgets.length;t++)this.widgets[t].destroy();this.widgets=[]},createScreenWidget:function(){var t=this.$new(S.Z);return t.mode="preview",t.isFillBackground=!0,t.setPublic(this.pub),t.setJwtToken(this.jwtToken),t},setMethod:function(t,e){this.pub?t.href="#/examples/"+e.id+".html":this.isMobile?t.href="#/test/mobile/"+e.id+".html":t.href="#/apps/"+e.id+".html"},getDescription:function(t){var e="";return t.name&&(e+=this.stripHTML(t.name)),e},onRenderDone:function(t){for(var e=0;e<t.length;e++){var s=t[e];this.widgets[e]&&this.widgets[e].setModel(s)}}},mounted:function(){this.db=new g.Z,this.log=new h.Z("AppList"),this.log.log(2,"mounted","enter"),this.load()}},$=R,U=(0,w.Z)($,n,a,!1,null,null,null),H=U.exports},24437:function(t,e,s){s.r(e),s.d(e,{default:function(){return v}});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcApps"},[s("section",{staticClass:"section"},[s("div",{staticClass:"container",attrs:{id:""}},[s("AppList",{attrs:{pub:!1,canAdd:!0}})],1)])])},a=[],i=s(67906),o=s(16198),r=s(54524),c=s(40282),l=s(77259),d=s(79944),u={name:"Apps",mixins:[c.Z],data:function(){return{apps:[],user:null}},watch:{},components:{AppList:d.Z},methods:{load:function(){}},mounted:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.logger=new r.Z("Apps"),t.user=l.Z.getUserService().getUser(),t.load(),t.logger.info("mounted","exit > ",t.user);case 4:case"end":return e.stop()}}),e)})))()}},h=u,p=s(1001),m=(0,p.Z)(h,n,a,!1,null,null,null),v=m.exports},38917:function(t,e,s){s.r(e),s.d(e,{default:function(){return g}});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("h2",{staticClass:"title"},[t._v("Create a new prototype")]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-6"},[s("form",[s("div",{staticClass:"form-group"},[s("label",[t._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"inputName",staticClass:"form-control",attrs:{type:"text",placeholder:"Enter App name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),s("div",{attrs:{"data-binding-error":"name"}})]),s("div",{staticClass:"form-group"},[s("label",[t._v("ScreenSize *")]),s("ScreenSizeSelector",{on:{change:t.setType}})],1)])])]),s("div",{staticClass:"MatcButtonBar"},[s("a",{staticClass:"MatcButton MatcButtonPrimary",on:{click:t.create}},[t._v("Create")]),s("a",{staticClass:"MatcLinkButton",attrs:{href:"#/apps/my-apps.html"}},[t._v("Cancel")])]),s("p",{staticClass:"has-text-grey is-size-6 MatcMarginTop"},[t._v("* The screen size is measured in points and not pixel!")])])])])},a=[],i=s(67906),o=s(16198),r=(s(92222),s(68309),s(54524)),c=s(40282),l=s(77259),d=s(46161),u=s(24246),h={name:"Create",mixins:[c.Z],data:function(){return{name:"",type:null}},watch:{},components:{ScreenSizeSelector:d.Z},methods:{setType:function(t){this.type=t},create:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s,n,a;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$route.meta||!t.$route.meta.isTryout){e.next=5;break}t.logger.info("create","enter > tryout"),location.href="#/apps/tryout2.html?w=".concat(t.type.screenSize.w,"&h=").concat(t.type.screenSize.h,"&t=").concat(t.type.type),e.next=12;break;case 5:return t.logger.info("create","enter > user"),s=new u.Z,n=s.createAppModel(t.name,"",t.type),e.next=10,l.Z.getModelService().createApp(n);case 10:a=e.sent,a&&a.id?location.href="#/apps/"+a.id+"/create.html":t.showError("Could not create app");case 12:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.logger=new r.Z("Create"),setTimeout((function(){t.$refs.inputName&&t.$refs.inputName.focus()}),50);case 2:case"end":return e.stop()}}),e)})))()}},p=h,m=s(1001),v=(0,m.Z)(p,n,a,!1,null,null,null),g=v.exports},83711:function(t,e,s){s.r(e),s.d(e,{default:function(){return ws}});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcApps"},[s("section",{staticClass:"section project-nav"},[s("div",{staticClass:"container"},[s("div",{staticClass:"level",staticStyle:{"margin-bottom":"40px"}},[s("div",{staticClass:"level-left"},[s("h2",{},[t._v(t._s(t.app.name))])]),t.isPublic?t._e():s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[t.app.id&&t.user.id&&!t.isPublic?s("Team",{attrs:{appID:t.app.id,userID:t.user.id}}):t._e()],1)])]),s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item tabs"},[s("ul",[s("li",{class:[{"is-active":"design"==t.tab}]},[s("a",{attrs:{href:"#/"+t.urlPrefix+"/"+t.appID+"/design.html"}},[t._v(t._s(t.$t("app.overview.design")))])]),s("span",{staticClass:"MatcOverviewChevron"},[t._v(" > ")]),s("li",{class:[{"is-active":"test"==t.tab||"video"===t.tab}]},[s("a",{attrs:{href:"#/"+t.urlPrefix+"/"+t.appID+"/test.html"}},[t._v(t._s(t.$t("app.overview.test")))])]),s("span",{staticClass:"MatcOverviewChevron"},[t._v(" > ")]),s("li",{class:[{"is-active":"analyze"==t.tab}]},[s("a",{attrs:{href:"#/"+t.urlPrefix+"/"+t.appID+"/analyze.html"}},[t._v(t._s(t.$t("app.overview.dash")))])])])])]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("a",{class:["MatcButton MatcButtonXS MatcButtonPrimary",{MatcButtonPassive:"X"==t.tab}],attrs:{href:"#/"+t.urlPrefix+"/"+t.appID+"/analyze/workspace.html",id:"overviewHeaderRunTest"}},[t._v(t._s(t.$t("app.overview.analytic-canvas")))])]),s("div",{staticClass:"level-item"},[s("a",{class:["MatcButton MatcButtonXS MatcButtonPrimary",{MatcButtonPassive:"X"==t.tab}],attrs:{target:"test",href:"#/test.html?h="+t.hash+"&log="+!t.isPublic,id:"overviewHeaderRunTest"}},[t._v(t._s(t.$t("app.overview.run-test")))])]),s("div",{staticClass:"level-item"},[s("a",{ref:"shareButton",staticClass:"MatcButton MatcButtonXS MatcButtonPrimary",on:{click:t.showShareDialog}},[t._v(t._s(t.$t("app.overview.share")))])])])])])]),s("div",{staticClass:"MatcContent"},["design"==t.tab?s("div",[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[t.appLoaded?s("ScreenList",{attrs:{app:t.app,pub:t.isPublic}}):t._e(),t.appLoaded?s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v(t._s(t.$t("comments.title")))]),s("Comment",{attrs:{appID:t.app.id,type:"overview",reference:"",contentID:"",insertPosition:"top"}})],1):t._e()],1)])]):t._e(),"test"==t.tab?s("div",[t.restLoaded?s("TestTab",{attrs:{loading:t.loading,app:t.app,test:t.testSettings,hash:t.hash,annotation:t.sessionAnnotations,events:t.events},on:{reloadEvents:t.reloadEvents,change:t.onTestChange}}):t._e()],1):t._e(),"analyze"==t.tab?s("div",[t.restLoaded?s("AnalyticsTab",{attrs:{loading:t.loading,app:t.app,hash:t.hash,test:t.testSettings,annotation:t.sessionAnnotations,events:t.events},on:{change:t.onTestChange}}):t._e()],1):t._e(),"heat"==t.tab?s("div",[t.restLoaded?s("HeatTab",{attrs:{loading:t.loading,app:t.app,test:t.testSettings,annotation:t.sessionAnnotations,events:t.events}}):t._e()],1):t._e(),"video"==t.tab?s("div",[t.restLoaded?s("VideoTab",{attrs:{loading:t.loading,app:t.app,test:t.testSettings,annotation:t.sessionAnnotations,events:t.events},on:{change:t.onAnnotationChange}}):t._e()],1):t._e(),"settings"==t.tab?s("div",[t.restLoaded?s("SettingsTab",{attrs:{loading:t.loading,app:t.app,user:t.user,invitations:t.invitations},on:{change:t.onSettingsChange}}):t._e()],1):t._e()])])},a=[],i=s(67906),o=s(16198),r=(s(21703),s(57327),s(41539),s(78783),s(33948),s(54524)),c=s(40282),l=s(96200),d=s(48039),u=s(59344),h=s(75790),p=s(17386),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"MatcScreenList "+t.screenType},[s("div",{staticClass:"MatcAppListContainer",attrs:{"data-dojo-attach-point":"container"}})])},v=[],g=(s(68309),s(28379)),f=s(72712),b=s(79944),w=s(38217),C=s(77259),Z={name:"AppScreenList",mixins:[b.Z,f.Z,c.Z],props:["app","pub"],data:function(){return{model:null,add:!1,hasSearch:!1,popoverButtonLabel:"Design",maxElementsToRender:20,resizePreview:!1,isPublic:!1,hasStackView:!1}},components:{},computed:{screenType:function(){return this.model?this.model.type:""}},methods:{load:function(){this.jwtToken=C.Z.getUserService().getToken(),this.app?this.setValue(this.app):console.warn("ScreenList.load() > No app")},setValue:function(t){this.model=t,this.value=this.getScreens(),0==this.value.length&&(this.add=!0),this.render(this.value,this.animate)},setInvitation:function(t){this.hash=t},setMethod:function(t,e){this.pub?t.href="#/examples/"+this.model.id+"/design/"+e.id+".html":t.href="#/apps/"+this.model.id+"/design/"+e.id+".html"},onTest:function(t,e){this.stopEvent(e),this.emit("test",t)},onRenderAdd:function(t){g.Z.add(t," MatcContentBox MatcAppListBox ");var e=document.createElement("a");g.Z.add(e,"MatcPointer"),t.appendChild(e);var s=document.createElement("div");g.Z.add(s," "),e.appendChild(s);var n=document.createElement("div");g.Z.add(n,"MatcApplListAdd"),s.appendChild(n);var a=document.createElement("span");g.Z.add(a,"mdi mdi-border-colo"),n.appendChild(a);var i=document.createElement("p");g.Z.add(i,"MatcHint MatcCenter MatcListItemDescription"),i.innerHTML="Click here to edit the prototype ",e.href="#/apps/"+this.model.id+"/design.html",t.appendChild(i)},createScreenWidget:function(){var t=this.$new(w.Z);return t.isFillBackground=!0,t.setJwtToken(this.jwtToken),t.setPublic(this.pub),this.hash&&t.setInvitation(this.hash),t},renderDescription:function(t,e){var s=this.getDescription(t),n=document.createElement("p");n.innerHTML=s,g.Z.add(n,"MatcListItemDescription"),e.appendChild(n)},getDescription:function(t){var e="";return t.name?e+=t.name:e+="Click to edit",e},onRenderDone:function(){try{for(var t=0;t<this.value.length;t++){var e=this.value[t];this.widgets[t]&&this.widgets[t].setModel(this.model,null===e||void 0===e?void 0:e.id)}}catch(s){console.error(s)}}},mounted:function(){}},M=Z,S=s(1001),T=(0,S.Z)(M,m,v,!1,null,null,null),y=T.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTest MatcLayout"},[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Tests "),s("HelpButton",{attrs:{topic:"testing",subtopic:"testing.howmany",hasNotifications:!1}})],1),s("div",{staticClass:"MatcForm",attrs:{id:"testUserCountCntr"}},[s("BulletGraph",{attrs:{value:t.sessionCount,sections:t.bulletGraphSection}})],1)])])]),s("section",{staticClass:"section",attrs:{"data-dojo-attach-point":"sectionDes"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless "},[s("h2",{staticClass:"title"},[t._v(" "+t._s(t.getNLS("testSettingsHeader"))+" "),s("HelpButton",{attrs:{topic:"testing",subtopic:"testing.landing",hasNotifications:!1}})],1),s("div",{staticClass:"MatcLayoutCols mb-32"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.test.description,expression:"test.description"}],staticClass:"form-control MatcTextAreaMedium MatcLayoutColGrow",attrs:{"data-gramm_editor":"false",placeholder:"Enter here a welcome message for your testers."},domProps:{value:t.test.description},on:{change:t.onTestChange,input:function(e){e.target.composing||t.$set(t.test,"description",e.target.value)}}}),s("div",{staticClass:"MatcLayoutCol3"},[s("div",{class:["MatUploader MatUploaderDropZone",{MatUploaderDropZoneHover:t.hasDragOver},{MatUploaderHasFile:t.hasSplash}],on:{dragenter:t.onDragEnter,dragleave:t.onDragLeave,drop:t.onDrop}},[t.hasSplash?s("div",{staticClass:"MatUploaderPreview",style:"background-image:url("+t.splashUrl+")"},[s("span",{staticClass:"MatUploaderPreviewRemove mdi mdi-close-circle",on:{click:t.onRemoveSplash}})]):s("div",{staticClass:"MatcHint"},[t._v(t._s(t.splashMessage))]),t.hasSplash?t._e():s("input",{attrs:{type:"file"},on:{change:t.onFileChanged}})])])]),s("div",{staticClass:"form-group "},[s("CheckBox",{attrs:{value:t.test.recordOneTestPerUser,label:t.getNLS("testSettingsRecordOneTestPerUser")},on:{change:t.setRecordOnePerUser}})],1)])])]),s("section",{staticClass:"section",attrs:{"data-dojo-attach-point":"sectionTask"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title",attrs:{"data-nls":"testSettingsTasks"}},[t._v("Tasks "),s("HelpButton",{attrs:{topic:"testing",subtopic:"testing.tasks",hasNotifications:!1}})],1),s("TestSettings",{attrs:{pub:t.pub,test:t.test,app:t.app,hash:t.hash},on:{change:t.onTaskChange}})],1)])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Screen Recordings")]),s("div",{ref:"sessionCntr",staticClass:"MatcDashTable"})])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Comments")]),t.app?s("Comment",{attrs:{appID:t.app.id,type:"overview_test",reference:"",contentID:"",insertPosition:"bottom"}}):t._e()],1)])])])},x=[],D=(s(74916),s(77601),s(2707),s(43371)),L=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},k=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vommondBulletGraph"},[s("div",{staticClass:"vommondBulletGraphContainer",attrs:{"data-dojo-attach-point":"cntr"}}),s("div",{staticClass:"vommondBulletGraphHelp",attrs:{"data-dojo-attach-point":"help"}})])}],B=s(79109),E=s(43788),P={name:"BulletGraph",mixins:[B.Z,E.Z,c.Z],props:["value","sections"],data:function(){return{max:40,barFullHeigh:!0}},components:{},methods:{postCreate:function(){this.barFullHeigh&&g.Z.add(this.domNode,"vommondBulletGraphColor")},setSections:function(t){t.sort((function(t,e){return e.value-t.value}));for(var e=new p.Z,s=0;s<t.length;s++){var n=t[s],a=e.div("vommondBulletGraphSection vommondBulletGraphSection"+s).build(this.cntr);a.style.width=Math.round(n.value/this.max*100)+"%",n.background&&(a.style.background=n.color);var i=e.span("vommondLegendBarItem").build(a),o=e.div("vommondLegendBarItemLabel",n.value).build(i);this.addTooltip(o,n.label)}this.sections=t},setLabel:function(t){this.bar.innerHTML="";var e=document.createElement("div");if(g.Z.add(e,"vommondBulletGraphBarLbl"),this.value/this.max<.05&&g.Z.add(e,"vommondBulletGraphBarLblRight"),e.innerHTML=t,!this.bar){var s=new p.Z;this.bar=s.div("vommondBulletGraphBar").build(this.cntr)}this.bar.appendChild(e)},showHint:function(t){this.help.textContent=t.label},hideHint:function(){this.help.textContent=""},setValue:function(t){if(!this.bar){var e=new p.Z;this.bar=e.div("vommondBulletGraphBar").build(this.cntr)}if(isNaN(t)&&(t=0),this.bar.style.width=Math.min(100,Math.round(t/this.max*100))+"%",this.value=t,this.color){var s=Math.min(t/this.max,1);this.invertColors&&(s=1-s),this.bar.style.background=this.greenToRed(s)}else{var n=this.getSectionColor(t);n&&(this.bar.style.background=n)}},getSectionColor:function(t){for(var e=null,s=0;s<this.sections.length;s++){var n=this.sections[s];if(e=n.color,t>=n.value)break}return e}},watch:{value:function(t){this.value=t,this.setValue(this.value),this.setLabel(this.value)}},mounted:function(){this.sections&&this.setSections(this.sections),this.value&&(this.setValue(this.value),this.setLabel(this.value))}},I=P,A=(0,S.Z)(I,L,k,!1,null,null,null),N=A.exports,R=s(20103),$=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},U=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vommondTable"},[s("div",{staticClass:"MatcLoading"},[t._v("Loading...")])])}],H=(s(54747),s(66309)),V={name:"Table",mixins:[c.Z],data:function(){return{itemsPerPage:100,itemPointer:0,isSortable:!0,order:!0,hasPaging:!1,totalCount:0,columns:null,actions:null,rows:[],actionLabel:"Action"}},components:{},methods:{postCreate:function(){this.logger=new r.Z("Table"),this.logger.log(2,"constructor","entry"),this.actionLabel=this.getNLS("table.action")},setColumns:function(t){this.columns=t},setPaging:function(t){this.hasPaging=t},setPagingSize:function(t){this.itemsPerPage=t},setActions:function(t){this.actions=t},setValue:function(t){this.logger.log(8,"setValue","entry"),this.rows=t,this.totalCount=t.length,this.render(),this.logger.log(10,"setValue","exit")},render:function(){this.logger.log(2,"_refresh","entry > pos : "+this.itemPointer+" _sortBy : "+this.sortBy),this.cleanUpTempListener(),this.domNode.innerHTML="";var t=new p.Z,e=t.table("table is-hoverable").build();this.renderHeader(e,t),this.renderBody(e,t),this.domNode.appendChild(e),this.hasPaging&&this.createPagging()},renderHeader:function(t,e){for(var s=e.element("thead").build(t),n=e.element("tr").build(s),a=0;a<this.columns.length;a++){var i=this.columns[a],o=e.td().build(n);i.width&&(o.style.width=i.width+"%");var r=i.label;if(this.isSortable){var c=e.a("",r).build(o);this.tempOwn((0,d.Z)(c,h.Z.press,u.Z.hitch(this,"_sort",i)));var l=e.span("vommondTableSortSymbol").build(o);this.sortBy==i.query?this.order?l.innerHTML='<span class="mdi mdi-chevron-up"></span>':l.innerHTML='<span class="mdi mdi-chevron-down"></span':l.innerHTML=" "}else o.innerHTML=r}this.actions&&e.td("action",this.actionLabel).build(n)},renderBody:function(t,e){this.logger.log(2,"createDataRows","entry ");var s=e.element("tbody").build(t),n=0,a=this;this.rows.forEach((function(t){a.renderRow(t,s,n,e),n++}))},renderRow:function(t,e,s,n){this.logger.log(4,"renderRow","entry ");var a=n.element("tr","dataRow").build(e);s%2==0&&g.Z.add(a,"evenRow");for(var i=0;i<this.columns.length;i++){var o=this.columns[i],r=n.td(o.css,"").build(a);if(o.edit){var c=n.input("vommondInlineEdit").build(r);this.setInputValue(c,t,o),this.tempOwn((0,d.Z)(c,"change",u.Z.hitch(o,"edit",c,t,i)))}else this.setTDValue(r,t,o)}if(this.actions)for(var l=n.td("action").build(a),p=0;p<this.actions.length;p++){var m=this.actions[p];if(m.render)m.render(l,t,s);else{var v=n.a(m.css,m.label).build(l);m.icon&&(console.debug(m),v.appendChild((0,H.X)(m.icon))),m.callback&&this.tempOwn((0,d.Z)(v,h.Z.press,u.Z.hitch(m,"callback",t,s,l)))}}},setTDValue:function(t,e,s){if(s.fct)s.fct(t,e,s.query);else{var n=e[s.query];null!=n&&void 0!=n||(n="-"),t.innerHTML=n+" ",s.suffix&&(t.innerHTML+=s.suffix)}},setInputValue:function(t,e,s){s.fct?s.fct(t,e,s.query):t.value=e[s.query]+" "},createPagging:function(){if(this.logger.log(-3,"createPagging","entry > total : "+this.totalCount+" >  page : "+this.itemsPerPage+" > current:  "+this.itemPointer),this.totalCount>this.itemsPerPage){var t=document.createElement("div");g.Z.add(t,"pagination pagination-small");var e=document.createElement("ul");t.appendChild(e);for(var s=Math.ceil(this._totalCount/this.itemsPerPage),n=0;n<s;n++){var a=document.createElement("li");if(e.appendChild(a),a.innerHTML=n+1+"",n*this.itemsPerPage==this.itemPointer)g.Z.add(a,"active");else{var i=(0,d.Z)(a,"click",u.Z.hitch(this,"setPos",n*this.itemsPerPage));this.tempOwn(i)}}this.domNode.appendChild(t)}},setPos:function(t){this.logger.log(3,"setPos","entry > pos : "+t),t!=this.itemPointer&&(this.itemPointer=t,this._updateRows(),this._refresh())},onBackward:function(t){this.logger.log(3,"onBackward","entry"),this.stopEvent(t),this.itemPointer=Math.max(this.itemPointer-this.itemsPerPage,0),this._updateRows(),this._refresh()},onForward:function(t){this.logger.log(3,"onForward","entry > currentPos : "+this.itemPointer+">  newPos : "+(this.itemPointer+this.itemsPerPage)),this.stopEvent(t),this.itemPointer=this.itemPointer+this.itemsPerPage,this._updateRows(),this._refresh()},_sort:function(t){this.order=!this.order,this.sortBy=t.query,this._updateRows(),this.render()},_updateRows:function(){var t=this.sortBy,e=this.order?1:-1;this.rows=this.rows.sort((function(s,n){var a=s[t],i=n[t];return a.localeCompare&&i.localeCompare?e*a.localeCompare(i):e*(a-i)}))},_refresh:function(){this.render()},sort:function(){this._updateRows()},destroy:function(){}},mounted:function(){}},O=V,z=(0,S.Z)(O,$,U,!1,null,null,null),F=z.exports,j=s(3270),W=s(52426),X=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},G=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcComment"},[s("div",{staticClass:"MatcCommentBar ",attrs:{"data-dojo-attach-point":"btnBar"}}),s("div",{staticClass:"MatcCommentContainer",attrs:{"data-dojo-attach-point":"cntr"}})])}],q=(s(69826),s(40561),{name:"Comment",mixins:[f.Z,c.Z],props:["type","reference","appID","contentID","insertPosition"],data:function(){return{collapsed:!1}},components:{},methods:{postCreate:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.logger=new r.Z("Comment"),e.next=3,C.Z.getUserService().load();case 3:s=e.sent,t.userID=s.id,t.setUserAndLoad(s),"true"==t.collapsed&&t.setCollapsed(!0),t.logger.log(4,"postCreate","exit",t.user);case 8:case"end":return e.stop()}}),e)})))()},setUserAndLoad:function(t){this.user=t,this.load()},setType:function(t){this.type=t},setInsertPosition:function(t){this.insertPosition=t},setCollapsed:function(t){this.collapsed=t,this.collapsed&&(g.Z.remove(this.btnBar,"hidden"),g.Z.add(this.cntr,"MatcHidden"))},onToggleCollapse:function(){this.collapsed=!this.collapsed,this.collapsed?g.Z.add(this.cntr,"MatcHidden"):(g.Z.remove(this.cntr,"MatcHidden"),this.load())},setReference:function(t){this.reference=t},setUser:function(t){this.user=t},setApp:function(t){this.appID=t},setHash:function(t){this.hash=t},load:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.logger.log(5,"load","enter >"+t.appID+" > "+t.reference),e.next=3,C.Z.getCommentService().find(t.appID,t.type,t.reference);case 3:s=e.sent,t.setValue(s);case 5:case"end":return e.stop()}}),e)})))()},setValue:function(t){this.comments=t,this.render(t)},render:function(t){"top"==this.insertPosition?t.sort((function(t,e){return e.created-t.created})):t.sort((function(t,e){return t.created-e.created})),this.cleanUp();var e=document.createElement("ul");"top"==this.insertPosition&&this.createInput(e);for(var s=0;s<t.length;s++){var n=t[s],a=this.createItem(e,n.user),i=document.createElement("div");g.Z.add(i,"MatcCommentMeta"),a.appendChild(i);var o=document.createElement("div");g.Z.add(o,"MatcCommentMessage"),this.setTextContent(o,n.message),a.appendChild(o);var r=document.createElement("span");g.Z.add(r,"MatcCommentNameLabel"),i.appendChild(r),n.user&&(n.user.name||n.user.lastname)?this.setTextContent(r,this.getUserName(n.user)):this.setTextContent(r,this.getNLS("common.guest"));var c=document.createElement("span");if(g.Z.add(c,"MatcCommentTime"),c.innerHTML=this.formatDate(n.created),i.appendChild(c),n.userID==this.user.id){var l=document.createElement("div");g.Z.add(l,"MatcCommentActions MatcActionBar"),i.appendChild(l);var p=document.createElement("a");g.Z.add(p,"MatcActionBarBtn"),p.innerHTML=this.getNLS("btn.edit"),l.appendChild(p),this.tempOwn((0,d.Z)(p,h.Z.press,u.Z.hitch(this,"onEdit",n,o)));var m=document.createElement("a");g.Z.add(m,"MatcActionBarBtn"),m.innerHTML=this.getNLS("btn.delete"),l.appendChild(m),this.tempOwn((0,d.Z)(m,h.Z.press,u.Z.hitch(this,"onDelete",n)))}}"bottom"==this.insertPosition&&this.createInput(e),this.cntr.appendChild(e)},onDelete:function(t){var e=this;return(0,o.Z)((0,i.Z)().mark((function s(){var n;return(0,i.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=e.comments.indexOf(t),n>-1&&e.comments.splice(n,1),e.render(e.comments),s.next=5,C.Z.getCommentService().delete(e.appID,t);case 5:case"end":return s.stop()}}),s)})))()},onEdit:function(t,e){e.innerHTML="";var s=document.createElement("textarea");g.Z.add(s,"form-control"),s.placeHolder="Leave a comment",s.value=t.message,e.appendChild(s);var n=document.createElement("div");g.Z.add(n,"MatcButtonBar MatcMarginTop "),e.appendChild(n);var a=document.createElement("div");g.Z.add(a,"MatcButton"),a.innerHTML=this.getNLS("btn.post"),n.appendChild(a),this.tempOwn((0,d.Z)(a,h.Z.press,u.Z.hitch(this,"update",t,e,s)))},createInput:function(t){if("guest"!=this.user.role){var e=this.createItem(t,this.user),s=document.createElement("textarea");return g.Z.add(s,"form-control"),s.placeHolder="Leave a comment",e.appendChild(s),this.input=s,this.tempOwn((0,d.Z)(s,"focus",u.Z.hitch(this,"showButtons",e,s))),s}var n=this.createItem(t,this.user),a=document.createElement("p");g.Z.add(a,"MatcCommentRow MatcMarginBottom MatcHint"),a.innerHTML="Please sign up to leave a comment.",n.appendChild(a)},showButtons:function(t,e){if(!this.buttonVisible){var s=document.createElement("div");g.Z.add(s,"MatcButtonBar "),t.appendChild(s);var n=document.createElement("div");g.Z.add(n,"MatcButton MatcMarginTop"),n.innerHTML=this.getNLS("comments.post"),s.appendChild(n),g.Z.remove(e,"MatcTextAreaSmall");var a=u.Z.hitch(this,"submit");this.tempOwn((0,d.Z)(n,h.Z.press,a)),this.buttonVisible=!0}},createItem:function(t,e){var s=document.createElement("li");g.Z.add(s,"MatcMarginBottom"),t.appendChild(s);var n=document.createElement("div");g.Z.add(n,"MatcCommentRow"),s.appendChild(n);var a=this.createUserImage(e,n);g.Z.add(a,"MatcUserImageCntrSmall MatcCommentPic");var i=document.createElement("div");return g.Z.add(i,"MatcCommentText"),n.appendChild(i),i},submit:function(t){var e=this;return(0,o.Z)((0,i.Z)().mark((function s(){var n,a;return(0,i.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.stopEvent(t),n={message:e.input.value,type:e.type,reference:e.reference},s.next=4,C.Z.getCommentService().create(e.appID,n);case 4:a=s.sent,e.onCommentAdded(a),e.buttonVisible=!1;case 7:case"end":return s.stop()}}),s)})))()},update:function(t,e,s){var n=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.message=s.value,e.next=3,C.Z.getCommentService().update(n.appID,t);case 3:n.render(n.comments);case 4:case"end":return e.stop()}}),e)})))()},onCommentAdded:function(){this.load()},cleanUp:function(){this.cleanUpTempListener(),this.cntr.innerHTML="",this.input=null}},mounted:function(){}}),Q=q,K=(0,S.Z)(Q,X,G,!1,null,null,null),J=K.exports,Y=s(65822),tt=s(71021),et={name:"Test",mixins:[c.Z,W.Z,f.Z],props:["app","test","annotation","events","hash"],data:function(){return{sessionCount:10,hasDragOver:!1,isUploading:!1,bulletGraphSection:[{value:5,color:"#f83a3a",label:"Jakob Nielsen argues that 5 testers are needed to uncover 85% of all errors in an qualitative usababilty study."},{value:10,color:"#ffb61c",label:"Hwang & Salvendy suggest the 10+-2 rule as a good sample size."},{value:20,color:"#83b600",label:"Accoring to Jakob Nielsen 20 testers are required to get statistically valid results."}]}},components:{BulletGraph:N,TestSettings:R.Z,Comment:J,HelpButton:Y.Z,CheckBox:tt.Z},computed:{pub:function(){return this.$route.meta&&this.$route.meta.isPublic},urlPrefix:function(){return this.pub?"examples":"apps"},hasSplash:function(){return this.test&&this.test.splash},splashUrl:function(){return this.test&&this.test.splash?"/rest/images/"+this.hash+"/"+this.test.splash.url:""},splashMessage:function(){return this.isUploading?this.getNLS("test.splash.uploading"):this.getNLS("test.splash.upload")}},methods:{onDragEnter:function(){this.hasDragOver=!0},onDragLeave:function(){this.hasDragOver=!1},onDrop:function(t){this.logger.log(-1,"onDrop","enter",t),t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files;this.hasDragOver=!1,this.uploadSplash(e)},onFileChanged:function(t){var e=t.target.files;this.uploadSplash(e)},uploadSplash:function(t){var e=this;return(0,o.Z)((0,i.Z)().mark((function s(){var n,a,o,r;return(0,i.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.logger.log(-1,"onDrop","enter",t),1!==t.length){s.next=15;break}return e.isUploading=!0,n=t[0],a="/rest/images/"+e.app.id+"?resize=false",o=new FormData,o.append("file",n),s.next=9,e.imageService.upload(a,o);case 9:r=s.sent,r=JSON.parse(r),r.uploads&&1===r.uploads.length&&(e.test.splash=r.uploads[0],e.onTestChange()),e.isUploading=!1,s.next=16;break;case 15:e.showError("Upload single image");case 16:case"end":return s.stop()}}),s)})))()},onRemoveSplash:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.test.splash){e.next=3;break}return e.next=3,t.imageService.delete(t.app,t.test.splash);case 3:delete t.test.splash,t.onTestChange();case 5:case"end":return e.stop()}}),e)})))()},onTaskChange:function(t){this.$emit("change",u.Z.clone(t))},setRecordOnePerUser:function(t){this.test.recordOneTestPerUser=t,this.onTestChange()},onTestChange:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.pub){e.next=4;break}t.showSuccess("Saved"),e.next=8;break;case 4:return e.next=6,t.modelService.saveTestSettings(t.app.id,t.test);case 6:s=e.sent,"ok"===s.status?(t.showSuccess("Saved"),t.$emit("change",u.Z.clone(t.test))):t.showError("Could not save test settings");case 8:case"end":return e.stop()}}),e)})))()},showBullet:function(){this.logger.log(-2,"show","entry >");var t=new D.Z(this.events);this.sessionCount=t.unique("session"),this.logger.log(0,"show","exit",this.sessionCount)},showSessions:function(){var t=this;this.logger.log(-1,"showSessions","enter "+this.planGetTestCount());var e=this.app,s=this._getTestList(u.Z.clone(this.events),this.annotation,this.test),n=this.urlPrefix,a=this.$new(F);a.setColumns([{query:"id",label:"#"},{query:"status",label:this.getNLS("videoTableStatus")},{query:"taskPerformance",label:"Successful Tasks",fct:function(t,e){var s=e.taskNames,n=document.createElement("div");if(g.Z.add(n,"MatcTagCntr"),s&&s.length>0)for(var a=0;a<s.length;a++){var i=document.createElement("span");g.Z.add(i,"tag"),i.innerHTML=s[a],n.appendChild(i)}else t.innerHTML="-";t.appendChild(n)}},{query:"duration",label:this.getNLS("videoTableDuration"),fct:function(t,e){t.innerHTML=e.duration+" sec"}},{query:"date",label:this.getNLS("videoTableDate")}]),a.setActions([{render:function(s,a){var i=document.createElement("div");i.style.width="140px",i.style.display="inline-block",s.appendChild(i);var o=document.createElement("a");o.href="#/"+n+"/"+e.id+"/replay/"+a.session+".html",g.Z.add(o,"MatcButton MatcButtonSecondary MatcButtonXXS"),o.appendChild((0,H.X)("PlayVideo")),i.appendChild(o);var r=document.createElement("a");t.own((0,d.Z)(r,"click",(function(e){return t.showDeleteSessionDialog(e,a)}))),g.Z.add(r,"MatcButton MatcButtonDanger MatcButtonXXS MatcButtonSecondary"),r.appendChild((0,H.X)("DeleteTrash")),i.appendChild(r)}}]),this.$refs.sessionCntr.innerHTML="",a.placeAt(this.$refs.sessionCntr),a.setValue(s)},showDeleteSessionDialog:function(t,e){this.logger.warn("showDeleteSessionDialog","enter >",e.session);var s=new p.Z,n=s.div("MatcDeleteDialog").build();s.h3("title is-4","Delete Test").build(n),s.p("MatcMarginBottomXL","Do you want to delete the test? You will loose all data related to this test!").build(n);var a=s.div("MatcButtonBar").build(n),i=s.a("MatcButton MatcButtonDanger",this.getNLS("btn.delete")).build(a),o=s.a("MatcLinkButton",this.getNLS("btn.cancel")).build(a),r=new l.Z;r.own((0,d.Z)(i,h.Z.press,u.Z.hitch(this,"deleteSession",e,r))),r.own((0,d.Z)(o,h.Z.press,u.Z.hitch(r,"close"))),r.popup(n,t.target)},deleteSession:function(t,e){var s=this;return(0,o.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s.logger.warn("deleteSession","enter >",t.session),s.pub){n.next=6;break}return n.next=4,s.modelService.deleteEventsBySession(s.app.id,t.session);case 4:s.showSuccess("Test deleted"),s.$emit("reloadEvents");case 6:e.close();case 7:case"end":return n.stop()}}),n)})))()},_getTestList:function(t,e,s){var n=[];s.tasks||(s.tasks=[]);var a=new D.Z(t);a.sortBy("time");var i=a.groupBy("session"),o=i.data,r=new D.Z(e).groupBy("reference"),c=this.getActionEvents(new D.Z(t)),l=new j.Z,d=s.tasks.length,u=l.getMergedTaskPerformance(c,s.tasks,e),h=u.count("session"),p=l.getSuccessTaskNames(u,s.tasks),m=1;for(var v in o){var g=o[v],f=this.formatDate(g.min("time")),b=r.get(v),w='<span class="MatchDashStatusSuccess">Valid</span>',C=!0;b&&(C=b.get(0).get("isValid"),C||(w='<span class="MatchDashStatusFailure">Ignore</span>'));var Z=g.data&&g.data.length>0?g.data[0].user:"-";Z&&Z.name&&(Z=Z.name);var M=h.get(v);M||(M=0);var S=this.getActionEvents(new D.Z(g.data)),T={session:v,user:Z,taskPerformance:M+" / "+d,taskNames:p[v],duration:Math.ceil((g.max("time")-g.min("time"))/1e3),date:f,start:g.min("time"),size:S.size(),status:w,isValid:C,id:m,screens:g.unique("screen")};n.push(T),m++}return n.sort((function(t,e){return t.id-e.id})),n}},watch:{test:function(t){this.logger.info("watch","test >",t),this.test=t},events:function(t){this.logger.info("watch","events >",t),this.events=t,this.showBullet(),this.showSessions()}},mounted:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.logger=new r.Z("Test"),t.modelService=C.Z.getModelService(t.$route),t.imageService=C.Z.getImageService(),t.showBullet(),t.showSessions(),t.logger.info("mounted","exit");case 6:case"end":return e.stop()}}),e)})))()}},st=et,nt=(0,S.Z)(st,_,x,!1,null,null,null),at=nt.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTest"},[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("h2",{staticClass:"level-item title"},[t._v(" Dashboard "),s("HelpButton",{attrs:{topic:"analytics",hasNotifications:!1}})],1)]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("a",{staticClass:"MatcButton MatcButtonOutline MatcButtonXS",on:{click:t.downloadCSV}},[t._v("Download Test Data")])])])]),s("AnalyticsHeader",{attrs:{value:t.summary}})],1)])]),s("section",{staticClass:"section",attrs:{"data-dojo-attach-point":"sectionTask"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("AnalyticTaskList",{attrs:{hash:t.hash,pub:t.pub,test:t.test,app:t.app,events:t.events,annotation:t.annotation},on:{change:t.onTaskChange}})],1)])]),s("section",{staticClass:"section",attrs:{"data-dojo-attach-point":"sectionScatter"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("DistributionSection",{attrs:{pub:t.pub,test:t.test,app:t.app,events:t.events,annotation:t.annotation}})],1)])]),s("section",{staticClass:"section",attrs:{"data-dojo-attach-point":"sectionTask"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("SurveySection",{attrs:{pub:t.pub,test:t.test,app:t.app,events:t.events,annotation:t.annotation}})],1)])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Comments")]),t.app?s("Comment",{attrs:{appID:t.app.id,type:"overview_dash",reference:"",contentID:"",insertPosition:"bottom"}}):t._e()],1)])])])},ot=[],rt=(s(69600),s(21249),s(60285),s(41637),s(23521)),ct=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},lt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns has-text-centered mt-16 "},[s("div",{staticClass:"column mb-32"},[s("div",{attrs:{"data-dojo-attach-point":"userContainer"}})]),s("div",{staticClass:"column mb-32"},[s("div",{attrs:{"data-dojo-attach-point":"coverageContainer"}})]),s("div",{staticClass:"column mb-32"},[s("div",{attrs:{"data-dojo-attach-point":"durContainer"}})])])}],dt=s(96686),ut={name:"AnalyticsHeader",mixins:[c.Z,f.Z],props:["value"],data:function(){return{size:200,width:10}},components:{},methods:{postCreate:function(){this.log=new r.Z("AnalyticsHeader"),this.userRing=this.$new(dt.Z,{width:this.width,size:this.size,color:this.RING_FOREGROUND,backgroundColor:this.RING_BACKGROUND}),this.userRing.setLabel(this.getNLS("analytics.header.user")),this.userRing.setValue(0),this.userRing.setPs(0),this.userRing.placeAt(this.userContainer),this.covRing=this.$new(dt.Z,{width:this.width,size:this.size,color:this.RING_FOREGROUND,backgroundColor:this.RING_BACKGROUND}),this.covRing.setLabel(this.getNLS("analytics.header.coverage")),this.covRing.setValue(0),this.covRing.setPs(0),this.covRing.placeAt(this.coverageContainer);var t=new p.Z,e=t.div("MatcDashNumberContainer").build(this.durContainer);t.div("MatcDashLabel",this.getNLS("analytics.header.duration")).build(e),this.durLabel=t.div("MatcDashNumber","0 ").build(e),this.durSTDLabel=t.div("MatcDashLabelHint","+/- 0").build(e),this.log.log(0,"postCreate","exit")},setUser:function(t,e){this.userRing.setValue(t),this.userRing.setPs(e)},setDuration:function(t,e){this.durLabel.innerHTML=t+"s",this.durSTDLabel.innerHTML="+/- "+e},setCovergae:function(t){this.covRing.setValue(Math.round(100*t)+"%"),this.covRing.setPs(t)},setValue:function(t){this.log.log(0,"setValue","exit",t),this.setUser(t.sessionCount,t.sessionPercentage),this.setDuration(t.sessionDurationMean,t.sessionDurationStd),this.setCovergae(t.expRate)}},watch:{value:function(t){this.value=t,this.setValue(t)}},mounted:function(){this.value&&this.setValue(this.value)}},ht=ut,pt=(0,S.Z)(ht,ct,lt,!1,null,null,null),mt=pt.exports,vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTestSettings MatcDashTable"},[s("div",{attrs:{"data-dojo-attach-point":"sectionTask"}},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("h2",{staticClass:"title level-item"},[s("span",{attrs:{"data-nls":"testSettingsTasks"}},[t._v(t._s(t.$t("analytic-task-list.header")))]),s("HelpButton",{attrs:{topic:"analytics.tasks",subtopic:"analytics.tasks.create",hasNotifications:!1}})],1)]),s("div",{staticClass:"level-right"},[s("a",{staticClass:"MatcButton MatcButtonOutline MatcButtonXS",attrs:{"data-nls":"btn.download"},on:{click:t.downloadCVS}},[t._v(t._s(t.$t("analytic-task-list.download")))])])]),s("div",{attrs:{"data-dojo-attach-point":"tableCntr"}})])])},gt=[],ft=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},bt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"VommondProgress"},[s("div",{staticClass:"VommondProgressContainer",attrs:{"data-dojo-attach-point":"cntr"}},[s("div",{staticClass:"VommondProgressBar",attrs:{"data-dojo-attach-point":"bar"}})])])}],wt={name:"ProgressBar",mixins:[B.Z,c.Z],data:function(){return{value:0,max:1,min:0,hasLabel:!1,color:!1,invertColors:!1}},components:{},methods:{postCreate:function(){},startup:function(){},setMax:function(t){this.max=t},setLabel:function(t){var e=document.createElement("div");g.Z.add(e,"VommondProgressBarLabel"),this.value<.1&&g.Z.add(e,"VommondProgressBarLabelRight"),e.innerHTML=t,this.bar.appendChild(e)},onDomPress:function(t){this.stopEvent(t),this.onClick(t)},cleanup:function(){},setValue:function(t){isNaN(t)&&(t=0),this.bar.style.width=100*t+"%",!0===this.color&&(this.invertColors&&(t=1-t),this.bar.style.background=this.greenToRed(t)),this.value=t}},mounted:function(){}},Ct=wt,Zt=(0,S.Z)(Ct,ft,bt,!1,null,null,null),Mt=Zt.exports,St=s(81005),Tt={name:"AnalyticsTaskList",mixins:[R.Z,c.Z],props:["hash"],data:function(){return{appID:"",userID:"",mode:"private",colWidths:[3,3,3,3],details:!1,downloadFileName:"Task_Summary.csv",BINS:10}},components:{HelpButton:Y.Z},computed:{df:function(){var t=this.filterEvents(this.events,this.annotation),e=this.getActionEvents(new D.Z(t));t=e.as_array();var s=new D.Z(t);return s.sortBy("time"),s}},methods:{postCreate:function(){this.logger=new r.Z("AnalyticsTaskList"),this.logger.log(0,"postCreate","enter > "+this.app.id),this.db=new p.Z,this.render()},downloadCVS:function(){for(var t=this,e="Name,Start, Success,Duration (Mean),Duration (Median), Duration (STD),Events (Mean), Events (STD)\n",s=this.test.tasks,n=new j.Z,a=n.getTaskPerformance(this.df,s),i=n.getTaskSummary(this.df,s,this.annotation),o=0;o<i.length;o++){var r=i[o];e+=r.label+",",e+=r.startCount+" / "+r.sessionCount+",",e+=r.value+" / "+r.sessionCount+",",e+=this.formatNumber(r.durationMean/1e3)+",",e+=this.formatNumber(r.durationMedian/1e3)+",",e+=this.formatNumber(r.durationStd/1e3)+",",e+=this.formatNumber(r.countMean)+",",e+=this.formatNumber(r.countStd)+"",e+="\n"}e+="\n\n\n\n",e+="Test, Task, Interactions, Duration\n",a.foreach((function(s){e+=s["session"]+",",e+=s["taskName"]+",",e+=s["interactions"]+",",e+=t.formatNumber(s["duration"]/1e3)+"",e+="\n"}));var c=new Blob([e],{type:"text/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(c,this.downloadFileName);else{var l=window.document.createElement("a");l.href=window.URL.createObjectURL(c),l.download=this.downloadFileName,document.body.appendChild(l),l.click(),document.body.removeChild(l)}},render:function(){if(this.cleanUpTempListener(),this.tableCntr.innerHTML="",this.details?g.Z.add(this.addBTN,"hidden"):g.Z.remove(this.addBTN,"hidden"),this.test.tasks.length>0)this.renderTaskTable(),g.Z.remove(this.downLoadBtn,"hidden");else{var t=this.db.div("MatcHint MatcMarginBottom").build(this.tableCntr);t.innerHTML=this.getNLS("dashTaskEmpty"),g.Z.add(this.downLoadBtn,"hidden")}},renderTaskTable:function(){var t=new p.Z,e=t.div("columns").build(this.tableCntr),s=t.div("column").build(e),n=this.test.tasks,a=new j.Z,i=a.getTaskSummary(this.df,n,this.annotation),o=this,r=this.$new(F);r.actionLabel="Details",r.setColumns([{query:"label",label:this.getNLS("dashTaskTableName"),width:20},{query:"startCount",label:this.getNLS("dashTaskTableStart"),fct:function(t,e){g.Z.add(t,"MatcDashTableTdHint MatcDashTableLabels"),t.innerHTML=e.startCount+" / "+e.sessionCount},width:10},{query:"success",label:this.getNLS("dashTaskTableSuccess"),fct:function(t,e){g.Z.add(t,"MatcDashBigTable");var s=o.$new(Mt);s.color=o.PROGRESS_COLOR,s.placeAt(t),s.setValue(e.p),s.setLabel(e.value+" / "+e.startCount)},width:20},{query:"success",label:"",fct:function(t,e){g.Z.add(t,"MatcDashTableTdHint MatcDashTableLabels"),t.innerHTML="("+Math.round(100*e.p)+"%)"},width:10},{query:"durationMean",label:this.getNLS("dashTaskTableDuration"),width:15,fct:function(t,e){g.Z.add(t,"MatcDashTableLabels"),t.innerHTML=o.formatNumber(e.durationMean/1e3)+" sec"}},{query:"interactionsMean",label:this.getNLS("dashTaskTableEvents"),width:15,fct:function(t,e){g.Z.add(t,"MatcDashTableLabels"),t.innerHTML=o.formatNumber(e.interactionsMean)}}]),r.setActions([{label:"",icon:"AnalyseChart",css:"MatcButton MatcButtonXXS MatcButtonSecondary",callback:u.Z.hitch(o,"_showTaskPerf")}]),r.placeAt(s),r.setValue(i)},_onFlowDetails:function(){},_showTaskPerf:function(t,e,s){for(var n=null,a=this.test.tasks,i=0;i<a.length;i++){var o=a[i];if(o.id==t.id){n=o;break}}if(n){var r=new p.Z,c=new l.Z,d=r.div("MatcPadding MatcDashTaskPerfGramDialog MatcDialog").build(),u=this.$new(St.Z,{model:this.app,dialog:c,mode:this.mode});u.setValue(this.df,n,this.annotation,this.test.tasks),u.placeAt(d),c.popup(d,s)}else console.debug("_showTaskPerf","No task",t)},_setTaskName:function(t,e){for(var s=this.test.tasks,n=0;n<s.length;n++){var a=s[n];a.id==e.id&&(a.name=t.value)}this.save()}},watch:{events:function(){this.render()}},mounted:function(){}},yt=Tt,_t=(0,S.Z)(yt,vt,gt,!1,null,null,null),xt=_t.exports,Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcSurveySection"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("h2",{staticClass:"title level-item"},[s("span",{attrs:{"data-nls":"testSettingsTasks"}},[t._v(t._s(t.$t("survey.header")))]),s("HelpButton",{attrs:{topic:"survey.intro",hasNotifications:!1}})],1)]),s("div",{staticClass:"level-right"},[t.isLoaded&&t.table.rows.length>0&&t.table.cols.length>0?s("DropDownSelect",{ref:"dropDown",attrs:{options:t.tableOptions,l:t.$t("survey.options")},on:{select:t.onChangeView,fullscreen:function(e){return t.onFullScreen(e)},download:t.downloadCVS}}):t._e()],1)]),s("div",{staticClass:"MatcSurveySectionTableCntr"},[t.table&&t.table.rows.length>0&&t.table.cols.length>0?s("SurveyTable",{attrs:{app:t.app,pub:t.pub,events:t.events,table:t.table,viewOptions:t.viewOptions,annotation:t.annotation,test:t.test}}):s("span",{staticClass:"MatcHint"},[t._v(" "+t._s(t.$t("scatter.no-data"))+" ")])],1),s("SurveyDialog",{ref:"dialog"})],1)},Lt=[],kt=(s(92222),s(81808)),Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.sortedTable.rows.length>0&&t.sortedTable.cols.length>0?s("table",{staticClass:"table"},[s("thead",[t.showGroups?s("tr",[s("th",{staticClass:"MatcSurveySectionTableNumber MatcSurveySectionTableBorderRight"}),t._l(t.groups,(function(e){return s("th",{key:e.label,staticClass:"MatcSurveySectionTableGroupLabel",attrs:{colspan:e.count}},[e.count>1?s("span",{staticClass:"MatcSurveySectionTableColLabel"},[t._v(" "+t._s(e.label)+" ")]):t._e()])})),t.hasTasks?s("th",{staticClass:"MatcSurveySectionTableBorderLeft"}):t._e(),t.hasVideo?s("th",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableAction"},[t._v("X")]):t._e()],2):t._e(),s("tr",[s("th",{staticClass:"MatcSurveySectionTableNumber MatcSurveySectionTableBorderRight MatcSurveySectionTableBorderBottom"},[t._v(" # ")]),t.hasID?s("th",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableBorderRight MatcSurveySectionTableBorderBottom"},[t._v(" "+t._s(t.$t("survey.id"))+" ")]):t._e(),t._l(t.sortedTable.cols,(function(e){return[!0!==e.hidden?s("th",{key:e.key,staticClass:"MatcSurveySectionTableBorderBottom"},[s("span",{staticClass:"MatcSurveySectionTableColLabel"},[t._v(" "+t._s(e.label)+" ")])]):t._e()]})),t.hasTasks?s("th",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableBorderBottom"},[t._v(" "+t._s(t.$t("survey.tasks"))+" ")]):t._e(),t.hasVideo?s("th",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableAction MatcSurveySectionTableBorderBottom"},[t._v(" "+t._s(t.$t("survey.video"))+" ")]):t._e()],2)]),s("tbody",[t._l(t.sortedTable.rows,(function(e,n){return s("tr",{key:n},[s("td",{staticClass:"MatcSurveySectionTableNumber MatcSurveySectionTableBorderRight"},[t._v(" "+t._s(n+1)+" ")]),t.hasID?s("td",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableBorderRight"},[s("a",{attrs:{href:t.getVideoURL(t.sortedTable.ids[n]),target:"_QUXvideo"}},[t._v(" "+t._s(t.sortedTable.ids[n])+" "),s("span",{staticClass:"mdi mdi-play-circle-outline"})])]):t._e(),t._l(t.sortedTable.cols,(function(n){return[!0!==n.hidden?s("td",{key:n.key},[t._v(" "+t._s(e[n.key])+" ")]):t._e()]})),t.hasTasks?s("td",{staticClass:"MatcSurveySectionTableBorderLeft  "},[s("div",{staticClass:"MatcTagCntr"},t._l(t.sortedTable.tasks[n],(function(e){return s("span",{key:e.task,staticClass:"tag"},[t._v(" "+t._s(e.taskName)+" "),t.viewOptions.showTaskDetails?s("span",[t._v(" ("+t._s(Math.round(e.duration/1e3))+"s | #"+t._s(e.interactions)+") ")]):t._e()])})),0)]):t._e(),t.hasVideo?s("td",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableAction"},[s("a",{staticClass:"MatcButton MatcButtonSecondary MatcButtonXS",attrs:{href:t.getVideoURL(t.sortedTable.ids[n]),target:"_QUXvideo"}},[s("QIcon",{attrs:{icon:"Play"}})],1)]):t._e()],2)})),s("tr",{staticClass:"MatcSurveySectionTableSummary"},[s("td",{staticClass:"MatcSurveySectionTableNumber MatcSurveySectionTableBorderRight"},[s("QIcon",{attrs:{icon:"AVG"}})],1),t.hasID?s("td",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableBorderRight"}):t._e(),t._l(t.summary,(function(e,n){return s("td",{key:n},[t._v(" "+t._s(e)+" ")])})),t.hasTasks?s("td",{staticClass:"MatcSurveySectionTableBorderLeft"}):t._e(),t.hasVideo?s("td",{staticClass:"MatcSurveySectionTableBorderLeft MatcSurveySectionTableAction"}):t._e()],2)],2)]):t._e()},Et=[],Pt=s(74702),It={name:"SurveyTable",mixins:[],props:["test","app","events","annotation","viewOptions","pub","table"],data:function(){return{showGroups:!1}},components:{QIcon:Pt.Z},computed:{sortedTable:function(){return this.table},hasVideo:function(){return this.viewOptions.showVideo},hasID:function(){return this.viewOptions.showId},hasTasks:function(){return this.viewOptions.showTasksSucess||this.viewOptions.showTaskDetails},groups:function(){var t=[];if(this.table&&this.table.cols){var e=this.sortedTable.cols,s={label:""};e.forEach((function(e){"data"===e.type&&(e.group!==s.label&&(s={label:e.group,count:0},t.push(s)),s.count++)}))}return t},summary:function(){var t=[],e=this.table;return e.cols.forEach((function(s){if(!0!==s.hidden){var n=0,a=0;e.rows.forEach((function(t){var e=t[s.key];"-"!==e&&(isNaN(1*e)||(n+=1*e,a++))})),a>0?t.push(Math.round(n/a*100)/100):t.push("-")}})),t},urlPrefix:function(){return this.pub?"examples":"apps"}},methods:{getVideoURL:function(t){return"#/"+this.urlPrefix+"/"+this.app.id+"/replay/"+t+".html"}},watch:{table:function(t){this.table=t}},mounted:function(){this.logger=new r.Z("SurveyTable"),console.debug(this.table)}},At=It,Nt=(0,S.Z)(At,Bt,Et,!1,null,null,null),Rt=Nt.exports,$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ZoomDialog",{ref:"dialog"},[s("div",{staticClass:" MatcDialog MatcSurveyDialog MatcPadding"},[s("div",{staticClass:"MatcToolbarTabs MatcToolbarTabsBig"},[s("a",{class:{MatcToolbarTabActive:"table"===t.tab},on:{click:function(e){t.tab="table"}}},[t._v(t._s(t.$t("survey.dialogTable")))]),s("a",{class:{MatcToolbarTabActive:"diagrams"===t.tab},on:{click:function(e){t.tab="diagrams"}}},[t._v(t._s(t.$t("survey.dialogDiagrams")))])])])])},Ut=[],Ht=s(58761),Vt={name:"SurveySection",mixins:[],props:["test","app","events","annotation"],data:function(){return{tab:"table"}},components:{ZoomDialog:Ht.Z},computed:{hasID:function(){return this.viewOptions.showId},hasTasks:function(){return this.viewOptions.showTasksSucess||this.viewOptions.showTaskDetails},summary:function(){var t=[],e=this.table;return e.cols.forEach((function(s){if(!0!==e.meta[s].hidden){var n=0,a=0;e.rows.forEach((function(t){var e=t[s];"-"!==e&&(isNaN(1*e)||(n+=1*e,a++))})),a>0?t.push(Math.round(n/a*100)/100):t.push("-")}})),t},table:function(){var t=new j.Z,e=t.filterEvents(u.Z.clone(this.events),this.annotation);return t.getSurveyAnswers(e,this.app,this.test,this.viewOptions)}},methods:{show:function(t){this.$refs.dialog.show(t)}},mounted:function(){this.logger=new r.Z("SurveySection")}},Ot=Vt,zt=(0,S.Z)(Ot,$t,Ut,!1,null,null,null),Ft=zt.exports,jt={name:"SurveySection",mixins:[],props:["test","app","events","annotation","pub"],data:function(){return{isLoaded:!1,table:{rows:{},cols:{}},viewOptions:{showTasksSucess:!1,showTaskDetails:!1,showVideo:!1,showId:!1}}},components:{HelpButton:Y.Z,DropDownSelect:kt.Z,SurveyTable:Rt,SurveyDialog:Ft},computed:{tableOptions:function(){var t=this,e=this.table.cols.filter((function(t){return"data"===t.type})).map((function(e){return{value:"toggleColumn",label:e.label,check:!0,selected:!e.hidden,callback:function(s){return t.toggleColumn(e,s)}}}));return e.concat([{css:"MatcDropDownButtonLine"},{value:"showTasksSucess",label:this.$t("survey.taskSuccess"),check:!0,selected:this.viewOptions.showTasksSucess},{value:"showVideo",label:this.$t("survey.showVideo"),check:!0,selected:this.viewOptions.showVideo},{css:"MatcDropDownButtonLine"},{value:"download",label:this.$t("survey.download"),event:"download",icon:"mdi mdi-download-outline"}])},hasID:function(){return this.viewOptions.showId},hasTasks:function(){return this.viewOptions.showTasksSucess||this.viewOptions.showTaskDetails},downloadFileName:function(){return this.app?this.app.name+"_survey.csv":"Quant-UX_Survey.csv"}},methods:{getTable:function(){var t=new j.Z,e=t.filterEvents(u.Z.clone(this.events),this.annotation);return t.getSurveyAnswers(e,this.app,this.test,this.viewOptions)},onFullScreen:function(){this.$refs.dialog&&this.$refs.dropDown&&this.$refs.dialog.show(this.$refs.dropDown.$el)},toggleColumn:function(t,e){t.hidden=!e},onChangeView:function(t){for(var e in t)this.$set(this.viewOptions,e,t[e])},downloadCVS:function(){var t=this.table,e="#,"+t.cols.map((function(t){return t.label})).join(",")+"\n";e+=t.rows.map((function(e,s){return s+","+t.cols.map((function(t){return e[t.key]})).join(",")})).join("\n");var s=new Blob([e],{type:"text/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(s,this.downloadFileName);else{var n=window.document.createElement("a");n.href=window.URL.createObjectURL(s),n.download=this.downloadFileName,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},mounted:function(){this.logger=new r.Z("SurveySection"),this.test&&this.test.tasks.length,this.table=this.getTable(),this.isLoaded=!0}},Wt=jt,Xt=(0,S.Z)(Wt,Dt,Lt,!1,null,null,null),Gt=Xt.exports,qt=s(12610),Qt={name:"Test",mixins:[c.Z,W.Z,f.Z],props:["app","test","annotation","events","pub","hash"],data:function(){return{MIN_REQUIERED_USERS:40,summary:{}}},components:{Comment:J,AnalyticsHeader:mt,AnalyticTaskList:xt,SurveySection:Gt,DistributionSection:qt.Z,HelpButton:Y.Z},computed:{imageHash:function(){return"imageHahs"},isPublic:function(){return this.$route.meta&&this.$route.meta.isPublic},urlPrefix:function(){return this.isPublic?"examples":"apps"}},methods:{onTaskChange:function(t){this.$emit("change",u.Z.clone(t))},downloadCSV:function(){var t=this;try{var e=this.filterEvents(this.events,this.annotation),s=this.getActionEvents(new D.Z(e)),n="Session,User,Screen,Widget,EventType,X,Y,Time\n",a=this.app.screenSize;n+=s.data.map((function(e){var s=t.app.screens[e.screen]?t.app.screens[e.screen].name:e.screen,n=t.app.widgets[e.widget]?t.app.widgets[e.widget].name:e.widget,i=e.x>=0?Math.round(e.x*a.w):-1,o=e.y>=0?Math.round(e.y*a.h):-1;return e.session+","+e.user+","+s+","+n+","+e.type+","+i+","+o+","+e.time})).join("\n");var i=new Blob([n],{type:"text/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(i,this.downloadFileName);else{var o=window.document.createElement("a");o.href=window.URL.createObjectURL(i),o.download=this.app.name+".csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}catch(r){console.error(r)}},show:function(){rt.Z.start("AnalyticsTab.show()");var t=this.filterEvents(this.events,this.annotation),e=this.getActionEvents(new D.Z(t));t=e.as_array();var s=new D.Z(t);s.sortBy("time"),this._addTestKPI(s,this.app),rt.Z.end("AnalyticsTab.show()")},_addTestKPI:function(t,e){rt.Z.start("AnalyticsTab._addTestKPI()");var s=t.groupBy("session"),n=t.count("session"),a=s.min("time"),i=s.max("time");i.minus(a);var o={};o.sessionCount=n.size(),o.sessionCountMean=Math.round(n.mean()),o.sessionCountStd=Math.round(n.std()),o.sessionDurationMean=Math.round(i.mean()/1e3),o.sessionDurationStd=Math.round(i.std()/1e3),o.sessionMeanUser=o.sessionCount/o.userCount,o.sessionPercentage=Math.min(o.sessionCount/this.MIN_REQUIERED_USERS,1),isNaN(o.sessionDurationMean)&&(o.sessionDurationMean=0,o.sessionDurationStd=0);var r=this.getObjectLength(e.screens),c=s.unique("screen"),l=c.mean()/r;isNaN(l)&&(l=0),isNaN(l)&&(l=0),o.expRate=l,this.summary=o,rt.Z.end("AnalyticsTab._addTestKPI()")}},watch:{test:function(t){this.logger.info("watch","test >",t),this.test=t},events:function(t){this.logger.info("watch","events >",t),this.events=t,this.show()}},mounted:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.logger=new r.Z("AnalyticsTab"),t.show(),t.logger.info("mounted","exit");case 3:case"end":return e.stop()}}),e)})))()}},Kt=Qt,Jt=(0,S.Z)(Kt,it,ot,!1,null,null,null),Yt=Jt.exports,te=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTest"},[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"}),s("div",{staticClass:"level-right"},[s("a",{staticClass:"MatcButton level-item",attrs:{href:"#/"+t.urlPrefix+"/"+t.app.id+"/analyze/workspace.html"}},[t._v("Open Analytic Canvas")])])]),t.events&&t.events.length>0?s("HeatList",{attrs:{app:t.app,pub:t.isPublic,events:t.events}}):t._e(),t.loading?s("div",{staticClass:"MatcHint"},[t._v(" Loading... ")]):t._e()],1)]),t.loading||0!==t.events.length?t._e():s("section",{staticClass:"section"},[t._m(0)]),t.events&&0===t.events.length?s("AnalyticPagePlugin",{attrs:{events:t.events,model:t.app}}):t._e(),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Comments")]),t.app?s("Comment",{attrs:{appID:t.app.id,type:"overview_heat",reference:"",contentID:"",insertPosition:"bottom"}}):t._e()],1)])])],1)},ee=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless MatcWarningBox"},[s("h3",{staticClass:"title"},[t._v("No data")]),s("p",[t._v(" You have not performed any test yet, therefore Quant-UX could not collect any data. Once you start testing, you will see here the heat maps. ")])])])}],se=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ne=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcScreenList"},[s("div",{staticClass:"MatcAppListContainer",attrs:{"data-dojo-attach-point":"container"}})])}],ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcSimulator MatcPreview"})},ie=[],oe=s(89224),re=s(77050),ce={name:"HeatPreview",mixins:[oe.Z,w.Z],data:function(){return{}},components:{},methods:{setEvents:function(t){this.logger.log(0,"setEvents","enter > "+t.length),this.value=t},onScreenRendered:function(t,e){this.logger.log(2,"onScreenRendered","enter > "+t.id+" > ");var s=re.Z.position(this.domNode);"smartphone"==this.model.type||"tablet"==this.model.type?(this.defaultRadius=s.w/20,this.defaultBlur=s.w/15):(this.defaultRadius=s.w/120,this.defaultBlur=s.w/100),this.logger.log(2,"onScreenRendered","adjust radios to "+this.defaultRadius);var n=document.createElement("div");g.Z.add(n,"MatcHeapMapContainer"),this._canvas=document.createElement("canvas"),this._canvas.height=t.h,this._canvas.width=t.w,n.appendChild(this._canvas),this._width=t.w,this._height=t.h,this._ctx=this._canvas.getContext("2d"),this.value?this.renderHeatMap(this.value):console.debug("NO Value"),e.appendChild(n)},renderHeatMap:function(t){var e=this.computeClickDistribution(t,this._width,this._height);this.draw(this._ctx,e.values,e.max,this._width,this._height)}},mounted:function(){}},le=ce,de=(0,S.Z)(le,ae,ie,!1,null,null,null),ue=de.exports,he={name:"HeatList",mixins:[b.Z,f.Z,c.Z],props:["app","pub","annotation","events"],data:function(){return{add:!1,hasSearch:!1,popoverButtonLabel:"Design",maxElementsToRender:20,resizePreview:!1,isPublic:!1,hasStackView:!1}},components:{},methods:{load:function(){this.jwtToken=C.Z.getUserService().getToken(),this.app?this.setValue(this.app):console.warn("ScreenList.load() > No app")},setValue:function(t){this.model=t,this.value=this.getScreens(),0==this.value.length&&(this.add=!0),this.render(this.value,this.animate)},setInvitation:function(t){this.hash=t},setMethod:function(t){this.pub?t.href="#/examples/"+this.model.id+"/analyze/workspace.html":t.href="#/apps/"+this.model.id+"/analyze/workspace.html"},onTest:function(t,e){this.stopEvent(e),this.emit("test",t)},createScreenWidget:function(t){var e=this.$new(ue);return e.setJwtToken(this.jwtToken),e.isFillBackground=!0,e.setPublic(this.pub),this.hash&&e.setInvitation(this.hash),this.events&&e.setEvents(this.events.filter((function(e){return e.screen===t.id}))),e},renderDescription:function(t,e){var s=this.getDescription(t),n=document.createElement("p");n.innerHTML=s,g.Z.add(n,"MatcListItemDescription"),e.appendChild(n)},getDescription:function(t){var e="";return t.name?e+=t.name:e+="Click to edit",e},onRenderDone:function(){for(var t=0;t<this.value.length;t++){var e=this.value[t];this.widgets[t]&&this.widgets[t].setModel(this.model,e.id)}}},mounted:function(){}},pe=he,me=(0,S.Z)(pe,se,ne,!1,null,null,null),ve=me.exports,ge=function(){var t=this,e=t.$createElement;t._self._c;return t._e()},fe=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Integrations")])])])}],be={name:"AnalyticPagePlugin",props:["user","model","events"],mixins:[],data:function(){return{value:null}},components:{},methods:{},mounted:function(){}},we=be,Ce=(0,S.Z)(we,ge,fe,!1,null,null,null),Ze=Ce.exports,Me={name:"Test",mixins:[c.Z,W.Z,f.Z],props:["app","test","annotation","events","pub","loading"],data:function(){return{MIN_REQUIERED_USERS:40,summary:{}}},components:{Comment:J,HeatList:ve,AnalyticPagePlugin:Ze},computed:{isPublic:function(){return this.$route.meta&&this.$route.meta.isPublic},urlPrefix:function(){return this.isPublic?"examples":"apps"}},methods:{},watch:{test:function(t){this.logger.info("watch","test >",t),this.test=t}},mounted:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.logger=new r.Z("AnalyticsTab"),t.logger.info("mounted","exit");case 2:case"end":return e.stop()}}),e)})))()}},Se=Me,Te=(0,S.Z)(Se,te,ee,!1,null,null,null),ye=Te.exports,_e=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTest"},[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Screen Recording")]),t.eventsWithAnnimations.length>0?s("VideoPlayer",{attrs:{app:t.app,sessionID:t.sessionID,testSettings:t.test,annotation:t.annotation,eventsWithAnnimations:t.eventsWithAnnimations,mouse:t.mouseEvents},on:{change:t.onAnnotationChange}}):s("div",[t.hasToManyEvents?s("div",{staticClass:"notification is-danger"},[t._v("The Screen Recording is too big!")]):s("div",{staticClass:"MatcLoading"},[t._v("Loading...")])]),s("div",{staticClass:"level mt-16"},[s("div",{staticClass:"level-left"},[s("VideoAnnotation",{attrs:{appID:t.app.id,sessionID:t.sessionID,test:t.test,annotation:t.currentAnnotation,pub:t.pub,event:t.currentEvents},on:{change:t.onAnnotationChange}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("p",[t._v("Test Performed on "+t._s(t.currentDate))])])])])],1)])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Comments")]),t.app?s("Comment",{attrs:{appID:t.app.id,type:"overview_test",reference:t.sessionID,contentID:"",insertPosition:"bottom"}}):t._e()],1)])])])},xe=[],De=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Le=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcAnnotation"},[s("div",{attrs:{"data-dojo-attach-point":"chkBoxCntr"}})])}],ke=s(19721),Be=s(54953),Ee=s(18839),Pe={name:"VideoAnnotation",mixins:[c.Z],props:["appID","sessionID","test","annotation","events","pub"],data:function(){return{value:null}},components:{},methods:{postCreate:function(){this.log=new r.Z("VideoAnnotation"),this.btn=this.$new(Ee.Z),this.btn.setOptions([{label:"The test was ok",value:!0,css:"MatcButtonGreen",icon:""},{label:"Ignore this test",value:!1,css:"MatcButtonDanger",icon:""}]),g.Z.add(this.btn.domNode,"MatcButton"),this.btn.placeAt(this.chkBoxCntr),this.own((0,d.Z)(this.btn,"change",u.Z.hitch(this,"onChangeValid"))),this.deleteBtn=document.createElement("a"),g.Z.add(this.deleteBtn,"MatcButton MatcButtonDanger MatcMarginLeft"),this.deleteBtn.innerHTML="Delete Test",this.own((0,d.Z)(this.deleteBtn,h.Z.press,u.Z.hitch(this,"deleteSession"))),this.chkBoxCntr.appendChild(this.deleteBtn),this.setValue(this.annotation)},setValue:function(t){this.value=t,this.render(this.value)},render:function(t){this.cleanUp(),this.btn.setValue(t.isValid),this.renderDelete(t)},renderDelete:function(t){t.isValid?g.Z.add(this.deleteBtn,"hidden"):g.Z.remove(this.deleteBtn,"hidden")},cleanUp:function(){this.cleanUpTempListener()},onChangeValid:function(t){this.log.log(0,"onChangeValid","enter > "+t),this.value.isValid=t,this.sendUpdate(),this.renderDelete(this.value)},sendUpdate:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s,n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.pub){e.next=4;break}ke.Z.publish("App.Notification.Success","Please register to save changes..."),e.next=16;break;case 4:if(console.debug("sendUpate",t.value),t.value.id){e.next=12;break}return e.next=8,C.Z.getModelService().saveAnnotation(t.appID,t.value);case 8:s=e.sent,t.onAnnotionAdded(s),e.next=16;break;case 12:return e.next=14,C.Z.getModelService().updateAnnotation(t.appID,t.value);case 14:n=e.sent,t.onAnnotionAdded(n);case 16:case"end":return e.stop()}}),e)})))()},deleteSession:function(){var t=this;this.pub?ke.Z.publish("App.Notification.Success","Please register to save changes..."):this.sessionID&&this.appID&&Promise.all([C.Z.getModelService().deleteAnnotation(this.appID,this.value.id),C.Z.getModelService().deleteEventsBySession(this.appID,this.sessionID),C.Z.getModelService().deleteMouseBySession(this.appID,this.sessionID)]).then((function(){(0,Be.Z)("#/apps/"+t.appID+"/test.html")}))},onAnnotionAdded:function(t){this.value=t,this.showSuccess("Updates saved!"),this.$emit("change",t)}},watch:{annotation:function(t){this.setValue(t)}},mounted:function(){}},Ie=Pe,Ae=(0,S.Z)(Ie,De,Le,!1,null,null,null),Ne=Ae.exports,Re=s(80693),$e={name:"Test",mixins:[c.Z,f.Z],props:["app","test","annotation","events"],data:function(){return{sessionID:"",hasToManyEvents:!1,eventsWithAnnimations:[],mouseEvents:[]}},components:{VideoAnnotation:Ne,VideoPlayer:Re.Z,Comment:J},computed:{pub:function(){return this.$route.meta&&this.$route.meta.isPublic},currentAnnotation:function(){var t=this._getSessionAnnotation(this.annotation,this.app.id,this.sessionID);return t.tasks||(t.tasks={},t.isValid=!0),t},currentEvents:function(){if(this.events){var t=new D.Z(this.events);t.sortBy("time");var e=t.groupBy("session"),s=e.get(this.sessionID);return s}return null},currentDate:function(){var t=this.currentEvents;return t?this.formatDate(t.min("time")):"-"}},methods:{onAnnotationChange:function(t){var e=this.annotation.find((function(e){return t.id===e.id}));e?e.isValid=t.isValid:this.annotation.push(t),this.$emit("change",this.annotation)},load:function(){var t=this;this.sessionID=this.$route.params.session,Promise.all([this.modelService.findEventsBySession(this.app.id,this.sessionID),this.modelService.findMouseBySession(this.app.id,this.sessionID)]).then((function(e){t.onLoaded(e[0],e[1])}))},onLoaded:function(t,e){t.length<2e3?(this.eventsWithAnnimations=t,this.mouseEvents=e):(this.hasToManyEvents=!0,this.$emit("Error","This video is too big!"))},_getSessionAnnotation:function(t,e){var s=this;if(t=t.filter((function(t){return t.reference===s.sessionID})),t.length>1){console.warn("Too many annotations!");for(var n=1;n<t.length;n++){var a=t[n];this.modelService.deleteAnnotation(this.app.id,a.id)}}return t.length>=1?t[0]:{appID:e,type:"session",reference:this.sessionID,tasks:{},isValid:!0,sessions:{}}}},watch:{$route:function(){this.load()}},mounted:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.logger=new r.Z("VideoTab"),t.logger.info("mounted","exit"),t.modelService=C.Z.getModelService(t.$route),t.load();case 4:case"end":return e.stop()}}),e)})))()}},Ue=$e,He=(0,S.Z)(Ue,_e,xe,!1,null,null,null),Ve=He.exports,Oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcContent MatcSettings"},[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Prototype Name")]),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.app.name,expression:"app.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter App name"},domProps:{value:t.app.name},on:{change:t.setAppName,input:function(e){e.target.composing||t.$set(t.app,"name",e.target.value)}}})])])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless team-settings"},[s("h2",{staticClass:"title"},[t._v("Team")]),t.app&&t.user?s("Team",{attrs:{appID:t.app.id,userID:t.user.id}}):t._e()],1)])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("div",{staticClass:"level"},[t._m(0),s("div",{staticClass:"level-right"},[s("a",{staticClass:"MatcButton is-outlined level-item",on:{click:t.resetShare}},[t._v("Reset")])])]),s("div",{staticClass:"form-group"},[s("label",[t._v("Test")]),s("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.base+"/#/test.html?h="+t.hashes[1]}})]),s("div",{staticClass:"form-group"},[s("label",[t._v("Share and Comment")]),s("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.base+"/#/share.html?h="+t.hashes[1]}})]),s("div",{staticClass:"form-group"},[s("label",[t._v("Code Generation")]),s("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:""+t.hashes[1]}})])])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("a",{staticClass:"button is-fullwidth is-normal is-danger level-item",on:{click:t.showDeleteDialog}},[s("span",{ref:"deleteBtn"},[t._v("Delete Prototype")])])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("div",{staticClass:"box is-shadowless"},[s("h2",{staticClass:"title"},[t._v("Comments")]),t.app?s("Comment",{attrs:{appID:t.app.id,type:"app_settings",reference:t.sessionID,contentID:"",insertPosition:"bottom"}}):t._e()],1)])])])},ze=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"level-left"},[s("h2",{staticClass:"title level-item"},[t._v("Sharing")])])}],Fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTeam"},[s("div",{staticClass:"MatcTeamContainer",attrs:{"data-dojo-attach-point":"cntr"}},[s("div",{staticClass:"MatcTeamItem",on:{click:function(e){return t.showAdd(e)}}},[s("div",{staticClass:"MatcUserAdd"},[s("QIcon",{attrs:{icon:"Plus"}})],1)]),t._l(t.team,(function(e){return s("TeamMember",{key:e.id,attrs:{user:e},on:{click:function(s){return t.showEdit(e,s)}}})}))],2),s("TeamDialog",{ref:"dialog",attrs:{appID:t.appID}})],1)},je=[],We=s(23516),Xe=s(81135),Ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MatcTeamItem",on:{click:function(e){return t.$emit("click",e)}}},[s("div",{staticClass:"MatcUserImageCntr"},[t.user.image?s("div",{staticClass:"MatcUserImageCntrTrans"},[s("img",{staticClass:"MatcUserImage",attrs:{src:t.getUserImage(t.user)}})]):s("div",{staticClass:"MatcUserImageNone"},[s("span",{staticClass:"MatcMiddle MatcUserLetters"},[t._v(" "+t._s(t.getUserLetter(t.user))+" ")])])])])},qe=[],Qe={name:"Team",mixins:[E.Z],props:["user"],data:function(){return{isSaving:!1,team:[]}},components:{},methods:{getUserImage:function(t){return t?"/rest/user/"+t.id+"/images/"+t.name+"_"+t.lastname+"/"+t.image:""},getUserName:function(t){var e="";return t.name&&(e=t.name+" "),t.lastname&&(e+=t.lastname),0==e.length&&(e=t.email),e}},mounted:function(){this.user&&this.addTooltip(this.$el,this.getUserName(this.user))}},Ke=Qe,Je=(0,S.Z)(Ke,Ge,qe,!1,null,null,null),Ye=Je.exports,ts=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ZoomDialog",{ref:"dialog",attrs:{overflow:"visible"}},[s("div",{staticClass:"MatcDialog MatcTeamDialog MatcResizeDialog"},[s("table",{},[s("thead",[s("tr",[s("th"),s("th",[t._v(" Owner ")]),s("th",[t._v(" Write ")]),s("th",[t._v(" Read ")]),s("th",[t._v(" Delete ")])])]),s("tbody",t._l(t.team,(function(e){return s("tr",{key:e.id},[s("td",[t._v(" "+t._s(t.getUserName(e))+" ")]),s("td",[s("RadioBox",{attrs:{selected:3===e.permission},on:{change:function(s){return t.setOwner(e)}}})],1),s("td",[e.permission<3?s("RadioBox",{attrs:{selected:2===e.permission},on:{change:function(s){return t.setWrite(e)}}}):t._e()],1),s("td",[e.permission<3?s("RadioBox",{attrs:{selected:1===e.permission},on:{change:function(s){return t.setRead(e)}}}):t._e()],1),s("td",[e.permission<3?s("div",{staticClass:"MatcButton MatcButtonXXS MatcButtonDanger MatcButtonSecondary"},[s("QIcon",{attrs:{icon:"DeleteX"}})],1):t._e()])])})),0)]),s("div",{staticClass:"form-group MatcMarginTopXL"},[s("Combo",{attrs:{formControl:"true",placeholder:"Add new member",hints:t.hints}})],1),s("div",{staticClass:"MatcButtonBar MatcMarginTopXXL"},[s("a",{staticClass:"MatcButton MatcButtonPrimary",on:{click:t.save}},[t._v("Save")]),s("a",{staticClass:"MatcLinkButton",on:{click:t.close}},[t._v("Cancel")])])])])},es=[],ss=s(35431),ns={name:"TeamDialog",props:["appID"],mixins:[],data:function(){return{errorMessageName:"",name:"",team:[],hints:[]}},watch:{},components:{ZoomDialog:Ht.Z,RadioBox:ss.Z,Combo:We.Z,QIcon:Pt.Z},methods:{close:function(){this.$refs.dialog.close()},show:function(t,e){this.team=t,this.$refs.dialog.show(e.target)},save:function(){},setWrite:function(t){console.debug("Write",t),t.permission=2},setRead:function(t){console.debug("Read",t),t.permission=1},getUserName:function(t){var e="";return t.name&&(e=t.name+" "),t.lastname&&(e+=t.lastname),0==e.length&&(e=t.email),e},setTeamSuggestions:function(t){for(var e={},s=0;s<this.team.length;s++)e[this.team[s].id]=!0;for(var n=[],a=0;a<t.length;a++){var i=t[a];if(!e[i.id]){var o={label:"",value:i.email};i.name&&(o.label+=i.name+" "),i.lastname&&(o.label+=i.lastname+" "),o.label.length>0&&(o.label+=" - "),o.label+=i.email,i.image&&(o.image=i.image),n.push(o)}}this.hints=n}},mounted:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.logger=new r.Z("TeamDialog"),e.next=3,C.Z.getModelService().findTeamSuggestions(t.appID);case 3:s=e.sent,t.setTeamSuggestions(s);case 5:case"end":return e.stop()}}),e)})))()}},as=ns,is=(0,S.Z)(as,ts,es,!1,null,null,null),os=is.exports,rs={name:"Team",mixins:[f.Z,W.Z,E.Z,c.Z],props:["appID","userID"],data:function(){return{isSaving:!1,team:[]}},components:{QIcon:Pt.Z,TeamMember:Ye,TeamDialog:os},methods:{getUserImage:function(t){return"/rest/user/"+t.id+"/images/"+t.name+"_"+t.lastname+"/"+t.image},postCreate:function(){this.logger=new r.Z("Team"),this.logger.log(4,"postCreate","enter >"+this.appID+" > "+this.userID+" > "+this.reference),this.db=new p.Z,this.appID&&this.userID&&this.load()},load:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C.Z.getModelService().findTeam(t.appID);case 2:s=e.sent,t.setTeamLoaded(s);case 4:case"end":return e.stop()}}),e)})))()},setTeamLoaded:function(t){this.team=t},showDialog:function(t){this.$refs.dialog.show(this.team,t)},showAdd:function(t){var e=this;return(0,o.Z)((0,i.Z)().mark((function s(){var n,a,o,r,c,p,m,v,g,f,b;return(0,i.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=e.db.div("MatcTeamDialog MatcDialog MatcPadding").build(),a=e.db.div("container").build(n),o=e.db.div("row").build(a),r=e.db.div("col-md-12").build(o),e.db.h2("title","Add Team Member").build(r),c=e.$new(We.Z),c.setPlaceholder("Enter the email"),c.setCss("form-control"),c.placeAt(r),p=e.db.div("MatcErrorLabel").build(r),m=e.db.div("MatcButtonBar MatcMarginTopL").build(a),v=e.db.div("MatcButton MatcButtonPrimary","Add User").build(m),g=e.db.a("MatcLinkButton","Cancel").build(m),f=new l.Z({overflow:!0}),f.own((0,d.Z)(v,h.Z.press,u.Z.hitch(e,"addUser",c,p,f,m))),f.own((0,d.Z)(g,h.Z.press,u.Z.hitch(f,"close"))),f.own((0,d.Z)(f,"close",u.Z.hitch(c,"destroy"))),f.popup(n,t.target),setTimeout((function(){c.focus()}),300),s.next=21,C.Z.getModelService().findTeamSuggestions(e.appID);case 21:b=s.sent,e.setTeamSuggestions(c,b);case 23:case"end":return s.stop()}}),s)})))()},setTeamSuggestions:function(t,e){for(var s={},n=0;n<this.team.length;n++)s[this.team[n].id]=!0;for(var a=[],i=0;i<e.length;i++){var o=e[i];if(!s[o.id]){var r={label:"",value:o.email};o.name&&(r.label+=o.name+" "),o.lastname&&(r.label+=o.lastname+" "),r.label.length>0&&(r.label+=" - "),r.label+=o.email,o.image&&(r.image=o.image),a.push(r)}}t.setHints(a)},showEdit:function(t,e){var s=this.db.div("MatcTeamDialog MatcTeamDialogEdit MatcPadding MatcActionBox").build(),n=this.db.div("container").build(s),a=this.db.div("columns").build(n),i=this.db.div("column is-4").build(a);this.createUserImage(t,i);var o=this.db.div("column is-8").build(a),r=this.db.div("MatcTeamUserName",this.getUserName(t)).build(o),c=null;if(3==t.permission){var p=this.db.div().build(o);g.Z.add(p,"MatcHint MatcMarginTop"),p.innerHTML="Is the owner!"}else r.innerHTML+=" can:",c=this.$new(Xe.Z),c.setOptions([{label:"Write",value:2,css:""},{label:"Read",value:1,css:""}]),c.placeAt(o),c.setValue(t.permission);a=this.db.div("columns").build(n),i=this.db.div("column is-4").build(a),o=this.db.div("MatcButtonBar MatcButtonBarCols").build(n);var m=new l.Z;if(3!=t.permission){var v=this.db.div("MatcButtonBarCol").build(o),f=this.db.div("MatcButton MatcButtonPrimary","Save").build(v),b=this.db.a("MatcLinkButton","Cancel").build(v),w=this.db.div("MatcButtonBarCol").build(o),C=this.db.a("MatcButton MatcButtonDanger ","Remove").build(w);m.own((0,d.Z)(b,h.Z.press,u.Z.hitch(m,"close"))),m.own((0,d.Z)(f,h.Z.press,u.Z.hitch(this,"changePermission",t,c,m))),m.own((0,d.Z)(C,h.Z.press,u.Z.hitch(this,"removeUser",t,c,m)))}else{var Z=this.db.div("MatcButton MatcButtonPrimary","Close").build(o);m.own((0,d.Z)(Z,h.Z.press,u.Z.hitch(m,"close")))}m.popup(s,e.target)},addUser:function(t,e,s,n,a){var r=this;return(0,o.Z)((0,i.Z)().mark((function n(){var o,c,l,d,u;return(0,i.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r.logger.log(-1,"addUser","enter"),r.stopEvent(a),o=t.getValue(),c=r.team.filter((function(t){return t.email===o})),!(c.length>0)){n.next=8;break}return r.logger.error("addUser","EXIT > User already in team"),s.close(),n.abrupt("return");case 8:if(!r.isSaving){n.next=11;break}return r.logger.error("addUser","EXIT > Is saving"),n.abrupt("return");case 11:return r.isSaving=!0,l=2,d={email:t.getValue(),permission:l},n.next=16,C.Z.getModelService().createTeam(r.appID,d);case 16:u=n.sent,r.isSaving=!1,"error"==u.type?("apps.team.member.add.error.email"==u.errors[0]&&(g.Z.remove(e,""),e.innerHTML="No user is registered with the email!"),"apps.team.member.add.error.read"==u.errors[0]&&(g.Z.remove(e,""),e.innerHTML="You can only read the app!"),s.shake()):(s.close(),r.load());case 19:case"end":return n.stop()}}),n)})))()},changePermission:function(t,e,s){var n=this;return(0,o.Z)((0,i.Z)().mark((function a(){return(0,i.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.permission=e.getValue(),s.close(),e.destroy(),a.next=5,C.Z.getModelService().updateTeam(n.appID,t);case 5:n.load();case 6:case"end":return a.stop()}}),a)})))()},setPermission:function(t,e){var s=this;return(0,o.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.permission=t,n.next=3,C.Z.getModelService().createTeam(s.appID,e);case 3:s.load();case 4:case"end":return n.stop()}}),n)})))()},removeUser:function(t,e,s){var n=this;return(0,o.Z)((0,i.Z)().mark((function a(){return(0,i.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,C.Z.getModelService().deleteTeam(n.appID,t);case 2:s.close(),e.destroy(),n.load();case 5:case"end":return a.stop()}}),a)})))()},cleanUp:function(){}},mounted:function(){}},cs=rs,ls=(0,S.Z)(cs,Fe,je,!1,null,null,null),ds=ls.exports,us={name:"Test",mixins:[c.Z],props:["app","test","annotation","events","pub","user","invitations"],data:function(){return{sessionID:"",eventsWithAnnimations:[],mouseEvents:[]}},components:{Comment:J,Team:ds},computed:{base:function(){return location.protocol+"//"+location.host},iframe:function(){if(this.app){var t=this.app.screenSize.w+"px",e=this.app.screenSize.h+"px",s='<iframe src="'+this.base+"/em.html?h="+this.hashes[1]+'" width="'+t+'" height="'+e+'" allowTransparency="true" frameborder="0"></iframe>';return s}return"-"},hashes:function(){var t={};for(var e in this.invitations)t[this.invitations[e]]=e;return t}},methods:{showDeleteDialog:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s,n,a,o,r,c;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=new p.Z,n=s.div("box MatcDeleteDialog").build(),s.h3("title is-4","Delete Prototype").build(n),s.p("","Do you want to delete the '".concat(t.app.name,"' prototype?")).build(n),a=s.div("MatcButtonBar").build(n),o=s.a("MatcButton MatcButtonDanger",t.getNLS("btn.delete")).build(a),r=s.a("MatcLinkButton",t.getNLS("btn.cancel")).build(a),c=new l.Z,c.own((0,d.Z)(o,h.Z.press,u.Z.hitch(t,"deleteApp",c))),c.own((0,d.Z)(r,h.Z.press,u.Z.hitch(c,"close"))),c.popup(n,t.$refs.deleteBtn);case 11:case"end":return e.stop()}}),e)})))()},deleteApp:function(t){var e=this;return(0,o.Z)((0,i.Z)().mark((function s(){return(0,i.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,C.Z.getModelService().deleteApp(e.app);case 2:t.close(),location.href="#/apps/my-apps.html";case 4:case"end":return s.stop()}}),s)})))()},resetShare:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C.Z.getModelService().resetTeam(t.app.id);case 2:location.reload();case 3:case"end":return e.stop()}}),e)})))()},setAppName:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C.Z.getModelService().updateAppProps(t.app.id,{id:t.app.id,name:t.app.name});case 2:s=e.sent,"ok"===s.status?t.showSuccess("Name was saved..."):t.showError("Oooppps, Could not change the name. Try again!");case 4:case"end":return e.stop()}}),e)})))()}},watch:{$route:function(){this.load()}},mounted:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.logger=new r.Z("SettingsTab"),t.logger.info("mounted","exit");case 2:case"end":return e.stop()}}),e)})))()}},hs=us,ps=(0,S.Z)(hs,Oe,ze,!1,null,null,null),ms=ps.exports,vs=s(66548),gs={name:"Overview",mixins:[c.Z],data:function(){return{loading:!0,tab:"design",appID:"",app:{name:"loading..."},testSettings:{},events:[],sessionAnnotations:[],invitations:[],hash:"",appLoaded:!1,restLoaded:!1,user:{},modelService:C.Z.getModelService()}},components:{ScreenList:y,TestTab:at,AnalyticsTab:Yt,VideoTab:Ve,SettingsTab:ms,Team:ds,HeatTab:ye,Comment:J},computed:{isPublic:function(){return this.$route.meta&&this.$route.meta.isPublic},urlPrefix:function(){return this.isPublic?"examples":"apps"}},methods:{scrollTop:function(){window.scrollTo(0,0)},reloadEvents:function(){this.logger.log(-1,"reloadEvents","enter > "),this.loadEvents()},onSettingsChange:function(t){this.logger.info("onSettingsChange","enter > ",t)},onTestChange:function(t){this.logger.info("onTestChange","enter > ",t),this.testSettings=t},onAnnotationChange:function(t){this.logger.info("onAnnotationChange","enter > ",t)},loadApp:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.$route.params.id,e.prev=1,!s){e.next=11;break}return e.next=5,t.modelService.findApp(s);case 5:t.app=e.sent,t.appLoaded=!0,t.loadRest(),t.loadEvents(),e.next=13;break;case 11:t.logger.error("loadApp","No id "),t.logger.sendError(new Error);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](1),t.logger.error("loadApp","Some error"),t.logger.sendError(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))()},loadEvents:function(){var t=this,e=this.$route.params.id;try{this.modelService.findEvents(e).then((function(e){t.events=e,t.loading=!1,t.logger.log(-1,"loadEvents","Found "+e.length+" events"),t.checkEventCount()}))}catch(s){this.logger.error("loadEvents","Some error"),this.logger.sendError(s)}},checkEventCount:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var s,n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isPublic){e.next=2;break}return e.abrupt("return");case 2:if(s=t.events.filter((function(t){return"SessionStart"===t.type})),t.logger.log(-1,"checkEventCount","Check "+t.app.sessionCount+" ?= "+s.length),t.app.sessionCount===s.length||!t.app||!t.app.id){e.next=9;break}return e.next=7,t.modelService.updateAppProps(t.app.id,{id:t.app.id,sessionCount:s.length});case 7:n=e.sent,"ok"!==n.status&&(t.logger.error("checkEventCount","Could not update"),t.logger.sendError(new Error));case 9:case"end":return e.stop()}}),e)})))()},loadRest:function(){var t=this,e=this.$route.params.id;Promise.all([this.modelService.findTest(e),this.modelService.findSessionAnnotations(e),this.modelService.findInvitation(e)]).then((function(e){t.testSettings=e[0],t.sessionAnnotations=e[1],t.restLoaded=!0,t.invitations=e[2];var s={};for(var n in t.invitations)s[t.invitations[n]]=n;t.hash=s[1]})).catch((function(e){t.logger.error("loadRest","Some error"),t.logger.sendError(e)}))},showShareDialog:function(){var t=new p.Z,e=t.div("MatcDialog MatcInfitationDialog MatcInfitationDialogLarge MatcPadding").build(),s=t.div("container").build(e),n=t.div("row").build(s),a=t.div("col-md-12").build(n);t.h3("",this.getNLS("share.Headline")).build(a);var i=this.$new(vs.Z);i.placeAt(a),i.setInvitation(this.hash),i.setPublic(this.isPublic),n=t.div("row MatcMarginTop").build(s),a=t.div("col-md-12 MatcButtonBar").build(n);var o=t.div("MatcButton","Close").build(a),r=new l.Z;r.own((0,d.Z)(o,h.Z.press,u.Z.hitch(r,"close"))),r.popup(e,this.$refs.shareButton)},initRoute:function(){this.logger.info("initRoute","enter",this.$route.params.tab),this.$route.params.tab?this.tab=this.$route.params.tab:this.$route.params.session&&(this.tab="video"),this.scrollTop()},onWindowFocus:function(){this.logger.log(-1,"onWindowFocus","enter > "),this.loadEvents()},initFocusListener:function(){var t=this;this.logger.log(1,"initFocusListener","enter > "),this._focusListner=function(){t.onWindowFocus()},window.addEventListener("focus",this._focusListner)}},watch:{$route:function(){this.logger.info("watch","route"),this.initRoute()}},mounted:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.logger=new r.Z("Overview"),t.appID=t.$route.params.id,e.next=4,C.Z.getUserService().load();case 4:t.user=e.sent,t.modelService=C.Z.getModelService(t.$route),t.loadApp(),t.initRoute(),t.initFocusListener(),t.logger.info("mounted","exit > ");case 10:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.logger.log(-1,"beforeDestroy","enter > "),window.removeEventListener("focus",this._focusListner),delete this._focusListner}},fs=gs,bs=(0,S.Z)(fs,n,a,!1,null,null,null),ws=bs.exports},74475:function(t,e,s){var n=s(82109),a=s(14230),i=s(43429);n({target:"String",proto:!0,forced:i("big")},{big:function(){return a(this,"big","","")}})},37268:function(t,e,s){var n=s(82109),a=s(14230),i=s(43429);n({target:"String",proto:!0,forced:i("small")},{small:function(){return a(this,"small","","")}})}}]);
//# sourceMappingURL=apps-legacy.4a3940c3.js.map